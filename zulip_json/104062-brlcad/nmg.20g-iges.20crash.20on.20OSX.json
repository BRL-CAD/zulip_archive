[
    {
        "content": "<p>The following regression test is crashing on OSX.  Running it in Linux valgrind I can see an issue, but so far I'm not having much luck making heads or tails out of it...</p>\n<div class=\"codehilite\"><pre><span></span><code>valgrind ../../bin/g-iges -f -o iges.m35.r516.iges iges.m35.g r516\n==2827298== Memcheck, a memory error detector\n==2827298== Copyright (C) 2002-2017, and GNU GPL&#39;d, by Julian Seward et al.\n==2827298== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info\n==2827298== Command: ../../bin/g-iges -f -o iges.m35.r516.iges iges.m35.g r516\n==2827298==\nBRL-CAD Release 7.32.1  BRL-CAD to IGES Translator\n    Fri, 05 Feb 2021 15:36:57 UTC, Compilation 3\n    cyapp@ubuntu2019\nPlease direct bug reports to &lt;bugs@brlcad.org&gt;\n\n {s516} - {s517}\n {(s516 - s517)} - {s512}\nr516\n==2827298== Invalid read of size 4\n==2827298==    at 0x48DD8FB: db_free_tree (db_tree.c:1357)\n==2827298==    by 0x10D3E6: do_nmg_region_end (g-iges.c:647)\n==2827298==    by 0x48DF875: _db_walk_dispatcher (db_tree.c:2016)\n==2827298==    by 0x53D61E2: bu_parallel (parallel.c:574)\n==2827298==    by 0x48E02FD: db_walk_tree (db_tree.c:2199)\n==2827298==    by 0x10C312: main (g-iges.c:343)\n==2827298==  Address 0x8a6a3d0 is 0 bytes inside a block of size 72 free&#39;d\n==2827298==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==2827298==    by 0x53B209C: bu_free (malloc.c:220)\n==2827298==    by 0x4F15A78: nmg_free (alloc.cpp:102)\n==2827298==    by 0x4FC31E3: nmg_kr (mk.c:1619)\n==2827298==    by 0x10D29A: do_nmg_region_end (g-iges.c:617)\n==2827298==    by 0x48DF875: _db_walk_dispatcher (db_tree.c:2016)\n==2827298==    by 0x53D61E2: bu_parallel (parallel.c:574)\n==2827298==    by 0x48E02FD: db_walk_tree (db_tree.c:2199)\n==2827298==    by 0x10C312: main (g-iges.c:343)\n==2827298==  Block was alloc&#39;d at\n==2827298==    at 0x483E0F0: memalign (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==2827298==    by 0x483E212: posix_memalign (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)\n==2827298==    by 0x53B1E02: alloc (malloc.c:137)\n==2827298==    by 0x53B1F53: bu_calloc (malloc.c:174)\n==2827298==    by 0x4F15820: nmg_calloc (alloc.cpp:58)\n==2827298==    by 0x4FBB117: nmg_mrsv (mk.c:311)\n==2827298==    by 0x4920D20: rt_arb_tess (arb8.c:1522)\n==2827298==    by 0x4AE3A87: nmg_booltree_leaf_tess (nmg.c:4522)\n==2827298==    by 0x48DCEB3: db_recurse (db_tree.c:1170)\n==2827298==    by 0x48DBC31: _db_recurse_subtree (db_tree.c:925)\n==2827298==    by 0x48DBF1F: _db_recurse_subtree (db_tree.c:956)\n==2827298==    by 0x48DBF1F: _db_recurse_subtree (db_tree.c:956)\n==2827298==\nWrote the following numbers and type of entities:\n    27 - Line\n    11 - Point\n    11 - Direction\n    1 - Manifold Boundary Representation\n    11 - Plane Surface\n    1 - Attribute Table Definition\n    1 - Property Entity\n    1 - Attribute Table Instance\n    1 - Vertex List\n    1 - Edge List\n    11 - Loop\n    11 - Face\n    1 - Shell\nTotal of 89 entities written\nTried 1 regions, 1 converted to nmg&#39;s successfully.  100%\n</code></pre></div>",
        "id": 225318725,
        "sender_full_name": "starseeker",
        "timestamp": 1612541409
    },
    {
        "content": "<p>My best guess is the subsequent db_free_tree call is doing a redundant nmg_kr...</p>",
        "id": 225320493,
        "sender_full_name": "starseeker",
        "timestamp": 1612542130
    }
]