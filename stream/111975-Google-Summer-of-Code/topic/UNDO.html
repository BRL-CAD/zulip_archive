<html>
<head><meta charset="utf-8"><title>UNDO · Google Summer of Code · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/index.html">Google Summer of Code</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html">UNDO</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="239318456"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239318456" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239318456">(May 18 2021 at 20:13)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="102902">@Sean</span> , I'm delighted that I've been selected for GSoC'21 under BRL-CAD and look forward to start work as soon as possible.<br>
I will setup my blog on the org's website soon.<br>
Please do brief me on anything else I should do</p>



<a name="239319468"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239319468" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239319468">(May 18 2021 at 20:21)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="353338">@Vikram Atreya</span> !  You beat me to it, but yes!  I'm also delighted we were able to select you fro GSoC21 and am looking forward to this amazing undo system you'll get going for us. :)</p>



<a name="239319683"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239319683" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239319683">(May 18 2021 at 20:22)</a>:</h4>
<p>I think you have a good handle on things already.  You'll want to have a public space (blog, wiki, etc) where you can document your development progress for others.  There is a checklist that you'll want to go through, though I know you've already done 2/3rds of it.</p>



<a name="239319873"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239319873" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239319873">(May 18 2021 at 20:24)</a>:</h4>
<p>You'll also want to convert your proposal into a project plan by posting it somewhere public (e.g., our wiki) where we can refine on objectives and to simply keep a record when the project is long over with.</p>



<a name="239320221"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239320221" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239320221">(May 18 2021 at 20:26)</a>:</h4>
<p>Sure, will be doing these tomorrow.</p>



<a name="239322073"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239322073" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239322073">(May 18 2021 at 20:39)</a>:</h4>
<p>Just a doubt, so from now on will development take place on github, like opening PRs, etc? or we are still continuing with svn?</p>



<a name="239370757"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239370757" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Rossberg <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239370757">(May 19 2021 at 06:09)</a>:</h4>
<p>Development takes place on Github. I recommend to fork the BRL-CAD repository to your own account and use this as your working base and for discussions with the mentors. Depending on the state of your work, parts of your work can be shifted back to the main repository via pull request.</p>



<a name="239458666"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239458666" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239458666">(May 19 2021 at 16:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/239319873">said</a>:</p>
<blockquote>
<p>You'll also want to convert your proposal into a project plan by posting it somewhere public (e.g., our wiki) where we can refine on objectives and to simply keep a record when the project is long over with.</p>
</blockquote>
<p>I have created the pages for dev logs and project plan, though the content hasn't been filed yet<br>
Dev logs -  <a href="https://brlcad.org/wiki/User:Vikram_Atreya/GSoC21/Log">https://brlcad.org/wiki/User:Vikram_Atreya/GSoC21/Log</a><br>
Project plan - <a href="https://brlcad.org/wiki/User:Vikram_Atreya/GSoC21/Project">https://brlcad.org/wiki/User:Vikram_Atreya/GSoC21/Project</a></p>



<a name="239459058"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239459058" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239459058">(May 19 2021 at 16:52)</a>:</h4>
<p>On the communication schedule, I'm planning on putting updates here every 2-3 days and updating the blog every week.</p>



<a name="239703447"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239703447" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239703447">(May 21 2021 at 06:39)</a>:</h4>
<p>Updated the project plan in the above link, please do take a look</p>



<a name="239897312"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239897312" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239897312">(May 22 2021 at 20:14)</a>:</h4>
<p>Time taken for following in libgit2 method: (haven't divided by CLOCK_CYCLES)<br>
Intialize repo: 4,524,677<br>
open db and make object: 193,198<br>
commit: 4,446,718<br>
delete: 81<br>
Revert back to prev commit: 4,450,182</p>
<p>Time taken for following in partial :<br>
Open and add: 193,797<br>
Kill and add recovery object: 187,787<br>
Recover: 195,973</p>
<p>These times are for a single hairball</p>



<a name="239897318"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239897318" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239897318">(May 22 2021 at 20:14)</a>:</h4>
<p>Just a recap of where I had left work</p>



<a name="239897369"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239897369" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239897369">(May 22 2021 at 20:15)</a>:</h4>
<p>So the libgit2 method was taking too much time than expected, when compared to the partial+events method</p>



<a name="239897426"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/239897426" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#239897426">(May 22 2021 at 20:16)</a>:</h4>
<p>To continue from here, I will review the libgit2 code once again for any redundancy or extra code that is getting executed</p>



<a name="240136188"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/240136188" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#240136188">(May 25 2021 at 02:31)</a>:</h4>
<p>Thanks for the numbers <span class="user-mention" data-user-id="353338">@Vikram Atreya</span> !  I got to assume you're using some sort of microsecond timer?  Is that a bu_gettime() tick count?</p>



<a name="240136372"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/240136372" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#240136372">(May 25 2021 at 02:35)</a>:</h4>
<p>If so, the calculation is simply divide by 1M to get seconds, so I have to imagine that's not ticks per microsecond.. otherwise that'd be about 0.2s to undo with partial and 4.4s with git... and those numbers seem wildly high.  I would maybe believe 0.02 and 0.4s though.</p>



<a name="240136485"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/240136485" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#240136485">(May 25 2021 at 02:37)</a>:</h4>
<p>Ah, I bet that's it.  I see one of the timers on Windows is 10k ticks per millisecond, i.e., divide by 10M, which would be 0.02 and 0.4s respectively</p>



<a name="240159025"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/240159025" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#240159025">(May 25 2021 at 08:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/240136188">said</a>:</p>
<blockquote>
<p>Thanks for the numbers <span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> !  I got to assume you're using some sort of microsecond timer?  Is that a bu_gettime() tick count?</p>
</blockquote>
<p>I got those values using the clock() function in C++</p>



<a name="240159167"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/240159167" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#240159167">(May 25 2021 at 08:55)</a>:</h4>
<p>So if we divide the values by 10^6, we get the values in seconds</p>



<a name="240369098"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/240369098" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#240369098">(May 26 2021 at 18:28)</a>:</h4>
<p>So I just tested initializing a git repo normally, using git init and it barely took a sec (0.7 sec)</p>



<a name="240369222"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/240369222" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#240369222">(May 26 2021 at 18:29)</a>:</h4>
<p>So I feel I have some redundant/inefficient  code in my 'basic undo using VCS' file</p>



<a name="240369342"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/240369342" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#240369342">(May 26 2021 at 18:30)</a>:</h4>
<p>Havent really analyzed in much depth, so will work on it now</p>



<a name="240457200"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/240457200" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#240457200">(May 27 2021 at 12:15)</a>:</h4>
<p>gardening :) (paying off tech debt? housekeeping?)</p>



<a name="240825286"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/240825286" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#240825286">(May 31 2021 at 12:07)</a>:</h4>
<p>I have rigorously reviewed my code and have made a few changes, the time still remains the same at 13 sec to initialize the repo.</p>



<a name="240825290"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/240825290" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#240825290">(May 31 2021 at 12:08)</a>:</h4>
<p>Next, I tried initializing a git repo with hairball.g using terminal, and (git init + git add + git commit) took 12.5 sec</p>



<a name="240825360"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/240825360" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#240825360">(May 31 2021 at 12:08)</a>:</h4>
<p>Does this make the libgit2 method unviable?</p>



<a name="241318361"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241318361" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241318361">(Jun 02 2021 at 20:52)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> Could you guide me on what could be my next step so that we are better informed, for selecting the libgit2 method or the partial method?</p>



<a name="241345796"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241345796" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241345796">(Jun 03 2021 at 03:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/240825360">said</a>:</p>
<blockquote>
<p>Does this make the libgit2 method unviable?</p>
</blockquote>
<p>I think it means we don't start with it, yes.</p>



<a name="241346092"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241346092" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241346092">(Jun 03 2021 at 03:57)</a>:</h4>
<p>Go with the partial method and we'll just press forward with optimizing it.  Maybe we'll learn some other general way to capture state information later on (or use libgit2 as a fallback method later).</p>



<a name="241346154"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241346154" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241346154">(Jun 03 2021 at 03:58)</a>:</h4>
<p>Can you make your latest test code for the two methods available somewhere?  Would like to look it over in more detail.</p>



<a name="241346172"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241346172" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241346172">(Jun 03 2021 at 03:59)</a>:</h4>
<p>Sure, will upload it as a continuation in the PR I had created</p>



<a name="241346245"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241346245" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241346245">(Jun 03 2021 at 04:00)</a>:</h4>
<p>will do in 10 min</p>



<a name="241346532"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241346532" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241346532">(Jun 03 2021 at 04:07)</a>:</h4>
<p>Updated the PR <br>
<a href="https://sourceforge.net/p/brlcad/patches/569/">https://sourceforge.net/p/brlcad/patches/569/</a></p>



<a name="241347661"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241347661" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241347661">(Jun 03 2021 at 04:37)</a>:</h4>
<p>Cool, yeah, just saw the update, great!</p>



<a name="241458454"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241458454" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241458454">(Jun 03 2021 at 21:34)</a>:</h4>
<p>I have parallelly started the implementation of the undo command to mged, first goal is to make it print something<br>
Will try to finish this by tomorrow</p>



<a name="241490698"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241490698" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241490698">(Jun 04 2021 at 04:42)</a>:</h4>
<p>Done, typing undo in mged prints the title of the database for now. Should I create a PR for this?</p>



<a name="241491611"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241491611" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241491611">(Jun 04 2021 at 05:03)</a>:</h4>
<p><span class="user-mention" data-user-id="353338">@Vikram Atreya</span> Yes, please do!</p>



<a name="241492118"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241492118" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241492118">(Jun 04 2021 at 05:13)</a>:</h4>
<p>Created the patch -- <a href="https://sourceforge.net/p/brlcad/patches/570/">https://sourceforge.net/p/brlcad/patches/570/</a></p>



<a name="241492916"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241492916" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241492916">(Jun 04 2021 at 05:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/GSoC.20ideas/near/232214136">said</a>:</p>
<blockquote>
<p>With partial, you're basically storing (partial) state as commands are run so we have whatever information is required to restore the previous state. The most simple form of this is to keep a copy of any objects that are changed or deleted. Since we can undo objects added bquoteply deleting them, we don't need to do anything special other than keep track of them.</p>
<p>Note that there's LOTS of ways to implement this sort of undo. For example, here's a really simple setup where (for example) we decide to store our backups in the same .g file using a simple numeric suffix that denotes what change. For example, db.g might have in it: objA objB objC objA;1 objA;2 objA;3 objB;2 objC;4</p>
<p>The current state is three objects: objA objB objC</p>
<p>The most recent change was some edit to objC. When the change was made to objC, we save the previous state is in objC;4 .. so undoing the command is a simple to replace objC with objC;4</p>
<p>The next undo restores objA to a previous state (via objA;3).</p>
<p>The one after that was a simultaneous change to objA and objB, so we restore both from objA;2 and objB;2 </p>
</blockquote>
<p>Our last discussion on the partial method</p>



<a name="241493244"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241493244" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241493244">(Jun 04 2021 at 05:39)</a>:</h4>
<p>The logic to implementing this could be, we store objX;n as you had suggested, then depending on no of undos asked for, we go back to that n and start moving backward to see the latest version of each object until we have verified the latest version of each object<br>
This solves the problem where:<br>
First we make a change to A<br>
Then again change something in A <br>
Make a change in B<br>
Make a change in C<br>
Make a change in A<br>
If we want go back 2 steps, we first see objB;3 next we traverse back and find objA;2 which is the latest version of A before step 3<br>
We still keep going to back to find C but after we see all changes if we do not find it , we delete it (This deletion could be a problem if we had a fixed number of undos stored so we dont find C which could be present earlier and thus deleted, but can be solved easily)</p>



<a name="241579037"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241579037" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241579037">(Jun 04 2021 at 18:59)</a>:</h4>
<p>I want to create a stack that can be accessed and modified when any command is called, then is it a must that the stack be a part of gedp?<br>
If not are there any such variables/data strucs that have the same functionality already in the code, so that I can draw parallels when writing code for undo</p>



<a name="241616163"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241616163" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241616163">(Jun 05 2021 at 04:52)</a>:</h4>
<p>Some design points I have in mind:</p>
<ul>
<li>Facilitate 10-15 undos from the latest state</li>
<li>Initially no redo command and later states are deleted once undo is used</li>
<li>Works only on objects and not on other data stored</li>
</ul>



<a name="241656197"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241656197" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241656197">(Jun 05 2021 at 21:04)</a>:</h4>
<p>Continuing on the design decisions ......</p>
<ul>
<li>Plain undo with no flags does just 1 undo</li>
<li><code> -n  X</code> flag does multiple undos, where X is no of undos to be done</li>
</ul>



<a name="241726158"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241726158" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241726158">(Jun 07 2021 at 04:01)</a>:</h4>
<p>I was going through the code of <code>cmd_ged_plain_wrapper</code> in cmd.c, I could not understand what <code>GEDP</code> is, it wasnt even there as a macro in the Doxygen documentation</p>



<a name="241726667"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241726667" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241726667">(Jun 07 2021 at 04:13)</a>:</h4>
<p>Its the gedp of the database that is open, right? but still dint get how it is defined</p>



<a name="241731380"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241731380" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241731380">(Jun 07 2021 at 05:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/241579037">said</a>:</p>
<blockquote>
<p>I want to create a stack that can be accessed and modified when any command is called, then is it a must that the stack be a part of gedp?<br>
If not are there any such variables/data strucs that have the same functionality already in the code, so that I can draw parallels when writing code for undo</p>
</blockquote>
<p><span class="user-mention" data-user-id="102902">@Sean</span> any help on this, even an int should be sufficient so that I can store at how many steps we have backed up objects, which will be used to create names for the next backup</p>



<a name="241920052"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241920052" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241920052">(Jun 08 2021 at 13:36)</a>:</h4>
<p>GEDP is a struct ged, src/mged/mged[ch]</p>



<a name="241958678"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/241958678" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#241958678">(Jun 08 2021 at 17:44)</a>:</h4>
<p>Updated <a href="https://brlcad.org/wiki/User:Vikram_Atreya/GSoC21/Log">log</a> and ideas for implementation in <a href="https://bit.ly/3cupRfs">project plan</a></p>



<a name="242013560"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242013560" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242013560">(Jun 09 2021 at 03:14)</a>:</h4>
<p><span class="user-mention" data-user-id="353338">@Vikram Atreya</span> do you mean some field in struct ged that you can use for tracking version information??</p>



<a name="242013918"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242013918" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242013918">(Jun 09 2021 at 03:22)</a>:</h4>
<p>There is no such field in the struct (nor should their be).  Taking a step back, I see you have lots of great thought put into this and lots of questions.</p>



<a name="242014026"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014026" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014026">(Jun 09 2021 at 03:25)</a>:</h4>
<p>I think you're biting off a little too much all at once.  You got a plan but it's fully of lots of risk and unknowns for you.  You don't have any experience working with objects or gedp's yet.  This is a hard project, so let's keep this as simple as absolutely possible and build up an undo capability a little bit at a time.</p>



<a name="242014204"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014204" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014204">(Jun 09 2021 at 03:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242013560">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> do you mean some field in struct ged that you can use for tracking version information??</p>
</blockquote>
<p>I wanted to have a tracking variable but did not know where to initialize it.<br>
Yeah I know gedp doesn't have one right now, so was asking if changes in gedp would be required for that or there was some other way</p>



<a name="242014309"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014309" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014309">(Jun 09 2021 at 03:30)</a>:</h4>
<p>For example, put a pause on worrying about undoing N times.  Pause the thoughts on redo.</p>



<a name="242014333"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014333" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014333">(Jun 09 2021 at 03:31)</a>:</h4>
<p>Heck, even forget about any possible command.  Let's focus on undoing 1 thing.</p>



<a name="242014434"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014434" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014434">(Jun 09 2021 at 03:34)</a>:</h4>
<p>There are nominally three choices then for where you can start.  On an object database like our .g file, everything boils down to being one of three things:  adding an object, removing an object, changing an object.</p>



<a name="242014480"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014480" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014480">(Jun 09 2021 at 03:34)</a>:</h4>
<p>Pick one of those three.</p>



<a name="242014509"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014509" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014509">(Jun 09 2021 at 03:35)</a>:</h4>
<p>So the task would be just to add an object and then undo it?</p>



<a name="242014548"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014548" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014548">(Jun 09 2021 at 03:36)</a>:</h4>
<p>if you picked "adding an object", then yes</p>



<a name="242014559"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014559" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014559">(Jun 09 2021 at 03:36)</a>:</h4>
<p>is that what you pick?</p>



<a name="242014562"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014562" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014562">(Jun 09 2021 at 03:36)</a>:</h4>
<p>Are you talking in terms of adding any object and then undoing it or a hardcoded example?</p>



<a name="242014583"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014583" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014583">(Jun 09 2021 at 03:37)</a>:</h4>
<p>adding an object using any command, I meant</p>



<a name="242014639"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014639" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014639">(Jun 09 2021 at 03:38)</a>:</h4>
<p>I'm talking about thinking of this problem is incredibly oversimplified terms so you will be able to focus on as little code complexity as possible.  That focus can initially be on any of those three basic possibilities.</p>



<a name="242014660"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014660" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014660">(Jun 09 2021 at 03:38)</a>:</h4>
<p>So, adding an object.  Again, simplify, so we're not going to worry JUST yet on any command.  Let's focus on just one command that adds an object.</p>



<a name="242014681"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014681" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014681">(Jun 09 2021 at 03:39)</a>:</h4>
<p>I feel this has already been covered in the patch I had created for hardcoded undo example.</p>



<a name="242014695"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014695" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014695">(Jun 09 2021 at 03:39)</a>:</h4>
<p>I was exactly doing this</p>



<a name="242014702"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014702" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014702">(Jun 09 2021 at 03:39)</a>:</h4>
<p>Sort of, right</p>



<a name="242014743"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014743" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014743">(Jun 09 2021 at 03:40)</a>:</h4>
<p>Adding an object , making a backup , killing it and then readding it back</p>



<a name="242014745"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014745" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014745">(Jun 09 2021 at 03:40)</a>:</h4>
<p>this is about the machinery needed to do it for real in mged</p>



<a name="242014758"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014758" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014758">(Jun 09 2021 at 03:40)</a>:</h4>
<p>so conceptually, you know the librt structures involved</p>



<a name="242014767"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014767" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014767">(Jun 09 2021 at 03:40)</a>:</h4>
<p>Wont be using the ged_make() here as well to add the object?</p>



<a name="242014781"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014781" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014781">(Jun 09 2021 at 03:41)</a>:</h4>
<p>Directly, no -- indirectly, yes.</p>



<a name="242014790"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014790" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014790">(Jun 09 2021 at 03:41)</a>:</h4>
<p>In your example, the demo had complete knowledge.</p>



<a name="242014831"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014831" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014831">(Jun 09 2021 at 03:42)</a>:</h4>
<p>In mged, where's that knowledge going to live?</p>



<a name="242014844"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014844" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014844">(Jun 09 2021 at 03:42)</a>:</h4>
<p>does it belong in the .g, in the ged struct, in a librt structure, in an mged structure? what are the tradeoffs?</p>



<a name="242014850"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014850" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014850">(Jun 09 2021 at 03:42)</a>:</h4>
<p>they're all options.</p>



<a name="242014861"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014861" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014861">(Jun 09 2021 at 03:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242014831">said</a>:</p>
<blockquote>
<p>In mged, where's that knowledge going to live?</p>
</blockquote>
<p>This was exactly my ques regarding the tracking variable :)</p>



<a name="242014894"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014894" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014894">(Jun 09 2021 at 03:44)</a>:</h4>
<p>so what I meant about indirect and direct, the 'make' command will be issued on the mged command line.  that of course will indirectly and eventually invoke ged_make()</p>



<a name="242014969"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242014969" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242014969">(Jun 09 2021 at 03:45)</a>:</h4>
<p>so the immediate tasks becomes implementing an "undo" command in libed, so it's available as an mged command, that undoes a 'make' command.</p>



<a name="242015038"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015038" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015038">(Jun 09 2021 at 03:46)</a>:</h4>
<p>so you can literally perform this sequence, right?</p>
<p>mged&gt; make sph sph<br>
mged&gt; ls sph<br>
mged&gt; undo<br>
mged&gt; ls sph<br>
--&gt; sph not found</p>



<a name="242015050"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015050" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015050">(Jun 09 2021 at 03:47)</a>:</h4>
<p>Yeah</p>



<a name="242015128"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015128" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015128">(Jun 09 2021 at 03:48)</a>:</h4>
<p>So that simple sequence begs a lot of <em>potential</em> complexity right away, but it's important to keep this simple view in perspective for now before jumping to a conclusion.</p>



<a name="242015233"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015233" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015233">(Jun 09 2021 at 03:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242014844">said</a>:</p>
<blockquote>
<p>does it belong in the .g, in the ged struct, in a librt structure, in an mged structure? what are the tradeoffs?</p>
</blockquote>
<p>Figuring this out will be an intermediate task right?<br>
Is there any such data, maybe used in another command, stored in any of these so I have some idea on how to implement it for undo</p>



<a name="242015234"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015234" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015234">(Jun 09 2021 at 03:50)</a>:</h4>
<p>That's because there are loads of implications that are really complicated to explain, many that we won't even begin to remember until you've coded down a particular path and it becomes really hard to change it, or complexity gets added prematurely.  For example, adding a field to ged struct... that is already making an assumption that only struct ged-using applications will be able to undo actions (not an entirely unreasonable assumption, but has implications).</p>



<a name="242015303"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015303" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015303">(Jun 09 2021 at 03:52)</a>:</h4>
<p>There really isn't a good pattern for you to follow here in our code base.  There are dozens of related patterns on how to pass data around and I'd argue most of them create strong interface couplings and awareness that won't scale well for the needs of an undo system.</p>



<a name="242015328"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015328" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015328">(Jun 09 2021 at 03:53)</a>:</h4>
<p>Consider this, archer has an undo system implemented (it was disabled 10+ years ago, but it exists/existed)... it existed before libged existed.</p>



<a name="242015388"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015388" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015388">(Jun 09 2021 at 03:54)</a>:</h4>
<p>So if all you had to do was implement undo of make commands, what kind of simple solutions come to mind?</p>



<a name="242015426"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015426" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015426">(Jun 09 2021 at 03:55)</a>:</h4>
<p>If I could store a state previous to the make, I will know what new elements got added after the make and then kill it</p>



<a name="242015478"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015478" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015478">(Jun 09 2021 at 03:56)</a>:</h4>
<p>or atleast names of all objects in a previous state</p>



<a name="242015492"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015492" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015492">(Jun 09 2021 at 03:56)</a>:</h4>
<p>Answer should be "it depends" ;)</p>



<a name="242015499"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015499" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015499">(Jun 09 2021 at 03:57)</a>:</h4>
<p>For example, there's a huge difference between running undo right after running make and running make, restarting mged, and then running undo.</p>



<a name="242015513"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015513" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015513">(Jun 09 2021 at 03:57)</a>:</h4>
<p>Are we not limiting ourselves to undo in a particular mged session?</p>



<a name="242015515"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015515" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015515">(Jun 09 2021 at 03:57)</a>:</h4>
<p>basically, whether that's a requirement determines whether the undo state has to be serialized to disk or only exists for the life of the app</p>



<a name="242015562"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015562" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015562">(Jun 09 2021 at 03:58)</a>:</h4>
<p>Yes</p>



<a name="242015573"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015573" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015573">(Jun 09 2021 at 03:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242015513">said</a>:</p>
<blockquote>
<p>Are we not limiting ourselves to undo in a particular mged session?</p>
</blockquote>
<p>So exactly -- that's a great question and its answer begs for different solution directions.</p>



<a name="242015595"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015595" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015595">(Jun 09 2021 at 03:59)</a>:</h4>
<p>I don't recall having decided that one way or the other, but feel free to correct me on that.  I think either is a reasonable assumption for starters.</p>



<a name="242015662"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015662" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015662">(Jun 09 2021 at 04:00)</a>:</h4>
<p>We discussed limiting to a particular mged session when we thought we would go ahead with the libgit2 approach</p>



<a name="242015692"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015692" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015692">(Jun 09 2021 at 04:01)</a>:</h4>
<p>Which is funny if true, because the libgit2 approach is intrinsically serialized to disk, which is a means for preserving across processes/sessions</p>



<a name="242015738"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015738" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015738">(Jun 09 2021 at 04:02)</a>:</h4>
<p>But sure, let's limit it to a single memory session.  So in a given mged session, you get to rely on memory OR disk to store state information.  Memory is faster, thus it's reasonable to start there.</p>



<a name="242015818"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015818" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015818">(Jun 09 2021 at 04:04)</a>:</h4>
<p>So that brings us back to somehow recording that a database addition has happened in some way that an undo command can be made aware of it.</p>



<a name="242015922"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015922" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015922">(Jun 09 2021 at 04:07)</a>:</h4>
<p>Knowing our API, if that were all undo ever had to do, I would probably leverage disk serialization to get cross-process undo for free just because the code to do so would be so incredibly uninvasive.  The simplest maintainable solution that comes to my mind would be to have the libged wrapper or parent exec function stash the name of the last 'make' object in the _GLOBAL object.</p>



<a name="242015956"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242015956" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242015956">(Jun 09 2021 at 04:07)</a>:</h4>
<p>That way, make doesn't have to be modified, and undo command is not coupled to the make command in any way.  It's coupled to the libged executor.</p>



<a name="242016036"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016036" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016036">(Jun 09 2021 at 04:09)</a>:</h4>
<p>the _GLOBAL object is a simple set of key=value pairs, so it'd be very economical to just write a "last_make=object" attribute in there, then undo would read it, delete object, and delete the last_make attribute.</p>



<a name="242016037"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016037" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016037">(Jun 09 2021 at 04:09)</a>:</h4>
<p>But isnt it better to modify the make command itself? that way even if ged_make were called some other place it would still store the name of the added object<br>
P.S. Is ged_make() exactly equal to make command from mged?</p>



<a name="242016039"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016039" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016039">(Jun 09 2021 at 04:09)</a>:</h4>
<p>make sense?</p>



<a name="242016106"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016106" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016106">(Jun 09 2021 at 04:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242016039">said</a>:</p>
<blockquote>
<p>make sense?</p>
</blockquote>
<p>the method does, but why write the code in a wrapper or parent exec func?<br>
Why not have a new function in make.c and call it within ged_make_core()</p>



<a name="242016361"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016361" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016361">(Jun 09 2021 at 04:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242016037">said</a>:</p>
<blockquote>
<p>But isnt it better to modify the make command itself? that way even if ged_make were called some other place it would still store the name of the added object</p>
</blockquote>
<p>Maybe yes, maybe no.  That's my caution about unintended side effects. </p>
<p>Say there's some other "deep_copy" command you don't yet know about that traverses the database N times and calls ged_make()+ged_rename() repeatedly as part of its implementation.  If the undo is coupled to some logic in ged_make() then maybe that make  "deep_copy" completely unusable (too slow).  Also,  "undo" very unhelpfully just undoes the last make or perhaps it even fails (crashes?) because in this case every make was followed with a rename.</p>



<a name="242016431"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016431" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016431">(Jun 09 2021 at 04:18)</a>:</h4>
<blockquote>
<p>P.S. Is ged_make() exactly equal to make from command from ged?</p>
</blockquote>
<p>In most cases, yes -- the commands are presently using a convention of ged_[CMD] where CMD is an mged and/or archer command.  There are a handful of commands that don't fit the pattern or that have additional logic provided by a common wrapper layer, but I see those abberations as things to fix.</p>



<a name="242016503"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016503" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016503">(Jun 09 2021 at 04:20)</a>:</h4>
<p>but the wrapper is only called from mged cmds right?</p>



<a name="242016512"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016512" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016512">(Jun 09 2021 at 04:20)</a>:</h4>
<p>So while I would use the _GLOBAL, an alternative would be as you suggest -- we could make ged_make() store its action some where.   But then we might have to next implement logic like a flag or a switch or a field in a struct to suppress that behavior where it's undesirable.</p>



<a name="242016602"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016602" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016602">(Jun 09 2021 at 04:22)</a>:</h4>
<p>Moreover, while we are considering this simple case, we're not blind to the 400 other commands that need to come next.  Is editing 400 commands the best we can do for a generalized single-step undo?  Probably not... and it probably also implies that we don't want to implement fields or flags that are specific to the make command.  Remember there are a couple dozen commands that "add objects"</p>



<a name="242016620"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016620" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016620">(Jun 09 2021 at 04:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242016503">said</a>:</p>
<blockquote>
<p>but the wrapper is only called from mged cmds right?</p>
</blockquote>
<p>I'm not sure I understand this question... but no, the wrapper is not called from mged cmds.</p>



<a name="242016676"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016676" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016676">(Jun 09 2021 at 04:24)</a>:</h4>
<p>the wrapper is called by mged's libged executor, which calls the given ged_[CMD]() that was registered with it</p>



<a name="242016689"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016689" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016689">(Jun 09 2021 at 04:25)</a>:</h4>
<p>My ques is like this:<br>
If I type make obj1 obj2 in mged:<br>
calls are: wrapper -&gt; ged_make<br>
but if i were directly calling ged_make() within the code of some other cmd lets say<br>
Then the wrapper attached to make is skipped?</p>



<a name="242016711"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016711" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016711">(Jun 09 2021 at 04:26)</a>:</h4>
<p>it entirely depends on the cmd, but yeah it could skip the wrapper.  90% of commands use a generic wrapper that just calls the ged_CMD</p>



<a name="242016765"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016765" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016765">(Jun 09 2021 at 04:26)</a>:</h4>
<p>Okay.</p>



<a name="242016766"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016766" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016766">(Jun 09 2021 at 04:26)</a>:</h4>
<p>the purpose of the wrappers has little really to do with libged</p>



<a name="242016851"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016851" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016851">(Jun 09 2021 at 04:28)</a>:</h4>
<p>some commands have different wrappers depending on what they do, like if a command creates geometry (make is a great example), then the wrapper might automatically get the plot data for the object(s) made and draw them into the graphics window so you actually see the object after making it.</p>



<a name="242016886"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016886" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016886">(Jun 09 2021 at 04:29)</a>:</h4>
<p>Yes, I had gone through the wrappers of a few functions to understand their logic</p>



<a name="242016888"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016888" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016888">(Jun 09 2021 at 04:29)</a>:</h4>
<p>If you ran a different command like 'ls', you don't want a wrapper that wastes time trying to figure out if it needs to draw/undraw objects.  the wrapper doesn't need to do anything, so it just calls ged_list() instead</p>



<a name="242016964"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016964" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016964">(Jun 09 2021 at 04:30)</a>:</h4>
<p>So the wrappers in general make for a lousy storage mechanism for undo because they're not part of the .g and not part of librt or libged, so undo would only work in mged.  We definitely want undo to work in mged and archer.</p>



<a name="242016990"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242016990" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242016990">(Jun 09 2021 at 04:31)</a>:</h4>
<p>which results in a choice of duplicating wrapper logic for archer (a bad sign), or finding a different/better way.</p>



<a name="242017042"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017042" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017042">(Jun 09 2021 at 04:32)</a>:</h4>
<p>the simplest in-memory place to store the 'last_make' object name is probably struct ged, which is probably now catching up to why you were looking there</p>



<a name="242017059"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017059" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017059">(Jun 09 2021 at 04:33)</a>:</h4>
<p>except we don't want undo to be coupled to a specific command still, right?  that doesn't scale to 400 commands</p>



<a name="242017063"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017063" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017063">(Jun 09 2021 at 04:33)</a>:</h4>
<p>True</p>



<a name="242017064"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017064" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017064">(Jun 09 2021 at 04:33)</a>:</h4>
<p>we could decide to couple it to the three database operations (add, remove, change)</p>



<a name="242017081"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017081" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017081">(Jun 09 2021 at 04:33)</a>:</h4>
<p>but that also feels brittle, begs for a lot of machinery because most commands are sequenced combinations of those</p>



<a name="242017130"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017130" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017130">(Jun 09 2021 at 04:34)</a>:</h4>
<p>I had another idea planned in mind, which would require a full checkpoint at the oldest command and would not require any additional data to be stored other than the backup objects</p>



<a name="242017153"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017153" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017153">(Jun 09 2021 at 04:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242017042">said</a>:</p>
<blockquote>
<p>the simplest in-memory place to store the 'last_make' object name is probably struct ged, which is probably now catching up to why you were looking there</p>
</blockquote>
<p>and even here instead of having last_make, if we can store names of all objects present at a particular state, it would make the job much easier</p>



<a name="242017207"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017207" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017207">(Jun 09 2021 at 04:36)</a>:</h4>
<p>that's essentially what libgit2 is doing</p>



<a name="242017209"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017209" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017209">(Jun 09 2021 at 04:36)</a>:</h4>
<p>and why it takes so long :)</p>



<a name="242017239"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017239" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017239">(Jun 09 2021 at 04:37)</a>:</h4>
<p>Pretty much yes <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="242017305"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017305" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017305">(Jun 09 2021 at 04:38)</a>:</h4>
<p>so you might be able to come up with a streamlined higher-performing version of that, but we should design with an assumption that .g files can have 10^5 individual objects as that is about the norm for real geometry.</p>



<a name="242017328"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017328" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017328">(Jun 09 2021 at 04:39)</a>:</h4>
<p>about the norm as an upper limit that is, 10^4 is typical along with database sizes in the 100M to 10G range</p>



<a name="242017379"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017379" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017379">(Jun 09 2021 at 04:40)</a>:</h4>
<p>I think this could work as git was storing a full checkpoint in the beginning and could do a large no of undos, if we restrict ourselves to a smallno like 10-15 it should work fast enough</p>



<a name="242017382"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017382" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017382">(Jun 09 2021 at 04:40)</a>:</h4>
<p>don't care much about how usable this is on a .g file with 10 objects if it scales so poorly when there are 10000 objects that mged is no longer interactive for example</p>



<a name="242017405"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017405" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017405">(Jun 09 2021 at 04:40)</a>:</h4>
<p>In all your research getting started, how far did you get?  Did you learn about the command pattern, memento pattern, and/or undo chains?</p>



<a name="242017477"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017477" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017477">(Jun 09 2021 at 04:42)</a>:</h4>
<p>I did go through the idea of how things were implemented in command and memento pattern but hadnt seen any code</p>



<a name="242017486"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017486" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017486">(Jun 09 2021 at 04:42)</a>:</h4>
<p>If you've not read it yet, here's a good read that might take a half hour or hour and it even pertains to geometric edits: <a href="http://blog.wolfire.com/2009/02/how-we-implement-undo/">http://blog.wolfire.com/2009/02/how-we-implement-undo/</a></p>



<a name="242017502"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017502" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017502">(Jun 09 2021 at 04:43)</a>:</h4>
<p>Will go through it for sure</p>



<a name="242017598"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017598" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017598">(Jun 09 2021 at 04:45)</a>:</h4>
<p>So my immediate task will be to write code in the wrapper to undo make commands storing last_make in _GLOBAl</p>



<a name="242017662"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017662" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017662">(Jun 09 2021 at 04:46)</a>:</h4>
<p>Well you certainly can and there would be absolutely nothing wrong with starting there.  It is obvious that that storage mechanism doesn't scale to other commands, so how to decouple it?</p>



<a name="242017730"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017730" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017730">(Jun 09 2021 at 04:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242017153">said</a>:</p>
<blockquote>
<p>and even here instead of having last_make, if we can store names of all objects present at a particular state, it would make the job much easier</p>
</blockquote>
<p>This is one possibility</p>



<a name="242017749"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017749" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017749">(Jun 09 2021 at 04:48)</a>:</h4>
<p>True, but does that scale?  Probably not...</p>



<a name="242017775"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017775" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017775">(Jun 09 2021 at 04:49)</a>:</h4>
<p>It's also obvious that the storage mechanism will undoubtedly need to change, even probably go away entirely as storing strings in _GLOBAL doesn't seem like that scales too, but the limit doesn't exist until we expand scope to considering undoing lots of additions.</p>



<a name="242017830"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017830" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017830">(Jun 09 2021 at 04:50)</a>:</h4>
<p>Think about the name I proposed, and perhaps there's a name less coupled to "make"?</p>



<a name="242017853"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017853" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017853">(Jun 09 2021 at 04:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242017830">said</a>:</p>
<blockquote>
<p>Think about the name I proposed, and perhaps there's a name less coupled to "make"?</p>
</blockquote>
<p>name?? U meant method?</p>



<a name="242017898"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017898" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017898">(Jun 09 2021 at 04:52)</a>:</h4>
<p>You are referring to last_make?</p>



<a name="242017903"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017903" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017903">(Jun 09 2021 at 04:52)</a>:</h4>
<p>yes</p>



<a name="242017904"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017904" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017904">(Jun 09 2021 at 04:52)</a>:</h4>
<p>last_make</p>



<a name="242017911"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017911" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017911">(Jun 09 2021 at 04:52)</a>:</h4>
<p>that's a coupling to the make command</p>



<a name="242017913"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017913" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017913">(Jun 09 2021 at 04:52)</a>:</h4>
<p>Got it</p>



<a name="242017925"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017925" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017925">(Jun 09 2021 at 04:52)</a>:</h4>
<p>instead of a "last_make" key=value attribute, decoupled we might instead chose to name it "last_added" ... that makes it not coupled and conceptually could extend to two more keys for removed and changed, right?</p>



<a name="242017939"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242017939" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242017939">(Jun 09 2021 at 04:53)</a>:</h4>
<p>Yeah</p>



<a name="242018018"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018018" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018018">(Jun 09 2021 at 04:54)</a>:</h4>
<p>We might also want to know the latest change among the three later on</p>



<a name="242018020"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018020" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018020">(Jun 09 2021 at 04:54)</a>:</h4>
<p>so the only problem is the fact that we're serializing this junk to disk instead of just keeping it in memory, but I suggest you start there anyways since that will result in an actually functioning undo command we can play with and poke on</p>



<a name="242018026"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018026" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018026">(Jun 09 2021 at 04:54)</a>:</h4>
<p>and  you still have to decide where to inject the attribute</p>



<a name="242018030"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018030" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018030">(Jun 09 2021 at 04:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242018018">said</a>:</p>
<blockquote>
<p>We might also want to know the latest change among the three later on</p>
</blockquote>
<p>BINGO!!</p>



<a name="242018127"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018127" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018127">(Jun 09 2021 at 04:57)</a>:</h4>
<p>an evolution might be a latest change, or it might be to combine them together so there's not three attributes which implies a list (and if there's a list, then it can be a stack and the latest will be on the top, right?)</p>



<a name="242018134"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018134" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018134">(Jun 09 2021 at 04:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242018026">said</a>:</p>
<blockquote>
<p>and  you still have to decide where to inject the attribute</p>
</blockquote>
<p>Does _GLOBAL have a type? like arb8,sph?</p>



<a name="242018179"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018179" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018179">(Jun 09 2021 at 04:58)</a>:</h4>
<p>yes, all objects have a major and minor type</p>



<a name="242018183"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018183" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018183">(Jun 09 2021 at 04:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242018127">said</a>:</p>
<blockquote>
<p>an evolution might be a latest change, or it might be to combine them together so there's not three attributes which implies a list (and if there's a list, then it can be a stack and the latest will be on the top, right?)</p>
</blockquote>
<p>This was exactly the reason i was asking about the stack in my msg about changing gedp</p>



<a name="242018186"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018186" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018186">(Jun 09 2021 at 04:58)</a>:</h4>
<p>_GLOBAL is a non-geometric object type</p>



<a name="242018189"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018189" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018189">(Jun 09 2021 at 04:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/241579037">said</a>:</p>
<blockquote>
<p>I want to create a stack that can be accessed and modified when any command is called, then is it a must that the stack be a part of gedp?<br>
If not are there any such variables/data strucs that have the same functionality already in the code, so that I can draw parallels when writing code for undo</p>
</blockquote>
<p>.</p>



<a name="242018204"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018204" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018204">(Jun 09 2021 at 04:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242018183">said</a>:</p>
<blockquote>
<p>This was exactly the reason i was asking about the stack in my msg about changing gedp</p>
</blockquote>
<p>Yes, I realize this, but the answer is super complicated and couplings will be VERY easy to introduce if you jump into the deep end.</p>



<a name="242018208"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018208" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018208">(Jun 09 2021 at 04:59)</a>:</h4>
<p>I know this feels like baby steps... there's a reason, I promise. ;)</p>



<a name="242018296"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018296" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018296">(Jun 09 2021 at 05:01)</a>:</h4>
<p>Not suggesting I know the answer ahead of time either -- we very well may end up needing to modify the ged pointer (that's what the 'p' in gedp stands for), but we might not too</p>



<a name="242018351"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018351" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018351">(Jun 09 2021 at 05:02)</a>:</h4>
<p>Sure, I will work on the basic changes today and get back to you at EoD (for me, might be start for you)</p>



<a name="242018352"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018352" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018352">(Jun 09 2021 at 05:02)</a>:</h4>
<p>since we're going the partial route, there's a lot of competing concerns like getting as much command coverage as possible without doing per-command work.</p>



<a name="242018371"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018371" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018371">(Jun 09 2021 at 05:03)</a>:</h4>
<p>when you finish up undo of make, expand your implementation to the inverse -- a command that deletes an object (e.g., kill)</p>



<a name="242018388"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018388" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018388">(Jun 09 2021 at 05:03)</a>:</h4>
<p>Okay</p>



<a name="242018431"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018431" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018431">(Jun 09 2021 at 05:04)</a>:</h4>
<p>then expand to another command that makes objects (e.g., cp) ...</p>



<a name="242018450"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018450" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018450">(Jun 09 2021 at 05:04)</a>:</h4>
<p>each time, revisit your couplings to see what work you had to do to accommodate the change.  See if there's a way to eliminate that work.</p>



<a name="242018479"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018479" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018479">(Jun 09 2021 at 05:05)</a>:</h4>
<p>Sure, will do</p>



<a name="242018481"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018481" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018481">(Jun 09 2021 at 05:05)</a>:</h4>
<p>but again, incrementally so we have a chain of commits we can look at to see where directions shift</p>



<a name="242018489"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018489" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018489">(Jun 09 2021 at 05:05)</a>:</h4>
<p>where a coupling gets introduced.</p>



<a name="242018563"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018563" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018563">(Jun 09 2021 at 05:07)</a>:</h4>
<p>and when you feel like you've got that all working, well talk again -- the next command or change type will dictate new requirements.</p>



<a name="242018585"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018585" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018585">(Jun 09 2021 at 05:07)</a>:</h4>
<p>I mean we'll talk before then too, but we'll definitely need a status check after you've got examples of adding, removing, and changing working.</p>



<a name="242018638"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018638" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018638">(Jun 09 2021 at 05:09)</a>:</h4>
<p>and make sure the "undo" command is robust.  undo without having run make.. what happens?  undo  with object names after it, what does that mean? etc.</p>



<a name="242018649"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018649" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018649">(Jun 09 2021 at 05:09)</a>:</h4>
<p>what makes it throw an error</p>



<a name="242018650"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018650" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018650">(Jun 09 2021 at 05:09)</a>:</h4>
<p>Okay</p>



<a name="242018652"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018652" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018652">(Jun 09 2021 at 05:09)</a>:</h4>
<p>what makes it output anything really</p>



<a name="242018739"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018739" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018739">(Jun 09 2021 at 05:11)</a>:</h4>
<p>same thing for return codes.</p>



<a name="242018872"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018872" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018872">(Jun 09 2021 at 05:14)</a>:</h4>
<p>Will surely consider all these cases when I write the code</p>



<a name="242018893"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242018893" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242018893">(Jun 09 2021 at 05:15)</a>:</h4>
<p>for example,</p>
<p>mged&gt; make sph sph<br>
mged&gt; undo<br>
mged &gt; undo</p>
<p>... does that second undo result in anything printed?  does it result in a non-zero return code?  a zero return code? </p>
<p>undo will need to be somewhat well-defined (i.e., documented) as you go along. you'll eventually want to write up a simple manual page for it, maybe unit tests too.  All things you can tackle when you're needing a break from ged structures and gdb debugging. ;)</p>



<a name="242132474"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242132474" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242132474">(Jun 09 2021 at 21:22)</a>:</h4>
<p>I have implemented the last_make variable addition in f_make, ged_make's wrapper <br>
Next, when undo is called it is searching for last_make's value in  _GLOBAL and then killing that object using ged_kill()</p>



<a name="242132749"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242132749" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242132749">(Jun 09 2021 at 21:25)</a>:</h4>
<p>Should I create a new PR or update the last PR or not required?</p>



<a name="242132867"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242132867" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242132867">(Jun 09 2021 at 21:26)</a>:</h4>
<p>Killing the object sounds wildly wrong.. :)</p>



<a name="242132907"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242132907" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242132907">(Jun 09 2021 at 21:26)</a>:</h4>
<p>_GLOBAL holds other information like the title, working units, and potentially other information</p>



<a name="242132944"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242132944" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242132944">(Jun 09 2021 at 21:26)</a>:</h4>
<p>Code is still not robust, have a working version as of now<br>
Will make it more robust and clean tomorrow before making a PR</p>



<a name="242132993"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242132993" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242132993">(Jun 09 2021 at 21:27)</a>:</h4>
<p>It's an attribute object, so you just want to wipe out that specific attribute that was added.</p>



<a name="242133025"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242133025" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242133025">(Jun 09 2021 at 21:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242132867">said</a>:</p>
<blockquote>
<p>Killing the object sounds wildly wrong.. :)</p>
</blockquote>
<p>Was using ged_kill(), so typed it in that flow</p>



<a name="242133053"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242133053" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242133053">(Jun 09 2021 at 21:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242132993">said</a>:</p>
<blockquote>
<p>It's an attribute object, so you just want to wipe out that specific attribute that was added.</p>
</blockquote>
<p>Im not killing _GLOBAL <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="242133083"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242133083" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242133083">(Jun 09 2021 at 21:27)</a>:</h4>
<p>Then how else are you using ged_kill??</p>



<a name="242133123"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242133123" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242133123">(Jun 09 2021 at 21:28)</a>:</h4>
<p>Im deleting the object that has the value stored in last_make</p>



<a name="242133173"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242133173" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242133173">(Jun 09 2021 at 21:28)</a>:</h4>
<p>Oooh, gotya</p>



<a name="242133182"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242133182" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242133182">(Jun 09 2021 at 21:28)</a>:</h4>
<p>Pseudo code:<br>
ged_kill(gedp, last_make-&gt;value)</p>



<a name="242133254"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242133254" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242133254">(Jun 09 2021 at 21:29)</a>:</h4>
<p>sounds good</p>



<a name="242133394"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242133394" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242133394">(Jun 09 2021 at 21:30)</a>:</h4>
<p>will want to make sure that's robust to last_make-&gt;value being null or not existing or whatever else that can happen</p>



<a name="242133487"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242133487" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242133487">(Jun 09 2021 at 21:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242133394">said</a>:</p>
<blockquote>
<p>will want to make sure that's robust to last_make-&gt;value being null or not existing or whatever else that can happen</p>
</blockquote>
<p>Yes, I have not dealt with this yet. I will look into this tomorrow.</p>



<a name="242134057"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242134057" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242134057">(Jun 09 2021 at 21:36)</a>:</h4>
<p>Along with the robustness changes, I'll try to implement the last_kill and latest_change (among make and kill ) tomorrow.</p>



<a name="242161516"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242161516" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242161516">(Jun 10 2021 at 05:36)</a>:</h4>
<ul>
<li>Plan to recover killed object:</li>
<li>During kill call:<ul>
<li>Make a copy of object getting deleted with a standard suffix attached and hides it</li>
<li>Kill object</li>
</ul>
</li>
<li>During undo call:<ul>
<li>Identifies last object deleted</li>
<li>Searches for hidden object with the suffix</li>
<li>brings it back using move command</li>
</ul>
</li>
</ul>



<a name="242221974"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242221974" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242221974">(Jun 10 2021 at 15:07)</a>:</h4>
<p>Done implementing above logic along with latest_change <br>
Now we can make or kill object and then undo that change</p>



<a name="242222418"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242222418" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242222418">(Jun 10 2021 at 15:09)</a>:</h4>
<p>I have made the code more robust as well, but not entirely. Will try to wrap this up today and then create a PR before EoD</p>



<a name="242262820"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242262820" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242262820">(Jun 10 2021 at 20:05)</a>:</h4>
<p>Done</p>



<a name="242262823"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242262823" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242262823">(Jun 10 2021 at 20:05)</a>:</h4>
<p>Errors being handling:</p>
<ul>
<li>GLOBAL object missing</li>
<li>no undo info stored in different cases</li>
<li>Common ones, like attributes not being set, wrong input, etc</li>
</ul>



<a name="242263860"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242263860" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242263860">(Jun 10 2021 at 20:12)</a>:</h4>
<p>Few bugs I can see right now:</p>
<ul>
<li>kill throws an error when flags are used, since I took argv[1] to be name of the file which is not true when flags are specified</li>
<li>It is not possible to reduce no of objects once added, since backups will keep on being created even if you plan to delete the backup. Infinite loop.</li>
<li>Attributes are not removed in few cases. <br>
eg: <br>
make obj1 sph<br>
make obj2 sph<br>
kill obj2 sph<br>
undo</li>
</ul>
<p>last_change and last_kill are removed but last_make is left, I have intentionally not solved this, since it is not ideal to delete previous info when we work on multiple undos.</p>



<a name="242267652"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242267652" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242267652">(Jun 10 2021 at 20:40)</a>:</h4>
<p>Updated PR and <a href="https://brlcad.org/wiki/User:Vikram_Atreya/GSoC21/Log">logs</a></p>



<a name="242267798"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242267798" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242267798">(Jun 10 2021 at 20:41)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> next task would be deal with a command that affects a lot of objects?<br>
or implementing a stack like philosophy into GLOBAL itself, where the change is marked by which no of command it has been generated by<br>
and then while undoing we check for the highest number and then take action on that</p>



<a name="242298326"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298326" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298326">(Jun 11 2021 at 03:50)</a>:</h4>
<p><span class="user-mention" data-user-id="353338">@Vikram Atreya</span> outstanding progress there... </p>
<p>so since you moved on to killing does that mean undo of make is robust?</p>



<a name="242298333"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298333" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298333">(Jun 11 2021 at 03:51)</a>:</h4>
<p>Yes afaik</p>



<a name="242298347"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298347" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298347">(Jun 11 2021 at 03:51)</a>:</h4>
<p>part of the point of the oversimplification is to find and fix all the little corner cases and bugs because it's likely only going to get more complicated as requirement is expanded to other commands.</p>



<a name="242298355"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298355" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298355">(Jun 11 2021 at 03:52)</a>:</h4>
<p>cool, so what's it do if you make, rename, then undo?</p>



<a name="242298412"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298412" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298412">(Jun 11 2021 at 03:53)</a>:</h4>
<p>It wont find the object to kill, so assumes its already killed and removes the last_make and latest_change as of now</p>



<a name="242298421"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298421" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298421">(Jun 11 2021 at 03:53)</a>:</h4>
<p>silently or does it print a message?</p>



<a name="242298489"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298489" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298489">(Jun 11 2021 at 03:54)</a>:</h4>
<p>it's fine either way, just subtle implications with both, so good to know</p>



<a name="242298491"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298491" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298491">(Jun 11 2021 at 03:54)</a>:</h4>
<p>I hadnt explicitly tested this, I'll test this right now, just a min</p>



<a name="242298528"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298528" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298528">(Jun 11 2021 at 03:55)</a>:</h4>
<p>It says db_lookup() failed</p>



<a name="242298536"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298536" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298536">(Jun 11 2021 at 03:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242267798">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> next task would be deal with a command that affects a lot of objects?<br>
or implementing a stack like philosophy into GLOBAL itself, where the change is marked by which no of command it has been generated by<br>
and then while undoing we check for the highest number and then take action on that</p>
</blockquote>
<p>Nope, the next task is to figure out how to refactor the changes you had to make into a command-agnostic form.</p>



<a name="242298590"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298590" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298590">(Jun 11 2021 at 03:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242298528">said</a>:</p>
<blockquote>
<p>It says db_lookup() failed</p>
</blockquote>
<p>Okay, that's a lower-level blather.  I suggest turning that off as it's misleading to a user</p>



<a name="242298593"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298593" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298593">(Jun 11 2021 at 03:56)</a>:</h4>
<p>there's a quiet flag on lookup</p>



<a name="242298598"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298598" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298598">(Jun 11 2021 at 03:56)</a>:</h4>
<p>Yes, Ill change that</p>



<a name="242298621"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298621" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298621">(Jun 11 2021 at 03:57)</a>:</h4>
<p>So next step, I suggest expanding last_make to include objects made with the 'in' command.</p>



<a name="242298687"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298687" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298687">(Jun 11 2021 at 03:58)</a>:</h4>
<p>That's the main primitive creation command that can create nearly any entity interactively.</p>



<a name="242298704"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298704" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298704">(Jun 11 2021 at 03:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242298687">said</a>:</p>
<blockquote>
<p>That's the main primitive creation command that can create nearly any entity interactively.</p>
</blockquote>
<p>Just looked it up in the docs</p>



<a name="242298719"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298719" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298719">(Jun 11 2021 at 03:59)</a>:</h4>
<p>If you just type a few parameters like "in foo sph"  it will prompt you for the rest.<br>
Once completed, you can press up-arrow to see what that command looks like as a 1-liner.</p>



<a name="242298804"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298804" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298804">(Jun 11 2021 at 04:00)</a>:</h4>
<p>regardless, the trick is to issue an 'in' and then be able to undo the object</p>



<a name="242298828"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298828" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298828">(Jun 11 2021 at 04:00)</a>:</h4>
<p>when you get that working, that will be a very important time to reflect on what code changed and how you can then restructure things better so logic isn't duplicated.</p>



<a name="242298945"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242298945" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242298945">(Jun 11 2021 at 04:02)</a>:</h4>
<p>then try doing the same for a more complex command like killall that kills and modifies</p>



<a name="242299058"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299058" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299058">(Jun 11 2021 at 04:04)</a>:</h4>
<p>I had one more doubt, is it ok to treat folders as normal objects when backing up?</p>



<a name="242299088"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299088" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299088">(Jun 11 2021 at 04:05)</a>:</h4>
<p>so for 'make' and 'in' ... look at what files you edited.  the logic will likely be nearly or actually identical.  think about what could change so you only have the actual undo logic in exactly one file.  where could that be, or what needs to change so that it could be in just one place.  Is there a place currently where it could go where undo continues to work in archer also?  lots to think about, there are lots of options here.  this should take you a couple days to explore.</p>



<a name="242299092"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299092" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299092">(Jun 11 2021 at 04:05)</a>:</h4>
<p>and even when recovering, will there be any issue of not giving the right references</p>



<a name="242299099"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299099" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299099">(Jun 11 2021 at 04:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242299058">said</a>:</p>
<blockquote>
<p>I had one more doubt, is it ok to treat folders as normal objects when backing up?</p>
</blockquote>
<p>er, what the heck is a folder?</p>



<a name="242299165"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299165" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299165">(Jun 11 2021 at 04:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242299099">said</a>:</p>
<blockquote>
<p>er, what the heck is a folder?</p>
</blockquote>
<p>Maybe its called a directory</p>



<a name="242299169"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299169" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299169">(Jun 11 2021 at 04:07)</a>:</h4>
<p>Let me send a picture</p>



<a name="242299212"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299212" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299212">(Jun 11 2021 at 04:08)</a>:</h4>
<p>folders live on the filesystem and are effectively logical groupings of files on the filesystem, typically organized into a hierarchical structure...</p>



<a name="242299264"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299264" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299264">(Jun 11 2021 at 04:08)</a>:</h4>
<p>directory is a generic concept and could mean lots of things.  there is a notion of a directory in a .g file, but I'm not sure that's what you're referring to when you say directory...</p>



<a name="242299266"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299266" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299266">(Jun 11 2021 at 04:08)</a>:</h4>
<p><a href="/user_uploads/1549/CUlleyVhw1UkN7eoWtUfb709/image.png">image.png</a> <br>
So scene.g was what i meant as a folder, whereas head_tip.s is an object</p>
<div class="message_inline_image"><a href="/user_uploads/1549/CUlleyVhw1UkN7eoWtUfb709/image.png" title="image.png"><img src="/user_uploads/1549/CUlleyVhw1UkN7eoWtUfb709/image.png"></a></div>



<a name="242299280"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299280" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299280">(Jun 11 2021 at 04:09)</a>:</h4>
<p>Okay, great!  So despite the misleading icon... :)</p>
<p>Every word you see listed there is an object.</p>



<a name="242299343"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299343" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299343">(Jun 11 2021 at 04:10)</a>:</h4>
<p>bishop.r is an object</p>



<a name="242299357"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299357" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299357">(Jun 11 2021 at 04:11)</a>:</h4>
<p>bishop.c is a different object</p>



<a name="242299371"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299371" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299371">(Jun 11 2021 at 04:11)</a>:</h4>
<p>headtor.s is yet another object... probably a torus primitive</p>



<a name="242299433"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299433" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299433">(Jun 11 2021 at 04:13)</a>:</h4>
<p>the others are called "combination objects" as they are objects defined by combining other objects with CSG Boolean operations</p>



<a name="242299492"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299492" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299492">(Jun 11 2021 at 04:14)</a>:</h4>
<p>Okay</p>



<a name="242299503"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299503" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299503">(Jun 11 2021 at 04:15)</a>:</h4>
<p>So there is no issue in directly dealing with these .r or .c then</p>



<a name="242299570"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299570" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299570">(Jun 11 2021 at 04:16)</a>:</h4>
<p>I always thought, even when writing the concat code that i wasn't making it robust for these "folders"</p>



<a name="242299646"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299646" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299646">(Jun 11 2021 at 04:18)</a>:</h4>
<p>from the perspective of a .g file, they are all individual objects that can be directly acted upon</p>



<a name="242299649"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299649" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299649">(Jun 11 2021 at 04:18)</a>:</h4>
<p>there are certainly implications, otherwise they would not exist</p>



<a name="242299677"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299677" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299677">(Jun 11 2021 at 04:19)</a>:</h4>
<p>but they are just objects.  it's only because week peek into the objects and find that some objects reference other objects, and when you pay attention to the references, it becomes obvious that the objects form a hierarchy</p>



<a name="242299736"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299736" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299736">(Jun 11 2021 at 04:20)</a>:</h4>
<p>I suggest reading a few things before proceeding, and perhaps doing one of the tutorials that introduces the concept -- it's an important one for what you're going to be doing with undo</p>



<a name="242299757"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299757" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299757">(Jun 11 2021 at 04:20)</a>:</h4>
<p>maybe start with <a href="https://brlcad.org/w/images/5/52/MGED_Quick_Reference_Card.pdf">https://brlcad.org/w/images/5/52/MGED_Quick_Reference_Card.pdf</a> , look at the second page where it says CAD and explains the three main types of geometric objects</p>



<a name="242299823"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299823" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299823">(Jun 11 2021 at 04:22)</a>:</h4>
<p>Got it</p>



<a name="242299833"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299833" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299833">(Jun 11 2021 at 04:23)</a>:</h4>
<p>then I'd suggest either doing a few of the tutorials at <a href="https://brlcad.org/wiki/Documentation">https://brlcad.org/wiki/Documentation</a> under #2 "Introduction to MGED" or reading a lot of  #3 "Principles of Effective Modeling" (espeically page 14, but read other parts too)</p>



<a name="242299886"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242299886" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242299886">(Jun 11 2021 at 04:24)</a>:</h4>
<p>the tutorials take like 20 minutes each but incrementally introduce concepts.</p>



<a name="242300010"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242300010" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242300010">(Jun 11 2021 at 04:26)</a>:</h4>
<p>But so yeah, then when you get back to code -- see what kill and undo do when you kill something in the hierarchy.  make sure you learn the "tops" and "ls" and "l" commands, understand what they do.  they have individual manual pages, but use those three to explore your .g instead of using the geometry browser.</p>



<a name="242300019"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242300019" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242300019">(Jun 11 2021 at 04:27)</a>:</h4>
<p>got to run, but that should be a lot of homework for a while ;)</p>



<a name="242300029"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242300029" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242300029">(Jun 11 2021 at 04:27)</a>:</h4>
<p>keep up the awesome work!</p>



<a name="242300032"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242300032" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242300032">(Jun 11 2021 at 04:27)</a>:</h4>
<p>Thank you, yes I'll get to work on these tasks</p>



<a name="242424648"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242424648" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242424648">(Jun 12 2021 at 03:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242298828">said</a>:</p>
<blockquote>
<p>when you get that working, that will be a very important time to reflect on what code changed and how you can then restructure things better so logic isn't duplicated.</p>
</blockquote>
<p>I have implemented the logic for the "in" command, it took me a few seconds to implement since all I had to do was a copy-paste from make's wrapper to in's wrapper.</p>



<a name="242427237"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242427237" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242427237">(Jun 12 2021 at 04:43)</a>:</h4>
<p>I have gone through quite a few tutorials in the Introduction to MGED doc, will explore further using a database, and then start work on killall</p>



<a name="242520482"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242520482" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242520482">(Jun 13 2021 at 17:05)</a>:</h4>
<p>To reverse a killall is it a good idea to store the parent comb object as backup? My guess is no,but I just wanted to ask</p>



<a name="242523149"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242523149" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242523149">(Jun 13 2021 at 18:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242299266">said</a>:</p>
<blockquote>
<p><a href="/user_uploads/1549/CUlleyVhw1UkN7eoWtUfb709/image.png">image.png</a> <br>
So scene.g was what i meant as a folder, whereas head_tip.s is an object</p>
</blockquote>
<p>In this file when I kill, not killall, head.c and then open the geometry browser I get:<br>
<code> db_lookup() failed: head.c does not exist</code> four times<br>
Is this expected? I have removed any code that I might have added but this error still persists</p>



<a name="242548526"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242548526" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242548526">(Jun 14 2021 at 03:51)</a>:</h4>
<p><span class="user-mention" data-user-id="353338">@Vikram Atreya</span> this is almost certainly a consequence of not doing enough tutorials to understand the hierarchical structure and implications...   You probably killed head.c but left a lot of references to it in other combinations.  So you'll get an error when looking at any combs that reference it.</p>



<a name="242549089"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242549089" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242549089">(Jun 14 2021 at 04:02)</a>:</h4>
<p>killall may have been too much of a leap .. the reason I mentioned that command next is because it's a kill like you already know plus a set of  object changes.  maybe instead of killall, do a simpler change command first like the 'g' command.  that just affects one object and is easy to reverse.  it either creates or changes an existing object.</p>



<a name="242549182"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242549182" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242549182">(Jun 14 2021 at 04:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242548526">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> this is almost certainly a consequence of not doing enough tutorials to understand the hierarchical structure and implications...   You probably killed head.c but left a lot of references to it in other combinations.  So you'll get an error when looking at any combs that reference it.</p>
</blockquote>
<p>I do understand how regions, combinations work. I was just wondering if that error was generated by me during the backup for undo</p>



<a name="242549224"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242549224" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242549224">(Jun 14 2021 at 04:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242549089">said</a>:</p>
<blockquote>
<p>killall may have been too much of a leap .. the reason I mentioned that command next is because it's a kill like you already know plus a set of  object changes.  maybe instead of killall, do a simpler change command first like the 'g' command.  that just affects one object and is easy to reverse.  it either creates or changes an existing object.</p>
</blockquote>
<p>killall is possible I just need to understand how to do it via commands first, So I've been exploring a lot of commands like copymat and clone but I'm a little confused to where the comb is stored and which commands effectively copy that information as well</p>



<a name="242549263"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242549263" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242549263">(Jun 14 2021 at 04:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242424648">said</a>:</p>
<blockquote>
<p>I have implemented the logic for the "in" command, it took me a few seconds to implement since all I had to do was a copy-paste from make's wrapper to in's wrapper.</p>
</blockquote>
<p>Remember what I wrote ... "so for 'make' and 'in' ... look at what files you edited. the logic will likely be nearly or actually identical. think about what could change so you only have the actual undo logic in exactly one file. where could that be, or what needs to change so that it could be in just one place. Is there a place currently where it could go where undo continues to work in archer also? lots to think about, there are lots of options here. this should take you a couple days to explore."</p>
<p>So yeah, it was a simple copy-and-paste, but now there's two copies of that code.  Refactor it to just one copy.</p>



<a name="242549301"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242549301" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242549301">(Jun 14 2021 at 04:07)</a>:</h4>
<p>Is it a good idea to  create a file in libged/undo with all these functions and they could be called in the wrappers</p>



<a name="242549302"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242549302" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242549302">(Jun 14 2021 at 04:08)</a>:</h4>
<p>Reason for that is that it's a simple copy-and-paste for make and in commands, but there are literally hundreds more and we don't want to do that hundreds of times.  Plus, if we want / need it to change, there will be too many instances that need to be edited.  Also, there are a dozen variations that aren't as simple, but are nearly the same.</p>



<a name="242549397"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242549397" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242549397">(Jun 14 2021 at 04:09)</a>:</h4>
<p>Sure, you could create a new file if you need to.  That's not the hard part... the hard part is figuring out how to change where or how it's called so that it's actually in only one place.</p>



<a name="242549544"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242549544" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242549544">(Jun 14 2021 at 04:11)</a>:</h4>
<p>We may still need to modify all commands, but then we definitely want to do that as few times as possible and not coupled to this particular method.</p>



<a name="242549607"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242549607" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242549607">(Jun 14 2021 at 04:12)</a>:</h4>
<p>What I think we'll end up needing is for commands to either 1) emit events as they do work or 2) perform standard actions through ged wrappers (e.g., for all object creations, deletions, and changes).</p>



<a name="242549791"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242549791" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242549791">(Jun 14 2021 at 04:17)</a>:</h4>
<p>So the combinations are not stored in rt_db_internal, but as a separate DS in ged right?</p>



<a name="242551684"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242551684" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242551684">(Jun 14 2021 at 04:48)</a>:</h4>
<p>So the exact point where Im stuck is recovering the combination tree again. 2 ways I am thinking of are:</p>
<ul>
<li>Store the comb structure (rt_comb_internal) itself and then paste that when recovering</li>
<li>Store the name of the parent of the object as well as the object and replicate the "i" cmd and add it back into the db</li>
</ul>



<a name="242552013"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242552013" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242552013">(Jun 14 2021 at 04:52)</a>:</h4>
<p>But I'm quite unsure how the first method will work</p>



<a name="242552091"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242552091" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242552091">(Jun 14 2021 at 04:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242549791">said</a>:</p>
<blockquote>
<p>So the combinations are not stored in rt_db_internal, but as a separate DS in ged right?</p>
</blockquote>
<p>I'm not understanding this ... combinations are indeed stored in the .g file and have an rt_db_internal representation.</p>



<a name="242552269"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242552269" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242552269">(Jun 14 2021 at 04:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242551684">said</a>:</p>
<blockquote>
<p>So the exact point where Im stuck is recovering the combination tree again. 2 ways I am thinking of are:</p>
<ul>
<li>Store the comb structure (rt_comb_internal) itself and then paste that when recovering</li>
<li>Store the name of the parent of the object as well as the object and replicate the "i" cmd and add it back into the db</li>
</ul>
</blockquote>
<p>Perhaps it would help to not think of it as a tree.  Think of it as sets of objects.  Run "ls" and see all the objects in a database.  Running a command like "killall" is going to remove 1 of those objects you see in ls and possibly edit a bunch of others.  That is all.  Similar with the 'g' command.  It's either going to create an object that was not in the "ls" listing or it's going to edit an existing object.</p>



<a name="242552387"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242552387" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242552387">(Jun 14 2021 at 04:57)</a>:</h4>
<p>To "recover the tree", you have to undo the edits and/or add objects and/or remove objects.  That's pretty true for nearly all commands.</p>



<a name="242552445"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242552445" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242552445">(Jun 14 2021 at 04:58)</a>:</h4>
<p>there are some efficiencies that can be made by introspecing what types of edits, but we can start blindly and assume any edit needs to be backed up.</p>



<a name="242552508"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242552508" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242552508">(Jun 14 2021 at 04:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242552091">said</a>:</p>
<blockquote>
<p>I'm not understanding this ... combinations are indeed stored in the .g file and have an rt_db_internal representation.</p>
</blockquote>
<p>So there are as many rt_comb_internal s as the no of objects in the .g, right?</p>



<a name="242552627"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242552627" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242552627">(Jun 14 2021 at 05:00)</a>:</h4>
<p>usually there are fewer combinations because there are rt_*_internal for other types too like ell, tor, bot, etc</p>



<a name="242552662"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242552662" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242552662">(Jun 14 2021 at 05:01)</a>:</h4>
<p>there are as many rt_comb_internal as there are combination objects .. that is a combination object in its internal form (i.e., its deserialized in-memory form).</p>



<a name="242552836"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242552836" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242552836">(Jun 14 2021 at 05:05)</a>:</h4>
<p>Okay, so when I was going through the code I thought every single object had its own rt_comb_internal, even a non combination object</p>



<a name="242553850"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242553850" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242553850">(Jun 14 2021 at 05:27)</a>:</h4>
<p>they all have an rt_db_internal, maybe you have those two confused?</p>



<a name="242578111"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242578111" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242578111">(Jun 14 2021 at 10:34)</a>:</h4>
<p>Yeah I think I'm a little confused, I will go through the data structures once again</p>



<a name="242684181"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242684181" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242684181">(Jun 15 2021 at 03:37)</a>:</h4>
<p>Now I'm clear. Usual objects which are made using the "make" commands have rt_db_internal and combination objects made using the "c" command have an rt_comb_internal</p>



<a name="242684580"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242684580" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242684580">(Jun 15 2021 at 03:48)</a>:</h4>
<p>To store a backup, first I will have to know which combination has the object, then i can store the combination name in which the object is present and then add back that relation using the "i" command when undo is called</p>



<a name="242684641"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242684641" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242684641">(Jun 15 2021 at 03:48)</a>:</h4>
<p>If I search for the comb separately in the wrapper it will double the time taken to run this command, as this search will be happenning twice when the killall command is called</p>



<a name="242684650"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242684650" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242684650">(Jun 15 2021 at 03:49)</a>:</h4>
<p>Once inside the wrapper and once in the code to delete it</p>



<a name="242684667"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242684667" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242684667">(Jun 15 2021 at 03:49)</a>:</h4>
<p>So will it be okay if I modified the code of killall itself instead of its wrapper (which also affect kill and erase)</p>



<a name="242687375"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242687375" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242687375">(Jun 15 2021 at 04:46)</a>:</h4>
<p>Successfully implemented undo for killall by modifying code in killrefs.c</p>



<a name="242687928"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242687928" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242687928">(Jun 15 2021 at 04:54)</a>:</h4>
<p>I have presently chosen to undo unions only, but will write more code to accommodate -,+ as well</p>



<a name="242742760"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242742760" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242742760">(Jun 15 2021 at 14:41)</a>:</h4>
<p>I have realized that to kill and save backups of combinations and .g objects I will have to write separate code<br>
Right now when Im killing an object, I save a copy of it and hide it.<br>
In case of combinations what happens is the copied object still has the same references as the original object so the children objects never come out of a combination and rather get hidden in the backup</p>



<a name="242795380"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242795380" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242795380">(Jun 15 2021 at 20:33)</a>:</h4>
<p>I have also implemented the undo for the g command</p>



<a name="242795957"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242795957" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242795957">(Jun 15 2021 at 20:37)</a>:</h4>
<p>I tried refactoring common undo code to libged/undo/new_file.cpp but wasn't able to do it. I feel there can be a better place to place the common code which I will work on next.</p>



<a name="242800955"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242800955" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242800955">(Jun 15 2021 at 21:16)</a>:</h4>
<p>Updated <a href="https://brlcad.org/wiki/User:Vikram_Atreya/GSoC21/Log">logs</a>, will refine code tomorrow and update PR</p>



<a name="242917447"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242917447" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242917447">(Jun 16 2021 at 17:52)</a>:</h4>
<p>Refactored make related backup code into mged/utility.c</p>



<a name="242920669"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242920669" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242920669">(Jun 16 2021 at 18:15)</a>:</h4>
<p>Bugs/TODO right now:</p>
<ol>
<li>kill throws an error when flags are used, since I took argv[1] to be the name of the file which is not true when flags are specified</li>
<li>Storing backup for .g objects that are being killed is flawed. Would like to discuss this <span class="user-mention" data-user-id="102902">@Sean</span> </li>
<li>Logic for <code>g</code> undo is exactly the same as make, so when undo is called it kills the g even when the last <code>g</code> command could have been called to just change an existing .g object.</li>
</ol>



<a name="242920856"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242920856" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242920856">(Jun 16 2021 at 18:17)</a>:</h4>
<p>First issue is easy to solve<br>
Second and third logic I feel will be similar  and something new compared to what I have done till now</p>



<a name="242923287"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242923287" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242923287">(Jun 16 2021 at 18:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242800955">said</a>:</p>
<blockquote>
<p>Updated <a href="https://brlcad.org/wiki/User:Vikram_Atreya/GSoC21/Log">logs</a>, will refine code tomorrow and update PR</p>
</blockquote>
<p>Created new patch since it is not a dummy undo now <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="242923377"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/242923377" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#242923377">(Jun 16 2021 at 18:37)</a>:</h4>
<p>Please review the patch <span class="user-mention" data-user-id="102902">@Sean</span> so that I can correct any wrong practices that I might be following in the code</p>



<a name="243064913"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243064913" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243064913">(Jun 17 2021 at 18:45)</a>:</h4>
<p>I have devised a logic to backup .g /.c objects:<br>
When storing a copy of them we change the names of all the nodes that they are pointing to. <br>
For eg,  there exists a <code>group.g</code> with obj1.s , obj2.s and obj3.s in it;<br>
When we store the backup presently the nodes remain the same which means we are never deleting the group but just renaming it, which is undesired<br>
So when we backup we store the group as follows:<br>
<code>group.g_uncommon_suffix</code> <br>
with elements as follows --<br>
obj1.s_uncommon_suffix , <br>
obj2.s_uncommon_suffix and <br>
obj3.s_uncommon_suffix<br>
This fixes the unwanted referencing problem which is present in the direct copy and store method</p>



<a name="243085362"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243085362" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243085362">(Jun 17 2021 at 21:11)</a>:</h4>
<p>Implemeted and tested the above logic. So we can now killall any comb object and recover it without any part of the geometry behaving in any undesired manner <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="243085505"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243085505" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243085505">(Jun 17 2021 at 21:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242920669">said</a>:</p>
<blockquote>
<p>Bugs/TODO right now:</p>
<ol>
<li>kill throws an error when flags are used, since I took argv[1] to be the name of the file which is not true when flags are specified</li>
<li>Storing backup for .g objects that are being killed is flawed. Would like to discuss this <span class="user-mention silent" data-user-id="102902">Sean</span> </li>
<li>Logic for <code>g</code> undo is exactly the same as make, so when undo is called it kills the g even when the last <code>g</code> command could have been called to just change an existing .g object.</li>
</ol>
</blockquote>
<p>I will solve 3. a little later, what should I work on next <span class="user-mention" data-user-id="102902">@Sean</span></p>



<a name="243085988"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243085988" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243085988">(Jun 17 2021 at 21:15)</a>:</h4>
<p>any preference or should I randomly pickup a command?</p>



<a name="243210976"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243210976" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243210976">(Jun 18 2021 at 21:42)</a>:</h4>
<p>Implemented undo for mv and mvall</p>



<a name="243211398"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243211398" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243211398">(Jun 18 2021 at 21:48)</a>:</h4>
<p>Also restructured code in undo.cpp to accommodate more cmds easily</p>



<a name="243267294"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243267294" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243267294">(Jun 19 2021 at 20:23)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  I have a doubt,  So right now undo code goes into the wrapper and for cmds like kill the backup should happen before the command runs, so if the input is wrong (like name of obj is wrong or wrong no args), problems arise. So how do I overcome this problem because bringing the arg checks into the wrapper will eliminate the purpose of wrappers.</p>



<a name="243407476"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243407476" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243407476">(Jun 21 2021 at 16:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242920669">said</a>:</p>
<blockquote>
<p>Bugs/TODO right now:</p>
<ol>
<li>kill throws an error when flags are used, since I took argv[1] to be the name of the file which is not true when flags are specified</li>
<li>Storing backup for .g objects that are being killed is flawed. Would like to discuss this <span class="user-mention silent" data-user-id="102902">Sean</span> </li>
<li>Logic for <code>g</code> undo is exactly the same as make, so when undo is called it kills the g even when the last <code>g</code> command could have been called to just change an existing .g object.</li>
</ol>
</blockquote>
<p>Solved bug 3</p>



<a name="243416138"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243416138" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243416138">(Jun 21 2021 at 17:34)</a>:</h4>
<p>Right now I have not implemented undo for killing multiple objects but while going through all commands available in MGED, I came across this command "keep", this can be very useful to store backups. <br>
So the plan to undo multiple objects being killed is:<br>
Make a backup_file.g<br>
Make a combination cmd_no.g and have all objects that are being killed in that step as its children<br>
Im still unclear about how to recover them/ read from that database and then write it into the present one, will work on it</p>



<a name="243431732"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243431732" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243431732">(Jun 21 2021 at 19:34)</a>:</h4>
<p>I have also made a <a href="https://docs.google.com/spreadsheets/d/12j2jpaKHHt8QG09o1e4NkK0fDoacfRi9AL_Wo0RuDM4/edit?usp=sharing">spreadsheet</a> with all commands for which undo is done, not done, or not required</p>



<a name="243873881"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243873881" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243873881">(Jun 25 2021 at 04:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243431732">said</a>:</p>
<blockquote>
<p>I have also made a <a href="https://docs.google.com/spreadsheets/d/12j2jpaKHHt8QG09o1e4NkK0fDoacfRi9AL_Wo0RuDM4/edit?usp=sharing">spreadsheet</a> with all commands for which undo is done, not done, or not required</p>
</blockquote>
<p>This is awesome!  That's great organization, but I will just note that many of the commands you have marked as not needing undo could have an undo construct (e.g., opendb and all the rt* commands).  They do reversible work or produce outputs that can be "undone".</p>



<a name="243873888"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243873888" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243873888">(Jun 25 2021 at 04:13)</a>:</h4>
<p>I have updated only till k actually, after that it got really boring :p</p>



<a name="243873898"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243873898" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243873898">(Jun 25 2021 at 04:13)</a>:</h4>
<p>the real take-away though is that there are hundreds of commands ... so that really begs a question of whether we can design a solution that doesn't require implementing undo hundreds of times and what might that look like?</p>



<a name="243873901"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243873901" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243873901">(Jun 25 2021 at 04:14)</a>:</h4>
<p>Will fill in the rest today</p>



<a name="243873946"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243873946" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243873946">(Jun 25 2021 at 04:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243873898">said</a>:</p>
<blockquote>
<p>the real take-away though is that there are hundreds of commands ... so that really begs a question of whether we can design a solution that doesn't require implementing undo hundreds of times and what might that look like?</p>
</blockquote>
<p>I think it can be done decently easily if we can get a list of objects that has changed</p>



<a name="243873950"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243873950" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243873950">(Jun 25 2021 at 04:15)</a>:</h4>
<p>or if not feasible to create a universal undo (sans adopting something like libgit) then how can we structure the code so that logic for a command is localized to that command.</p>



<a name="243873960"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243873960" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243873960">(Jun 25 2021 at 04:15)</a>:</h4>
<p>I felt for cmds like dbconcat which are modifying objects without input, that is tough</p>



<a name="243873966"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243873966" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243873966">(Jun 25 2021 at 04:15)</a>:</h4>
<p>Any cmd that is making, delting, changing objects via a given input list is easy to undo</p>



<a name="243873969"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243873969" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243873969">(Jun 25 2021 at 04:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243873946">said</a>:</p>
<blockquote>
<p>I think it can be done decently easily if we can get a list of objects that has changed</p>
</blockquote>
<p>That's an excellent observation... I think it's possible too, but haven't 100% convinced myself yet.</p>



<a name="243873972"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243873972" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243873972">(Jun 25 2021 at 04:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243873966">said</a>:</p>
<blockquote>
<p>Any cmd that is making, delting, changing objects via a given input list is easy to undo</p>
</blockquote>
<p>should be easy to undo*</p>



<a name="243874017"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874017" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874017">(Jun 25 2021 at 04:16)</a>:</h4>
<p>Once I can get an implementation for any 1 of those, it should be quite simple to do it for the others</p>



<a name="243874024"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874024" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874024">(Jun 25 2021 at 04:17)</a>:</h4>
<p>Im exploring the option of storing those objects in another database as of now, but havent yet finished that</p>



<a name="243874083"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874083" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874083">(Jun 25 2021 at 04:18)</a>:</h4>
<p>I <em>think</em> a minimum required is for commands to declare a sequenced report of objects added, objects removed, and objects changed.  Those are akin to event notifications.  It would probably make sense for a few common "meta" events but to be explored later.</p>



<a name="243874161"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874161" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874161">(Jun 25 2021 at 04:21)</a>:</h4>
<p>Yes, that would help</p>



<a name="243874170"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874170" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874170">(Jun 25 2021 at 04:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243874024">said</a>:</p>
<blockquote>
<p>Im exploring the option of storing those objects in another database as of now, but havent yet finished that</p>
</blockquote>
<p>That's great and I think something we'll want, but suggest focusing on making the logic not per-command first if you do indeed believe that is achievable.  That will likely involve modifications that are ... complicated.</p>



<a name="243874178"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874178" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874178">(Jun 25 2021 at 04:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243874161">said</a>:</p>
<blockquote>
<p>Yes, that would help</p>
</blockquote>
<p>but doing it for commands like dbconcat or similar might still be tough</p>



<a name="243874241"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874241" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874241">(Jun 25 2021 at 04:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243874170">said</a>:</p>
<blockquote>
<p>That's great and I think something we'll want, but suggest focusing on making the logic not per-command first if you do indeed believe that is achievable.  That will likely involve modifications that are ... complicated.</p>
</blockquote>
<p>Right now I have general code to deal with any make or change in one object per command. So it can be dealt by adding 3-4 lines to the  wrapper of whichever cmd</p>



<a name="243874248"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874248" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874248">(Jun 25 2021 at 04:23)</a>:</h4>
<p>but the code is not ready for multi-object make/kill/change</p>



<a name="243874298"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874298" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874298">(Jun 25 2021 at 04:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/242684181">said</a>:</p>
<blockquote>
<p>Now I'm clear. Usual objects which are made using the "make" commands have rt_db_internal and combination objects made using the "c" command have an rt_comb_internal</p>
</blockquote>
<p>So just to revisit this statement... this is and isn't correct.  all objects have an rt_db_internal, combs included.</p>
<p>inside the rt_db_internal is an idb_ptr iirc which is the type-specific structure for that object's type, like rt_comb_internal or rt_ell_internal.</p>



<a name="243874804"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874804" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874804">(Jun 25 2021 at 04:36)</a>:</h4>
<p>So right now what would be the best thing to work on</p>



<a name="243874831"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874831" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874831">(Jun 25 2021 at 04:36)</a>:</h4>
<p>Still checking things over, hold on ;)</p>



<a name="243874833"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874833" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874833">(Jun 25 2021 at 04:36)</a>:</h4>
<p>Should I continue in the 'new database to store backups' direction</p>



<a name="243874838"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874838" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874838">(Jun 25 2021 at 04:37)</a>:</h4>
<p>You've been productive, which is great. ;)</p>



<a name="243874853"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243874853" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243874853">(Jun 25 2021 at 04:37)</a>:</h4>
<p>I took a break last 2 days though :P</p>



<a name="243875083"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875083" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875083">(Jun 25 2021 at 04:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243064913">said</a>:</p>
<blockquote>
<p>For eg,  there exists a <code>group.g</code> with obj1.s , obj2.s and obj3.s in it;<br>
When we store the backup presently the nodes remain the same which means we are never deleting the group but just renaming it, which is undesired</p>
</blockquote>
<p>This example... </p>
<blockquote>
<p>This fixes the unwanted referencing problem which is present in the direct copy and store method</p>
</blockquote>
<p>What exactly was unwanted?</p>



<a name="243875158"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875158" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875158">(Jun 25 2021 at 04:44)</a>:</h4>
<p>So the method to store backups for kill objects was to create a copy, hide the copy and then kill the object</p>



<a name="243875186"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875186" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875186">(Jun 25 2021 at 04:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243267294">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  I have a doubt,  So right now undo code goes into the wrapper and for cmds like kill the backup should happen before the command runs, so if the input is wrong (like name of obj is wrong or wrong no args), problems arise. So how do I overcome this problem because bringing the arg checks into the wrapper will eliminate the purpose of wrappers.</p>
</blockquote>
<p>This is more or less the point of doing commands like g and make together with other commands like kill.  They really beg for a solution that is either not command specific or is very command specific (and thus duplicative).</p>



<a name="243875203"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875203" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875203">(Jun 25 2021 at 04:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243875158">said</a>:</p>
<blockquote>
<p>So the method to store backups for kill objects was to create a copy, hide the copy and then kill the object</p>
</blockquote>
<p>When this was done to a comb object, all its(the copy) children also got hidden since they were referenced as its children</p>



<a name="243875217"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875217" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875217">(Jun 25 2021 at 04:45)</a>:</h4>
<p>Er, they did??  What mechanism did you use to hide them?</p>



<a name="243875228"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875228" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875228">(Jun 25 2021 at 04:46)</a>:</h4>
<p>but they werent supposed to be hidden, rather displayed independently in the geometry tree, outside the comb object</p>



<a name="243875265"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875265" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875265">(Jun 25 2021 at 04:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243875217">said</a>:</p>
<blockquote>
<p>Er, they did??  What mechanism did you use to hide them?</p>
</blockquote>
<p>I changed the names of the leaves. Let me give an example</p>



<a name="243875266"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875266" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875266">(Jun 25 2021 at 04:46)</a>:</h4>
<p>oh you mean the didn't show up on "tops" or ?</p>



<a name="243875273"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875273" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875273">(Jun 25 2021 at 04:46)</a>:</h4>
<p>The example should make things clear 1 sec</p>



<a name="243875285"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875285" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875285">(Jun 25 2021 at 04:47)</a>:</h4>
<p>say you have comb1 = comb2 u comb3  and comb2 = prim1 and comb3 =prim2 - prim3 ... now kill comb2</p>



<a name="243875344"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875344" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875344">(Jun 25 2021 at 04:48)</a>:</h4>
<p>Lets say theres a comb.c with obj1.s, obj2.s, obj3.s<br>
Now kill cmd is given<br>
We make a copy of comb.c, comb_copy.c and then hide comb_copy.c and kill comb.c<br>
Now opening the geometry browser shows nothing, everything is hidden even though the objects shouldn't be hidden</p>



<a name="243875354"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875354" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875354">(Jun 25 2021 at 04:48)</a>:</h4>
<p>You would expect to see<br>
obj1.s<br>
obj2.s<br>
obj3.s <br>
when we open the geom browser</p>



<a name="243875362"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875362" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875362">(Jun 25 2021 at 04:49)</a>:</h4>
<p>but it shows to be empty, because the hide property applied to comb_copy.c is being applied to the objects as well</p>



<a name="243875367"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875367" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875367">(Jun 25 2021 at 04:49)</a>:</h4>
<p>since comb_copy has the same children as comb.c</p>



<a name="243875420"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875420" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875420">(Jun 25 2021 at 04:50)</a>:</h4>
<p>So I changed the names of the children of comb_copy.c to<br>
obj1.s_undo_suffix, obj2.s_undo_suffix....</p>



<a name="243875422"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875422" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875422">(Jun 25 2021 at 04:50)</a>:</h4>
<p>okay, I see what you're getting at.  to me that's a problem with the command that the geometry browser is using to get it's listing... ;)</p>



<a name="243875437"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875437" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875437">(Jun 25 2021 at 04:50)</a>:</h4>
<p>and when recovering the backup i removed the sufffixes(plural for suffix whatever that is)</p>



<a name="243875597"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875597" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875597">(Jun 25 2021 at 04:54)</a>:</h4>
<p>got it, understood.  that's certainly one possible solution, though I would probably opt for some form of opaque encoding as a way around that.   it'll be faster and less likely to cause problems with other commands.</p>
<p>otherwise, the fix for the geometry browser is probably to make the tops command have a flag to ignore hidden objects, and make geometry browser use that flag.</p>



<a name="243875671"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875671" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875671">(Jun 25 2021 at 04:56)</a>:</h4>
<p>I suggest trying the prior...</p>



<a name="243875673"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875673" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875673">(Jun 25 2021 at 04:56)</a>:</h4>
<p>how are you copying the comb?</p>



<a name="243875688"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875688" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875688">(Jun 25 2021 at 04:57)</a>:</h4>
<p>usin ged_copy</p>



<a name="243875751"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875751" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875751">(Jun 25 2021 at 04:58)</a>:</h4>
<p>oof, okay. Hm.  So here's a challenge then.</p>



<a name="243875783"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875783" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875783">(Jun 25 2021 at 04:59)</a>:</h4>
<p>instead of ged_copy, I suggest learning the lower-level librt api it uses .. and instead of copying the object, serialize it and save the serialization into a binunif object.</p>



<a name="243875861"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243875861" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243875861">(Jun 25 2021 at 05:00)</a>:</h4>
<p>Okay.</p>



<a name="243876036"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876036" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876036">(Jun 25 2021 at 05:04)</a>:</h4>
<p>let's see if I can explain it from memory correctly... what you'll do is similar logic that ged_copy is using where you first do a db_lookup() on the object, get its external form (which is basically just an array of bytes), and then instead of exporting that ... you'll create a hidden binunif (see mk_binunif) instead.</p>



<a name="243876064"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876064" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876064">(Jun 25 2021 at 05:05)</a>:</h4>
<p>you might want to write a simple little test.c to figure out how to do that first</p>



<a name="243876096"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876096" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876096">(Jun 25 2021 at 05:05)</a>:</h4>
<p>that will avoid the whole problem of needing to rewrite the comb (which won't scale to large combs), and avoid the issue of it getting detected in the hierarchy as a comb (so no problem for the geometry browser)</p>



<a name="243876143"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876143" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876143">(Jun 25 2021 at 05:06)</a>:</h4>
<p>it's just a binary blob, sort of like how git handles commits</p>



<a name="243876152"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876152" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876152">(Jun 25 2021 at 05:06)</a>:</h4>
<p>could even compress it later</p>



<a name="243876244"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876244" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876244">(Jun 25 2021 at 05:08)</a>:</h4>
<p>That coincidentally will also let you supply additional flags like what type of undo object is that (a remove, an add, a change, etc), so you can infer how to undo it automatically without having to consult a ledger in _GLOBAL</p>



<a name="243876247"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876247" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876247">(Jun 25 2021 at 05:08)</a>:</h4>
<p>Ill have to go through the code for this</p>



<a name="243876260"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876260" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876260">(Jun 25 2021 at 05:08)</a>:</h4>
<p>I'll get  back once i read some documentation/code</p>



<a name="243876274"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876274" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876274">(Jun 25 2021 at 05:09)</a>:</h4>
<p>how did you end up implementing g ?</p>



<a name="243876280"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876280" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876280">(Jun 25 2021 at 05:09)</a>:</h4>
<p>Also all db5 objects have the attributes data struc, so we could specify data there as well</p>



<a name="243876305"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876305" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876305">(Jun 25 2021 at 05:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243876274">said</a>:</p>
<blockquote>
<p>how did you end up implementing g ?</p>
</blockquote>
<p>It was simple kill</p>



<a name="243876329"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876329" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876329">(Jun 25 2021 at 05:10)</a>:</h4>
<p>that's what I meant about being able to specify additional flags for what type of undo object it is</p>



<a name="243876333"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876333" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876333">(Jun 25 2021 at 05:10)</a>:</h4>
<p>Quite similar to the undo for make</p>



<a name="243876335"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876335" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876335">(Jun 25 2021 at 05:10)</a>:</h4>
<p>So then that's not correct :)</p>



<a name="243876346"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876346" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876346">(Jun 25 2021 at 05:10)</a>:</h4>
<p>also i dealt with the case where the g object already exists</p>



<a name="243876350"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876350" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876350">(Jun 25 2021 at 05:10)</a>:</h4>
<p>yes?</p>



<a name="243876357"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876357" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876357">(Jun 25 2021 at 05:11)</a>:</h4>
<p>Yeah</p>



<a name="243876359"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876359" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876359">(Jun 25 2021 at 05:11)</a>:</h4>
<p>I mean ... explain please</p>



<a name="243876363"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876363" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876363">(Jun 25 2021 at 05:11)</a>:</h4>
<p>So if the g already exists, then I just delete the last object added</p>



<a name="243876366"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876366" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876366">(Jun 25 2021 at 05:11)</a>:</h4>
<p>added to the .g I mean</p>



<a name="243876408"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876408" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876408">(Jun 25 2021 at 05:12)</a>:</h4>
<p>so multiobject functionality still isnt there</p>



<a name="243876411"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876411" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876411">(Jun 25 2021 at 05:12)</a>:</h4>
<p>Interesting, okay.  So you really went the custom-command direction..</p>



<a name="243876413"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876413" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876413">(Jun 25 2021 at 05:12)</a>:</h4>
<p>but it works for single object additions</p>



<a name="243876454"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876454" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876454">(Jun 25 2021 at 05:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243876411">said</a>:</p>
<blockquote>
<p>Interesting, okay.  So you really went the custom-command direction..</p>
</blockquote>
<p>Not so much</p>



<a name="243876456"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876456" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876456">(Jun 25 2021 at 05:13)</a>:</h4>
<p>I stored it as a change ot the g</p>



<a name="243876500"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876500" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876500">(Jun 25 2021 at 05:14)</a>:</h4>
<p>So i stored a copy of the g before the addition and then recovered it</p>



<a name="243876506"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876506" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876506">(Jun 25 2021 at 05:14)</a>:</h4>
<p>It's custom in the sense that you're relying on precise knowledge of the 'g' command adding objects to the end of the list.</p>



<a name="243876521"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876521" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876521">(Jun 25 2021 at 05:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243876408">said</a>:</p>
<blockquote>
<p>so multiobject functionality still isnt there</p>
</blockquote>
<p>My bad, this is there since Im storing prev state and recovering</p>



<a name="243876541"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876541" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876541">(Jun 25 2021 at 05:15)</a>:</h4>
<p>which is why you would need additional logic to make it work for multiple objects<br>
or why you'd need additional logic if there was a switch that added to the front of the list, or a position, or replaces an entry, etc</p>



<a name="243876594"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876594" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876594">(Jun 25 2021 at 05:16)</a>:</h4>
<p>It's various modes was kind of the point of that command.  It's tricky to make it handle both create and change events cleanly that way.</p>



<a name="243876605"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876605" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876605">(Jun 25 2021 at 05:16)</a>:</h4>
<p>Do you have ideas on how that could be implemented differently?</p>



<a name="243876624"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876624" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876624">(Jun 25 2021 at 05:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243876594">said</a>:</p>
<blockquote>
<p>It's various modes was kind of the point of that command.  It's tricky to make it handle both create and change events cleanly that way.</p>
</blockquote>
<p>It has only 2 modes right?<br>
create and add?</p>



<a name="243876674"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876674" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876674">(Jun 25 2021 at 05:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243876541">said</a>:</p>
<blockquote>
<p>which is why you would need additional logic to make it work for multiple objects<br>
or why you'd need additional logic if there was a switch that added to the front of the list, or a position, or replaces an entry, etc</p>
</blockquote>
<p>I did not get this entirely</p>



<a name="243876678"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876678" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876678">(Jun 25 2021 at 05:18)</a>:</h4>
<p>What is the list you are referring to?</p>



<a name="243876688"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876688" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876688">(Jun 25 2021 at 05:18)</a>:</h4>
<p>the comb recipe</p>



<a name="243876700"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876700" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876700">(Jun 25 2021 at 05:19)</a>:</h4>
<p>comb1 = obj1 u obj2 u obj3 - obj4 u obj5, etc.. it can be thought of as a stack or a list</p>



<a name="243876715"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876715" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876715">(Jun 25 2021 at 05:19)</a>:</h4>
<p>Okay</p>



<a name="243876745"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876745" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876745">(Jun 25 2021 at 05:19)</a>:</h4>
<p>Right now the code doesnt depend on the order of the list if you were wodnering</p>



<a name="243876795"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876795" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876795">(Jun 25 2021 at 05:20)</a>:</h4>
<p>Im storing the whole .g object and then replacing it</p>



<a name="243876812"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876812" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876812">(Jun 25 2021 at 05:20)</a>:</h4>
<p>Oh?  I thought you just said it doesn't handle N objects getting added?</p>



<a name="243876813"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876813" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876813">(Jun 25 2021 at 05:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243876521">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243876408">said</a>:</p>
<blockquote>
<p>so multiobject functionality still isnt there</p>
</blockquote>
<p>My bad, this is there since Im storing prev state and recovering</p>
</blockquote>
<p>.</p>



<a name="243876827"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876827" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876827">(Jun 25 2021 at 05:21)</a>:</h4>
<p>I got confused at first, but I checked the code now. Im dealing with it as a change in an object</p>



<a name="243876834"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876834" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876834">(Jun 25 2021 at 05:21)</a>:</h4>
<p>So entire .g gets replaced</p>



<a name="243876873"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876873" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876873">(Jun 25 2021 at 05:22)</a>:</h4>
<p>Ah, excellent then.  That's good.</p>



<a name="243876877"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876877" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876877">(Jun 25 2021 at 05:22)</a>:</h4>
<p>So in a way the code has only been customised for the modes of the g cmd</p>



<a name="243876884"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876884" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876884">(Jun 25 2021 at 05:22)</a>:</h4>
<p>and not for the specific addition</p>



<a name="243876892"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876892" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876892">(Jun 25 2021 at 05:22)</a>:</h4>
<p>excellent, because I think that is the basis of what you need next...</p>



<a name="243876906"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876906" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876906">(Jun 25 2021 at 05:23)</a>:</h4>
<p>so what commands do you presently have?  make + g + kill ?</p>



<a name="243876909"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876909" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876909">(Jun 25 2021 at 05:23)</a>:</h4>
<p>So most commands that have a make function like cp, mirror, cpi,arb</p>



<a name="243876924"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876924" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876924">(Jun 25 2021 at 05:24)</a>:</h4>
<p>I have undo for move</p>



<a name="243876953"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876953" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876953">(Jun 25 2021 at 05:24)</a>:</h4>
<p>I have general code for a changed object but has been applied only for the g command as of now</p>



<a name="243876965"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876965" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876965">(Jun 25 2021 at 05:24)</a>:</h4>
<p>And yes kill but only single object</p>



<a name="243876982"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876982" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876982">(Jun 25 2021 at 05:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243876909">said</a>:</p>
<blockquote>
<p>So most commands that have a make function like cp, mirror, cpi,arb</p>
</blockquote>
<p>Is that because they call ged_make() ? or did you edit them?</p>



<a name="243876986"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243876986" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243876986">(Jun 25 2021 at 05:25)</a>:</h4>
<p>deleted</p>



<a name="243877029"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877029" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877029">(Jun 25 2021 at 05:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243876982">said</a>:</p>
<blockquote>
<p>Is that because they call ged_make() ? or did you edit them?</p>
</blockquote>
<p>I edited their wrappers</p>



<a name="243877036"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877036" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877036">(Jun 25 2021 at 05:26)</a>:</h4>
<p>did they have a common wrapper or multiple wrappers or?</p>



<a name="243877040"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877040" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877040">(Jun 25 2021 at 05:26)</a>:</h4>
<p>common wrapper, i added an if statement</p>



<a name="243877046"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877046" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877046">(Jun 25 2021 at 05:27)</a>:</h4>
<p>coz there was no point creating a new wrapper for just 3 more lines</p>



<a name="243877051"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877051" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877051">(Jun 25 2021 at 05:27)</a>:</h4>
<p>okay, not so bad then.  will probably need to rework that, but it's at least isolated.</p>



<a name="243877127"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877127" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877127">(Jun 25 2021 at 05:28)</a>:</h4>
<p>so the next steps I think are:</p>



<a name="243877132"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877132" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877132">(Jun 25 2021 at 05:28)</a>:</h4>
<p>1) figuring out how to use binunif as the storage object</p>



<a name="243877162"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877162" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877162">(Jun 25 2021 at 05:29)</a>:</h4>
<p>2) making commands emit events for add/change/remove</p>



<a name="243877324"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877324" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877324">(Jun 25 2021 at 05:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243877162">said</a>:</p>
<blockquote>
<p>2) making commands emit events for add/change/remove</p>
</blockquote>
<p>Where do they emit though?<br>
to the attributes of the object?</p>



<a name="243877339"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877339" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877339">(Jun 25 2021 at 05:33)</a>:</h4>
<p>and also we would want the emit code to be in the wrapper, right?</p>



<a name="243877341"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877341" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877341">(Jun 25 2021 at 05:33)</a>:</h4>
<p>figuring out #2 is going to be the more complicated as there are choices, but how about this:</p>



<a name="243877653"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877653" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877653">(Jun 25 2021 at 05:40)</a>:</h4>
<p>have three functions ged_undo_add(), ged_undo_remove(), and ged_undo_change() that do the actual work given an object name.  then probably modifying GED_DB_PUT_INTERNAL.</p>



<a name="243877668"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877668" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877668">(Jun 25 2021 at 05:40)</a>:</h4>
<p>and THEN ... you'll almost certainly have to introduce something for removals</p>



<a name="243877687"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877687" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877687">(Jun 25 2021 at 05:41)</a>:</h4>
<p>as there's not a GED_DB_DELETE() but probably should be where you'd record the event</p>



<a name="243877741"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877741" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877741">(Jun 25 2021 at 05:42)</a>:</h4>
<p>so for GED_DB_PUT_INTERNAL and GED_DB_DELETE, you just record the change/add/delete event into the struct ged *</p>



<a name="243877750"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877750" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877750">(Jun 25 2021 at 05:42)</a>:</h4>
<p>then you handle the entire undo changeset recorded after the command has completed (basically a wrapper around all the wrappers)</p>



<a name="243877761"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877761" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877761">(Jun 25 2021 at 05:43)</a>:</h4>
<p>I dint get where to record it, as an attribute to _GLOBAL?</p>



<a name="243877889"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877889" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877889">(Jun 25 2021 at 05:45)</a>:</h4>
<p>No, I mean you could, but probably not as that's brittle.  So yeah, next step 1.5) change from using _GLOBAL to using struct ged and the undo objects.</p>



<a name="243877965"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877965" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877965">(Jun 25 2021 at 05:47)</a>:</h4>
<p>welcome to keep it on _GLOBAL for now as that's not a critical step</p>



<a name="243877977"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877977" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877977">(Jun 25 2021 at 05:47)</a>:</h4>
<p>Right now Im emitting changes for single objects</p>



<a name="243877987"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243877987" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243877987">(Jun 25 2021 at 05:47)</a>:</h4>
<p>So doing it for multiple objects is the task now, right?</p>



<a name="243878029"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243878029" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243878029">(Jun 25 2021 at 05:48)</a>:</h4>
<p>Right, so that all would completely change in _GLOBAL anyways, that's part of the reason to figure out a different container in struct ged anyways</p>



<a name="243878157"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243878157" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243878157">(Jun 25 2021 at 05:51)</a>:</h4>
<p>But I havent been able to do that in ged</p>



<a name="243878164"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243878164" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243878164">(Jun 25 2021 at 05:51)</a>:</h4>
<p>That was the starting point in my GSoC jouney hehe</p>



<a name="243878182"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243878182" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243878182">(Jun 25 2021 at 05:51)</a>:</h4>
<p>yeah, I remember :)</p>



<a name="243878188"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243878188" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243878188">(Jun 25 2021 at 05:52)</a>:</h4>
<p>the hope is that you're now a lot more experienced with the structures and functions to understand some of the implications</p>



<a name="243878272"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243878272" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243878272">(Jun 25 2021 at 05:53)</a>:</h4>
<p>I mean, it doesn't need to be fancy.  shouldn't be fancy.  It can be a simple linear list of object additions, changes, and removals.  something like a linked list of struct ged_change { enum type; const char *obj; } and struct ged would have a struct ged_change *gcp; that is acted upon by GED_DB_PUT_INTERANL, GED_DB_DELETE, and maybe others.</p>



<a name="243878620"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243878620" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243878620">(Jun 25 2021 at 06:00)</a>:</h4>
<p>the big piece missing is a place to inject logic before and after commands are run.  this exists -- it's ged_exec() but mged coincidentally does not call that yet.  so we might need to sort that out first... so maybe step 3 instead of 1.5...</p>



<a name="243878667"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243878667" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243878667">(Jun 25 2021 at 06:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243878620">said</a>:</p>
<blockquote>
<p>sort that out first... so maybe step 3 </p>
</blockquote>
<p>first or third?</p>



<a name="243908281"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243908281" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243908281">(Jun 25 2021 at 12:26)</a>:</h4>
<p>I don't know if it's helpful for this discussion, but for qged I added a flag in struct directory called "edit_flag" which is set by db_put_external.  That's how I'm able to know I need to update the visuals for objects in qged after a ged command is run - I zero out all directory edit_flags, run the command, and then check to see if any of them were tripped.  Anything with the flag set needs to get redrawn.</p>
<p>This may not be suitable for the undo mechanism, but at least for my purposes it is simple and effective - I don't have to care about the details of what the logic called by ged_exec did, so I'm completely isolated from any command logic or command changes.</p>



<a name="243924263"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243924263" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243924263">(Jun 25 2021 at 14:35)</a>:</h4>
<p>Yes, I do think that helps. I am trying to do something similar but maybe to the ged data struc.</p>



<a name="243928181"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243928181" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243928181">(Jun 25 2021 at 15:05)</a>:</h4>
<p>The advantage of db_put_external is that anything writing to the .g file is going to go through there.</p>



<a name="243928451"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243928451" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243928451">(Jun 25 2021 at 15:07)</a>:</h4>
<p>The "do I need to draw" problem for the UI is similar to undo, in that sense.  libtclcad and MGED handle it by defining different types of wrapper functions and assigning one to each command, which is less than ideal.</p>



<a name="243944712"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243944712" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243944712">(Jun 25 2021 at 17:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243267294">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  I have a doubt,  So right now undo code goes into the wrapper and for cmds like kill the backup should happen before the command runs, so if the input is wrong (like name of obj is wrong or wrong no args), problems arise. So how do I overcome this problem because bringing the arg checks into the wrapper will eliminate the purpose of wrappers.</p>
</blockquote>
<p>I see you have reacted to this with a smile <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span>  , does that mean I got to solve this on my own? <br>
Well I can by bringing the options code into the wrapper but all common wrappers would then get a switch or an if/else to check for the inputs</p>



<a name="243954688"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243954688" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243954688">(Jun 25 2021 at 18:43)</a>:</h4>
<p>When creating the binuif what data type should I input float, double, 32bit init, etc?</p>



<a name="243954821"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243954821" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243954821">(Jun 25 2021 at 18:44)</a>:</h4>
<p>As far as I understand it doesn't directly affect whichever data type I use, but please let me know if there are some do's/dont's on which type to select</p>



<a name="243976605"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243976605" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243976605">(Jun 25 2021 at 22:08)</a>:</h4>
<p>&lt;deleted&gt;</p>



<a name="243976634"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243976634" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243976634">(Jun 25 2021 at 22:08)</a>:</h4>
<p>&lt;deleted&gt;</p>



<a name="243976802"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243976802" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243976802">(Jun 25 2021 at 22:11)</a>:</h4>
<p>&lt;deleted&gt;</p>



<a name="243977596"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243977596" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243977596">(Jun 25 2021 at 22:22)</a>:</h4>
<p>&lt;deleted&gt;</p>



<a name="243978596"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243978596" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243978596">(Jun 25 2021 at 22:37)</a>:</h4>
<p>Which kind of objects have major type as BINARY_MASK? <br>
Right now my simple tests stops because the object im trying to convert doesnt have majortype binary_mask</p>



<a name="243994878"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243994878" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243994878">(Jun 26 2021 at 04:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243878667">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243878620">said</a>:</p>
<blockquote>
<p>sort that out first... so maybe step 3 </p>
</blockquote>
<p>first or third?</p>
</blockquote>
<p>third.  it has to be sorted out before you can utilize ged_exec, but the other parts are more important for geting set up for improving the object backup scheme.</p>



<a name="243996044"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243996044" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243996044">(Jun 26 2021 at 05:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243908281">said</a>:</p>
<blockquote>
<p>I don't know if it's helpful for this discussion, but for qged I added a flag in struct directory called "edit_flag" which is set by db_put_external.  That's how I'm able to know I need to update the visuals for objects in qged after a ged command is run - I zero out all directory edit_flags, run the command, and then check to see if any of them were tripped.  Anything with the flag set needs to get redrawn.</p>
<p>This may not be suitable for the undo mechanism, but at least for my purposes it is simple and effective - I don't have to care about the details of what the logic called by ged_exec did, so I'm completely isolated from any command logic or command changes.</p>
</blockquote>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> ... really hate to say it, but that is a straight up scope violation for that structure.  I mean I get how and why it works and why you thought to put it there, but I do not think it's right from a design perspective.   I hadn't seen that commit yet or I would thought it worth discussion. </p>
<p>To frame it by way of an analogy, it's like cleaning staff putting stickers or sharpie circles around stores on the public directory kiosk in mall to help keep track of which stores have been cleaned recently.  Sure it works for them, works GREAT for them... but that's in no way what the directory is for and is irrelevant/distracting/confusing to essentially everyone else.</p>
<p>In CS terms, it's a data specialization that doesn't intrinsically fit the structure (from both an OO perspective or a data-driven procedural perspective).  It's also couping a new concept (a notion of edit state and/or views) to what was otherwise a pure database construct with no awareness or linkage to views, edit state, interface.  Def minor point, but it's also a waste of a couple bytes per object, so it's that much more pressure on memory use, cache misses, context switch overhead.</p>
<p>Now that's not to suggest that another structure is more appropriate, it's specifically the notion of what an edit flag means in a general sense on a directory entry.  Is a non-zero value supposed to mean recently edited?  What constitutes recently?  What does a value of -8 mean?  Directory structs were stateless, and that appears to be some sort of live state -- so when does it change?  Can my code change it? </p>
<p>You can probably achieve the same effect by using the u_data pointer or by adding a callback so calling code is notified when something happens to the directory entry.</p>



<a name="243996359"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243996359" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243996359">(Jun 26 2021 at 05:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243928181">said</a>:</p>
<blockquote>
<p>The advantage of db_put_external is that anything writing to the .g file is going to go through there.</p>
</blockquote>
<p>I think that's too low-level.  At least, I do not see undo as an intrinsic feature of the .g, and would not belong in "libg" if it existed (thus doesn't belong in librt currently).  It's a higher level application-level construct, thus belongs somewhere in libged or higher.</p>
<p>As we think of undoing commands, that to me says libged is the most appropriate place for the logic to reside and/or be registered.   If I run a killtree, I'd expect  undo to reverse the entire killtree in one step as a single transaction (which is a concept librt/libg knows nothing about).  It might conceptually fit if we introduced transactions to librt/libg, but that's unquestionably in scope for libged today where the killtree command exists, where it's aware of the set of things it's going to change.</p>



<a name="243996480"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243996480" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243996480">(Jun 26 2021 at 05:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243944712">said</a>:</p>
<blockquote>
<p>I see you have reacted to this with a smile <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span>  , does that mean I got to solve this on my own? <br>
Well I can by bringing the options code into the wrapper but all common wrappers would then get a switch or an if/else to check for the inputs</p>
</blockquote>
<p>I responded to the doubt/statement a little further down.  "This is more or less the point of doing commands like g and make together with other commands like kill. They really beg for a solution that is either not command specific or is very command specific (and thus duplicative)."</p>
<p>You can't bring the options code into the wrapper.</p>



<a name="243996751"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243996751" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243996751">(Jun 26 2021 at 05:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243978596">said</a>:</p>
<blockquote>
<p>Which kind of objects have major type as BINARY_MASK? <br>
Right now my simple tests stops because the object im trying to convert doesnt have majortype binary_mask</p>
</blockquote>
<p>None have BINARY_MASK... that's a bit mask, so it matches DB5_MAJORTYPE_BINARY_UNIF and DB5_MAJORTYPE_BINARY_MIME is all.</p>



<a name="243996808"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243996808" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243996808">(Jun 26 2021 at 05:50)</a>:</h4>
<p>You'll want to create a DB5_MAJORTYPE_BINARY_UNIF with just bytes (or maybe ubytes).  You have an array of bytes after you get external.  You're just putting that array of bytes into a binunif object (which is a lot like a BLOB object type if you're familiar with those).</p>



<a name="243996817"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/243996817" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#243996817">(Jun 26 2021 at 05:51)</a>:</h4>
<p>mk_binunif should create the type correctly for you -- you just provide the char* and number of bytes.</p>



<a name="244027973"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244027973" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244027973">(Jun 26 2021 at 18:27)</a>:</h4>
<p>I have successfully written a basic test to use mk_binunif() and create a binary object from an geometry object</p>



<a name="244029073"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244029073" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244029073">(Jun 26 2021 at 18:56)</a>:</h4>
<p>I have read the code in bo cmd, but that is to write the bin object to a file<br>
Im checking how to recover the object</p>



<a name="244031667"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244031667" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244031667">(Jun 26 2021 at 19:59)</a>:</h4>
<p>Is there an already implemented way to convert these binary objects back to database objects?</p>



<a name="244077284"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244077284" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244077284">(Jun 27 2021 at 17:51)</a>:</h4>
<p>I got vaccinated today so I'm feeling under the weather  and won't be working today <br>
This week progress has been a little slow, so plan is to catch up next week<br>
Rn Im still stuck at converting the binary object back to a drawable object</p>



<a name="244106019"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244106019" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244106019">(Jun 28 2021 at 06:28)</a>:</h4>
<p><span class="user-mention" data-user-id="353338">@Vikram Atreya</span> Glad to hear that!  Not that you're unwell of course, but it's a good form of unwell overall.  Hope you get some rest and are better today.</p>



<a name="244106051"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244106051" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244106051">(Jun 28 2021 at 06:30)</a>:</h4>
<p>Yeah Im feeling better today <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="244106226"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244106226" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244106226">(Jun 28 2021 at 06:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244031667">said</a>:</p>
<blockquote>
<p>Is there an already implemented way to convert these binary objects back to database objects?</p>
</blockquote>
<p>I'm not sure we have code, but the gist is to do a lookup, get the rt_db_internal, then cast the idb_ptr (which will be an struct rt_binunif_internal*), then simply access the bip-&gt;u.uint8 which will be the bytes you packed.</p>



<a name="244107692"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244107692" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244107692">(Jun 28 2021 at 06:57)</a>:</h4>
<p>So just copy the bip-&gt;u.uint8 into the new the drawable object's internal</p>



<a name="244216802"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244216802" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244216802">(Jun 28 2021 at 23:21)</a>:</h4>
<p>Done!<br>
I  have been able to store an object into binary object and recover the object back if we know its type(ell, arb, etc)</p>



<a name="244217045"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244217045" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244217045">(Jun 28 2021 at 23:25)</a>:</h4>
<p>When storing the backup of an object, we could store the name and type as attributes of the binary object</p>



<a name="244219727"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244219727" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244219727">(Jun 29 2021 at 00:10)</a>:</h4>
<p>Now Im working on changing the code of kill wrapper, so that backup is made via binary objects</p>



<a name="244221891"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244221891" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244221891">(Jun 29 2021 at 00:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244219727">said</a>:</p>
<blockquote>
<p>Now Im working on changing the code of kill wrapper, so that backup is made via binary objects</p>
</blockquote>
<p>I have done for combination objects, can be done for all objects as well but the code will be very long mostly due to the memory allocation switch , and as there is no problem right now in storing them as normal objects should/can I leave it like that?</p>



<a name="244223596"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244223596" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244223596">(Jun 29 2021 at 01:25)</a>:</h4>
<p>Made changes to g wrapper and undo to store and recover from binary objects respectively</p>



<a name="244224306"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244224306" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244224306">(Jun 29 2021 at 01:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/243877162">said</a>:</p>
<blockquote>
<p>2) making commands emit events for add/change/remove</p>
</blockquote>
<p><span class="user-mention" data-user-id="102902">@Sean</span> could you better explain the scope of this step?<br>
Rn Im already storing latest_change, last_create/last_killed/last_changed attributes in _GLOBAL for cmds (make, g, arb, etc; kill, killall; )</p>



<a name="244224358"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244224358" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244224358">(Jun 29 2021 at 01:42)</a>:</h4>
<p>Should I do this for all cmds that are available?</p>



<a name="244232405"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244232405" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244232405">(Jun 29 2021 at 04:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244217045">said</a>:</p>
<blockquote>
<p>When storing the backup of an object, we could store the name and type as attributes of the binary object</p>
</blockquote>
<p>That should happen for you automatically when you get the external... the bytes for the object that you put into the binunif should be the external stream that is serialized to disk.  That has the name and type information.</p>



<a name="244232421"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244232421" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244232421">(Jun 29 2021 at 04:29)</a>:</h4>
<p>Check out an example for doing this in src/gtools/gtransfer.c .. the server_geom() function and a couple others do something similar.</p>



<a name="244232499"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244232499" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244232499">(Jun 29 2021 at 04:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244232405">said</a>:</p>
<blockquote>
<p>That should happen for you automatically when you get the external... the bytes for the object that you put into the binunif should be the external stream that is serialized to disk.  That has the name and type information.</p>
</blockquote>
<p>Okay. As of now Im storing the rt_db_internal in the binunif. Intially I was storing the external</p>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244106226">said</a>:</p>
<blockquote>
<p>I'm not sure we have code, but the gist is to do a lookup, get the rt_db_internal, then cast the idb_ptr (which will be an struct rt_binunif_internal*), then simply access the bip-&gt;u.uint8 which will be the bytes you packed.</p>
</blockquote>
<p>But after I read this I changed everything to internal</p>



<a name="244232565"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244232565" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244232565">(Jun 29 2021 at 04:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244224358">said</a>:</p>
<blockquote>
<p>Should I do this for all cmds that are available?</p>
</blockquote>
<p>Definitely not as it's still fundamentally flawed in terms of undoing commands that result in sequences of changes.</p>



<a name="244232739"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244232739" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244232739">(Jun 29 2021 at 04:38)</a>:</h4>
<p>You can store the internal too, but then like you noted, you'll also have to store more information and that then couples the implementation tightly to the current data structure instead of to API.</p>



<a name="244232794"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244232794" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244232794">(Jun 29 2021 at 04:38)</a>:</h4>
<p>Better is to either convert the internal to an external or do a lookup and get an external from the directory* via db_get_external().</p>



<a name="244232797"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244232797" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244232797">(Jun 29 2021 at 04:38)</a>:</h4>
<p>Yes I realize storing external is a better option</p>



<a name="244232989"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244232989" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244232989">(Jun 29 2021 at 04:43)</a>:</h4>
<p>gtransfer uses that method in the client to get an external from db_get_external(), and in the server, it does some fancy processing to stash the object into an in-memory only database so it can raytrace it without touching the disk.</p>



<a name="244343758"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244343758" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244343758">(Jun 29 2021 at 20:34)</a>:</h4>
<p>Changed it from storing the internal data to bu_external<br>
Encountered a lot of bugs so took quite some time <span aria-label="sweat" class="emoji emoji-1f613" role="img" title="sweat">:sweat:</span></p>



<a name="244349257"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244349257" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244349257">(Jun 29 2021 at 21:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244232565">said</a>:</p>
<blockquote>
<p>Definitely not as it's still fundamentally flawed in terms of undoing commands that result in sequences of changes.</p>
</blockquote>
<p>Like for cmd killtree?  a kill event should be stores for every object it is deleting ?</p>



<a name="244349457"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244349457" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244349457">(Jun 29 2021 at 21:20)</a>:</h4>
<p>I am also planning to do code cleaning and testing at the end of this week and create a PR which can robustly handle 1 undo for (make&amp;co-cmds), kill and g</p>



<a name="244351677"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244351677" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244351677">(Jun 29 2021 at 21:41)</a>:</h4>
<p>Yeah a command like killtree.  Somewhere somehow they need to be grouped, so the command can be undone, not individual objects.</p>
<p>I'd suggest we think of it simply as a change event which is a sequence of 1 or more add/edit/kill changes to the database.</p>



<a name="244352133"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244352133" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244352133">(Jun 29 2021 at 21:45)</a>:</h4>
<p>I can think of a couple ways to easily achieve that type of storage.  You could write out every object like you're doing now as a binunif for example representing the add/edit/kill action, but then list them in an object that is also serialized to a binunif.  So when you try to undo that object, you see it's a list of changes, and undo all those subchanges.</p>



<a name="244352410"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244352410" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244352410">(Jun 29 2021 at 21:48)</a>:</h4>
<p>but we will always need a list of all the objects that have to be deleted/overwritten right?</p>



<a name="244352431"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244352431" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244352431">(Jun 29 2021 at 21:48)</a>:</h4>
<p>because we do not know the names of the objects till we extract the binary object</p>



<a name="244352434"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244352434" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244352434">(Jun 29 2021 at 21:48)</a>:</h4>
<p>or added back</p>



<a name="244352511"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244352511" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244352511">(Jun 29 2021 at 21:49)</a>:</h4>
<p>you actually could put the name on the binary object if you want as an attribute</p>



<a name="244352530"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244352530" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244352530">(Jun 29 2021 at 21:49)</a>:</h4>
<p>that way you don't have to unpack the binunif to figure out what's in there</p>



<a name="244352540"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244352540" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244352540">(Jun 29 2021 at 21:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244352511">said</a>:</p>
<blockquote>
<p>you actually could put the name on the binary object if you want as an attribute</p>
</blockquote>
<p>Yeah Im doing that right now</p>



<a name="244352553"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244352553" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244352553">(Jun 29 2021 at 21:49)</a>:</h4>
<p>or even use some sort of name convention</p>



<a name="244352634"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244352634" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244352634">(Jun 29 2021 at 21:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244352133">said</a>:</p>
<blockquote>
<p>I can think of a couple ways to easily achieve that type of storage.  You could write out every object like you're doing now as a binunif for example representing the add/edit/kill action, but then list them in an object that is also serialized to a binunif.  So when you try to undo that object, you see it's a list of changes, and undo all those subchanges.</p>
</blockquote>
<p>but for this we will have to store the changes somewhere or the name will be toooo long</p>



<a name="244352682"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244352682" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244352682">(Jun 29 2021 at 21:51)</a>:</h4>
<p>e.g., .1.undo.HASH.my_object  might be the 1st undo action, pertaining to my_object</p>



<a name="244352750"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244352750" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244352750">(Jun 29 2021 at 21:52)</a>:</h4>
<p>.392.undo.20194e9678ff7a08df564c3f83a4bd86.my_object</p>



<a name="244352816"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244352816" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244352816">(Jun 29 2021 at 21:52)</a>:</h4>
<p>392 undo action, also some change/rm/add to my_object</p>



<a name="244353075"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244353075" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244353075">(Jun 29 2021 at 21:54)</a>:</h4>
<p>Just checking, Here the number is referring to the undo step in the database and not specific to the object</p>



<a name="244353195"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244353195" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244353195">(Jun 29 2021 at 21:56)</a>:</h4>
<p>so what I was saying about combs is a little different.  that'd be something like .123.undo.HASH and inside that binunif object is a list of .122.undo.HASH, .121.undo.HASH, .120.undo.HASH, and .117.undo.HASH for example.  and you'd recursively unpack the binunifs of 122, 121, 120, and 117 to make sure the entire 123 set can be undone.  (say 120 is also a set too of 119 and 118 to undo).</p>



<a name="244353270"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244353270" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244353270">(Jun 29 2021 at 21:56)</a>:</h4>
<p>yeah, it's just the undo sequence</p>



<a name="244353312"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244353312" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244353312">(Jun 29 2021 at 21:56)</a>:</h4>
<p>though I should make clear ... it doesn't have to be like this -- this is just spitballing ideas quickly!</p>



<a name="244353418"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244353418" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244353418">(Jun 29 2021 at 21:57)</a>:</h4>
<p>you just somehow ideally need to look at a set of undo objects and 1) know which was the latest, and 2) know the sequential ordering of all objects</p>



<a name="244353432"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244353432" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244353432">(Jun 29 2021 at 21:58)</a>:</h4>
<p>This feels like a good idea, I will parallelly think of other ideas as well</p>



<a name="244353481"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244353481" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244353481">(Jun 29 2021 at 21:58)</a>:</h4>
<p>that way we can always undo or undo -n10 or whatever</p>



<a name="244353553"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244353553" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244353553">(Jun 29 2021 at 21:59)</a>:</h4>
<p>knowing the sequence would also let us cherry pick undo actions, BUT then we'll have to think through how to deal with object renamings</p>



<a name="244353593"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244353593" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244353593">(Jun 29 2021 at 21:59)</a>:</h4>
<p>if they're always sequential, that in theory shouldn't be an issue ... I think</p>



<a name="244353660"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244353660" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244353660">(Jun 29 2021 at 21:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244353593">said</a>:</p>
<blockquote>
<p>if they're always sequential, that in theory shouldn't be an issue ... I think</p>
</blockquote>
<p>yes, if we go back undoing every change it will also account for the renaming</p>



<a name="244354089"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244354089" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244354089">(Jun 29 2021 at 22:03)</a>:</h4>
<p>It still will probably need to check though, because some external program could have modified the database outside of libged</p>



<a name="244354135"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244354135" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244354135">(Jun 29 2021 at 22:03)</a>:</h4>
<p>it just might not be able to undo, or might be only able to partially undo and such.</p>



<a name="244354302"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244354302" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244354302">(Jun 29 2021 at 22:05)</a>:</h4>
<p>If it is not too much overload, names of all existing object could be stores at each step and extra objects could be deleted after the undo</p>



<a name="244354471"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244354471" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244354471">(Jun 29 2021 at 22:06)</a>:</h4>
<p>Thats an interesting idea.  I'm not sure it'd scale well but maybe... would require testing on real/big databases.</p>



<a name="244355449"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244355449" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244355449">(Jun 29 2021 at 22:16)</a>:</h4>
<p>If you want to make a fake real one to play with, you can run something like the clone command and make a 10 x 10 grid of copies in a scene of some database like m35, and then group them all into a scene.  That should be something like 50k objects total of which about 23k are combinations.  That's more realistic.</p>



<a name="244356398"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244356398" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244356398">(Jun 29 2021 at 22:26)</a>:</h4>
<p>Next I will try working on killtree then</p>



<a name="244382596"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244382596" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244382596">(Jun 30 2021 at 06:35)</a>:</h4>
<p><span class="user-mention" data-user-id="353338">@Vikram Atreya</span> Here's a copy of the m35 patterned into a grid that is closer to the complexity found in a fully detailed model.  <br>
<a href="/user_uploads/1549/ZLFtaRZkamtSzzYJgo9JRnRk/m35s.g.gz">m35s.g.gz</a></p>



<a name="244382606"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244382606" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244382606">(Jun 30 2021 at 06:35)</a>:</h4>
<p><a href="/user_uploads/1549/QJucHhnYtmXKsNOzWHi-cVYq/Screen-Shot-2021-06-30-at-2.31.26-AM.png">Screen-Shot-2021-06-30-at-2.31.26-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/QJucHhnYtmXKsNOzWHi-cVYq/Screen-Shot-2021-06-30-at-2.31.26-AM.png" title="Screen-Shot-2021-06-30-at-2.31.26-AM.png"><img src="/user_uploads/1549/QJucHhnYtmXKsNOzWHi-cVYq/Screen-Shot-2021-06-30-at-2.31.26-AM.png"></a></div>



<a name="244382707"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244382707" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244382707">(Jun 30 2021 at 06:37)</a>:</h4>
<p>It's about 90k objects, about half of which are combinations.  It's still not representative of the file size and memory pressures as this is not a NURBS or BoT model, which use a LOT more memory, but it does at least use about 1.3GB.</p>



<a name="244382797"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244382797" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244382797">(Jun 30 2021 at 06:38)</a>:</h4>
<p>It'll still load fast, but you'll probably find some commands get noticably slower (e.g., killtree on just one of the m35 copies in there is excrutiatingly slow... do not try it on any of the levels or you may end up waiting a long whilte).</p>



<a name="244382888"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244382888" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244382888">(Jun 30 2021 at 06:40)</a>:</h4>
<p>So I shoud test this by storing the names of all the objects and then taking note of the time and space used</p>



<a name="244382925"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244382925" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244382925">(Jun 30 2021 at 06:41)</a>:</h4>
<p>It depends</p>



<a name="244382998"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244382998" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244382998">(Jun 30 2021 at 06:42)</a>:</h4>
<p>You were talking about maybe storing the name of every object before a command runs.  This type of db will tell you quickly if that is at all feasible.</p>



<a name="244383019"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244383019" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244383019">(Jun 30 2021 at 06:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244382998">said</a>:</p>
<blockquote>
<p>You were talking about maybe storing the name of every object before a command runs.  This type of db will tell you quickly if that is at all feasible.</p>
</blockquote>
<p>Yes</p>



<a name="244383021"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244383021" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244383021">(Jun 30 2021 at 06:43)</a>:</h4>
<p>It's a good test case to make sure undo doesn't have some fundamental limitation</p>



<a name="244383243"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244383243" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244383243">(Jun 30 2021 at 06:46)</a>:</h4>
<p>My bad, but could you reiterate the task(s) that I have to do next <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> <br>
This check for name stroing is a pretty small task, so what can i do after that</p>



<a name="244383327"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244383327" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244383327">(Jun 30 2021 at 06:48)</a>:</h4>
<p>A good test object in there is "suspension" which is one of the corner vehicles with about 400 regions and 400 primitives.</p>



<a name="244383521"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244383521" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244383521">(Jun 30 2021 at 06:51)</a>:</h4>
<p>Tasks next: 1) First, run this sequence -- make+make+kill+make+kill+kill -- and then make sure you can undo+undo+undo+undo+undo and end up with just the first make</p>



<a name="244383650"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244383650" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244383650">(Jun 30 2021 at 06:53)</a>:</h4>
<p>2) If you're still using _GLOBAL, switch to using some other convention.  ideally, make it so undo command knows how many undo  actions there are and/or what the next one is</p>



<a name="244383732"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244383732" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244383732">(Jun 30 2021 at 06:54)</a>:</h4>
<p>3) get killtree working so a single undo undoes the whole kill</p>



<a name="244468203"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244468203" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244468203">(Jun 30 2021 at 18:29)</a>:</h4>
<p>Doing task 2 before task 1 will be better in my opinion because the no of undos, last change data will have to be stored in the new place/convention. If I do task 1 again I will have to rewrite code of undo according to the new convention</p>



<a name="244473447"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244473447" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244473447">(Jun 30 2021 at 19:11)</a>:</h4>
<p>An idea is to store a stack/array as the data of a binary object and have it contain all the information on undos</p>



<a name="244474256"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244474256" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244474256">(Jun 30 2021 at 19:18)</a>:</h4>
<p>The stack could simply be a char** with memory being reallocated whenever we add or pop events</p>



<a name="244476451"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244476451" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244476451">(Jun 30 2021 at 19:37)</a>:</h4>
<p>I just realized that the history command is doing something very similar to what we want to achieve by the undo stack</p>



<a name="244480767"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244480767" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244480767">(Jun 30 2021 at 20:10)</a>:</h4>
<p>The best place that I can see to implement this stack data struc (similar to mged_hist) is include/ged/defines.h</p>



<a name="244482141"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244482141" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244482141">(Jun 30 2021 at 20:21)</a>:</h4>
<p>bu_list would be just sufficient but knowing the length of the list will help in checking if the no of undos requested are actually possible. 2 options here: </p>
<ol>
<li>Make a new data struc with bu_list and a an int, can be expanded further in the future</li>
<li>Use a plain bu_list and an attribute in _GLOBAL for no of undo backups stored</li>
</ol>



<a name="244517069"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244517069" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244517069">(Jul 01 2021 at 04:25)</a>:</h4>
<p>I hadn't properly seen the attributes of bu_list. Since it does not have an attribute to store data, I have created a new DS and will implement multiple undo using it</p>



<a name="244626272"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244626272" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244626272">(Jul 01 2021 at 21:00)</a>:</h4>
<p>I have implemented a new data struc in ged.h<br>
struct ged_undo_stack {<br>
    struct bu_list l;<br>
    struct bu_attribute_value_set cmd_data;<br>
    int64_t n; /* no of undos posssible */<br>
};</p>
<p>Using this I implemented undo for move</p>



<a name="244626332"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244626332" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244626332">(Jul 01 2021 at 21:01)</a>:</h4>
<p>Im packing this in a binary object and then recovering this struct when undo is passed</p>



<a name="244626353"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244626353" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244626353">(Jul 01 2021 at 21:01)</a>:</h4>
<p>I have a doubt in the recovery</p>



<a name="244626491"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244626491" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244626491">(Jul 01 2021 at 21:02)</a>:</h4>
<div class="codehilite"><pre><span></span><code>struct ged_undo_stack *gusp;
gusp = (struct ged_undo_stack *)bu_malloc(binunif-&gt;count, &quot;&quot;);
</code></pre></div>
<p>Is this correct code or will it lead to errors?<br>
The basic tests that I did worked but I'm not sure if this is robust code</p>



<a name="244727034"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244727034" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244727034">(Jul 02 2021 at 16:31)</a>:</h4>
<div class="codehilite"><pre><span></span><code>struct ged_undo_stack {
struct bu_list l;
struct bu_attribute_value_set cmd_data;
int64_t n; /* no of undos posssible */
};
</code></pre></div>
<p>I think this structure will not work because <code>bu_list l</code> is just a node, and the whole list is not being stored</p>



<a name="244821540"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244821540" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244821540">(Jul 03 2021 at 19:55)</a>:</h4>
<p>I want to store a resizeable array of <code>bu_attribute_value_set</code>, to store the cmds and required info for the undo stack<br>
but Im a little confused about how to allocate memory for this</p>



<a name="244824659"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244824659" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244824659">(Jul 03 2021 at 21:16)</a>:</h4>
<p>Im kind of stuck on how to implement this stack which I can entirely  store in the binary object</p>



<a name="244824679"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244824679" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244824679">(Jul 03 2021 at 21:17)</a>:</h4>
<p>bu_list doesnt work since we need to pass all the data and storing many structs into 1 binary object and then recovering doesnt work out</p>



<a name="244824754"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244824754" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244824754">(Jul 03 2021 at 21:19)</a>:</h4>
<p>A simple implementation could be just using a char* array, but I think storing bu_attribute_value_sets can be more functional and easy to deal with once setup</p>



<a name="244824816"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244824816" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244824816">(Jul 03 2021 at 21:20)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> any hints here on how i can implement the DS</p>



<a name="244954481"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244954481" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244954481">(Jul 05 2021 at 16:27)</a>:</h4>
<p>Also it would be great if you can give me weekly targets, because I feel progress has slowed down a bit over the last 1 week</p>



<a name="244969882"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244969882" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244969882">(Jul 05 2021 at 20:04)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> is it a good idea to use 2D bu_vls arrays to store the undo information? Im not able to figure out what would be the best way to create a stack which can be stored in a bin obj and then recovered</p>



<a name="244997753"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244997753" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244997753">(Jul 06 2021 at 05:45)</a>:</h4>
<p><span class="user-mention" data-user-id="353338">@Vikram Atreya</span> apologies on the delay, it was a big holiday weekend.  sounds like you've made a lot of progress and discoveries... and are knee deep in completely new concepts.  No worries, though, as you are on the right track.</p>



<a name="244997819"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244997819" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244997819">(Jul 06 2021 at 05:46)</a>:</h4>
<p>taking a step back, the reason I mentioned #1 vs #2 was to separate the change of undo recording from the change of undo storage.  It doesn't matter which you do first, but you really should just tackle one of the two concepts.</p>



<a name="244998098"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998098" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998098">(Jul 06 2021 at 05:54)</a>:</h4>
<p>you will want to do both, but I really suggest not trying to solve both at the same time, which you are/were attempting looking at bu_list and friends.  just using a char array was a good redirect, but  an avs could work IFF you have a plan for what the attribute names/convention will be for keeping track of things.</p>



<a name="244998239"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998239" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998239">(Jul 06 2021 at 05:56)</a>:</h4>
<p>that said, that's still really doing 1+2 again... so don't get caught up with that.  Worst case, to do #2 first, you could/should implement exactly what you were doing in _GLOBAL (i.e., 3 strings) in memory.  Even getting that working is going to present a couple challenges.</p>



<a name="244998316"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998316" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998316">(Jul 06 2021 at 05:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244969882">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> is it a good idea to use 2D bu_vls arrays to store the undo information? Im not able to figure out what would be the best way to create a stack which can be stored in a bin obj and then recovered</p>
</blockquote>
<p>if you pretend brl-cad's data structures don't exist, what is it you're trying to do??</p>



<a name="244998375"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998375" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998375">(Jul 06 2021 at 05:59)</a>:</h4>
<p>I want to store a stack of string pairs</p>



<a name="244998386"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998386" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998386">(Jul 06 2021 at 05:59)</a>:</h4>
<p>until you figure that out, the rest is inconsequential and can be incredibly distracting as you're not familiar with the structures.  bu_list can be made to work perfectly.  bu_attribute_value_sets can be made to work.  char *'s can be made to work...</p>



<a name="244998474"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998474" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998474">(Jul 06 2021 at 06:00)</a>:</h4>
<p>a stack of vector of string pairs is even better</p>



<a name="244998481"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998481" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998481">(Jul 06 2021 at 06:00)</a>:</h4>
<p>what are the string pairs?</p>



<a name="244998506"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998506" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998506">(Jul 06 2021 at 06:01)</a>:</h4>
<p>examples are<br>
last changed object : obj1<br>
moved object old name: old_name etc</p>



<a name="244998622"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998622" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998622">(Jul 06 2021 at 06:03)</a>:</h4>
<p>data-type wise, what are they?</p>



<a name="244998685"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998685" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998685">(Jul 06 2021 at 06:04)</a>:</h4>
<p>char*</p>



<a name="244998694"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998694" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998694">(Jul 06 2021 at 06:04)</a>:</h4>
<p>so that works for the object name, but what about it's pair?</p>



<a name="244998714"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998714" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998714">(Jul 06 2021 at 06:05)</a>:</h4>
<p>I was thinking of an array of size 2</p>



<a name="244998796"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998796" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998796">(Jul 06 2021 at 06:06)</a>:</h4>
<p>you mean a &lt;char<em>, char</em>&gt; pair?</p>



<a name="244998801"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998801" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998801">(Jul 06 2021 at 06:06)</a>:</h4>
<p>char *</p>



<a name="244998802"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998802" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998802">(Jul 06 2021 at 06:06)</a>:</h4>
<p>Yes</p>



<a name="244998846"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998846" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998846">(Jul 06 2021 at 06:07)</a>:</h4>
<p>In your example, "last changed object" is a lot of senseless bytes to be storing that anywhere...</p>



<a name="244998906"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998906" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998906">(Jul 06 2021 at 06:08)</a>:</h4>
<p>Okayy</p>



<a name="244998917"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998917" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998917">(Jul 06 2021 at 06:08)</a>:</h4>
<p>So we decide on positions previously itself and then assign values?</p>



<a name="244998925"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998925" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998925">(Jul 06 2021 at 06:09)</a>:</h4>
<p>positions??</p>



<a name="244998932"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244998932" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244998932">(Jul 06 2021 at 06:09)</a>:</h4>
<p>Like index 0, will be last command, second might be the object we are making, old object name, object we are killing based on the prev index value</p>



<a name="244999009"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999009" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999009">(Jul 06 2021 at 06:11)</a>:</h4>
<p>that's essentially itemizing the second pair element in your description, the  &lt;..., string&gt; value</p>



<a name="244999016"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999016" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999016">(Jul 06 2021 at 06:11)</a>:</h4>
<p>but what I think you're getting at is also storing the "action" with it</p>



<a name="244999045"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999045" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999045">(Jul 06 2021 at 06:12)</a>:</h4>
<p>which would probably be more appropriate as an enumeration, an ID of sorts, so the pairing is &lt;int, string&gt;</p>



<a name="244999199"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999199" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999199">(Jul 06 2021 at 06:15)</a>:</h4>
<p>So that said, why don't you start there with exactly that as simply as possible, with as few changes as possible.</p>



<a name="244999218"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999218" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999218">(Jul 06 2021 at 06:15)</a>:</h4>
<p>what I mean is don't worry about the in-memory data structures .. that's #2 and that can be later.  you can focus solving the undo logic, not the in-memory mechanism.</p>



<a name="244999273"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999273" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999273">(Jul 06 2021 at 06:16)</a>:</h4>
<p>what I mean by that is look at how you're using _GLOBAL ... what changes did you make there?</p>



<a name="244999279"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999279" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999279">(Jul 06 2021 at 06:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244999273">said</a>:</p>
<blockquote>
<p>what I mean by that is look at how you're using _GLOBAL ... what changes did you make there?</p>
</blockquote>
<p>there = undo code?</p>



<a name="244999283"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999283" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999283">(Jul 06 2021 at 06:16)</a>:</h4>
<p>or changes to _GLOBAL?</p>



<a name="244999312"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999312" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999312">(Jul 06 2021 at 06:16)</a>:</h4>
<p>how are you using _GLOBAL ?</p>



<a name="244999339"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999339" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999339">(Jul 06 2021 at 06:17)</a>:</h4>
<p>Im storing information in attribute pairs</p>



<a name="244999340"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999340" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999340">(Jul 06 2021 at 06:17)</a>:</h4>
<p>more specific</p>



<a name="244999392"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999392" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999392">(Jul 06 2021 at 06:18)</a>:</h4>
<p>For any addition of object--<br>
last_change: created<br>
last_created_object: its_name</p>



<a name="244999403"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999403" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999403">(Jul 06 2021 at 06:18)</a>:</h4>
<p>For move:-<br>
last_change: move<br>
mv_old_name: old_name<br>
mv_new_name: new_name</p>



<a name="244999414"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999414" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999414">(Jul 06 2021 at 06:19)</a>:</h4>
<p>Kill and change are similar to make in terms of data stored</p>



<a name="244999437"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999437" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999437">(Jul 06 2021 at 06:19)</a>:</h4>
<p>this is why talking about bu_list's and such is a HUGE leap... :)</p>



<a name="244999495"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999495" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999495">(Jul 06 2021 at 06:20)</a>:</h4>
<p>okay, so you have a whole slew of attribute names and values, and they're apparently command-specific</p>



<a name="244999522"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999522" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999522">(Jul 06 2021 at 06:21)</a>:</h4>
<p>Theres only 4 types as of now in which I have accommodated all cmds Ive worked on till now</p>



<a name="244999528"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999528" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999528">(Jul 06 2021 at 06:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244999495">said</a>:</p>
<blockquote>
<p>okay, so you have a whole slew of attribute names and values, and they're apparently command-specific</p>
</blockquote>
<p>but yes</p>



<a name="244999638"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999638" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999638">(Jul 06 2021 at 06:23)</a>:</h4>
<p>so there's already a problem to consider ... how does move fit into the pair paradigm?</p>



<a name="244999651"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999651" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999651">(Jul 06 2021 at 06:23)</a>:</h4>
<p>because I see &lt;int, string, string&gt; with old_name and new_name ... are both needed?</p>



<a name="244999721"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999721" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999721">(Jul 06 2021 at 06:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244999651">said</a>:</p>
<blockquote>
<p>because I see &lt;int, string, string&gt; with old_name and new_name ... are both needed?</p>
</blockquote>
<p>Yeah both names will be needed to stored somewhere to properly undo the change</p>



<a name="244999856"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999856" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999856">(Jul 06 2021 at 06:26)</a>:</h4>
<p>so you have an action that is &lt;UNDO, string, string&gt; ... and &lt;CHANGED, string&gt;... what else data-wise?</p>



<a name="244999884"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999884" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999884">(Jul 06 2021 at 06:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244999856">said</a>:</p>
<blockquote>
<p>so you have an action that is &lt;UNDO, string, string&gt; ... and &lt;CHANGED, string&gt;... what else data-wise?</p>
</blockquote>
<p>for the move command that's it I would say</p>



<a name="244999885"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999885" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999885">(Jul 06 2021 at 06:27)</a>:</h4>
<p>note that this is no longer a "pair" in CS terms, I'm just referring to an abstract tuple concept at the moment</p>



<a name="244999905"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/244999905" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#244999905">(Jul 06 2021 at 06:27)</a>:</h4>
<p>sorry, &lt;MOVE, string, string&gt;</p>



<a name="245000014"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245000014" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245000014">(Jul 06 2021 at 06:30)</a>:</h4>
<p>so what else is there?</p>



<a name="245000066"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245000066" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245000066">(Jul 06 2021 at 06:30)</a>:</h4>
<p>itemize all the info being stored in _GLOBAL that way</p>



<a name="245000167"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245000167" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245000167">(Jul 06 2021 at 06:32)</a>:</h4>
<p><em>For any addition of object--</em><br>
last_change: created<br>
last_created_object: its_name</p>
<p><em>For move:-</em><br>
last_change: move<br>
mv_old_name: old_name<br>
mv_new_name: new_name</p>
<p><em>For kill:-</em><br>
last_change: kill<br>
last_killed: killed_object</p>
<p><em>For object modifiication</em>:<br>
last_change: modify<br>
last_modified: modified_object</p>



<a name="245000207"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245000207" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245000207">(Jul 06 2021 at 06:33)</a>:</h4>
<p>now convert that into tuples...</p>



<a name="245000291"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245000291" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245000291">(Jul 06 2021 at 06:34)</a>:</h4>
<p>&lt;CREATE, string&gt;<br>
&lt;MOVE, string, string&gt;<br>
&lt;KILL, string&gt;<br>
&lt;MODIFY, string&gt;</p>



<a name="245000606"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245000606" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245000606">(Jul 06 2021 at 06:39)</a>:</h4>
<p>that's great, so let's go with the simplest route and consolidate</p>



<a name="245000649"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245000649" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245000649">(Jul 06 2021 at 06:40)</a>:</h4>
<p>since MOVE is an outlier, lets ignore it for the moment</p>



<a name="245000661"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245000661" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245000661">(Jul 06 2021 at 06:40)</a>:</h4>
<p>you can, however, easily consolidate CREATE, KILL, and MODIFY</p>



<a name="245000711"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245000711" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245000711">(Jul 06 2021 at 06:41)</a>:</h4>
<p>using a simple convention, you can combine them into a single field.  so I suggest trying that next.</p>



<a name="245000956"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245000956" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245000956">(Jul 06 2021 at 06:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245000711">said</a>:</p>
<blockquote>
<p>using a simple convention, you can combine them into a single field.  so I suggest trying that next.</p>
</blockquote>
<p>Okay, like all this data in 1 string?</p>



<a name="245000958"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245000958" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245000958">(Jul 06 2021 at 06:45)</a>:</h4>
<p>with a recognizable separator?</p>



<a name="245000966"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245000966" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245000966">(Jul 06 2021 at 06:45)</a>:</h4>
<p>without a separator I'd think, but yes -- 1 string</p>



<a name="245000974"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245000974" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245000974">(Jul 06 2021 at 06:46)</a>:</h4>
<p>using just 1 avs, change create, kill, and modify into one string</p>



<a name="245001060"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245001060" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245001060">(Jul 06 2021 at 06:47)</a>:</h4>
<p>they're all identical, so you can always get any of them by iterating two at a time.</p>



<a name="245001072"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245001072" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245001072">(Jul 06 2021 at 06:47)</a>:</h4>
<p>action: int string int string int string</p>



<a name="245001225"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245001225" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245001225">(Jul 06 2021 at 06:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245000974">said</a>:</p>
<blockquote>
<p>using just 1 avs, change create, kill, and modify into one string</p>
</blockquote>
<p>Why do we need an avs now? if we have only 1 string?</p>



<a name="245001238"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245001238" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245001238">(Jul 06 2021 at 06:50)</a>:</h4>
<p>Okay for the undo no and then action?</p>



<a name="245001257"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245001257" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245001257">(Jul 06 2021 at 06:51)</a>:</h4>
<p>"last_change: created" is an avs</p>



<a name="245001393"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245001393" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245001393">(Jul 06 2021 at 06:53)</a>:</h4>
<p>again, making as few changes as possible so we don't get lost in complexity... where/how are you going to store a list of actions like  "action: int string int string int string" ?</p>



<a name="245001500"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245001500" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245001500">(Jul 06 2021 at 06:55)</a>:</h4>
<p>how are you storing "last_change: kill" ?</p>



<a name="245001573"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245001573" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245001573">(Jul 06 2021 at 06:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245001257">said</a>:</p>
<blockquote>
<p>"last_change: created" is an avs</p>
</blockquote>
<p>avs is an attribute value set<br>
So it can store a lot of pairs<br>
Now that we have 1 command stored just in 1 string, eg:MAKE_obj1, KILL_obj2, CHANGE_obj3<br>
That will be the value, and the key is the undo no like 1 for first undo?</p>



<a name="245001730"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245001730" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245001730">(Jul 06 2021 at 06:58)</a>:</h4>
<p>sorry, I'm being loose with terminology -- I meant it's an"avp", it's not a set.  _GLOBAL is effectively an avs (or more technically, it <em>has</em> an avs)</p>



<a name="245001789"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245001789" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245001789">(Jul 06 2021 at 06:59)</a>:</h4>
<p>So we have many avps for 1 cmd or only 1 avp?</p>



<a name="245001847"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245001847" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245001847">(Jul 06 2021 at 07:00)</a>:</h4>
<p>don't get lost....<br>
how are you storing "last_change: kill" ?</p>



<a name="245002019"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002019" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002019">(Jul 06 2021 at 07:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245001847">said</a>:</p>
<blockquote>
<p>don't get lost....<br>
how are you storing "last_change: kill" ?</p>
</blockquote>
<p>Im lost already <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span> <br>
I did not get your question, Im just storng it as a pair in _GLOBAL' avs</p>



<a name="245002027"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002027" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002027">(Jul 06 2021 at 07:02)</a>:</h4>
<p>yes, but HOW</p>



<a name="245002049"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002049" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002049">(Jul 06 2021 at 07:03)</a>:</h4>
<p>as a pair of strings I suppose</p>



<a name="245002053"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002053" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002053">(Jul 06 2021 at 07:03)</a>:</h4>
<p>no.. no</p>



<a name="245002062"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002062" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002062">(Jul 06 2021 at 07:03)</a>:</h4>
<p>what line of code make it store that pair into _GLOBAL?</p>



<a name="245002075"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002075" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002075">(Jul 06 2021 at 07:03)</a>:</h4>
<p>Okay</p>



<a name="245002079"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002079" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002079">(Jul 06 2021 at 07:03)</a>:</h4>
<p>that's how...</p>



<a name="245002134"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002134" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002134">(Jul 06 2021 at 07:04)</a>:</h4>
<p>So first I extract the avs from global, store a copy locally, add the attributes I want to add and then I replace the avs in _GLOBAL with the copy I made</p>



<a name="245002163"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002163" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002163">(Jul 06 2021 at 07:04)</a>:</h4>
<p>how do you do that last step?</p>



<a name="245002176"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002176" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002176">(Jul 06 2021 at 07:04)</a>:</h4>
<p>and/or the second step</p>



<a name="245002184"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002184" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002184">(Jul 06 2021 at 07:05)</a>:</h4>
<p>there is a function db5_replace_attributes()</p>



<a name="245002186"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002186" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002186">(Jul 06 2021 at 07:05)</a>:</h4>
<p>how do you add the attributes you want to add?</p>



<a name="245002240"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002240" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002240">(Jul 06 2021 at 07:05)</a>:</h4>
<p>Using bu_avs_add</p>



<a name="245002290"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002290" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002290">(Jul 06 2021 at 07:06)</a>:</h4>
<p>okay, so that's your next step....</p>



<a name="245002320"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002320" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002320">(Jul 06 2021 at 07:06)</a>:</h4>
<p>how are you going to store a list of actions like "action: int string int string int string"?</p>



<a name="245002391"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002391" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002391">(Jul 06 2021 at 07:07)</a>:</h4>
<p>make them into 3 avps and then add them to the avs, have a marker in the key that all of them belong to the same action</p>



<a name="245002454"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002454" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002454">(Jul 06 2021 at 07:08)</a>:</h4>
<p>no good</p>



<a name="245002475"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002475" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002475">(Jul 06 2021 at 07:08)</a>:</h4>
<p>find a solution that is just 1 avp</p>



<a name="245002570"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002570" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002570">(Jul 06 2021 at 07:10)</a>:</h4>
<p>Can be done, we put a separator like double undo or | in the string and store them as a single string in the avp's value</p>



<a name="245002606"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002606" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002606">(Jul 06 2021 at 07:10)</a>:</h4>
<p>what purpose does the separator serve?</p>



<a name="245002650"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002650" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002650">(Jul 06 2021 at 07:11)</a>:</h4>
<p>To distinguish between different data</p>



<a name="245002670"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002670" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002670">(Jul 06 2021 at 07:11)</a>:</h4>
<p>for eg, MOVE|old_name|new_name</p>



<a name="245002685"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002685" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002685">(Jul 06 2021 at 07:11)</a>:</h4>
<p>stop it.. we're ignoring MOVE...</p>



<a name="245002737"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002737" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002737">(Jul 06 2021 at 07:12)</a>:</h4>
<p>keep it simple...</p>



<a name="245002748"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002748" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002748">(Jul 06 2021 at 07:12)</a>:</h4>
<p>Okayy <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="245002872"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002872" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002872">(Jul 06 2021 at 07:14)</a>:</h4>
<p>the value could be <code>ACTION|int|string|int|string|int|string</code></p>



<a name="245002945"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002945" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002945">(Jul 06 2021 at 07:15)</a>:</h4>
<p>what is ACTION?</p>



<a name="245002976"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245002976" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245002976">(Jul 06 2021 at 07:15)</a>:</h4>
<p>"action" was going to be the name, so I'm not sure why you'd put it in the value too...</p>



<a name="245003058"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003058" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003058">(Jul 06 2021 at 07:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245002976">said</a>:</p>
<blockquote>
<p>"action" was going to be the name, so I'm not sure why you'd put it in the value too...</p>
</blockquote>
<p>Shouldnt have put it</p>



<a name="245003086"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003086" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003086">(Jul 06 2021 at 07:17)</a>:</h4>
<p>My bad</p>



<a name="245003136"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003136" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003136">(Jul 06 2021 at 07:17)</a>:</h4>
<p>okay, so then i'm back to saying you don't need a delimiter</p>



<a name="245003284"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003284" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003284">(Jul 06 2021 at 07:20)</a>:</h4>
<p>Let me think of another method then, if there were no numbers in the string then there would be no need otherwise.... <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="245003333"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003333" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003333">(Jul 06 2021 at 07:20)</a>:</h4>
<p>at least not now, not yet. just complicates it.. if the value is "1 obj2 3 obj2 1 obj4 2 obj3"  is that ambiguous?</p>



<a name="245003361"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003361" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003361">(Jul 06 2021 at 07:20)</a>:</h4>
<p>No</p>



<a name="245003377"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003377" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003377">(Jul 06 2021 at 07:20)</a>:</h4>
<p>so go with something that simple then</p>



<a name="245003422"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003422" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003422">(Jul 06 2021 at 07:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245003333">said</a>:</p>
<blockquote>
<p>at least not now, not yet. just complicates it.. if the value is "1 obj2 3 obj2 1 obj4 2 obj3"  is that ambiguous?</p>
</blockquote>
<p>but we do have a separator that is a space in this example right?</p>



<a name="245003520"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003520" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003520">(Jul 06 2021 at 07:22)</a>:</h4>
<p>sure, and we're assuming object names don't have spaces for now too</p>



<a name="245003525"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003525" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003525">(Jul 06 2021 at 07:22)</a>:</h4>
<p>that's okay</p>



<a name="245003531"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003531" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003531">(Jul 06 2021 at 07:22)</a>:</h4>
<p>So I'll just use spaces between different data</p>



<a name="245003533"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003533" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003533">(Jul 06 2021 at 07:22)</a>:</h4>
<p>you'll have to get the avp to add new values to it, but you can continually add easily.  undo can read from that and remove the last two values</p>



<a name="245003579"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003579" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003579">(Jul 06 2021 at 07:23)</a>:</h4>
<p>so try doing that so that kill, create, and change all add to that avp, and undo removes the last one ...</p>



<a name="245003595"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003595" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003595">(Jul 06 2021 at 07:23)</a>:</h4>
<p>disable the move code if it causes problems</p>



<a name="245003601"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003601" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003601">(Jul 06 2021 at 07:23)</a>:</h4>
<p>it's not the focus</p>



<a name="245003822"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003822" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003822">(Jul 06 2021 at 07:26)</a>:</h4>
<p>Just to confirm<br>
So every command adds to the same avs(to be precise) and undo keeps popping things from it?</p>



<a name="245003828"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003828" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003828">(Jul 06 2021 at 07:26)</a>:</h4>
<p>once you get it working, I suggest putting the code that adds/removes from the avp into a function.  make the kill/create/change functions call those functions</p>



<a name="245003845"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003845" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003845">(Jul 06 2021 at 07:26)</a>:</h4>
<p>adds to the same <em>avp</em></p>



<a name="245003854"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003854" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003854">(Jul 06 2021 at 07:27)</a>:</h4>
<p>an "action" avp</p>



<a name="245003861"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003861" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003861">(Jul 06 2021 at 07:27)</a>:</h4>
<p>or whatever you want to name it</p>



<a name="245003866"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003866" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003866">(Jul 06 2021 at 07:27)</a>:</h4>
<p>no other avp's</p>



<a name="245003880"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003880" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003880">(Jul 06 2021 at 07:27)</a>:</h4>
<p>make sense?</p>



<a name="245003950"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003950" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003950">(Jul 06 2021 at 07:28)</a>:</h4>
<p>once you do that, you should be able to implement an "undo list" subcommand that lists all the actions that can be undone...</p>



<a name="245003995"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245003995" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245003995">(Jul 06 2021 at 07:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245003854">said</a>:</p>
<blockquote>
<p>an "action" avp</p>
</blockquote>
<p>Sorry for getting confused<br>
So one action avp can contain many commands?<br>
for eg, an action might have make+kill+kill<br>
and its avp comes out to be<br>
ACTION: 1 obj1.s 2 obj2.s 2 obj3.s</p>



<a name="245004260"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245004260" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245004260">(Jul 06 2021 at 07:32)</a>:</h4>
<p>right</p>



<a name="245004319"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245004319" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245004319">(Jul 06 2021 at 07:33)</a>:</h4>
<p>Do that, and you will have succinctly solved #1</p>



<a name="245004340"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245004340" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245004340">(Jul 06 2021 at 07:33)</a>:</h4>
<p>Yes got it</p>



<a name="245236214"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245236214" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245236214">(Jul 07 2021 at 20:14)</a>:</h4>
<p>I have implemented undo for a multi-command action<br>
eg, <br>
We have few objects when we open the db, next we do "make+make+kill+make+make" , and then call undo<br>
It undoes all changes since we have kept track i.e. only the initial objects are left</p>



<a name="245236952"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245236952" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245236952">(Jul 07 2021 at 20:21)</a>:</h4>
<p>Right now a single undo removes all changes, I will reconfigure this to 1 change per undo</p>



<a name="245238387"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245238387" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245238387">(Jul 07 2021 at 20:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245236952">said</a>:</p>
<blockquote>
<p>Right now a single undo removes all changes, I will reconfigure this to 1 change per undo</p>
</blockquote>
<p>Done!</p>



<a name="245240496"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245240496" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245240496">(Jul 07 2021 at 20:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/244383650">said</a>:</p>
<blockquote>
<p>2) If you're still using _GLOBAL, switch to using some other convention.  ideally, make it so undo command knows how many undo  actions there are and/or what the next one is</p>
</blockquote>
<p>I will proceed to the next task then, for this implementing a new struct with <code>char**</code> and no_of_undos should suffice, where the <code>char**</code> can store the action strings<br>
What are your thoughts <span class="user-mention" data-user-id="102902">@Sean</span> ?</p>



<a name="245526828"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245526828" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245526828">(Jul 10 2021 at 03:28)</a>:</h4>
<p><span class="user-mention" data-user-id="353338">@Vikram Atreya</span> I'd recommend you tackle #1.5 next ...  account for the remaining attributes you were storing on _GLOBAL (i.e., rename) ... figure out a way for handling that, ideally without using additional delimiters or command-specific logic.</p>



<a name="245526908"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245526908" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245526908">(Jul 10 2021 at 03:30)</a>:</h4>
<p>curious how you're thinking to handle it.  I can think of a few ways, one in particular...</p>



<a name="245526945"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245526945" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245526945">(Jul 10 2021 at 03:32)</a>:</h4>
<p>The first thing that comes to mind is a command-specific logic where, lets say 3 represents rename, then we iterate till we find 2 object names separated by a space.</p>



<a name="245526985"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245526985" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245526985">(Jul 10 2021 at 03:33)</a>:</h4>
<p>right, that's an option, but as you note it has a huge downside that the parsing logic has to suddenly become command-aware, it has to know that rename takes 3</p>



<a name="245526989"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245526989" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245526989">(Jul 10 2021 at 03:33)</a>:</h4>
<p>it also can't instantly know how many undo actions remain without inspecting all the command labels to know how many to skip.</p>



<a name="245526990"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245526990" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245526990">(Jul 10 2021 at 03:34)</a>:</h4>
<p>any other ideas?</p>



<a name="245527044"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527044" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527044">(Jul 10 2021 at 03:35)</a>:</h4>
<p>Another idea could be keep iterating till we find the next number</p>



<a name="245527107"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527107" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527107">(Jul 10 2021 at 03:36)</a>:</h4>
<p>eh?  how's that implement support for undoing rename?</p>



<a name="245527120"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527120" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527120">(Jul 10 2021 at 03:36)</a>:</h4>
<p>For rename we need to store 2 strings unlike make/kill</p>



<a name="245527124"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527124" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527124">(Jul 10 2021 at 03:37)</a>:</h4>
<p>Not true...</p>



<a name="245527128"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527128" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527128">(Jul 10 2021 at 03:37)</a>:</h4>
<p>that's not a need, that's just how you're currently handling it</p>



<a name="245527136"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527136" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527136">(Jul 10 2021 at 03:37)</a>:</h4>
<p>Rn Im storing the action value as  "1 obj1.s 2 obj2.s 1 obj3.s ..... " where 1 represents make and 2 represents kill</p>



<a name="245527174"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527174" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527174">(Jul 10 2021 at 03:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245527128">said</a>:</p>
<blockquote>
<p>that's not a need, that's just how you're currently handling it</p>
</blockquote>
<p>Okay, let me think with only 1 string</p>



<a name="245527175"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527175" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527175">(Jul 10 2021 at 03:38)</a>:</h4>
<p>yep, sounds good</p>



<a name="245527196"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527196" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527196">(Jul 10 2021 at 03:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245527136">said</a>:</p>
<blockquote>
<p>Rn Im storing the action value as  "1 obj1.s 2 obj2.s 1 obj3.s ..... " where 1 represents make and 2 represents kill</p>
</blockquote>
<p>So if i stored 3 obj2.s obj5.s in this, to not make it command specific, I keep iterating and storing any number of words till I find the next no or the string ends</p>



<a name="245527247"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527247" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527247">(Jul 10 2021 at 03:40)</a>:</h4>
<p>that's not really any different</p>



<a name="245527258"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527258" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527258">(Jul 10 2021 at 03:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245527107">said</a>:</p>
<blockquote>
<p>eh?  how's that implement support for undoing rename?</p>
</blockquote>
<p>I was replying to this</p>



<a name="245527311"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527311" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527311">(Jul 10 2021 at 03:42)</a>:</h4>
<p>well, yeah, but you said that's another idea ... that's the same idea.  that's literally how you'd have to handle it, but it has problems that I mentioned.</p>



<a name="245527316"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527316" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527316">(Jul 10 2021 at 03:42)</a>:</h4>
<p>the parsing logic has to be aware</p>



<a name="245527331"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527331" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527331">(Jul 10 2021 at 03:43)</a>:</h4>
<p>I mean I get what you're saying, that it doesn't need to know it's a 3 and just keeps looking for a number, but that's still not deterministic.  It's a linear cost operation O(n) to figure out what a given field entry is...</p>



<a name="245527375"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527375" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527375">(Jul 10 2021 at 03:44)</a>:</h4>
<p>you can't look at a stream like "1 foo 2 bar 3 foo bar 2 foo 1 bar 3 bar foo 1 foo 2 bar" and tell me whether the 7th argument is an object name or an undo identifier without parsing everything that came before it</p>



<a name="245527384"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527384" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527384">(Jul 10 2021 at 03:44)</a>:</h4>
<p>Yes.</p>



<a name="245527445"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527445" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527445">(Jul 10 2021 at 03:46)</a>:</h4>
<p>whereas if it was always pairs "1 foo 2 bar 3 foo 2 foo 1 bar 3 bar 1 foo 2 bar", the 7th is odd, so that's always an identifier and is constant time O(1)</p>



<a name="245527462"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527462" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527462">(Jul 10 2021 at 03:47)</a>:</h4>
<p>so how can you implement undo support for renames and still remain constant time?</p>



<a name="245527469"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527469" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527469">(Jul 10 2021 at 03:47)</a>:</h4>
<p>using a hash we can separate both names</p>



<a name="245527523"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527523" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527523">(Jul 10 2021 at 03:48)</a>:</h4>
<p>hm?  what're you suggesting?</p>



<a name="245527539"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527539" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527539">(Jul 10 2021 at 03:49)</a>:</h4>
<p>obj_name1_hash_obj_name2</p>



<a name="245527544"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527544" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527544">(Jul 10 2021 at 03:49)</a>:</h4>
<p>explain...</p>



<a name="245527587"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527587" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527587">(Jul 10 2021 at 03:50)</a>:</h4>
<p>A separator (kinda), let me give an example</p>



<a name="245527600"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527600" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527600">(Jul 10 2021 at 03:50)</a>:</h4>
<p>obj1.s_sep!#asdjfhfjnrbs#!!_obj2.s</p>



<a name="245527620"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527620" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527620">(Jul 10 2021 at 03:52)</a>:</h4>
<p>so I think you're suggesting you generate a random string and use that as a separator between the two object names?</p>



<a name="245527662"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527662" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527662">(Jul 10 2021 at 03:52)</a>:</h4>
<p>Not a random string every time, some fixed string, and yes</p>



<a name="245527663"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527663" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527663">(Jul 10 2021 at 03:52)</a>:</h4>
<p>why does it need to be encoded/hashed/long like that?</p>



<a name="245527669"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527669" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527669">(Jul 10 2021 at 03:53)</a>:</h4>
<p>why not obj1.s|obj2.s or something similar?</p>



<a name="245527671"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527671" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527671">(Jul 10 2021 at 03:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245527663">said</a>:</p>
<blockquote>
<p>why does it need to be encoded/hashed/long like that?</p>
</blockquote>
<p>To avoid that pattern occurring in the object name</p>



<a name="245527726"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527726" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527726">(Jul 10 2021 at 03:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245527669">said</a>:</p>
<blockquote>
<p>why not obj1.s|obj2.s or something similar?</p>
</blockquote>
<p>Imnt sure but cant "|" be put in an object name?</p>



<a name="245527736"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527736" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527736">(Jul 10 2021 at 03:54)</a>:</h4>
<p>there are a number of chracters that are incredibly inconvenient/difficult to have in object names that you could use</p>



<a name="245527762"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527762" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527762">(Jul 10 2021 at 03:56)</a>:</h4>
<p>you could also use quoting rules to encode the pairing like /obj1.s/obj2.s/ and it would recognize the use of / or , or whatever else being used as a separator</p>



<a name="245527808"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527808" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527808">(Jul 10 2021 at 03:56)</a>:</h4>
<p>so that's an option, and not a terrible one, but not great too because we're now similarly no longer deterministic on the even number arguments that were previously all object names (or former object names)</p>



<a name="245527872"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527872" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527872">(Jul 10 2021 at 03:58)</a>:</h4>
<p>so keep that one in your back pocket, it could work but I think we can do better.  The real issue is that rename is introducing command-specific behavior and we're scrambling to come up with awkward ways to encode it instead of trying to find a way to handle it like everything else</p>



<a name="245527960"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527960" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527960">(Jul 10 2021 at 04:00)</a>:</h4>
<p>If we were to handle it like other commands, we will need a new place to store the old_name, could be in the attributes of the object itself but again that will be a pain for multiple renames</p>



<a name="245527963"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527963" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527963">(Jul 10 2021 at 04:00)</a>:</h4>
<p>think about what rename is doing and other ways you might handle it without code having logic specific to rename anywhere (i.e., 3 != "rename").</p>



<a name="245527989"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245527989" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245527989">(Jul 10 2021 at 04:00)</a>:</h4>
<p>Yes!  excellent observation</p>



<a name="245528017"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528017" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528017">(Jul 10 2021 at 04:01)</a>:</h4>
<p>you could just have 3 = rename and "3 foo" might be "we renamed foo" and in the backup "foo" object, it has an attribute like "renamed_from" = "bar" where we could keep track of the additional/former name</p>



<a name="245528059"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528059" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528059">(Jul 10 2021 at 04:02)</a>:</h4>
<p>Yes this can totally be done</p>



<a name="245528070"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528070" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528070">(Jul 10 2021 at 04:02)</a>:</h4>
<p>that's better and makes the undo parsing completely deterministic, but I think you're right .. it's potentially a pain for multiple renames... maybe.</p>



<a name="245528077"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528077" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528077">(Jul 10 2021 at 04:02)</a>:</h4>
<p>Not if we are using the backup_object</p>



<a name="245528084"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528084" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528084">(Jul 10 2021 at 04:02)</a>:</h4>
<p>Then every new name will have a different backup object</p>



<a name="245528089"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528089" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528089">(Jul 10 2021 at 04:03)</a>:</h4>
<p>Only problem is when object is renamed to new_name and then again back to old_name</p>



<a name="245528094"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528094" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528094">(Jul 10 2021 at 04:03)</a>:</h4>
<p>sure, because nothing says the backup object's name has to have meaning.  it could be "3 jjk2h34hk24k12kj1h5" and in that object, it has the from and to names recorded</p>



<a name="245528104"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528104" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528104">(Jul 10 2021 at 04:03)</a>:</h4>
<p>This can be solved later on when by adding the undo_step_no to all backup objects</p>



<a name="245528145"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528145" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528145">(Jul 10 2021 at 04:04)</a>:</h4>
<p>so that's good and if we had lots of time, I might say do that next, but let me hint you towards another solution</p>



<a name="245528152"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528152" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528152">(Jul 10 2021 at 04:04)</a>:</h4>
<p>consider what rename does...</p>



<a name="245528164"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528164" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528164">(Jul 10 2021 at 04:05)</a>:</h4>
<p>I'd argue you can encode it already without introducing a new undo code.  do you see why?</p>



<a name="245528249"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528249" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528249">(Jul 10 2021 at 04:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245528164">said</a>:</p>
<blockquote>
<p>I'd argue you can encode it already without introducing a new undo code.  do you see why?</p>
</blockquote>
<p>Encode the backup object or in the action value string?</p>



<a name="245528252"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528252" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528252">(Jul 10 2021 at 04:06)</a>:</h4>
<p>nope</p>



<a name="245528268"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528268" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528268">(Jul 10 2021 at 04:07)</a>:</h4>
<p>I mean using the convention you have already where 1=make and 2=kill</p>



<a name="245528275"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528275" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528275">(Jul 10 2021 at 04:07)</a>:</h4>
<p>Ohh yes</p>



<a name="245528318"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528318" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528318">(Jul 10 2021 at 04:08)</a>:</h4>
<p>Make object with old_name and kill the one with the new name</p>



<a name="245528330"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528330" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528330">(Jul 10 2021 at 04:08)</a>:</h4>
<p>right!  now what's the problem with that?</p>



<a name="245528335"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528335" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528335">(Jul 10 2021 at 04:09)</a>:</h4>
<p>Extra space to store the backup object</p>



<a name="245528339"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528339" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528339">(Jul 10 2021 at 04:09)</a>:</h4>
<p>meh, don't care about that</p>



<a name="245528342"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528342" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528342">(Jul 10 2021 at 04:09)</a>:</h4>
<p>or extra information required to know which object to make a copy of</p>



<a name="245528347"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528347" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528347">(Jul 10 2021 at 04:09)</a>:</h4>
<p>the suggestion is "rename foo bar" can be encoded as "1 bar 2 foo" right?  what's the problem with that?</p>



<a name="245528404"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528404" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528404">(Jul 10 2021 at 04:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245528347">said</a>:</p>
<blockquote>
<p>the suggestion is "rename foo bar" can be encoded as "1 bar 2 foo" right?  what's the problem with that?</p>
</blockquote>
<p>Yeah, but to make bar we need to either make a copy of an existing object or get it from a backup that we stored</p>



<a name="245528425"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528425" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528425">(Jul 10 2021 at 04:12)</a>:</h4>
<p>er, sure, but you have that...  rename command has foo so it could define bar by copying foo</p>



<a name="245528467"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528467" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528467">(Jul 10 2021 at 04:12)</a>:</h4>
<p>and then store that copy as the backup object</p>



<a name="245528470"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528470" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528470">(Jul 10 2021 at 04:12)</a>:</h4>
<p>that's not a problem</p>



<a name="245528471"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528471" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528471">(Jul 10 2021 at 04:12)</a>:</h4>
<p>what is a problem is ...</p>



<a name="245528473"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528473" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528473">(Jul 10 2021 at 04:12)</a>:</h4>
<p>what happens when the user calls "undo"?</p>



<a name="245528488"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528488" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528488">(Jul 10 2021 at 04:13)</a>:</h4>
<p>and your action string is "1 bar 2 foo"</p>



<a name="245528534"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528534" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528534">(Jul 10 2021 at 04:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245528488">said</a>:</p>
<blockquote>
<p>and your action string is "1 bar 2 foo"</p>
</blockquote>
<p>Search for a backup for bar, make it and then kill foo</p>



<a name="245528543"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528543" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528543">(Jul 10 2021 at 04:14)</a>:</h4>
<p>not quite.. it wouldn't know to do all that...</p>



<a name="245528558"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528558" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528558">(Jul 10 2021 at 04:15)</a>:</h4>
<p>"undo" is going to just undo "2 foo"</p>



<a name="245528566"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528566" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528566">(Jul 10 2021 at 04:15)</a>:</h4>
<p>Okay, yes</p>



<a name="245528573"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528573" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528573">(Jul 10 2021 at 04:15)</a>:</h4>
<p>i.e., the kill is undone, then a second undo will undo the make (by killing bar)</p>



<a name="245528635"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528635" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528635">(Jul 10 2021 at 04:16)</a>:</h4>
<p>so in that respect, undo is not terribly different from killall ..</p>



<a name="245528707"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528707" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528707">(Jul 10 2021 at 04:18)</a>:</h4>
<p>what's action type 3 ?</p>



<a name="245528710"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528710" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528710">(Jul 10 2021 at 04:19)</a>:</h4>
<p>1=make, 2=kill, 3=?</p>



<a name="245528789"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528789" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528789">(Jul 10 2021 at 04:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245528710">said</a>:</p>
<blockquote>
<p>1=make, 2=kill, 3=?</p>
</blockquote>
<p>not decided?</p>



<a name="245528804"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528804" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528804">(Jul 10 2021 at 04:21)</a>:</h4>
<p>it could be combination cmd like g</p>



<a name="245528811"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528811" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528811">(Jul 10 2021 at 04:21)</a>:</h4>
<p>or rather a change</p>



<a name="245528814"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528814" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528814">(Jul 10 2021 at 04:21)</a>:</h4>
<p>oh, so you didn't do what we talked about earlier then...</p>



<a name="245528876"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528876" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528876">(Jul 10 2021 at 04:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245000661">said</a>:</p>
<blockquote>
<p>you can, however, easily consolidate CREATE, KILL, and MODIFY</p>
<p>using a simple convention, you can combine them into a single field. so I suggest trying that next.</p>
</blockquote>



<a name="245528893"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528893" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528893">(Jul 10 2021 at 04:23)</a>:</h4>
<p>I havent dealt with MODIFY yet in the code, but can be done in a few min</p>



<a name="245528896"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528896" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528896">(Jul 10 2021 at 04:23)</a>:</h4>
<p>okay, no worries, but lets pretend you've done that :)</p>



<a name="245528935"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245528935" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245528935">(Jul 10 2021 at 04:24)</a>:</h4>
<p>so 3=change or whatever</p>



<a name="245529044"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529044" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529044">(Jul 10 2021 at 04:26)</a>:</h4>
<p>so yeah, assuming that, how would you encode "killall foo" where bar=obj1 u obj2 - foo</p>



<a name="245529110"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529110" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529110">(Jul 10 2021 at 04:28)</a>:</h4>
<p>using 1/2/3 ...</p>



<a name="245529124"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529124" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529124">(Jul 10 2021 at 04:29)</a>:</h4>
<p>1 foo 3 comb_obj</p>



<a name="245529134"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529134" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529134">(Jul 10 2021 at 04:29)</a>:</h4>
<p>or modify more comb objects if necessary</p>



<a name="245529137"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529137" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529137">(Jul 10 2021 at 04:29)</a>:</h4>
<p>what's comb_obj?</p>



<a name="245529143"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529143" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529143">(Jul 10 2021 at 04:29)</a>:</h4>
<p>it could be any combination object which had a reference to foo before killall</p>



<a name="245529210"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529210" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529210">(Jul 10 2021 at 04:31)</a>:</h4>
<p>it's not unknown, I gave all the db objects.. the db has objects: foo bar obj1 obj2</p>



<a name="245529212"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529212" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529212">(Jul 10 2021 at 04:31)</a>:</h4>
<p>so killall foo does what?</p>



<a name="245529268"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529268" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529268">(Jul 10 2021 at 04:32)</a>:</h4>
<p>assume obj1 and obj2 are primitives</p>



<a name="245529320"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529320" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529320">(Jul 10 2021 at 04:34)</a>:</h4>
<p>obj1 u obj2 - foo<br>
i did not get this<br>
what is the relation between obj1 and bar</p>



<a name="245529327"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529327" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529327">(Jul 10 2021 at 04:34)</a>:</h4>
<p>that's the CSG recipe.  it just means bar is a combination and it references foo, so it will be modified by killall</p>



<a name="245529345"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529345" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529345">(Jul 10 2021 at 04:35)</a>:</h4>
<p>3 bar 2 foo</p>



<a name="245529387"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529387" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529387">(Jul 10 2021 at 04:36)</a>:</h4>
<p>This should be stored in the string</p>



<a name="245529544"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529544" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529544">(Jul 10 2021 at 04:42)</a>:</h4>
<p>excellent, right</p>



<a name="245529583"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529583" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529583">(Jul 10 2021 at 04:42)</a>:</h4>
<p>so you see then if you undo, that would only first undo 2 foo, which is only a partial undo of the killall command</p>



<a name="245529584"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529584" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529584">(Jul 10 2021 at 04:42)</a>:</h4>
<p>what's needed to fix that?</p>



<a name="245529590"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529590" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529590">(Jul 10 2021 at 04:42)</a>:</h4>
<p>or how would you fix that for killall? ... without introducing logic that is specific to killall</p>



<a name="245529645"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529645" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529645">(Jul 10 2021 at 04:44)</a>:</h4>
<p>Just asking, is there a plan to undo the whole action all at once in the future and have multiple actions where 1 action was just 1 command?<br>
kill all would have action string as "3 bar1 3 bar2 3 bar3 2 foo" and 1 undo would undo all this</p>



<a name="245529720"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529720" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529720">(Jul 10 2021 at 04:47)</a>:</h4>
<p>heh</p>



<a name="245529766"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529766" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529766">(Jul 10 2021 at 04:48)</a>:</h4>
<p>OF COURSE that's the plan... :)  otherwise that's not really undo support for commands like undo.</p>



<a name="245529777"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245529777" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245529777">(Jul 10 2021 at 04:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245529590">said</a>:</p>
<blockquote>
<p>or how would you fix that for killall? ... without introducing logic that is specific to killall</p>
</blockquote>
<p>but right now Idk, I'm thinking</p>



<a name="245532182"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245532182" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245532182">(Jul 10 2021 at 06:02)</a>:</h4>
<p>assuming you're still thinking about it <span class="user-mention" data-user-id="353338">@Vikram Atreya</span> ... here's a suggestion:  keep the same 1/2/3 action codes, but make 0 be a set / grouping action and let the object that follows be an attribute object (just like _GLOBAL) that contains the list of things to undo for that set.</p>



<a name="245532257"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245532257" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245532257">(Jul 10 2021 at 06:04)</a>:</h4>
<p>so in our db with four objects, maybe the undo history looks like this: "1 foo 1 obj1 1 obj2 1 obj3 1 bar 3 bar 2 obj3"</p>



<a name="245532319"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245532319" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245532319">(Jul 10 2021 at 06:06)</a>:</h4>
<p>then you run "killall foo", and the undo string in _GLOBAL looks like: "1 foo 1 obj1 1 obj2 1 obj3 1 bar 3 bar 2 obj3 0 killtree_2b4a7c20"</p>



<a name="245532332"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245532332" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245532332">(Jul 10 2021 at 06:07)</a>:</h4>
<p>and the object killtree_2b4a7c20 has an action = "3 bar 2 foo"</p>



<a name="245532393"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245532393" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245532393">(Jul 10 2021 at 06:08)</a>:</h4>
<p>so running undo pops off the 0 action, reads the object, and recursively handles undoing the entire action list in killtree_2b4a7c201</p>



<a name="245532467"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245532467" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245532467">(Jul 10 2021 at 06:10)</a>:</h4>
<p>once you get that working, make sure everything that accesses _GLOBAL directly or indirectly is going through a function, not directly accessing it from each command.</p>



<a name="245540097"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245540097" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245540097">(Jul 10 2021 at 09:25)</a>:</h4>
<p>I had to go to the bank for some work, I got the idea; Will start working on it</p>



<a name="245730755"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245730755" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245730755">(Jul 12 2021 at 18:53)</a>:</h4>
<p>Any luck?  You’ll probably have to figure out how to write an attribute object..</p>



<a name="245733649"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245733649" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245733649">(Jul 12 2021 at 19:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245730755">said</a>:</p>
<blockquote>
<p>Any luck?  You’ll probably have to figure out how to write an attribute object..</p>
</blockquote>
<p>Was a lil busy with another project submission the past 2-3 days. Will update you on progress tomorrow for sure<br>
Sorry for the delay</p>



<a name="245920272"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245920272" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245920272">(Jul 14 2021 at 05:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/245532182">said</a>:</p>
<blockquote>
<p>assuming you're still thinking about it <span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> ... here's a suggestion:  keep the same 1/2/3 action codes, but make 0 be a set / grouping action and let the object that follows be an attribute object (just like _GLOBAL) that contains the list of things to undo for that set.</p>
</blockquote>
<p>Can we have different numbers that mean a group</p>



<a name="245920285"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245920285" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245920285">(Jul 14 2021 at 05:13)</a>:</h4>
<p>For eg, 4 is the code for move, and the object passed after it contains attributes related to the command</p>



<a name="245920456"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/245920456" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#245920456">(Jul 14 2021 at 05:17)</a>:</h4>
<p>Working :</p>
<div class="codehilite"><pre><span></span><code>&gt;mv obj1.s obj2.s
//An attribute object attr_hash is created with info about old name and new name
//4 attr_hash is appended to action&#39;s value
&gt;undo
//code &quot;4&quot; is seen, it accesses attr_hash and using info in it undoes the move
</code></pre></div>



<a name="246000671"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246000671" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246000671">(Jul 14 2021 at 18:32)</a>:</h4>
<p>curious why not zero?  grouping is the first "meta" action representing a transaction, so it doesn't make sense in the middle of the numbering scheme</p>



<a name="246000941"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246000941" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246000941">(Jul 14 2021 at 18:34)</a>:</h4>
<p>consider if more actions or specializations get added (e.g., editing an object's attribute could be tracked separately more efficiently with 3 more attr_add/attr_remove/attr_change codes</p>



<a name="246016418"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246016418" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246016418">(Jul 14 2021 at 20:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/246000671">said</a>:</p>
<blockquote>
<p>curious why not zero?  grouping is the first "meta" action representing a transaction, so it doesn't make sense in the middle of the numbering scheme</p>
</blockquote>
<p>As I was implementing it, I realize 0 is a better choice. I had this doubt, would it be better if we could specify what command inside the attribute object, for eg, make the attr_obj have <br>
command: move<br>
old_name: obj1.s<br>
new_name: obj2.s<br>
or we only want to have a string like "2 obj1.s 1 obj2.s"</p>



<a name="246016529"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246016529" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246016529">(Jul 14 2021 at 20:36)</a>:</h4>
<p>If we specify the command, it would make the logic more command-specific but will also be better in terms of space complexity</p>



<a name="246017788"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246017788" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246017788">(Jul 14 2021 at 20:45)</a>:</h4>
<p>Also what is the best way to generate random names for these attribute objects, is there a built-in function?</p>



<a name="246136460"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246136460" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246136460">(Jul 15 2021 at 18:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/246016418">said</a>:</p>
<blockquote>
<p>. . . specify what command inside the attribute object, for eg, make the attr_obj have <br>
command: move<br>
old_name: obj1.s<br>
new_name: obj2.s</p>
</blockquote>
<p>I have implemented this</p>



<a name="246136717"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246136717" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246136717">(Jul 15 2021 at 18:33)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> is this method fine or should I implement it like action value sequence (1 obj1.s 2 obj2.s)</p>



<a name="246311014"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246311014" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246311014">(Jul 17 2021 at 07:35)</a>:</h4>
<p>Well, it greatly depends.  I mean in general it doesn't (yet) matter ... but it will.</p>



<a name="246311075"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246311075" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246311075">(Jul 17 2021 at 07:37)</a>:</h4>
<p><span class="user-mention" data-user-id="353338">@Vikram Atreya</span> I would think you want to use the exact same parsing/handling logic that you have/had as this is the basis for recursive transactions.</p>



<a name="246311095"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246311095" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246311095">(Jul 17 2021 at 07:37)</a>:</h4>
<p>You're going to want to handle actions within actions within actions that need to be undone and the logic for handling that needs to be as simple as possible in order to be understandable, maintainable, particularly for others.</p>



<a name="246311143"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246311143" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246311143">(Jul 17 2021 at 07:39)</a>:</h4>
<p>Let me ask you, though, what made you want to not do "2 obj1.s 1 obj2.s" ?</p>



<a name="246329563"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246329563" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246329563">(Jul 17 2021 at 15:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/246311143">said</a>:</p>
<blockquote>
<p>Let me ask you, though, what made you want to not do "2 obj1.s 1 obj2.s" ?</p>
</blockquote>
<p>No reason, 2 obj1.s 1obj2.s could be better as max memory over time would be lesser</p>



<a name="246329678"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246329678" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246329678">(Jul 17 2021 at 15:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/246311075">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> I would think you want to use the exact same parsing/handling logic that you have/had as this is the basis for recursive transactions.</p>
</blockquote>
<p>Understood, will make this change</p>



<a name="246388496"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246388496" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246388496">(Jul 18 2021 at 17:08)</a>:</h4>
<p>Part of the reason for making it it same is so that the parsing logic is exactly the same as was used on _GLOBAL, so there's no duplicate code</p>



<a name="246388522"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246388522" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246388522">(Jul 18 2021 at 17:09)</a>:</h4>
<p>Keep in mind that the string-based format is not the likely end-state.  That's just to keep it simple for now.  We'll want to change that to binary later.</p>



<a name="246388579"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246388579" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246388579">(Jul 18 2021 at 17:10)</a>:</h4>
<p>Binary begs for a different storage container or binary attributes, which are things that will require testing and rethinking, so they're deferred until later.</p>



<a name="246388591"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246388591" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246388591">(Jul 18 2021 at 17:11)</a>:</h4>
<p>(We have binary objects, but that code doesn't have any examples and needs to be enabled/tested.)</p>



<a name="246388599"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246388599" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246388599">(Jul 18 2021 at 17:11)</a>:</h4>
<p>I'm trying to finish this recursive logic by today (with strings)</p>



<a name="246388609"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246388609" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246388609">(Jul 18 2021 at 17:11)</a>:</h4>
<p>The current string implementation is also flawed if an object name has spaces or quotes in it, but that's okay (for now).</p>



<a name="246388619"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246388619" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246388619">(Jul 18 2021 at 17:11)</a>:</h4>
<p>binary will fix that later.</p>



<a name="246390425"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246390425" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246390425">(Jul 18 2021 at 17:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/246017788">said</a>:</p>
<blockquote>
<p>Also what is the best way to generate random names for these attribute objects, is there a built-in function?</p>
</blockquote>
<p><span class="user-mention" data-user-id="102902">@Sean</span> ping?</p>



<a name="246395227"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246395227" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246395227">(Jul 18 2021 at 19:53)</a>:</h4>
<p>just about any name can work for now, maybe try using ged_make_name()?  Could add a -r option if you really want something random.  It generates a sequential name.</p>



<a name="246395228"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246395228" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246395228">(Jul 18 2021 at 19:53)</a>:</h4>
<p>so you could have it make something like .undo.###</p>



<a name="246490408"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246490408" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246490408">(Jul 19 2021 at 18:05)</a>:</h4>
<p>Im refactoring a lot of code so that there very less redundant code, so it is taking some time. I will mostly complete the recursive function for executing actions today.</p>



<a name="246549212"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246549212" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246549212">(Jul 20 2021 at 06:25)</a>:</h4>
<p><span class="user-mention" data-user-id="353338">@Vikram Atreya</span> that's great, keep it up.  Be sure to post updated code so I can check it out.</p>



<a name="246549311"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246549311" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246549311">(Jul 20 2021 at 06:27)</a>:</h4>
<p>On that note, I think we should also code deep and address that fundamental issue supporting objects with special spaces in the name.  I suggest you introduce a separator, since that's pretty much the simplest thing you can do right now, at least that I can think of, to fix it.</p>



<a name="246549739"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246549739" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246549739">(Jul 20 2021 at 06:35)</a>:</h4>
<p>I think you still want "int[space]name" pairings so you can assume the number is the code, followed by whitespace, followed by the object name.  I suggest something like '/' or ';' for the separator since they're problematic in names anyways.</p>



<a name="246549771"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246549771" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246549771">(Jul 20 2021 at 06:36)</a>:</h4>
<p>You will want to make sure the object names you're writing do not have that separator in them (and if they do, just print a message and abort the undo recording).</p>



<a name="246549830"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246549830" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246549830">(Jul 20 2021 at 06:37)</a>:</h4>
<p>If you don't know how to tokenize over a separator, it's something like this:</p>
<div class="codehilite" data-code-language="BBCode"><pre><span></span><code>#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

int main(int ac, char *av[]) {
  char *str = strdup("1 foo;2 bar;0 asjdsdfjal");
  char *token;
  while ((token = strsep(&amp;str, ";")) != NULL) {
    printf("token is [%s]\n", token);
  }
  return 0;
}
</code></pre></div>



<a name="246562196"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246562196" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246562196">(Jul 20 2021 at 09:23)</a>:</h4>
<p>I will make a PR soon.</p>



<a name="246647203"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246647203" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246647203">(Jul 20 2021 at 20:46)</a>:</h4>
<p>I have implemented the recursive logic to execute "0 attr_obj"</p>



<a name="246647229"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246647229" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246647229">(Jul 20 2021 at 20:46)</a>:</h4>
<p>So undo works for move now using the new logic</p>



<a name="246647326"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246647326" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246647326">(Jul 20 2021 at 20:47)</a>:</h4>
<p>I have written functions to reduce redundant code, but still haven't replaced it at all places <br>
and there's a lot of useless code commented across files, ill remove all that and make a PR tomorrow</p>



<a name="246774433"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246774433" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246774433">(Jul 21 2021 at 20:31)</a>:</h4>
<p>Made a patch</p>



<a name="246776666"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246776666" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246776666">(Jul 21 2021 at 20:50)</a>:</h4>
<p>I havent yet randomized the names of the attribute objects<br>
Im also planning on making modify into a grouped cmd using 0, instead of having 3</p>



<a name="246808645"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246808645" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246808645">(Jul 22 2021 at 04:49)</a>:</h4>
<p>Not sure I follow what you mean there..  You talking abou the modify "code", switching it from 3 to instead being the same as grouping, i.e., 0?</p>



<a name="246808653"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246808653" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246808653">(Jul 22 2021 at 04:49)</a>:</h4>
<p>Not sure I see how that'd work.</p>



<a name="246808821"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246808821" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246808821">(Jul 22 2021 at 04:54)</a>:</h4>
<p>Modify is nothing but kill the present object and recover old object</p>



<a name="246808864"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246808864" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246808864">(Jul 22 2021 at 04:54)</a>:</h4>
<p>So cant it be grouped as a kill+make</p>



<a name="246818792"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246818792" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246818792">(Jul 22 2021 at 08:00)</a>:</h4>
<p>I suppose that's true, just as how a rename operation can also be thought of as a make+kill, but handling it specifically would be a likely optimization to reduce memory churn.</p>



<a name="246818817"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246818817" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246818817">(Jul 22 2021 at 08:01)</a>:</h4>
<p>Welcome to do it however you like but I'd suggest saving your time if it works.</p>



<a name="246819175"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/246819175" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#246819175">(Jul 22 2021 at 08:06)</a>:</h4>
<p>Next I will focus on giving random names to attr objs and changing the code to store all backup objects as binary objects<br>
rn only combination backup objects are stored as binay objects</p>



<a name="247060319"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247060319" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247060319">(Jul 24 2021 at 07:01)</a>:</h4>
<p><span class="user-mention" data-user-id="353338">@Vikram Atreya</span> did you finish all the other parts?  that is, there is just one set of functions handling the storing/parsing of undo information from an attribute field (both _GLOBAL and stand-alone objects), attribute-only objects are working for groupings (case 0), code is refactored for all the commands from before, and undo is working with the recursive stores?</p>



<a name="247060708"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247060708" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247060708">(Jul 24 2021 at 07:12)</a>:</h4>
<p>if so, next step I think would help greatly will be some basic unit tests that succeed and fail.  see src/libged/tests/test_tops.c for an example, but you'll want to make it call ged_undo() in various ways.  e.g., undo with no db, undo with db but no prior commands, undo after make, N undos after N makes, undo after unsupported command, etc</p>



<a name="247062588"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247062588" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247062588">(Jul 24 2021 at 08:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/247060319">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> did you finish all the other parts?  that is, there is just one set of functions handling the storing/parsing of undo information from an attribute field (both _GLOBAL and stand-alone objects), attribute-only objects are working for groupings (case 0), code is refactored for all the commands from before, and undo is working with the recursive stores?</p>
</blockquote>
<p>At the top of my head, I feel all of this has been done, but I have still left some code from the previous logic just in case, the idea was switched again. I will clean that up first and check for all the things you have mentioned.</p>



<a name="247062589"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247062589" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247062589">(Jul 24 2021 at 08:03)</a>:</h4>
<p>I will get back to you tonight, once Im sure</p>



<a name="247094469"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247094469" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247094469">(Jul 24 2021 at 21:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/247060319">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> did you finish all the other parts?  that is, there is just one set of functions handling the storing/parsing of undo information from an attribute field (both _GLOBAL and stand-alone objects), attribute-only objects are working for groupings (case 0), code is refactored for all the commands from before, and undo is working with the recursive stores?</p>
</blockquote>
<p>Yes, all of this is done. There is some small bug in the code, after I changed it to store binary objects for all killed objects. Solving that right now</p>



<a name="247120388"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247120388" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247120388">(Jul 25 2021 at 10:41)</a>:</h4>
<p>when I store binary objects and try to recover them, I need to give it flags (SOLID/ COMB/ REGION). Can I found out what the object is from its external representation?</p>



<a name="247454199"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247454199" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247454199">(Jul 28 2021 at 12:54)</a>:</h4>
<p><span class="user-mention" data-user-id="353338">@Vikram Atreya</span> it depends on what you mean by external representation.  if you serialized to a bu_external on-disk representation, then you'd get the type by cracking the header (getting a raw internal5).</p>



<a name="247454425"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247454425" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247454425">(Jul 28 2021 at 12:56)</a>:</h4>
<p>I'm a little confused as to what you changed though -- kill shouldn't need to encode anything I'd think.. having it just store the object that was deleted seems ideal so that recovery is as simple as possibly renaming the object or just changing an attribute or similar.</p>



<a name="247454558"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247454558" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247454558">(Jul 28 2021 at 12:57)</a>:</h4>
<p>what I thought you were working on was a way to story "case 0" groupings.  how to store their string into an object as there is no existing object to hang that information off of.  I suggested an attribute-only object, which is a special non-geometric object (_GLOBAL is an example... it's an object, but it's not geometry).</p>



<a name="247480681"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247480681" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247480681">(Jul 28 2021 at 16:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/247454558">said</a>:</p>
<blockquote>
<p>what I thought you were working on was a way to story "case 0" groupings.  how to store their string into an object as there is no existing object to hang that information off of.  I suggested an attribute-only object, which is a special non-geometric object (_GLOBAL is an example... it's an object, but it's not geometry).</p>
</blockquote>
<p>Right now, I am using attribute objects only</p>



<a name="247480741"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247480741" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247480741">(Jul 28 2021 at 16:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/247454425">said</a>:</p>
<blockquote>
<p>I'm a little confused as to what you changed though -- kill shouldn't need to encode anything I'd think.. having it just store the object that was deleted seems ideal so that recovery is as simple as possibly renaming the object or just changing an attribute or similar.</p>
</blockquote>
<p>this was regarding to combination objects, they were planned to be stored as binary objects and then recovered.</p>



<a name="247480764"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247480764" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247480764">(Jul 28 2021 at 16:19)</a>:</h4>
<p>I thought of generalizing it to all objects</p>



<a name="247629602"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247629602" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247629602">(Jul 29 2021 at 19:27)</a>:</h4>
<p>I have written a few tests for make, kill and move</p>



<a name="247629646"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247629646" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247629646">(Jul 29 2021 at 19:27)</a>:</h4>
<p>I will also write tests for arb, mirror, etc tomorrow</p>



<a name="247740222"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247740222" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247740222">(Jul 30 2021 at 17:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="353338">Vikram Atreya</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/247480764">said</a>:</p>
<blockquote>
<p>I thought of generalizing it to all objects</p>
</blockquote>
<p>That does sound good if it really can be generalized so there's one code for all objects, but probably not a problem if combinations are handled separately (unless that means other objects will then also need to be handled separately like dsp or extrude or other objects that refer to other objects by name).</p>



<a name="247740250"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247740250" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247740250">(Jul 30 2021 at 17:46)</a>:</h4>
<p>So if you can generalize it, great; but if not, that's probably okay too.</p>



<a name="247745093"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247745093" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247745093">(Jul 30 2021 at 18:27)</a>:</h4>
<p>Yeah i'm generlaizing it</p>



<a name="247745156"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247745156" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247745156">(Jul 30 2021 at 18:28)</a>:</h4>
<p>Also what is the target that you are expecting before the end of the coding period?</p>



<a name="247778814"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247778814" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247778814">(Jul 31 2021 at 01:45)</a>:</h4>
<p>er, undo working for all commands, no? :)</p>



<a name="247787001"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247787001" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247787001">(Jul 31 2021 at 05:26)</a>:</h4>
<p>All 300+ commands?</p>



<a name="247872980"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247872980" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247872980">(Aug 01 2021 at 19:20)</a>:</h4>
<p>Im right now focussing on killall, and a lot of simple commands can be dealt with quickly. but dbconcat might be a big challenge</p>



<a name="247957418"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247957418" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247957418">(Aug 02 2021 at 19:08)</a>:</h4>
<p>That's why it's important to take this one step at a time.  Once a half dozen commands are handled properly, the remaining 294 should actually be really easy (or perhaps even automatic for all but a few).</p>



<a name="247958147"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247958147" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247958147">(Aug 02 2021 at 19:13)</a>:</h4>
<p>So right now i should proceed with killall?</p>



<a name="247958161"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/247958161" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#247958161">(Aug 02 2021 at 19:13)</a>:</h4>
<p>I will try to finish it by tomorrow</p>



<a name="248199539"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/248199539" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#248199539">(Aug 03 2021 at 09:28)</a>:</h4>
<p>For killall, I can have code within killall.c also right?<br>
Since only having it in the wrapper will not suffice?</p>



<a name="248227157"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/248227157" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#248227157">(Aug 03 2021 at 14:19)</a>:</h4>
<p>ideally killall and the other commands are changed to emit/record the actions taken, so they can be undone</p>



<a name="248230804"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/248230804" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#248230804">(Aug 03 2021 at 14:45)</a>:</h4>
<p>killall should be a chain of deletes that recurses dwon the tree, wouldn't just saving the deletes to journal be adequate? or does it need to be marked to go back several? (hehe, killall, the great linux vs unix litmus)</p>



<a name="248237443"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/248237443" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#248237443">(Aug 03 2021 at 15:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/111975-Google-Summer.20of.20Code/topic/UNDO/near/248227157">said</a>:</p>
<blockquote>
<p>ideally killall and the other commands are changed to emit/record the actions taken, so they can be undone</p>
</blockquote>
<p>Yes, so we write the changes to our action string, the code writing that event will be inside ged_killall_core</p>



<a name="248385598"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/248385598" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#248385598">(Aug 04 2021 at 18:03)</a>:</h4>
<p>killall is proving to be slightly tough, imnt getting the idea of exactly how ill do it. is there anything else I could focus on for sometime? <span class="user-mention" data-user-id="102902">@Sean</span></p>



<a name="250230554"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/250230554" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#250230554">(Aug 21 2021 at 18:22)</a>:</h4>
<p>For the final submission can I write the blog in brlcad's website?</p>



<a name="250233912"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/250233912" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#250233912">(Aug 21 2021 at 19:48)</a>:</h4>
<p>Absolutely <span class="user-mention" data-user-id="353338">@Vikram Atreya</span>.  We don't have a blog, but can post it as a page or put it in the wiki and we can showcase it on fb and our mailing list.</p>



<a name="250234640"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/250234640" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#250234640">(Aug 21 2021 at 20:06)</a>:</h4>
<p>Sure, i will make a page on the wiki</p>



<a name="250234645"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/250234645" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#250234645">(Aug 21 2021 at 20:06)</a>:</h4>
<p>Is there any example from previous years?</p>



<a name="250234654"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/250234654" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#250234654">(Aug 21 2021 at 20:06)</a>:</h4>
<p>the gsoc archive page seems to be down</p>



<a name="250337504"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/250337504" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#250337504">(Aug 23 2021 at 11:18)</a>:</h4>
<p><a href="https://brlcad.org/wiki/User:Vikram_Atreya/GSoC21/Project_Report">https://brlcad.org/wiki/User:Vikram_Atreya/GSoC21/Project_Report</a><br>
This is the link I have submitted for final evaluations, do suggest changes if any</p>



<a name="250443850"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/250443850" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#250443850">(Aug 24 2021 at 05:27)</a>:</h4>
<p>I think that looks pretty good.  Only suggestion would be to add a section with your thoughts on what's needed next, and what's needed to "finish" the effort -- for some definition of complete.</p>



<a name="250525090"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/111975-Google%20Summer%20of%20Code/topic/UNDO/near/250525090" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vikram Atreya <a href="https://brl-cad.github.io/zulip_archive/stream/111975-Google-Summer-of-Code/topic/UNDO.html#250525090">(Aug 24 2021 at 18:13)</a>:</h4>
<p>Sure will add it</p>



<hr><p>Last updated: Jun 22 2025 at 01:01 UTC</p>
</html>