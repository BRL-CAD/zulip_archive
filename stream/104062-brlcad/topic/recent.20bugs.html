<html>
<head><meta charset="utf-8"><title>recent bugs · brlcad · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/index.html">brlcad</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html">recent bugs</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="204511466"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/204511466" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#204511466">(Jul 21 2020 at 04:27)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> did you happen to look at "Primitive select (mouse behavior) causes drawn solids to disappear instead of being highlighted. When hitting escape (return to normal mouse behavior) all solids reappear." ?</p>



<a name="204536582"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/204536582" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#204536582">(Jul 21 2020 at 11:33)</a>:</h4>
<p>That rings a bell with a change Nick made a while back - I'll have to check the history, something about transparency support in MGED.  Don't know if it was that specifically, but there was some sort of drawing problem...</p>



<a name="204600612"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/204600612" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#204600612">(Jul 21 2020 at 20:42)</a>:</h4>
<p>yeah, I thought it was nick's change, but I couldn't confirm it and there was no NEWS entry.  probably a set of commits deep down in my inbox I haven't gotten to reviewing yet.</p>



<a name="205982956"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/205982956" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#205982956">(Aug 05 2020 at 02:46)</a>:</h4>
<p>@<code>starseeker</code>: sorry I should have tested the process I/O change more carefully.</p>



<a name="205983052"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/205983052" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#205983052">(Aug 05 2020 at 02:49)</a>:</h4>
<p>that is a little unsettling that it broke rt in archer on windows... do you have any more info on why?  presumably fileno() is not returning 0/1/2 for stdin/err/out, which should imply something else is seriously wrong.</p>



<a name="205983853"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/205983853" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#205983853">(Aug 05 2020 at 03:03)</a>:</h4>
<p>it is mildly concerning that the api is assuming 0/1/2 are in/err/out.  not just being pedantic.  it's going to be terribly difficult to debug out of context, particularly any code that happens to do perfectly normal pipe operations on 0/1/2.  likely result in i/o just not working right mysteriously, things failing inconsistently.</p>



<a name="205983923"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/205983923" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#205983923">(Aug 05 2020 at 03:04)</a>:</h4>
<p>I wouldn't be surprised if the rt-archer breakage wasn't a reverse assumption elsewhere in the code...</p>



<a name="205984163"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/205984163" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#205984163">(Aug 05 2020 at 03:10)</a>:</h4>
<p>on a mildly related note to your commit comment yesterday, how about just jumping to what we talked about last year -- using capnproto for commands to talk back?  the protocol could be just simple err/out log messages for now, set up and handled internal to the bu_process api.   then you'd only need on descriptor (e.g., stdout) which could transmit both out+err log messages from the process.</p>



<a name="206017100"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206017100" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206017100">(Aug 05 2020 at 12:43)</a>:</h4>
<p>When I spot checked, fileno(stdin) returned -2 on Windows.</p>



<a name="206017190"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206017190" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206017190">(Aug 05 2020 at 12:44)</a>:</h4>
<p>I switched to using an enum to specify which channel we're intending to use, so hopefully that will alleviate the issue?</p>



<a name="206017361"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206017361" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206017361">(Aug 05 2020 at 12:46)</a>:</h4>
<p>The rt-archer breakage (when I debugged) was the code testing fileno on Windows never getting an expected value for any of the three inputs (stdin/stdout/stderr) and simply giving up - that put us in an anomalous position because to archer it looked like the subprocess wasn't returning any info at all on any valid channel.</p>



<a name="206017450"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206017450" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206017450">(Aug 05 2020 at 12:47)</a>:</h4>
<p>I'd like to try the capnproto approach, but I'm not sure how easy/hard that will be to get working - it's not an area of programming I'm terribly familiar with, so there'd likely be a significant spin-up cost.</p>



<a name="206017740"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206017740" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206017740">(Aug 05 2020 at 12:50)</a>:</h4>
<p>I'm trying to excise bu_list from as much as possible of the libged drawing layer, both to make it easier to understand what the various pieces are doing and as a step towards being able to more easily use the bu_magic mechanism to validate things getting passed around as void *.  That leads of course to the vlist and solid containers... another learning experience, but one I can no longer avoid if I'm going to really be able to following what libtclcad/archer are doing about drawing.</p>



<a name="206017842"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206017842" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206017842">(Aug 05 2020 at 12:51)</a>:</h4>
<p>The gsh bits hooking up callbacks were simply trying to set up so I could get a simpler-to-debug (i.e. non-Tcl) method of executing subprocess commands for testing.</p>



<a name="206019252"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206019252" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206019252">(Aug 05 2020 at 13:05)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I'm sure you've got quite a bit more expertise than I do, so I'd appreciate any insights, but what it's looking like to me so far:</p>
<ol>
<li>
<p>capnproto will allow us to serialize/de-serialize information being sent over the stdin/stdout/stderr channels, allowing for richer communication, but it doesn't itself solve the Inter-Process Communication problem.</p>
</li>
<li>
<p>Since we've done well over the years with stdin/stdout/stderr piped IPC (which is what allows the MGED/rt connections to work cross platform) that seems like a good way to keep going, with capnproto being used to structure the I/O so we can easily/safely move much more than we currently do over those channels (right now the most complex communication I know of is rtcheck, which uses stdout and stderr for text/vlist drawing information and simply assumes what is coming back over each channel.)</p>
</li>
<li>
<p>If we're going to use stdin/stdout/stderr, we don't actually want the parent process to do what I've currently got gsh doing, which is to periodically check in a thread whether any new input has arrived for processing.  Rather, we would want to do an event based setup where action is triggered when the subprocess sends something down the pipe.  I went with the simplest thing that got what I needed working for gsh, but that's not what we want/need to do long term.</p>
</li>
<li>
<p>Setting up events based on activity in the I/O channels appears to be very very platform specific.  I've been hunting around trying to find a small encapsulation of the necessary logic, and so far have come up pretty dry.</p>
</li>
</ol>



<a name="206020581"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206020581" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206020581">(Aug 05 2020 at 13:18)</a>:</h4>
<p>ASIO (<a href="https://think-async.com/Asio/asio-1.16.1/doc/asio/overview.html">https://think-async.com/Asio/asio-1.16.1/doc/asio/overview.html</a>) has support for file descriptors and HANDLEs, but doesn't (so far as I can tell) wrap both mechanisms under one API we could use.  (That by the way also appears to be what happens in Tcl, which is why we have the file-descriptor/Tcl_Channel ifdef for the tclcad I/O callbacks.  I tried once to consolidate that into just Tcl_Channel, but it didn't work on Linux...)</p>
<p>Chromium's IPC solves a similar problem (<a href="https://www.chromium.org/developers/design-documents/inter-process-communication">https://www.chromium.org/developers/design-documents/inter-process-communication</a>) but it's not stand-alone and it's not clear to me if it would adapt easily to what we need.</p>



<a name="206020779"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206020779" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206020779">(Aug 05 2020 at 13:20)</a>:</h4>
<p><a href="https://source.chromium.org/chromium/chromium/src/+/master:ipc/">https://source.chromium.org/chromium/chromium/src/+/master:ipc/</a></p>



<a name="206021266"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206021266" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206021266">(Aug 05 2020 at 13:24)</a>:</h4>
<p>In some ways I'm actually tempted to see what it would take to extract the Tcl bits for defining these particular events and I/O management into libbu - it's proven to work, and so far I've not come across any simple, stand-alone drop-in alternative...</p>



<a name="206023575"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206023575" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206023575">(Aug 05 2020 at 13:47)</a>:</h4>
<p>Hmm...  looking again I see the capnproto code does seem to have IPC logic, but I can't tell if they can work without the socket APIs...</p>



<a name="206024736"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206024736" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206024736">(Aug 05 2020 at 13:57)</a>:</h4>
<p>Ah, there it is... looks like we use pipe if we go with "kj::newOneWayPipe()"</p>



<a name="206024879"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206024879" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206024879">(Aug 05 2020 at 13:58)</a>:</h4>
<p>/me 's brain hurts when bending it in purely C++ directions... oof.</p>



<a name="206025122"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206025122" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206025122">(Aug 05 2020 at 14:00)</a>:</h4>
<p>OK, so the question is - can gsh be made to work using capnproto for IPC, events and content?</p>



<a name="206025415"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206025415" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206025415">(Aug 05 2020 at 14:02)</a>:</h4>
<p>Or does this need to be wired in at the libbu subprocess management level for things like reading and writing?</p>



<a name="206026331"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206026331" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206026331">(Aug 05 2020 at 14:10)</a>:</h4>
<p>We need to be able to allow the Tcl_Even t loop to manage the callback invocation for MGED/Archer to allow current behavior...</p>



<a name="206028379"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206028379" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206028379">(Aug 05 2020 at 14:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/206017100">said</a>:</p>
<blockquote>
<p>When I spot checked, fileno(stdin) returned -2 on Windows.</p>
</blockquote>
<p>That's interesting.  It makes sense on Window because there isn't a standard input descriptor set up by default for GUI apps on Windows unless it's a console application.</p>



<a name="206028567"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206028567" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206028567">(Aug 05 2020 at 14:29)</a>:</h4>
<p>That probably means something else opened up an input pipe -- and that code wherever it is didn't register it as stdin.  Probably is the same bug for out/err too.</p>



<a name="206029837"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206029837" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206029837">(Aug 05 2020 at 14:39)</a>:</h4>
<p>you're right that capnproto doesn't solve IPC by itself because it turns it into an RPC solution.  I actually wouldn't recommend going down that route until you're ready to abandon IPC because of the obvious performance implications.  from a technique perspective, though, RPC is quite a bit simpler than dealing with cross-platform IPC.</p>



<a name="206030099"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206030099" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206030099">(Aug 05 2020 at 14:41)</a>:</h4>
<p>alternative to capn might be worth trying instead is zeromq -- it supports in-process (inter-thread communication) and inter-process (IPC, ports) communication in addition to capn-style benefits for the data being exchanged.</p>



<a name="206031418"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206031418" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206031418">(Aug 05 2020 at 14:51)</a>:</h4>
<p>Used asio a while back and wouldn't recommend it -- it's really meant for async client/server communication (e.g., pkg alternative) aside from it pulling in the boost ecosystem.</p>



<a name="206031889"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206031889" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206031889">(Aug 05 2020 at 14:55)</a>:</h4>
<p>Boost.interprocess (<a href="https://www.boost.org/doc/libs/1_63_0/doc/html/interprocess.html">https://www.boost.org/doc/libs/1_63_0/doc/html/interprocess.html</a>) would be the one that does what you're needing for ports, but I'd still try 10 other things before pulling in boost myself... :)</p>



<a name="206032443"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206032443" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206032443">(Aug 05 2020 at 14:59)</a>:</h4>
<p>there are a bunch of ways to do IPC and lots have wrapped it, so I'm sure you can find one that works.  some of them may just rely on a particular IPC method and that'll require changing code a little bit.  for example, this one (<a href="https://github.com/jarikomppa/ipc/">https://github.com/jarikomppa/ipc/</a>) uses shared memory.  so instead of using fwrite, calls get changed to sprintf since shared memory works like a malloc'd buffer with both sides of the pipe able to read/write that memory.</p>



<a name="206034757"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206034757" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206034757">(Aug 05 2020 at 15:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/206021266">said</a>:</p>
<blockquote>
<p>In some ways I'm actually tempted to see what it would take to extract the Tcl bits for defining these particular events and I/O management into libbu - it's proven to work, and so far I've not come across any simple, stand-alone drop-in alternative...</p>
</blockquote>
<p>I'd be cool with that!  It really isn't much code that we're talking about.  Only issue would be that  it's essentially the same problem of consolidating to Tcl_Channel.  From what I saw in the code, there's no reason it shouldn't work on linux, so there's almost certainly some other mistaken assumption going on somewhere in the code and until that assumption is found and eliminated, none of these solutions are going to work.</p>



<a name="206035065"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206035065" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206035065">(Aug 05 2020 at 15:17)</a>:</h4>
<p>It's very much related to the concern I have with using 0/1/2 integers and assuming they are a particular port.  I don't know if it's related to this specific problem, but this is the kind of problem that causes.  Really hard to debug without unwinding the port from creation to destruction on both sides of  the port.</p>



<a name="206035335"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206035335" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206035335">(Aug 05 2020 at 15:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/206025122">said</a>:</p>
<blockquote>
<p>OK, so the question is - can gsh be made to work using capnproto for IPC, events and content?</p>
</blockquote>
<p>No, it'd be the other way around -- you would adapt gsh to capnproto rpc approach instead of events and ipc.  It'd look different, but it can work (just not as performant as IPC).</p>



<a name="206035684"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206035684" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206035684">(Aug 05 2020 at 15:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/206025415">said</a>:</p>
<blockquote>
<p>Or does this need to be wired in at the libbu subprocess management level for things like reading and writing?</p>
</blockquote>
<p>and when I say "adapt gsh" that doesn't preclude this belonging in libbu.  libbu would ideally provide a call like subprocess_write and subprocess_read or something similar to abstract from the method underneath.  The benefit of file descriptors is trying to avoid needing to do that so you can just use read/write or sprintf/sscanf.</p>



<a name="206036100"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206036100" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206036100">(Aug 05 2020 at 15:24)</a>:</h4>
<p>FWIW, there is a stand-alone ASIO that doesn't need boost...</p>



<a name="206036392"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206036392" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206036392">(Aug 05 2020 at 15:26)</a>:</h4>
<p>The Tcl refactor is on some ways the most incremental change, assuming it doesn't turn gnarly - even if we eventually opt for another solution, that has the advantage of knowing exactly what it should do if the migration is successful (since it's already working in place.)</p>



<a name="206036978"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206036978" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206036978">(Aug 05 2020 at 15:30)</a>:</h4>
<p>This is probably an embarrassing question, but what are the implications of abandoning IPC for RPC?  I thought RPC was just one form of IPC?</p>



<a name="206037464"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206037464" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206037464">(Aug 05 2020 at 15:34)</a>:</h4>
<p>So I know that's a lot and probably talking through too many issues to make sense of it all.  In summary, I would recommend 1) trying again to consolidate to Tcl_Channel again as whatever is making that not work likely will affect other solutions until the assumption is inadvertently ripped out, 2) try one of the many wrapped options like shared memory or named pipes.. starting with zeromq or a simpler header-only one, and finally 3) switching to RPC for libged with Capnproto after you've abandoned hope on IPC. ;)</p>



<a name="206037837"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206037837" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206037837">(Aug 05 2020 at 15:36)</a>:</h4>
<p>/me nods - the Tcl_Channel thing bothered me last time, and if I take it far enough apart to digest it for extraction I should be able to run it to ground one way or the other.</p>



<a name="206037888"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206037888" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206037888">(Aug 05 2020 at 15:37)</a>:</h4>
<p>Not to mention squashing another WIN32 ifdef... those are getting hard to remove these days...</p>



<a name="206038082"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206038082" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206038082">(Aug 05 2020 at 15:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/206036978">said</a>:</p>
<blockquote>
<p>This is probably an embarrassing question, but what are the implications of abandoning IPC for RPC?  I thought RPC was just one form of IPC?</p>
</blockquote>
<p>Only embarrassing questions are the ones not asked.  IPC uses a specific operating system method for allowing two processes to exchange data.  typical examples are files (and file descriptors), named pipes, shared memory, message passing, and sockets.   each method has significant implications on how you set up communication and how data is exchanged which is to say it's not generally possible to create a generic IPC interface that uses different methods.</p>



<a name="206038147"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206038147" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206038147">(Aug 05 2020 at 15:39)</a>:</h4>
<p>you typically find one method that is implemented on different platforms similarly wrapped  by a library</p>



<a name="206038278"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206038278" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206038278">(Aug 05 2020 at 15:40)</a>:</h4>
<p>RPC for example is typically associated with the message passing form of IPC and message passing typically relies on the socket method of IPC data exchange</p>



<a name="206038331"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206038331" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206038331">(Aug 05 2020 at 15:41)</a>:</h4>
<p>MPI is the elephant example of RPC/IPC</p>



<a name="206038525"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206038525" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206038525">(Aug 05 2020 at 15:42)</a>:</h4>
<p>So capnproto's RPC API won't guarantee a specific method of communication (say, pipes vs. sockets) even if it sometimes uses pipes under the hood?</p>



<a name="206038559"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206038559" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206038559">(Aug 05 2020 at 15:43)</a>:</h4>
<p>RPC is an IPC method, but it's more strongly associated with sockets and that's what I was referring to when I mentioned "abandoning IPC" .. which really was"abandon file/pipe method of IPC"</p>



<a name="206038704"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206038704" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206038704">(Aug 05 2020 at 15:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/206038525">said</a>:</p>
<blockquote>
<p>So capnproto's RPC API won't guarantee a specific method of communication (say, pipes vs. sockets) even if it sometimes uses pipes under the hood?</p>
</blockquote>
<p>I don't know for sure, but when I was reading their docs, I didn't see any support for file/pipe-based methods, only socket-based methods</p>



<a name="206038718"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206038718" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206038718">(Aug 05 2020 at 15:44)</a>:</h4>
<p><a href="https://github.com/capnproto/capnproto/blob/master/c%2B%2B/src/kj/async-io-unix.c%2B%2B#L1700">https://github.com/capnproto/capnproto/blob/master/c%2B%2B/src/kj/async-io-unix.c%2B%2B#L1700</a></p>



<a name="206038755"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206038755" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206038755">(Aug 05 2020 at 15:44)</a>:</h4>
<p>whereas zeromq explicitly calls them all out</p>



<a name="206038873"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206038873" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206038873">(Aug 05 2020 at 15:45)</a>:</h4>
<p>yeah, that code would lead me to believe capnproto may also support pipes</p>



<a name="206038905"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206038905" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206038905">(Aug 05 2020 at 15:45)</a>:</h4>
<p>I just didn't see any examples (didn't look very hard either though)</p>



<a name="206039099"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206039099" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206039099">(Aug 05 2020 at 15:47)</a>:</h4>
<p>(maybe?)  <a href="https://github.com/capnproto/capnproto/blob/master/c%2B%2B/src/kj/async-io-test.c%2B%2B#L311">https://github.com/capnproto/capnproto/blob/master/c%2B%2B/src/kj/async-io-test.c%2B%2B#L311</a></p>



<a name="206039128"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206039128" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206039128">(Aug 05 2020 at 15:47)</a>:</h4>
<p>again, though, nearly every method is going to require adopting a data exchange method, whether that's reading/writing on pipes/files (this is your closest fit currently) or reading/writing on sockets (this is typical in client+server apps) or reading/writing buffers of memory</p>



<a name="206039148"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206039148" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206039148">(Aug 05 2020 at 15:47)</a>:</h4>
<p>The capnproto docs leave a bit to be desired, IMHO... at least for newbies</p>



<a name="206039254"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206039254" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206039254">(Aug 05 2020 at 15:48)</a>:</h4>
<p>/me nods</p>



<a name="206039402"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206039402" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206039402">(Aug 05 2020 at 15:49)</a>:</h4>
<p>Hmm... ZeroMQ is LGPLv3 and looks like they're working towards an MPL2 relicense.  OK, that's workable...</p>



<a name="206039429"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206039429" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206039429">(Aug 05 2020 at 15:49)</a>:</h4>
<p>So yeah, looks like capn can -- "As of version 0.4, the only supported way to communicate between threads is over pipes or socketpairs."</p>



<a name="206039578"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206039578" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206039578">(Aug 05 2020 at 15:51)</a>:</h4>
<p>/me would ideally prefer to avoid getting user bug reports that parts of the application can't talk to each other...</p>



<a name="206039645"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206039645" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206039645">(Aug 05 2020 at 15:51)</a>:</h4>
<p>capn notes in <a href="https://capnproto.org/encoding.html">https://capnproto.org/encoding.html</a> that he adopted streaming as the data exchange method (implying file/pipe or socket method, not message passing or shared memory)</p>



<a name="206040106"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206040106" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206040106">(Aug 05 2020 at 15:55)</a>:</h4>
<p>looks like <a href="https://capnproto.org/cxx.html">https://capnproto.org/cxx.html</a> has more specific detail, under Messages and I/O</p>



<a name="206040270"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206040270" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206040270">(Aug 05 2020 at 15:56)</a>:</h4>
<p>still unclear if he has helpers that wrap the communication pipe setup</p>



<a name="206040351"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206040351" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206040351">(Aug 05 2020 at 15:57)</a>:</h4>
<p>if he doesn't, that might be a case for something like that header only lib that used a shared memory method -- looks like you can just point capn to it</p>



<a name="206080018"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206080018" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206080018">(Aug 05 2020 at 21:22)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> one other note about capnproto - if we do adopt it, it bumps our minimum required C++ to C++14.  Personally I'm OK with that, but I wanted to raise it in case it's of concern to you.</p>



<a name="206080476"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/206080476" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#206080476">(Aug 05 2020 at 21:26)</a>:</h4>
<p>I’m okay with it for this, if it solves the need of communication with her commands.  I would probably hesitate elsewhere but capnproto has compelling capability.</p>



<a name="225796828"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/225796828" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#225796828">(Feb 10 2021 at 05:45)</a>:</h4>
<p>User reported a bug launching MGED on Windows 7 64-bit.  They found an article mentioning a KB update, but that didn't fix it apparently.  Any ideas?   <br>
<a href="/user_uploads/1549/2yybKO3K5iOs1jxIXZQ54r1F/147093015_10160483351802542_1761671887773690017_n.jpg">147093015_10160483351802542_1761671887773690017_n.jpg</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/2yybKO3K5iOs1jxIXZQ54r1F/147093015_10160483351802542_1761671887773690017_n.jpg" title="147093015_10160483351802542_1761671887773690017_n.jpg"><img src="/user_uploads/1549/2yybKO3K5iOs1jxIXZQ54r1F/147093015_10160483351802542_1761671887773690017_n.jpg"></a></div>



<a name="225829946"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/225829946" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#225829946">(Feb 10 2021 at 12:43)</a>:</h4>
<p>Windows 7 is too old for that function:  <a href="https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime">https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimepreciseasfiletime</a></p>



<a name="225830101"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/225830101" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#225830101">(Feb 10 2021 at 12:44)</a>:</h4>
<p>src/libbu/datetime.c</p>



<a name="225830318"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/225830318" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#225830318">(Feb 10 2021 at 12:46)</a>:</h4>
<p>Maybe we could use <a href="https://stackoverflow.com/a/27856440">https://stackoverflow.com/a/27856440</a> to implement this?</p>



<a name="225830501"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/225830501" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#225830501">(Feb 10 2021 at 12:48)</a>:</h4>
<p>I didn't realize there were still any users on Windows 7.  If <a href="https://en.wikipedia.org/wiki/Windows_7">https://en.wikipedia.org/wiki/Windows_7</a> has it right even extended support ended January 2020.</p>



<a name="227633574"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/227633574" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#227633574">(Feb 24 2021 at 17:01)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> related to earlier discussion, this appears to be a consistent hard crasher:  mged&gt; search ./ebm.r /pnts.r</p>
<p>ERROR: bad pointer 0x7ffe677688f8: s/b db_full_path(x64626670), was librt directory(x5551212), file /Users/morrison/brlcad.trunk/src/librt/db_fullpath.c, line 264</p>
<p>ERROR: bad pointer 0x7ffe677688f8: s/b db_full_path(x64626670), was librt directory(x5551212), file /Users/morrison/brlcad.trunk/src/librt/db_fullpath.c, line 264</p>



<a name="227633727"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/227633727" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#227633727">(Feb 24 2021 at 17:02)</a>:</h4>
<p>mixing relative and full path terms apparently makes it unhappy</p>



<a name="227645539"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/227645539" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#227645539">(Feb 24 2021 at 18:12)</a>:</h4>
<p>r78317 should fix it.</p>



<a name="227807579"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/227807579" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#227807579">(Feb 25 2021 at 17:45)</a>:</h4>
<p>Cool.  Now if only could figure out why that resulted in zombie processes ... haven't seen them in ages!</p>



<a name="235230164"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/235230164" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#235230164">(Apr 19 2021 at 18:53)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> any ideas: <a href="https://sourceforge.net/p/brlcad/bugs/394/">https://sourceforge.net/p/brlcad/bugs/394/</a></p>



<a name="235230504"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/235230504" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#235230504">(Apr 19 2021 at 18:55)</a>:</h4>
<p>Whoa.  Those are wacky looking.</p>



<a name="235230781"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/235230781" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#235230781">(Apr 19 2021 at 18:57)</a>:</h4>
<p>Almost looks like they're trying to move a binary from one system to another incompatible system, but if I'm reading that correctly it's the result of building and running on the same machine?</p>



<a name="235233150"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/235233150" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#235233150">(Apr 19 2021 at 19:12)</a>:</h4>
<p>it's a power8, not an x86, if that means anything</p>



<a name="235233287"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/235233287" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#235233287">(Apr 19 2021 at 19:13)</a>:</h4>
<p>Those errors look like it's not finding system libs correctly</p>



<a name="235370858"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/235370858" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#235370858">(Apr 20 2021 at 16:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/235230781">said</a>:</p>
<blockquote>
<p>Almost looks like they're trying to move a binary from one system to another incompatible system, but if I'm reading that correctly it's the result of building and running on the same machine?</p>
</blockquote>
<p>Yes, they appear to have compiled it themselves with BRLCAD_BUNDLED_LIBS=ON.. any response we can give them?  The archer error looks like a tcl/tk 8.6 error...</p>



<a name="235373335"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/235373335" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#235373335">(Apr 20 2021 at 16:26)</a>:</h4>
<p>/me shakes head - for the OpenGL bit all I could suggest is they try different drivers (maybe the modern Mesa gallium software rasterizing setup) and for the Archer bit I guess my first thought would be to see if bwish can run.</p>



<a name="235387144"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/235387144" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#235387144">(Apr 20 2021 at 17:59)</a>:</h4>
<p>From the backtrace, it looks like they're already using Mesa.  Being on Power9, their options are probably limited to Mesa or straight X.  MGED did work with OpenGL disabled.</p>
<p>The archer failure is a little more concerning... as "hv3::formmanager" is from us.  Main reason I can think for an "invalid command name" on it would be because the tclIndex or pkgIndex.tcl didn't get created/loaded.. which might imply something is wrong in our tcl/tk build system.</p>



<a name="235390266"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/235390266" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#235390266">(Apr 20 2021 at 18:18)</a>:</h4>
<p>That's why I was wondering what bwish does - it will pull in most of the packages but not hv3 (which is the web viewer, iirc) so that might help scope what's wrong.</p>



<a name="246681793"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246681793" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246681793">(Jul 21 2021 at 05:48)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> Getting: </p>
<div class="codehilite"><pre><span></span><code>CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
Please set them or make sure they are set and tested correctly in the CMake files:
XOPENGL_glu_LIBRARY (ADVANCED)
    linked by target &quot;dm-ogl&quot; in directory /home/sean/brlcad.main/src/libdm/glx
</code></pre></div>
<p>Is that new?  This is a default build on a remote Linux system (that may or may not have glu, but I presume it doesn't and the logic isn't taking that into account correctly to disable X).</p>



<a name="246717000"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246717000" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246717000">(Jul 21 2021 at 13:13)</a>:</h4>
<p>It may be a side effect of my refactor a while back to contain the X OpenGL logic.  Does 320af5adad96f fix it?</p>



<a name="246727799"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246727799" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246727799">(Jul 21 2021 at 14:31)</a>:</h4>
<p>checking, I just yanked the glu line and it worked for me, but suspected a better fix.</p>



<a name="246737175"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246737175" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starkaiser <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246737175">(Jul 21 2021 at 15:38)</a>:</h4>
<p>Hi everyone! So I have been learning BRL-CAD for the past couple of weeks, but I have encountered a bug in archer that I was unable to solve. I use Linux Mint 20.2. I have downloaded the source from main and built it. All the tests passed with no error, but when using snap grid in archer I get an error. I tried to look at the code, but I don't know tcl and can't solve it. I tried also to built BRL-CAD on FreeBSD 13.0, but I get the same error in archer. Snap grid works in MGED though. Has anyone else got this error? <a href="/user_uploads/1549/RhmZ1P1wymYG246qIkBEqXdY/archer_error.png">archer_error.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/RhmZ1P1wymYG246qIkBEqXdY/archer_error.png" title="archer_error.png"><img src="/user_uploads/1549/RhmZ1P1wymYG246qIkBEqXdY/archer_error.png"></a></div>



<a name="246762174"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246762174" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bch <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246762174">(Jul 21 2021 at 18:47)</a>:</h4>
<p><span class="user-mention" data-user-id="427492">@starkaiser</span> is this simple for you to reproduce?</p>



<a name="246763137"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246763137" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bch <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246763137">(Jul 21 2021 at 18:55)</a>:</h4>
<p>I’d do a couple things:<br>
1) find out what $v and $c are, for curiousity sake; before the first if in the vscale proc, put something like:<br>
set fh [ open ~/starkaiser_debug.log a]; puts “$v // $c”; chan close $fh</p>



<a name="246763496"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246763496" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bch <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246763496">(Jul 21 2021 at 18:58)</a>:</h4>
<p>This will (not surprisingly) open a log file in your homedir w the contents of v and c. The last line (which will have caused the crash) are the most interesting</p>



<a name="246769287"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246769287" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starkaiser <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246769287">(Jul 21 2021 at 19:46)</a>:</h4>
<p><a href="/user_uploads/1549/p_5KSkajjPu23Ghx_5cRYk80/Peek-2021-07-21-22-19.gif">Peek-2021-07-21-22-19.gif</a>  The error appears for both edges and faces for all arbs. I have added those lines and the values in the log file are:<br>
0 0 0 // 1.000000<br>
-nan -nan -nan // 1.000000</p>
<div class="message_inline_image"><a href="/user_uploads/1549/p_5KSkajjPu23Ghx_5cRYk80/Peek-2021-07-21-22-19.gif" title="Peek-2021-07-21-22-19.gif"><img src="/user_uploads/1549/p_5KSkajjPu23Ghx_5cRYk80/Peek-2021-07-21-22-19.gif"></a></div>



<a name="246774752"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246774752" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bch <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246774752">(Jul 21 2021 at 20:34)</a>:</h4>
<p>The “-nan” gives us a specific clue. I’ve got a general patch candidate I’ll work on later that may be useful. Hopefully this isn’t a show-stopper for you…</p>



<a name="246775311"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246775311" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starkaiser <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246775311">(Jul 21 2021 at 20:39)</a>:</h4>
<p>Thank you! I have tried to solve it myself, but I have only managed to hop around different files, trying to understand the code. Mged works fine, so I'm using it to learn the basics</p>



<a name="246775696"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246775696" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bch <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246775696">(Jul 21 2021 at 20:42)</a>:</h4>
<p>I personally really like mged. Hopefully you come to enjoy it too. Definitely a “learning wall” associated with it, but it pays off</p>



<a name="246776653"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246776653" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bch <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246776653">(Jul 21 2021 at 20:50)</a>:</h4>
<p><span class="user-mention" data-user-id="427492">@starkaiser</span>  - which version of brl-cad are you running?</p>



<a name="246779150"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246779150" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starkaiser <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246779150">(Jul 21 2021 at 21:05)</a>:</h4>
<p>7.32.3 I think. I compiled the latest versions from the main repository on github because older stable versions were giving me other errors, more serious. I compiled the version that I am currently using two days ago</p>



<a name="246780110"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246780110" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246780110">(Jul 21 2021 at 21:10)</a>:</h4>
<p><span class="user-mention" data-user-id="427492">@starkaiser</span> Just so you're aware - you're well into the "not-well-tested" aspects of the software interacting with Archer for geometry creation.  MGED will usually be the more stable of the interfaces, since Archer doesn't currently get as much use/attention.</p>



<a name="246780368"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246780368" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246780368">(Jul 21 2021 at 21:13)</a>:</h4>
<p>Cool that you're digging into it - Archer's also got some of our most advanced GUI features (File-&gt;Open can trigger some of the converters to open other file types, for example.)</p>



<a name="246781170"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246781170" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bch <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246781170">(Jul 21 2021 at 21:19)</a>:</h4>
<p><span class="user-mention" data-user-id="427492">@starkaiser</span>  - ok, so you’re working w the tip of main, then. I can do same</p>



<a name="246781340"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246781340" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bch <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246781340">(Jul 21 2021 at 21:21)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span>  - I’m looking at some general fixes that may have knock-on effects. We’ll see how it turns out 🧐</p>



<a name="246818133"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246818133" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246818133">(Jul 22 2021 at 07:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/246717000">said</a>:</p>
<blockquote>
<p>It may be a side effect of my refactor a while back to contain the X OpenGL logic.  Does 320af5adad96f fix it?</p>
</blockquote>
<p>That did the trick for libdm, but now there's another error from libpng being built wrong: undefined reference to `brl_png_init_filter_functions_vsx'</p>
<p>Looking at the png source code, it looks like we're missing all the platform-specific subdirs where that function comes from.</p>



<a name="246818213"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246818213" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246818213">(Jul 22 2021 at 07:53)</a>:</h4>
<p>Can you fix that?</p>



<a name="246856580"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246856580" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246856580">(Jul 22 2021 at 14:43)</a>:</h4>
<p>What platform triggers the failure? Surprisingly,  I've not encountered that error before...</p>



<a name="246861306"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246861306" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246861306">(Jul 22 2021 at 15:14)</a>:</h4>
<p>It looks like the POWERPC platform is defining PNG_FILTER_OPTIMIZATIONS.  Unless we need that defined, my inclination would be to simply not define it.</p>



<a name="246861575"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246861575" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246861575">(Jul 22 2021 at 15:16)</a>:</h4>
<p>If I'm interpreting this correctly, PNG_FILTER_OPTIMIZATIONS is for platform specific optimization logic and there is a generic fallback we can use.</p>



<a name="246863936"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246863936" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246863936">(Jul 22 2021 at 15:35)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> does d4ecd86137fa fix it?</p>



<a name="246940814"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246940814" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246940814">(Jul 23 2021 at 05:16)</a>:</h4>
<p>how does one clear out the src/other/ext builds??  make clean isn't working...</p>



<a name="246940830"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246940830" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246940830">(Jul 23 2021 at 05:17)</a>:</h4>
<p>Can we get make clean fixed?.. if make builds it, make clean should still clear it.</p>



<a name="246940977"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246940977" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246940977">(Jul 23 2021 at 05:21)</a>:</h4>
<p>curiously distclean appears to have deleted files I would have thought it had no business deleting , and still left bin/osdemo and src/other/libosmesa</p>



<a name="246942072"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246942072" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246942072">(Jul 23 2021 at 05:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/246861306">said</a>:</p>
<blockquote>
<p>It looks like the POWERPC platform is defining PNG_FILTER_OPTIMIZATIONS.  Unless we need that defined, my inclination would be to simply not define it.</p>
</blockquote>
<p>But why is it customized?  I would think it's far less complexity and risk to drop in as vanilla as strictly possible.  It seems to be just a few files, so I can't see an argument for space/complexity/savings.  No idea what the runtime implications are.</p>
<p>Plus, it's an impedence to upgrades and there's a real risk of cost... which it now incurred.    I mean, between all the builds, rebuilding, inspecting, having to shift what I was doing elsewhere, trying again, I've now spent at least 4 hours unproductively because of it. :(</p>
<p>I have to hope there was some need or benefit beyond tidying up files.?  A benefit that saves us time and effort?</p>



<a name="246942098"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246942098" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246942098">(Jul 23 2021 at 05:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/246863936">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> does d4ecd86137fa fix it?</p>
</blockquote>
<p>That does seem to have fixed it.  Thank you.</p>



<a name="246975588"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246975588" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246975588">(Jul 23 2021 at 13:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/246940830">said</a>:</p>
<blockquote>
<p>Can we get make clean fixed?.. if make builds it, make clean should still clear it.</p>
</blockquote>
<p>My understanding of how ExternalProject_Add works suggests that this will be difficult.  ExternalProject builds are decoupled from the primary CMake logic internally, and each individual project's logic isn't even guaranteed to define a clean target at all.  CMake doesn't provide a lot of good options for customizing the "make clean" target as far as I know...</p>



<a name="246975956"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246975956" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246975956">(Jul 23 2021 at 13:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/246940977">said</a>:</p>
<blockquote>
<p>curiously distclean appears to have deleted files I would have thought it had no business deleting , and still left bin/osdemo and src/other/libosmesa</p>
</blockquote>
<p>That is curious - latest main doesn't do that for me using a build folder.  Are you doing a build from the src dir?  It doesn't reproduce for me there either...</p>



<a name="246976996"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246976996" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246976996">(Jul 23 2021 at 13:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/246942072">said</a>:</p>
<blockquote>
<p>I have to hope there was some need or benefit beyond tidying up files.?  A benefit that saves us time and effort?</p>
</blockquote>
<p>Looks like I did that back in 2016 (r68360) when was trying to scrub everything we don't need out of src/other to reduce our overall tarball size.</p>



<a name="246978076"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246978076" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246978076">(Jul 23 2021 at 13:37)</a>:</h4>
<p>For src/other/ext, the obvious thing to try would be to define some custom logic to be executed by the ExternalProject_Add build steps that generates a list of all files added by the build step that the parent build could then remove, but I don't know of a way to customize the clean target in the parent CMake build to that degree.</p>



<a name="246978870"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246978870" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246978870">(Jul 23 2021 at 13:44)</a>:</h4>
<p>I think these folks have a similar issue:  <a href="https://github.com/klee/klee/issues/718">https://github.com/klee/klee/issues/718</a></p>



<a name="246978941"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/246978941" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#246978941">(Jul 23 2021 at 13:44)</a>:</h4>
<p>We could probably produce a clean-ext target that would invoke the needed steps...</p>



<a name="247059272"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247059272" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247059272">(Jul 24 2021 at 06:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/246975588">said</a>:</p>
<blockquote>
<p>My understanding of how ExternalProject_Add works suggests that this will be difficult.  ExternalProject builds are decoupled from the primary CMake logic internally, and each individual project's logic isn't even guaranteed to define a clean target at all.  CMake doesn't provide a lot of good options for customizing the "make clean" target as far as I know...</p>
</blockquote>
<p>From my reading, e.g., <a href="https://cmake.org/pipermail/cmake/2012-February/049208.html">https://cmake.org/pipermail/cmake/2012-February/049208.html</a> it looks like cmake is supposed to run clean on ExternalProjects.  That person is trying to stop the behavior I'm expecting.</p>
<p>It didn't look like any of them cleaned, even if they had a cmake build..</p>



<a name="247059407"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247059407" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247059407">(Jul 24 2021 at 06:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/246975956">said</a>:</p>
<blockquote>
<p>That is curious - latest main doesn't do that for me using a build folder.  Are you doing a build from the src dir?  It doesn't reproduce for me there either...</p>
</blockquote>
<p>Nope, I'm using a build folder.  I don't know what it'd do in a src tree.  It was a straight up fresh cloning, cmake in build, and make calls, then make distclean when clean didn't clear out libpng.  I was testing your libpng change, but couldn't get it to recompile again even with the file edited, so tried to make clean which failed, then distclean -- which left turds.</p>



<a name="247059944"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247059944" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247059944">(Jul 24 2021 at 06:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/246976996">said</a>:</p>
<blockquote>
<p>Looks like I did that back in 2016 (r68360) when was trying to scrub everything we don't need out of src/other to reduce our overall tarball size.</p>
</blockquote>
<p>Oof.   :(</p>
<p>Yeah, I don't think we should keep that then, long term, especially as upgrades happen.  That was a really expensive impact.. </p>
<p>Also, that edit requires a human in the loop at all future upgrade points (i.e., more time) and docs/knowledge of the edits complicating upgrades.   That in turn puts us in a position where upgrades are resisted (e.g., gdal, opennurbs, stepcode, ...).  Not a healthy pattern.</p>



<a name="247060073"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247060073" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247060073">(Jul 24 2021 at 06:54)</a>:</h4>
<p>Of course, opennurbs has other reasons, so that one's not entirely equivalent, but it is a bit involved to upgrade in part because of cullings (in addition to our code edits).</p>



<a name="247074890"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247074890" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247074890">(Jul 24 2021 at 13:32)</a>:</h4>
<p>I saw those emails, but I'm wondering if the behavior they describe is out of date - I don't think I've ever seen the ExternalProject_Add builds follow a make clean...<br>
<a href="/user_uploads/1549/4phYYesR4wPpu5fW91tur0JB/exttest.tar.gz">exttest.tar.gz</a><br>
I made a small test (attached) and the behavior I'm seeing here on a make clean is that p1 is removed,  but bin/p2 is intact.</p>



<a name="247074982"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247074982" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247074982">(Jul 24 2021 at 13:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/247059407">said</a>:</p>
<div class="codehilite"><pre><span></span><code> tried to make clean which failed, then distclean -- which left turds.
</code></pre></div>
<p>Which files were left after the distclean?  One possibility is that if there are files left from older build states, distclean based on updated CMakeLists.txt files won't know it needs to remove them...</p>



<a name="247076209"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247076209" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247076209">(Jul 24 2021 at 14:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/247059944">said</a>:</p>
<blockquote>
<p>Also, that edit requires a human in the loop at all future upgrade points (i.e., more time) and docs/knowledge of the edits complicating upgrades.   That in turn puts us in a position where upgrades are resisted (e.g., gdal, opennurbs, stepcode, ...).  Not a healthy pattern.</p>
</blockquote>
<p>My hope is that once it is properly matured, the new src/other/ext approach to building will make vanilla upstreams more practical.  Since the new logic (so far at least) is capable of replicating the CMake RPath magic without needing all up build system replacements, the incentive to clean up the third party directories goes down.</p>
<p>When I'm having to write and/or maintain the build systems myself, those messy directories are a problem - that was the other reason I was stripping them down, to make it easier to understand what I had to write build logic for.  When I had to do major build system work on third party deps, all future upgrades needed a human in the loop anyway, so the simplification was an overall win.  I'm trying to let the dust settle on the src/other/ext system before I introduce the additional complication of swapping in things like the upstream GDAL build, and I also wanted as much in the way of automated cross platform testing in place as possible before trying that step.  (I haven't had bandwidth to do it anyway, but even if I had I would have been hesitant to pile the native build systems on top of everything else.)</p>
<p>Even if we get to completely vanilla src/other/ext, there's still going to be some disincentive to disrupt things by upgrading those deps.  I'm thinking it might be helpful if we go ahead and break ext into its own git repo and add it as a submodule.  If git will support this, we could set it up as follows:</p>
<ol>
<li>
<p>Point the src/other/ext submodule in the main repo to an equivalent of "STABLE" in the ext repo by default.  (I.e., an out of the box recursive checkout of brlcad will pull a known working ext configuration.)</p>
</li>
<li>
<p>In the ext repo, we can then upgrade third party deps without impinging on brlcad itself.  We can then test both the ext build and its integration with the parent brlcad build by checking out different versions of ext within the brlcad checkout.</p>
</li>
<li>
<p>If the above works (and I'm not 100% sure if it can, I need to do some experimenting with submodules) we might even be able to set up CI on the ext repo to do continual, ongoing merge and integration testing with upstream repos like GDAL that are also on github.  We might define branches like ACTIVE (used by brlcad), STABLE (holds the latest released version of each of the deps, should match ACTIVE in most situations unless we need to patch a stable release for a CVE or some such), TESTING (used to keep an eye on the latest development versions of all the deps, expected to break regularly), and STAGING (similar to testing but where we can adjust problematic upstream versions back a bit if we need to to keep everything else going.)</p>
</li>
</ol>



<a name="247455547"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247455547" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247455547">(Jul 28 2021 at 13:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/247074982">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/247059407">said</a>:</p>
<div class="codehilite"><pre><span></span><code> tried to make clean which failed, then distclean -- which left turds.
</code></pre></div>
<p>Which files were left after the distclean?  One possibility is that if there are files left from older build states, distclean based on updated CMakeLists.txt files won't know it needs to remove them...</p>
</blockquote>
<p>Like I said, that was the entirety of its existence, so no prior build states, no git pulls besides the edit you made to fix the png issue.  It was a clean checkout, cmake + make + cmake + make (tried diff compiler), and eventually make clean, then make distclean, which then left bin/osdemo and src/other/libosmesa with a few files in there.</p>



<a name="247457156"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247457156" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247457156">(Jul 28 2021 at 13:19)</a>:</h4>
<p>The plan you describe sounds good except I would suggest we keep ext branching simpler.  Having to hunt for which branch has the deps that works would be a bit .. frustrating to say the least.</p>
<p>I'd think we just have main track ext main and STABLE tract ext STABLE and leave it at that for starters.  I.e., what worked for the last release, and whatever is currently needed for main.  This would make main be your ACTIVE+TESTING+STAGING branches and it'd be on us to make branches while testing risky efforts, but without any reuqired formality beyone main and STABLE.  I like the idea of possibly having main track ext STABLE for some added stability, but I could go either way.  I'd hope any instability is very short lived.</p>



<a name="247544411"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247544411" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247544411">(Jul 29 2021 at 04:52)</a>:</h4>
<p>vanilla ? :)</p>



<a name="247731652"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247731652" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starkaiser <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247731652">(Jul 30 2021 at 16:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="427492">starkaiser</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/246769287">said</a>:</p>
<blockquote>
<p><a href="/user_uploads/1549/p_5KSkajjPu23Ghx_5cRYk80/Peek-2021-07-21-22-19.gif">Peek-2021-07-21-22-19.gif</a>  The error appears for both edges and faces for all arbs. I have added those lines and the values in the log file are:<br>
0 0 0 // 1.000000<br>
-nan -nan -nan // 1.000000</p>
</blockquote>
<p>I just downloaded and compiled the 7.32.4 release and now the snap to grid mode in Archer works great!</p>



<a name="247739578"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247739578" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247739578">(Jul 30 2021 at 17:41)</a>:</h4>
<p>The 7.32.4 release is based on older code, and doesn't incorporate most of the changes in main</p>



<a name="247739729"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247739729" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247739729">(Jul 30 2021 at 17:42)</a>:</h4>
<p>The most likely problem for issues in main is refactoring work I was doing to shift logic down the library stacks (primarily out of libtclcad, but also some out of libged into lower layers.)</p>



<a name="247739795"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247739795" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247739795">(Jul 30 2021 at 17:42)</a>:</h4>
<p>I may have missed a step when moving the snapping functions.</p>



<a name="247740020"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/247740020" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#247740020">(Jul 30 2021 at 17:44)</a>:</h4>
<p>I haven't gotten to the editing modes yet - they'll be one of the very last things to shift to the Qt GUI, because of the amount of work involved - and so the snapping behaviors haven't yet been tested post refactor (or rather, your Archer test has served as an inadvertent test).</p>



<a name="250628520"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/250628520" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#250628520">(Aug 25 2021 at 14:32)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> do we have a standard way to get SSIZE_MAX on Windows?  limits.h doesn't seem to have it...</p>



<a name="250650200"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/250650200" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#250650200">(Aug 25 2021 at 17:15)</a>:</h4>
<p>Hmm.  The only other use in our code is an ifndef test in common.h...</p>



<a name="251490474"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/251490474" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#251490474">(Sep 01 2021 at 02:28)</a>:</h4>
<p>belated sorry about that, but I saw your fix and seems good enough.  there's not a standard way other than including limits.h which we already do.</p>



<a name="251490530"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/251490530" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#251490530">(Sep 01 2021 at 02:29)</a>:</h4>
<p>I could probably key off some other limit as it just needs to be some imposed limit to satisfy the cert/stig issue, tainted input sanitization</p>



<a name="263111779"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/263111779" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#263111779">(Nov 30 2021 at 08:14)</a>:</h4>
<p>Both ogl and X framebuffer appear to be non-functional (on Mac) ... not sure since when as I've been in a different section of the code, but ogl fails and X crashes.</p>



<a name="263196293"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/263196293" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#263196293">(Nov 30 2021 at 19:31)</a>:</h4>
<p>Looks like it's bcc41b5798 that's causing the fb issues, at least for X.</p>



<a name="263236624"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/263236624" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#263236624">(Dec 01 2021 at 02:16)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> Not sure about ogl, but I think I addressed the X issue.  I don't see an ogl failure on Linux...</p>



<a name="267279973"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/267279973" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#267279973">(Jan 08 2022 at 06:37)</a>:</h4>
<p>oh, didn't report back on this until now, but the ogl issue never went away... still a hard failure on mac, no archer, no /dev/ogl</p>



<a name="267280075"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/267280075" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#267280075">(Jan 08 2022 at 06:40)</a>:</h4>
<p>fbhelp reports:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>=============== Current Selection ================
bu_shmget failed, errno=22
bu_shmget: Invalid argument
ogl_getmem:  Unable to attach to shared memory, using private
fb_ogl_open: double buffering not available. Using single buffer.
Assertion failed: (glx_dpy), function __glXSendError, file ../src/glx/glx_error.c, line 44.
</code></pre></div>
<p>Should look like this:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>=============== Current Selection ================
ogl_getmem: shmget failed, errno=22
ogl_getmem:  Unable to attach to shared memory.
Description: Silicon Graphics OpenGL
Device: /dev/ogl
Max width height: 16384 16384
Default width height: 512 512
Usage: /dev/ogl[option letters]
   p   Private memory - else shared
   l   Lingering window
   t   Transient window
   d   Suppress dithering - else dither if not 24-bit buffer
   c   Perform software colormap - else use hardware colormap if possible
   s   Single buffer -  else double buffer if possible
   b   Fast pan and zoom using backbuffer copy -  else normal
   D   Don't update screen until fb_flush() is called.  (Double buffer sim)
   z   Zap (free) shared memory.  Can also be done with fbfree command

Current internal state:
    mi_doublebuffer=1
    mi_cmap_flag=0
    ogl_nwindows=1
X11 Visual:
    TrueColor: Fixed RGB maps, pixel RGB subfield indices
    RGB Masks: 0xff0000 0xff00 0xff
    Colormap Size: 256
    Bits per RGB: 8
    screen: 0
    depth (total bits per pixel): 24
</code></pre></div>



<a name="267280155"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/267280155" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#267280155">(Jan 08 2022 at 06:43)</a>:</h4>
<p>also, definitely seeing some regression in the conversion code.  was doing an obj-g conversion, was giving me some new errors -- checked against a rando prior release (7.30 I think) and prior succeeded where current main does not (completes, but results in bad/flipped faces).</p>



<a name="267280209"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/267280209" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#267280209">(Jan 08 2022 at 06:44)</a>:</h4>
<p>Here's a visual example, left is prev, right is curr:  <a href="/user_uploads/1549/yWAgbE2zxei55o2QWVG3n6pb/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/yWAgbE2zxei55o2QWVG3n6pb/image.png" title="image.png"><img src="/user_uploads/1549/yWAgbE2zxei55o2QWVG3n6pb/image.png"></a></div>



<a name="267280260"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/267280260" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#267280260">(Jan 08 2022 at 06:46)</a>:</h4>
<p>Here's that geometry if you want to see if you can track it down.. <a href="/user_uploads/1549/IHAACWuN0Q7ZlDGv_jaFLyih/PoliceLifterSpeed.obj">PoliceLifterSpeed.obj</a></p>



<a name="267280261"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/267280261" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#267280261">(Jan 08 2022 at 06:46)</a>:</h4>
<p>Shouldn't need this but just in case: <a href="/user_uploads/1549/6tAbc0O7WhVqW2a2Dbydi9dN/PoliceLifterSpeed.mtl">PoliceLifterSpeed.mtl</a></p>



<a name="267590842"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/267590842" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#267590842">(Jan 11 2022 at 14:44)</a>:</h4>
<p>Can you double check what version succeeded?  I've tried a number of 7.30 obj-g conversions, and so far they all produce the bad geometry here.</p>



<a name="267591682"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/267591682" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#267591682">(Jan 11 2022 at 14:49)</a>:</h4>
<p>7.28.2 shows bad as well</p>



<a name="267979301"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/267979301" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#267979301">(Jan 14 2022 at 07:22)</a>:</h4>
<p>Oof, I thought I grabbed 7.30, but it's looking like if I just opened the .g file, then it would have fired up a 7.24 release.</p>



<a name="267979334"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/267979334" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#267979334">(Jan 14 2022 at 07:24)</a>:</h4>
<p>looks like it might have been 7.26 actually</p>



<a name="267979453"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/267979453" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#267979453">(Jan 14 2022 at 07:25)</a>:</h4>
<p>So I guess the good news is it's not a release blocker, thanks for checking it</p>



<a name="269527766"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/269527766" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#269527766">(Jan 27 2022 at 05:28)</a>:</h4>
<p>@starseeker not sure if it’s recent but cmake summary has a blank entry for Iwidgets.  I took a look but couldn’t follow the logic, appeared to be handled differently from the other _BUILD vars.  Would you take a look?  TCL is ON, Tk is Disabled, Itcl/Itk is ON (Itcl only), and Iwidgets is blank.</p>
<p>This is a server / no-X build on Ubuntu.</p>



<a name="269569165"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/269569165" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#269569165">(Jan 27 2022 at 13:10)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> got it, thanks - was missing an else case in the iwidgets.cmake flow</p>



<a name="269569236"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/269569236" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#269569236">(Jan 27 2022 at 13:11)</a>:</h4>
<p>(my real motivator for the Qt work - get rid of all the Tcl/Tk build logic ;-) )</p>



<a name="271854089"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271854089" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271854089">(Feb 14 2022 at 16:48)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span>  Here's one of the errors that a couple of them got: <br>
warning: error while sourcing archer_launch.tcl: couldn't read file "tclscripts/archer/itk_redefines.tcl": no such file or directory</p>



<a name="271922705"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271922705" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271922705">(Feb 15 2022 at 03:39)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> I've run into that particular itk_defines.tcl error before as well, if that helps.  I'm not sure the conditions but it doesn't seem to interfere with the build as much as it was on Windows</p>



<a name="271922813"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271922813" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271922813">(Feb 15 2022 at 03:40)</a>:</h4>
<p>I did get a trace on the all-apps-crashing again bug -- it appears to be something inside libdm during application shutdown.  Valgrind is pointing at some unknown symbols in that library:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>--11359-- Discarding syms at 0x107420000-0x107474000 in /Users/morrison/brlcad.main/.build/lib/libdm.20.0.1.dylib (have_dinfo 1)
--11359-- Discarding syms at 0x1074cc000-0x1074d4000 in /Users/morrison/brlcad.main/.build/lib/libpkg.20.0.1.dylib (have_dinfo 1)
--11359-- Discarding syms at 0x1092e4000-0x1092f0000 in /Users/morrison/brlcad.main/.build/libexec/dm/libdm-ps.dylib (have_dinfo 1)
==11359== Jump to the invalid address stated on the next line
==11359==    at 0x107446636: ???
==11359==    by 0x10744657E: ???
==11359==    by 0x10743CA42: ???
==11359==    by 0x7FFF2071ED24: ??? (in /dev/ttys000)
==11359==    by 0x7FFF2071F00F: ??? (in /dev/ttys000)
==11359==    by 0x7FFF2080AF43: ??? (in /dev/ttys000)
==11359==  Address 0x107446636 is not stack'd, malloc'd or (recently) free'd
</code></pre></div>



<a name="271922850"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271922850" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271922850">(Feb 15 2022 at 03:41)</a>:</h4>
<p>Actually, if that output is strictly ordered, that may be the issue.  It's unloaded libdm, but then goes to unload dm/libdm-ps.dylib and a call is made into libdm...</p>



<a name="271922902"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271922902" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271922902">(Feb 15 2022 at 03:42)</a>:</h4>
<p>Um.  How do we control that ordering?</p>



<a name="271923005"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923005" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923005">(Feb 15 2022 at 03:44)</a>:</h4>
<p>I could be wrong on that interpretation, but it def appears to be something libdm plugin-related</p>



<a name="271923034"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923034" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923034">(Feb 15 2022 at 03:45)</a>:</h4>
<p>For the itk_defines.tcl error, the question I have is whether share/tclscripts/archer/itk_redefines.tcl is present - if not, it may be a missing dependency on the cp target for that file, if it is then it's something about the paths in the Tcl environment.</p>



<a name="271923049"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923049" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923049">(Feb 15 2022 at 03:45)</a>:</h4>
<p>Can we check if there are any undefined symbols inthe so files?</p>



<a name="271923124"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923124" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923124">(Feb 15 2022 at 03:46)</a>:</h4>
<p>Let me see if I can make the target for copying that file an explicit dependency of archer...</p>



<a name="271923131"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923131" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923131">(Feb 15 2022 at 03:46)</a>:</h4>
<p>I'll see if I can trigger the itk_redefines.tcl error, and check -- it was pretty consistent for me for a while, but I'd been ignoring it</p>



<a name="271923146"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923146" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923146">(Feb 15 2022 at 03:47)</a>:</h4>
<p>which so files?  libdm-plot or libdm or ?</p>



<a name="271923163"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923163" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923163">(Feb 15 2022 at 03:47)</a>:</h4>
<p>the libdm-ps.dylib file, if that's the one factoring into the crash above</p>



<a name="271923166"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923166" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923166">(Feb 15 2022 at 03:47)</a>:</h4>
<p>I'm not seeing where/why in the code the plugins have any code that would be getting called</p>



<a name="271923252"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923252" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923252">(Feb 15 2022 at 03:48)</a>:</h4>
<p>there's no apparent atexit handler.  oh, maybe dlopen registers one.. that might be.</p>



<a name="271923304"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923304" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923304">(Feb 15 2022 at 03:48)</a>:</h4>
<p>If it's the unloading code, a quick check would be to comment out the unloading bits in libdm_clear</p>



<a name="271923321"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923321" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923321">(Feb 15 2022 at 03:49)</a>:</h4>
<p>in dm_init.cpp</p>



<a name="271923341"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923341" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923341">(Feb 15 2022 at 03:49)</a>:</h4>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>(base) morrison@agua .build % nm libexec/dm/libdm-ps.dylib
                 U _Tcl_AppendStringsToObj
                 U _Tcl_DuplicateObj
                 U _Tcl_GetObjResult
                 U _Tcl_SetObjResult
                 U ___stack_chk_fail
                 U ___stack_chk_guard
00000000000100d0 d __dyld_private
                 U _bu_calloc
                 U _bu_free
                 U _bu_log
                 U _bu_vls_addr
                 U _bu_vls_free
                 U _bu_vls_init
                 U _bu_vls_printf
                 U _bu_vls_sprintf
                 U _bu_vls_strcpy
0000000000010550 b _disp_mat
000000000000b770 T _dm_plugin_info
0000000000010138 d _dm_ps
0000000000010150 d _dm_ps_impl
                 U _draw_Line3D
                 U _fclose
                 U _fflush
                 U _fopen
                 U _fprintf
                 U _fputs
00000000000106a8 s _head_ps_vars
                 U _memcpy
                 U _memset
00000000000104d0 b _mod_mat
                 U _null_String2DBBox
                 U _null_SwapBuffers
                 U _null_beginDList
                 U _null_configureWin
                 U _null_doevent
                 U _null_drawDList
                 U _null_drawPoint3D
                 U _null_drawPoints3D
                 U _null_endDList
                 U _null_freeDLists
                 U _null_genDLists
                 U _null_getDisplayImage
                 U _null_loadPMatrix
                 U _null_makeCurrent
                 U _null_openFb
                 U _null_reshape
                 U _null_setDepthMask
                 U _null_setLight
                 U _null_setTransparency
                 U _null_setZBuffer
000000000000c010 s _pinfo
0000000000009120 t _ps_close
000000000000b6a0 t _ps_debug
000000000000b290 t _ps_draw
00000000000092f0 t _ps_drawBegin
0000000000009360 t _ps_drawEnd
0000000000009af0 t _ps_drawLine2D
0000000000009c00 t _ps_drawLine3D
0000000000009c60 t _ps_drawLines3D
0000000000009cf0 t _ps_drawPoint2D
0000000000009940 t _ps_drawString2D
0000000000009d60 t _ps_drawVList
0000000000010690 b _ps_drawVList.fin
0000000000010650 b _ps_drawVList.last
0000000000010670 b _ps_drawVList.start
0000000000009430 t _ps_hud_begin
00000000000094a0 t _ps_hud_end
0000000000009510 t _ps_loadMatrix
000000000000b700 t _ps_logfile
0000000000008310 t _ps_open
00000000000104c0 b _ps_open.count
000000000000b3f0 t _ps_setBGColor
000000000000b340 t _ps_setFGColor
000000000000b480 t _ps_setLineAttr
000000000000b540 t _ps_setWinBounds
00000000000100e0 d _ps_usage
00000000000092a0 t _ps_viable
00000000000105d0 b _psmat
                 U _setbuf
                 U _sscanf
                 U _vclip
                 U dyld_stub_binder
</code></pre></div>



<a name="271923419"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923419" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923419">(Feb 15 2022 at 03:50)</a>:</h4>
<p>U is undefined?</p>



<a name="271923454"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923454" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923454">(Feb 15 2022 at 03:51)</a>:</h4>
<p>oh, there it is!  I was looking for whatever was triggering the unloading... plain as day in dm_init.cpp</p>



<a name="271923456"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923456" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923456">(Feb 15 2022 at 03:51)</a>:</h4>
<p>yep</p>



<a name="271923507"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923507" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923507">(Feb 15 2022 at 03:52)</a>:</h4>
<p>oh, I wonder if this is that age-old STL issue...</p>



<a name="271923879"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271923879" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271923879">(Feb 15 2022 at 03:58)</a>:</h4>
<p>0a1de42aee may help with the Archer bit</p>



<a name="271924105"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271924105" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271924105">(Feb 15 2022 at 04:00)</a>:</h4>
<p>testing a fix for dlclosure issue, and I'm coincidentally getting the itk_defines issue so I'll update here when I can and test</p>



<a name="271924134"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271924134" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271924134">(Feb 15 2022 at 04:01)</a>:</h4>
<p>may be related to this huge blather:  WARNING - bu_dir's bin value is set to ., but binary being run is located in /Users/morrison/brlcad.main/.build.  This probably means you are running btclsh from a non-install directory with BRL-CAD already present in . - be aware that .tcl files from . will be loaded INSTEAD OF local files. Tcl script changes made to source files for testing purposes will not be loaded, even though btclsh will most likely 'work'.  To test local changes, either clear ., specify a different install prefix (i.e. a directory <em>without</em> BRL-CAD installed) while building, or manually set the BRLCAD_ROOT environment variable.</p>



<a name="271924232"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271924232" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271924232">(Feb 15 2022 at 04:02)</a>:</h4>
<p>Urm.  I've seen that too, but didn't seem to trigger the issue for me.  However, that shouldn't be happening, so I'll see if I can take  a quick look...</p>



<a name="271924241"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271924241" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271924241">(Feb 15 2022 at 04:02)</a>:</h4>
<p>my change appears to have fixed the dynamic unloading crashes</p>



<a name="271924251"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271924251" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271924251">(Feb 15 2022 at 04:02)</a>:</h4>
<p>I'll push that up here in a sec</p>



<a name="271924971"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271924971" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271924971">(Feb 15 2022 at 04:15)</a>:</h4>
<p>okay pushed.. I think what was going on is because the iterator was registering ABC and then closing ABC .. and badness was happening.  now unloads in reverse order, so ABC-&gt;CBA, and that appears to have resolved whatever dependency tracking badness was going on.  I suspect it's either plugins that refer to other plugins (thus needing to be in order) or the dynamic linker doing recursive reference counting and thinking it was done with libdm as the dlclose() plugins were unloaded and references got updated.</p>



<a name="271925158"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271925158" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271925158">(Feb 15 2022 at 04:19)</a>:</h4>
<p>on an unrelated note, we're probably going to need to set up code signing before our next major release.  that's apparently the solution to all the firewall triggers that go off every build.  Looks like these guys have a module: <a href="https://github.com/Monetra/libmonetra/blob/master/CMakeModules/CodeSign.cmake">https://github.com/Monetra/libmonetra/blob/master/CMakeModules/CodeSign.cmake</a></p>



<a name="271925234"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271925234" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271925234">(Feb 15 2022 at 04:20)</a>:</h4>
<p>cpack appears to have some built-in stuff too for what it produces, though that doesn't address the build tree like that module seems to</p>



<a name="271925768"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271925768" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271925768">(Feb 15 2022 at 04:30)</a>:</h4>
<p>Where do we get a certificate?</p>



<a name="271926187"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271926187" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271926187">(Feb 15 2022 at 04:38)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> c7cd672c8 appears to break Linux:</p>
<div class="codehilite"><pre><span></span><code>Program received signal SIGSEGV, Segmentation fault.
0x00007ffff7fe6ea5 in ?? () from /lib64/ld-linux-x86-64.so.2
(gdb) bt
#0  0x00007ffff7fe6ea5 in ?? () from /lib64/ld-linux-x86-64.so.2
#1  0x00007ffff74e98b8 in __GI__dl_catch_exception (exception=exception@entry=0x7fffffffd300, operate=&lt;optimized out&gt;,
    args=&lt;optimized out&gt;) at dl-error-skeleton.c:208
#2  0x00007ffff74e9983 in __GI__dl_catch_error (objname=0x55555558b830, errstring=0x55555558b838,
    mallocedp=0x55555558b828, operate=&lt;optimized out&gt;, args=&lt;optimized out&gt;) at dl-error-skeleton.c:227
#3  0x00007ffff39dab59 in _dlerror_run (operate=operate@entry=0x7ffff39da420 &lt;dlclose_doit&gt;, args=0x6) at dlerror.c:170
#4  0x00007ffff39da468 in __dlclose (handle=&lt;optimized out&gt;) at dlclose.c:46
#5  0x00007ffff4bd8a9a in bu_dlclose (handle=0x6) at /home/cyapp/brlcad/src/libbu/dylib.c:66
#6  0x00007ffff48ad034 in libdm_clear () at /home/cyapp/brlcad/src/libdm/dm_init.cpp:201
#7  0x00007ffff48ad654 in libdm_initializer::~libdm_initializer (this=0x7ffff48e8590 &lt;LIBDM&gt;,
    __in_chrg=&lt;optimized out&gt;) at /home/cyapp/brlcad/src/libdm/dm_init.cpp:217
#8  0x00007ffff73d015e in __cxa_finalize (d=0x7ffff48e6c20) at cxa_finalize.c:83
#9  0x00007ffff48970f7 in __do_global_dtors_aux () from /home/cyapp/brlcad-build/lib/libdm.so.20
#10 0x00007fffffffdd90 in ?? ()
</code></pre></div>



<a name="271926263"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271926263" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271926263">(Feb 15 2022 at 04:39)</a>:</h4>
<p>Don't tell me Mac wants it one way and Linux the other...</p>



<a name="271927565"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271927565" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271927565">(Feb 15 2022 at 05:01)</a>:</h4>
<p>it indeed is working much better for me, but  that 0x6 handle in your stack there is suspicious.  I think I may have been careless with the iterator.</p>



<a name="271927626"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271927626" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271927626">(Feb 15 2022 at 05:02)</a>:</h4>
<p>yeah, end() shouldn't be valid and that's where I made it start.  surprisingly works...</p>



<a name="271927811"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271927811" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271927811">(Feb 15 2022 at 05:05)</a>:</h4>
<p>fixing.</p>



<a name="271928434"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271928434" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271928434">(Feb 15 2022 at 05:17)</a>:</h4>
<p>you're good enough to catch mistakes like that!  heh.  it was an invalid loop!  bogus handle was a dead give-away..</p>



<a name="271928957"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271928957" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271928957">(Feb 15 2022 at 05:26)</a>:</h4>
<p>I feel first response should never be to inject platform identifiers... revert if needed, or at least give me a chance to fix it... see if latest is any better.</p>



<a name="271974799"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271974799" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271974799">(Feb 15 2022 at 13:43)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> confirmed, that's got it</p>



<a name="271979343"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271979343" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271979343">(Feb 15 2022 at 14:15)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span>  bad news is that the crash isn't gone... declared victory too soon.  there's still something very distinctly wrong in the loading/unloading..</p>



<a name="271979612"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271979612" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271979612">(Feb 15 2022 at 14:17)</a>:</h4>
<p>That's weird.  As I recall that code is pretty straightfoward - load on initialize, unload on exit.  Not sure where to go hunting for trouble...</p>



<a name="271979751"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271979751" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271979751">(Feb 15 2022 at 14:18)</a>:</h4>
<p>unless the bu_dlopen/bu_dlclose wrappers are missing something maybe?</p>



<a name="271980508"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271980508" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271980508">(Feb 15 2022 at 14:23)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I don't know if it helps any, but src/libbu/tests/dylib is intended to be a small, self-contained testing of that mechanism...</p>



<a name="271980958"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271980958" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271980958">(Feb 15 2022 at 14:25)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> do you know when this started?  (i.e. has it been doing it ever since the dm/ged plugin work, or did some more recent change kick it off?)</p>



<a name="271981500"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271981500" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271981500">(Feb 15 2022 at 14:29)</a>:</h4>
<p>To me the strangest thing is that neither the local mac here nor the CI runners seem to be exhibiting it.  And the CI build for the mac indicates it's running the ASCII to .g conversions, which (at least on the Linux box here) did trigger crashing when the unloading wasn't working.</p>



<a name="271987111"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271987111" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271987111">(Feb 15 2022 at 15:06)</a>:</h4>
<p>It's the same behavior I've been seeing for months, I think since the dm/ged plugin work.  It doesn't appear to be 100% deterministic as it seems to depend what symbols are in use, implying it's involving the dynamic linker and when a particular symbol or set of symbols are encountered.</p>



<a name="271987574"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271987574" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271987574">(Feb 15 2022 at 15:09)</a>:</h4>
<p>It doesn't appear to affect more complicated apps that call lots of symbols (e.g., mged or gcv, etc) as much (or at least as visibly).  Seems to be most noticeable on a handful of smaller simpler apps that essentially do nothing (but still load and unload nearly everything), and every now and then on something more complicated.</p>



<a name="271987988"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271987988" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271987988">(Feb 15 2022 at 15:13)</a>:</h4>
<p>I think there's possibly something fundamental in play here (like the ordering) and Mac happens to be provoking.  When I watch the binary's DYLD loading/unloading, there is some strangeness going on.  The libged plugins are loading, and then it loads dm and it's dependency libraries.  It appears to be choking up when it goes to unload dm and friends.</p>



<a name="271989269"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271989269" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271989269">(Feb 15 2022 at 15:21)</a>:</h4>
<p>Anything I can do to help?</p>



<a name="271992898"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271992898" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271992898">(Feb 15 2022 at 15:48)</a>:</h4>
<p>Honestly, I'm not sure..  I just got a clue that it may be related to dm-X and dm-ogl, and that latter is still fully busted on Mac for me -- so that might be something you could check on -- if mged, archer, and such work for you on mac from a build dir.  If it works, we can maybe trace backwards to figure out where things diverge.</p>



<a name="271993165"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271993165" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271993165">(Feb 15 2022 at 15:50)</a>:</h4>
<p>OK, I'll check on that.  I know qged worked with Qt6 on mac, but I didn't try archer and I'm not sure if qged was doing its swrast fallback or not...</p>



<a name="271993171"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271993171" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271993171">(Feb 15 2022 at 15:50)</a>:</h4>
<p>From what I think I'm seeing is that apps that already link libdm and/or X11 have no problem.  It's when an app doesn't use either, but then libged loads libged-dm.dylib, that loads libdm and all it's deps.  It's when libdm's deps get unloaded that it segfaults.</p>



<a name="271993232"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271993232" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271993232">(Feb 15 2022 at 15:50)</a>:</h4>
<p>which makes sense since an app using libdm is not going to unload it</p>



<a name="271993375"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271993375" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271993375">(Feb 15 2022 at 15:51)</a>:</h4>
<p>I don't have a qt build.  I've been living in mged -c land for a while once ogl stopped working.</p>



<a name="271993488"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271993488" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271993488">(Feb 15 2022 at 15:52)</a>:</h4>
<p>I haven't tried an opengl-disabled build to see if non-classic mode will fire up X correctly</p>



<a name="271993619"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271993619" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271993619">(Feb 15 2022 at 15:52)</a>:</h4>
<p>OH!  Yeah, I had to refactor some code for a libgcv plugin because of that - apparently a dynamically loaded lib can't go and load another dynamically loaded lib.</p>



<a name="271993831"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271993831" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271993831">(Feb 15 2022 at 15:54)</a>:</h4>
<p>Hmm.  I'd hate to give up the libged dm command...</p>



<a name="271995734"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271995734" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271995734">(Feb 15 2022 at 16:05)</a>:</h4>
<p>Archer does work from the build dir</p>



<a name="271996634"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271996634" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271996634">(Feb 15 2022 at 16:10)</a>:</h4>
<p>Okay, I think I just ruled out X11/ogl -- if I remove libdm-X and libdm-ogl, it still segfaults</p>



<a name="271996718"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271996718" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271996718">(Feb 15 2022 at 16:11)</a>:</h4>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>dyld: unloaded: &lt;970A62D7-21A7-3363-92AC-41D3E3ED2AF5&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-autoview.dylib
!!! REMOVING 0x7fd514c08d00 unknown
dyld: unloaded: &lt;D8509635-B237-3585-B70C-823C95F4B5CB&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-attr.dylib
!!! REMOVING 0x7fd514c08ba0 unknown
dyld: unloaded: &lt;F4435FE5-243C-3286-B0D3-CEDC50774EEE&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-arot.dylib
!!! REMOVING 0x7fd514e05d90 unknown
dyld: unloaded: &lt;B9E74045-8CE7-3438-B699-54645171BFC3&gt; /Users/morrison/brlcad.main/.build/libexec/dm/libdm-swrast.dylib
dyld: unloaded: &lt;21900CBB-094E-349C-A1B2-BAD779BDCF15&gt; /Users/morrison/brlcad.main/.build/lib/libosmesa.dylib
!!! REMOVING 0x7fd514e059b0 unknown
dyld: unloaded: &lt;C363B743-FE6B-3D4A-8513-953A5F6FAF28&gt; /Users/morrison/brlcad.main/.build/libexec/dm/libdm-ps.dylib
!!! REMOVING 0x7fd514e054c0 unknown
dyld: unloaded: &lt;E8A365D0-5923-386F-A9BD-7DA434D46324&gt; /Users/morrison/brlcad.main/.build/libexec/dm/libdm-plot.dylib
!!! REMOVING 0x7fd514d069b0 unknown
dyld: unloaded: &lt;DE144727-5E38-36CE-BFDD-A11CB151703E&gt; /Users/morrison/brlcad.main/.build/lib/libdm.20.dylib
dyld: unloaded: &lt;219AC144-E743-3037-8F1C-9B313D82BB1A&gt; /Users/morrison/brlcad.main/.build/lib/libpkg.20.dylib
dyld: unloaded: &lt;0AC2C158-06D9-3273-962E-FD0F51813D60&gt; /Users/morrison/brlcad.main/.build/libexec/dm/libdm-txt.dylib
zsh: segmentation fault  DYLD_PRINT_LIBRARIES=1 bin/cad_user 2&gt;&amp;1
</code></pre></div>



<a name="271996890"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271996890" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271996890">(Feb 15 2022 at 16:12)</a>:</h4>
<p>So the "REMOVING &lt;address&gt; unknown" warnings are the problem?</p>



<a name="271997047"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271997047" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271997047">(Feb 15 2022 at 16:13)</a>:</h4>
<p>so what's going on there is it's unloading everything, is unloading the last libdm-*.dylib (libdm-plot.dylib in this example) and it unloads libdm itself since reference-counting-wise, nothing else is using it.</p>



<a name="271997142"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271997142" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271997142">(Feb 15 2022 at 16:13)</a>:</h4>
<p>Ah, so it's getting to libdm before libdm-txt, which is a no-no?</p>



<a name="271997274"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271997274" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271997274">(Feb 15 2022 at 16:14)</a>:</h4>
<p>no, that's my manual debug printing, I'm printing out all the library pointers on load and unload.  You put them in a std::set, we the name is unknown, but it's basically the lines that follow -- and in the full log, the pointer address can be matched to the load statement where the name was known</p>



<a name="271997335"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271997335" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271997335">(Feb 15 2022 at 16:14)</a>:</h4>
<p>Oh, OK.</p>



<a name="271997378"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271997378" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271997378">(Feb 15 2022 at 16:15)</a>:</h4>
<p>I think I see what's wrong, but I'm not sure what to do about it.</p>



<a name="271999128"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/271999128" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#271999128">(Feb 15 2022 at 16:27)</a>:</h4>
<p>Do I need to redesign or back off the plugin approach?</p>



<a name="272000118"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272000118" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272000118">(Feb 15 2022 at 16:33)</a>:</h4>
<p>1) libged static initializer runs and plugins get dlopened, each one getting resolved by the dynamic linker which loads its dependent libraries, among those being..<br>
2) libged-dm loads, which dynamic loads libdm, which static initializer runs and plugins get dlopened, each one getting... yada yada, and then<br>
3) app runs, does it's thing, returns from main<br>
4) libged destructor runs, starts unloading ged plugins, libged-dm unloads for example but dependencies are not yet unloaded<br>
5) libdm destructor runs, starts unloading dm plugins and dependencies (perhaps asynchronously), and when it gets to the last plugin ...<br>
6) dynamic linker unloads libdm itself, and this appears to happen while libdm's destructor is still running<br>
7) seg faults, presumably on next iteration of the loop or on return from the destructor</p>



<a name="272000521"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272000521" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272000521">(Feb 15 2022 at 16:36)</a>:</h4>
<p>please don't go shotgunning the plugins just yet! -- I have a swath of unpushed commits rebased on main, hundreds of changes to eliminate the per-command API</p>



<a name="272000601"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272000601" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272000601">(Feb 15 2022 at 16:36)</a>:</h4>
<p>Don't worry, I'm not going to do anything drastic.  Just trying to get a sense of what we're facing</p>



<a name="272000646"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272000646" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272000646">(Feb 15 2022 at 16:37)</a>:</h4>
<p>it'll conflict for sure if you go ripping on it too much<br>
I think what is needed is to either ensure destruction is deferred, or order is somehow guaranteed by symbols</p>



<a name="272000819"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272000819" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272000819">(Feb 15 2022 at 16:38)</a>:</h4>
<p>If I absolutely have to I can ditch the dm command as a libged command and make it available some other way, but it's still a potential issue if anyone else happens to set up a similar conundrum for the unloaders...</p>



<a name="272000824"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272000824" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272000824">(Feb 15 2022 at 16:38)</a>:</h4>
<p>I mean there is one possibility of simply not auto-loading everything.  Only load as called.</p>



<a name="272000904"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272000904" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272000904">(Feb 15 2022 at 16:39)</a>:</h4>
<p>Would that help in the unloading calls though?  Or do you mean immediately unloading after execution as well?</p>



<a name="272000983"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272000983" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272000983">(Feb 15 2022 at 16:39)</a>:</h4>
<p>yeah, I think the dm plugin just provokes the issue, and isn't the issue itself.  seems reasonable/likely that future plugin will require some lib.  only issue might be like you said -- a dylib with a static initializer that loaded another dylib with a static initializer, and trying to avoid that</p>



<a name="272001139"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272001139" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272001139">(Feb 15 2022 at 16:40)</a>:</h4>
<p>oh gosh, no, not unloading after execution.  only loading what is used, and unloading everything that was loaded on shutdown.  that would handle this specific case (because very little uses the dm plugin)</p>



<a name="272001170"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272001170" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272001170">(Feb 15 2022 at 16:41)</a>:</h4>
<p>and apps that DO use the dm plugin appear to be gui and link dm, so it's never unloaded</p>



<a name="272001249"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272001249" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272001249">(Feb 15 2022 at 16:41)</a>:</h4>
<p>Ah.  So the gsh tool should provoke the issue then, if the dm command is used.</p>



<a name="272001334"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272001334" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272001334">(Feb 15 2022 at 16:42)</a>:</h4>
<p>Oh, nope - I added libdm to that lib list</p>



<a name="272001344"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272001344" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272001344">(Feb 15 2022 at 16:42)</a>:</h4>
<p>the test would be to run something that dynamically loads libdm, run the dm command, and see if it behaves on exit</p>



<a name="272001445"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272001445" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272001445">(Feb 15 2022 at 16:43)</a>:</h4>
<p>yeah, it'd require removing libdm from gsh's lib list, run dm command, and see if exit behaves</p>



<a name="272001711"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272001711" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272001711">(Feb 15 2022 at 16:45)</a>:</h4>
<p>I'll try that here... one sec.  Looks like I've got some actual dm library calls in there, so I'll have to turn off a couple things.</p>



<a name="272001969"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272001969" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272001969">(Feb 15 2022 at 16:46)</a>:</h4>
<p>interesting.  so if I remove all dm plugins, it still loads libdm dynamic, and eventually unloads it some time after libged-dm is unloaded seemingly without issue.  valgrind is clean.</p>



<a name="272002324"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272002324" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272002324">(Feb 15 2022 at 16:49)</a>:</h4>
<p>which is to say it's not simply returning from libdm's destructor that's causing the seg fault. it's that it is in the plugin unloading loop and it unloads a plugin that the corruption happens</p>



<a name="272002372"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272002372" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272002372">(Feb 15 2022 at 16:49)</a>:</h4>
<p>happens even with just the txt plugin and no others..</p>



<a name="272002492"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272002492" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272002492">(Feb 15 2022 at 16:50)</a>:</h4>
<p>Is there anything different about the libdm plugins compared to the libged plugins?</p>



<a name="272002788"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272002788" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272002788">(Feb 15 2022 at 16:52)</a>:</h4>
<p>Not intentionally...</p>



<a name="272002877"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272002877" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272002877">(Feb 15 2022 at 16:52)</a>:</h4>
<p>OK, confirm - if I take out the libdm explicit library calls from gsh, it crashes on exit after running "dm types"</p>



<a name="272002944"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272002944" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272002944">(Feb 15 2022 at 16:53)</a>:</h4>
<p>I'll go ahead and commit that turned off so we have a simple test case - will be easy to turn back on later.</p>



<a name="272003470"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272003470" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272003470">(Feb 15 2022 at 16:56)</a>:</h4>
<p>so this all centers around the c++ trick of using static initialization with a class we're using to ensure constructor/destructor code is called when a library is loaded/unloaded, and that's what is not playing -- it's unloading the library before the destructor is done</p>



<a name="272004540"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272004540" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272004540">(Feb 15 2022 at 17:03)</a>:</h4>
<p>Options I think are....<br>
1) make libdm not plugin-based, as that would avoid a dynamic lib loading other dynamic-loading/unloading libs, <br>
2) make libged only load plugins on-demand and hope any plugins like dm that load other dynamic-loading libs will already be loaded,<br>
3) defer unloading to libbu unloading -- basically make bu_dlclose schedule something for closure and wait,<br>
4) find a different mechanism (avoid using constructor/destructor since that's at the heart of why this fails)</p>



<a name="272004937"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272004937" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272004937">(Feb 15 2022 at 17:05)</a>:</h4>
<p>1) is possible - it was done primarily to keep Tcl out of the core libs, but I can also just put those backends requiring it behind an ENABLE_TCL check like that one shader in liboptical.</p>



<a name="272005096"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272005096" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272005096">(Feb 15 2022 at 17:06)</a>:</h4>
<p>My bigger concern is what happens if we start supporting 3rd party GED commands and someone else adds a command that does their own libdm-esque magic behind the scenes.</p>



<a name="272005152"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272005152" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272005152">(Feb 15 2022 at 17:06)</a>:</h4>
<p>3) appeals, but I don't know how practical it is</p>



<a name="272005578"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272005578" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272005578">(Feb 15 2022 at 17:08)</a>:</h4>
<p>1) is probably the shortest path back to working reliably, and realistically it's pretty unlikely we're going to get a lot of custom libdm backend implementations anytime soon to take advantage of the modularity.</p>



<a name="272005854"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272005854" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272005854">(Feb 15 2022 at 17:10)</a>:</h4>
<p>I also wonder what will happen if we expose libgcv through any of the GED commands - mightn't there be a similar issue?</p>



<a name="272007887"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272007887" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272007887">(Feb 15 2022 at 17:22)</a>:</h4>
<p>Would 4) involve (say) making ged_init and ged_free be responsible for plugin loading and unloading?</p>



<a name="272008370"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272008370" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272008370">(Feb 15 2022 at 17:25)</a>:</h4>
<p>yeah, something like that - making the loading and unloading a little more explicit.  I suspect just having the loop that does destruction be explicitly called would avoid the segfault because the dynamic loader would know that it can't unload the parent dm/ged/gcv library</p>



<a name="272009447"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272009447" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272009447">(Feb 15 2022 at 17:31)</a>:</h4>
<p>I think I can try #3 pretty quickly, and see if it does the trick.  I suspect it will.  The downside is memory use until libbu is unloaded.  Probably could have API forcibly unload on demand if that becomes an issue, but unlikely an issue in our case until we're talking about thousands of plugins.</p>



<a name="272009706"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272009706" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272009706">(Feb 15 2022 at 17:33)</a>:</h4>
<p>Sounds good.  If that doesn't work let me know if you want me to do either 1) or 4)</p>



<a name="272010230"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272010230" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272010230">(Feb 15 2022 at 17:37)</a>:</h4>
<p>may still be a benefit to doing #2 (faster load times) -- there is some occasional huge pause on certain (usually infrequent) runs that I assume is something the dynamic loader is doing.  seem the pause especially on Windows, 30-60+sec before mged displays.</p>



<a name="272019805"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272019805" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272019805">(Feb 15 2022 at 18:46)</a>:</h4>
<p>Deferred appears to work nicely:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>...
!!! REMOVING 0x7fdd55c0a030 unknown
!!! REMOVING 0x7fdd55c09dc0 unknown
!!! REMOVING 0x7fdd55c09b50 unknown
!!! REMOVING 0x7fdd55c098e0 unknown
!!! REMOVING 0x7fdd55c09670 unknown
!!! REMOVING 0x7fdd55c09330 unknown
!!! REMOVING 0x7fdd55c09130 unknown
!!! REMOVING 0x7fdd55c08ef0 unknown
!!! REMOVING 0x7fdd55c08d90 unknown
!!! LIBDM DESTRUCTOR
!!! REMOVING 0x7fdd579054c0 unknown
!!! REMOVING 0x7fdd57905140 unknown
!!! REMOVING 0x7fdd57904a50 unknown
!!! REMOVING 0x7fdd5780ecc0 unknown
!!! REMOVING 0x7fdd55e06400 unknown
!!! REMOVING 0x7fdd55d07010 unknown
dyld: unloaded: &lt;484BDA57-EC5C-3533-8271-1213BE720173&gt; /Users/morrison/brlcad.main/.build/libexec/dm/libdm-ogl.dylib
dyld: unloaded: &lt;7CD794FB-07E7-3E51-B7CE-CB9585477278&gt; /usr/local/opt/libxrender/lib/libXrender.1.dylib
dyld: unloaded: &lt;466439D8-1576-33B8-AE38-F4AD4CBCDC3F&gt; /opt/X11/lib/libGLU.1.dylib
dyld: unloaded: &lt;0AC2C158-06D9-3273-962E-FD0F51813D60&gt; /Users/morrison/brlcad.main/.build/libexec/dm/libdm-txt.dylib
dyld: unloaded: &lt;E8A365D0-5923-386F-A9BD-7DA434D46324&gt; /Users/morrison/brlcad.main/.build/libexec/dm/libdm-plot.dylib
dyld: unloaded: &lt;C363B743-FE6B-3D4A-8513-953A5F6FAF28&gt; /Users/morrison/brlcad.main/.build/libexec/dm/libdm-ps.dylib
dyld: unloaded: &lt;B9E74045-8CE7-3438-B699-54645171BFC3&gt; /Users/morrison/brlcad.main/.build/libexec/dm/libdm-swrast.dylib
dyld: unloaded: &lt;21900CBB-094E-349C-A1B2-BAD779BDCF15&gt; /Users/morrison/brlcad.main/.build/lib/libosmesa.dylib
dyld: unloaded: &lt;6461ED77-30C4-3D90-8FFE-224EF5B8365F&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-dsp.dylib
dyld: unloaded: &lt;1536E3E1-0B02-3F94-92A2-00D48E37B256&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-edmater.dylib
dyld: unloaded: &lt;F0DAA927-CCFA-3F6D-B79B-BC27BDB6A3A8&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-env.dylib
dyld: unloaded: &lt;74AF84F3-50D3-398F-9470-8C0F4DC17813&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-erase.dylib
dyld: unloaded: &lt;52AACC7B-7DD1-3EA6-BF05-7D1073E5ADC1&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-exists.dylib
dyld: unloaded: &lt;35739FC4-A62C-3F93-8E41-B355D7E4D5A2&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-expand.dylib
dyld: unloaded: &lt;C079326A-9961-3C29-9CB0-18D9CCA48C32&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-eye_pos.dylib
dyld: unloaded: &lt;F40B173E-8839-3244-A200-C1BEAC11EB7E&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-facetize.dylib
dyld: unloaded: &lt;47715816-3B66-3BDF-85E8-915D193BDDD4&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-fb2pix.dylib
dyld: unloaded: &lt;CA5B33DE-CF2C-3D33-95D8-CDCD86B4C109&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-fbclear.dylib
dyld: unloaded: &lt;479418C5-FF5B-3D14-BEEB-D095AD4D4C55&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-find.dylib
dyld: unloaded: &lt;7F8475E5-81F6-3032-9465-72E7D321179A&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-form.dylib
dyld: unloaded: &lt;0DABEEDD-2EBE-327A-8B17-6C9FFEDA693B&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-fracture.dylib
dyld: unloaded: &lt;5E8181FA-7584-37BF-96BE-7E9819B89D52&gt; /Users/morrison/brlcad.main/.build/libexec/ged/libged-gdiff.dylib
...
</code></pre></div>



<a name="272023831"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272023831" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272023831">(Feb 15 2022 at 19:15)</a>:</h4>
<p>FYA, I'm trying to get set up with Visual Studio 2022 now - I think the Github CI system made the upgrade.</p>



<a name="272024020"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272024020" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272024020">(Feb 15 2022 at 19:16)</a>:</h4>
<p>Rather worrisome in that the openNURBS build appears to be failing with an internal compiler error...</p>



<a name="272024514"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272024514" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272024514">(Feb 15 2022 at 19:20)</a>:</h4>
<p>basically it cruises through the destructor and schedules all the dylibs for closing.  then when libbu is unloaded or an explicit dlunload() is called, it actually closes them all.</p>



<a name="272024578"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272024578" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272024578">(Feb 15 2022 at 19:21)</a>:</h4>
<p>alrighty.. all tests back to passing.  still no ogl, but progress!</p>



<a name="272024792"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272024792" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272024792">(Feb 15 2022 at 19:22)</a>:</h4>
<p>I'm still sorting through compiler errors with the tamu students.. almost all ran into issues.    any idea why CHECK_CXX_FLAG(fsanitize=fuzzer) would be passing on Windows???  It did, and then proceeded to fail during compile because of the flag.</p>



<a name="272024844"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272024844" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272024844">(Feb 15 2022 at 19:23)</a>:</h4>
<p>Not yet - it's something about Visual Studio 2022</p>



<a name="272024861"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272024861" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272024861">(Feb 15 2022 at 19:23)</a>:</h4>
<p>another tried in WSL, which I've done myself, but their build ended up unable to find Tcl's configure for some reason</p>



<a name="272024869"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272024869" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272024869">(Feb 15 2022 at 19:23)</a>:</h4>
<p>I'm seeing it myself here, but I don't know yet why that test would pass</p>



<a name="272025974"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272025974" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272025974">(Feb 15 2022 at 19:31)</a>:</h4>
<div class="codehilite"><pre><span></span><code>CHECK_START: Performing Test FSANITIZE_FUZZER_CXX_FLAG_FOUND
CHECK_PASS: Success
Performing C++ SOURCE FILE Test FSANITIZE_FUZZER_CXX_FLAG_FOUND succeeded with the following output:
Change Dir: C:/brlcad-build/CMakeFiles/CMakeTmp

Run Build Command(s):C:/Program Files/Microsoft Visual Studio/2022/Community/MSBuild/Current/Bin/amd64/MSBuild.exe cmTC_30228.vcxproj /p:Configuration=Debug /p:Platform=x64 /p:VisualStudioVersion=17.0 /v:m &amp;&amp; Microsoft (R) Build Engine version 17.1.0+ae57d105c for .NETFramework^M
Copyright (C) Microsoft Corporation. All rights reserved.^M
^M
  Microsoft (R) C/C++ Optimizing Compiler Version 19.31.31104 for x64^M
  Copyright (C) Microsoft Corporation.  All rights reserved.^M
  cl /c /Zi /W3 /WX- /diagnostics:column /Od /Ob0 /D _MBCS /D WIN32 /D _WINDOWS /D _POSIX_C_SOURCE=200809L /D _XOPEN_SOURCE=700 /D FSANITIZE_FUZZER_CXX_FLAG_FOUND /D &quot;CMAKE_INTDIR=\&quot;Debug\&quot;&quot; /Gm- /EHsc /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Zc:inline /GR /Fo&quot;cmTC_30228.dir\Debug\\&quot; /Fd&quot;cmTC_30228.dir\Debug\vc143.pdb&quot; /external:W3 /Gd /TP /errorReport:queue  -fsanitize=fuzzer &quot;C:\brlcad-build\CMakeFiles\CMakeTmp\src.cxx&quot;^M
  src.cxx^M
  cmTC_30228.vcxproj -&gt; C:\brlcad-build\CMakeFiles\CMakeTmp\Debug\cmTC_30228.exe^M


Source file was:
int main() { return 0; }
</code></pre></div>



<a name="272025991"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272025991" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272025991">(Feb 15 2022 at 19:31)</a>:</h4>
<p>ahh, <a href="https://www.google.com/search?client=safari&amp;rls=en&amp;q=visual+studio+2022+fsanitize%3Dfuzzer&amp;ie=UTF-8&amp;oe=UTF-8">https://www.google.com/search?client=safari&amp;rls=en&amp;q=visual+studio+2022+fsanitize%3Dfuzzer&amp;ie=UTF-8&amp;oe=UTF-8</a></p>



<a name="272026030"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272026030" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272026030">(Feb 15 2022 at 19:31)</a>:</h4>
<p>they actually added it</p>



<a name="272026056"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272026056" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272026056">(Feb 15 2022 at 19:31)</a>:</h4>
<p>so then the question is why does it fail later...</p>



<a name="272026505"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272026505" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272026505">(Feb 15 2022 at 19:35)</a>:</h4>
<p>looks like the top-level unprotected one is stray.  we have a fuzz regression test that does a direct test and links proper</p>



<a name="272026816"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272026816" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272026816">(Feb 15 2022 at 19:37)</a>:</h4>
<p>I removed it, doesn't appear to be used</p>



<a name="272039002"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272039002" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272039002">(Feb 15 2022 at 21:13)</a>:</h4>
<p><a href="https://discourse.mcneel.com/t/building-opennurbs-public-with-visualstudio2022-results-in-compiler-error/137817">https://discourse.mcneel.com/t/building-opennurbs-public-with-visualstudio2022-results-in-compiler-error/137817</a></p>



<a name="272040050"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272040050" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272040050">(Feb 15 2022 at 21:22)</a>:</h4>
<p><a href="https://github.com/microsoft/vcpkg/issues/19561">https://github.com/microsoft/vcpkg/issues/19561</a></p>



<a name="272042306"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272042306" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272042306">(Feb 15 2022 at 21:41)</a>:</h4>
<p>It narrows down fairly quickly to trying to call methods on the const_cast&lt;ON_SerialNumberMap*&gt;(this) pointer.  Not sure yet how to work around it.</p>



<a name="272043944"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272043944" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272043944">(Feb 15 2022 at 21:57)</a>:</h4>
<p>Grr.  I don't have access to the Microsoft compiler bug page referenced in the vcpkg discussion.</p>



<a name="272044023"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272044023" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272044023">(Feb 15 2022 at 21:57)</a>:</h4>
<p>Looks like all we can tell students until a workaround is found or Microsoft pushes a fix is to use VS2019</p>



<a name="272044120"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272044120" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272044120">(Feb 15 2022 at 21:58)</a>:</h4>
<p>removing the consts and the casts doesn't seem to help</p>



<a name="272045791"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272045791" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272045791">(Feb 15 2022 at 22:13)</a>:</h4>
<p>OK... from the "cheap but functional" school...  It looks like that particular class method isn't actually used anywhere, so we can just turn it off completely.</p>



<a name="272046249"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272046249" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272046249">(Feb 15 2022 at 22:17)</a>:</h4>
<p>Blast, typoed the summary line.  It's unused</p>



<a name="272046677"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272046677" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272046677">(Feb 15 2022 at 22:20)</a>:</h4>
<p>I wonder if their build system works, implying it being something we're passing in that's untested.  I don't see reference to that error in their tracker.  If it uniquely affects us, it's probably our combination of flags..</p>



<a name="272046747"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272046747" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272046747">(Feb 15 2022 at 22:21)</a>:</h4>
<p>looks like cmake guys encountered an issue with the /FS flag recently that they addressed, maybe related</p>



<a name="272047337"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272047337" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272047337">(Feb 15 2022 at 22:26)</a>:</h4>
<p>confirmed on the mac here that gsh now shuts down clean.  That was some nice work <span class="user-mention" data-user-id="102902">@Sean</span></p>



<a name="272051804"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272051804" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272051804">(Feb 15 2022 at 23:14)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> as far as OpenGL is concerned - I think I may have asked you this already, but does glxgears or one of the other X11 OpenGL demos run successfully on your Mac?</p>



<a name="272058080"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272058080" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272058080">(Feb 16 2022 at 00:19)</a>:</h4>
<p>Just got a successful build with Visual Studio 2022 (needed a clean build dir)</p>



<a name="272322583"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272322583" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272322583">(Feb 17 2022 at 21:06)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> yep, no problems with glxgears or previous mgeds for that matter</p>



<a name="272322604"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272322604" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272322604">(Feb 17 2022 at 21:07)</a>:</h4>
<p>any idea what this is about?  <a href="/user_uploads/1549/iKD9_ZRvmkA609uM1p3eruyc/MicrosoftTeams-image.png">MicrosoftTeams-image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/iKD9_ZRvmkA609uM1p3eruyc/MicrosoftTeams-image.png" title="MicrosoftTeams-image.png"><img src="/user_uploads/1549/iKD9_ZRvmkA609uM1p3eruyc/MicrosoftTeams-image.png"></a></div>



<a name="272322758"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272322758" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272322758">(Feb 17 2022 at 21:08)</a>:</h4>
<p>Yeah, I was going to say, I have a clean 2022 from two students now .. but one has those errors in the external project builds (maybe all of them)</p>



<a name="272329755"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272329755" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272329755">(Feb 17 2022 at 21:55)</a>:</h4>
<p>maddening... why doesn't it fail with the mac here???</p>



<a name="272329779"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272329779" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272329779">(Feb 17 2022 at 21:55)</a>:</h4>
<p>That's one of those rather unhelpful Visual Studio errors you get when a custom target fails.</p>



<a name="272329802"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272329802" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272329802">(Feb 17 2022 at 21:55)</a>:</h4>
<p>First question - what version of CMake are they using?</p>



<a name="272330242"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272330242" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272330242">(Feb 17 2022 at 21:59)</a>:</h4>
<p>For libdm+opengl, what does running ./src/libdm/tests/dm_test from the build directory show?</p>



<a name="272432216"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272432216" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272432216">(Feb 18 2022 at 17:39)</a>:</h4>
<p>@starseeker I figured that one out.  The full log had better detail.  Turns out MSVC automatically updated/updates itself, so the compiler that CMake had originally detected no longer existed.</p>



<a name="272432480"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272432480" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272432480">(Feb 18 2022 at 17:41)</a>:</h4>
<p>I think that may explain a couple build failures commonly encountered by people who have recently installed MSVC.  I'm not sure if we can detect that situation as that error is absolutely inscrutible, or maybe put some advice into the Compiling page instructions to ensure MSVC is completely updated before proceeding with CMake (but then MSVC could update at any time).</p>



<a name="272432528"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272432528" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272432528">(Feb 18 2022 at 17:41)</a>:</h4>
<p>I suppose it's not as common on Mac/Linux/BSD simply because the compiler isn't sitting in a versioned directory like msvc's compiler is.</p>



<a name="272432940"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272432940" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272432940">(Feb 18 2022 at 17:44)</a>:</h4>
<p>Also figured out one of the other common build errors some of them ran into.  If you do a Git for Windows clone of the code, the build will fail in WSL (Ubuntu) because some of the build logic appears to require unix line endings (e.g., libpng seems to be running awk).</p>



<a name="272433145"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272433145" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272433145">(Feb 18 2022 at 17:46)</a>:</h4>
<p>Not sure that can be detected either, but can put a note in Compiling that one must fully start in WSL if you're going that route.</p>



<a name="272433187"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272433187" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272433187">(Feb 18 2022 at 17:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/272329802">said</a>:</p>
<blockquote>
<p>First question - what version of CMake are they using?</p>
</blockquote>
<p>Always the latest.</p>



<a name="272433320"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/272433320" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#272433320">(Feb 18 2022 at 17:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/272330242">said</a>:</p>
<blockquote>
<p>For libdm+opengl, what does running ./src/libdm/tests/dm_test from the build directory show?</p>
</blockquote>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>(base) morrison@agua .build % src/libdm/tests/dm_test
load msgs: dlsym(0x7f80706048d0, fb_plugin_info): symbol not found
Unable to load symbols from './libexec/dm/libdm-plot.dylib' (skipping)
Could not find 'fb_plugin_info' symbol in plugin
dlsym(0x7f807040bf60, fb_plugin_info): symbol not found
Unable to load symbols from './libexec/dm/libdm-ps.dylib' (skipping)
Could not find 'fb_plugin_info' symbol in plugin

Available types:
    ogl
    X
    plot
    ps
    swrast
    txt
    nu
nu valid: 1
plot valid: 1
X valid: 1
ogl valid: 1
osgl valid: 0
wgl valid: 0
dmp name: nu
open called
dmp name: txt
close called
recommended type: ogl
</code></pre></div>



<a name="273556351"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/273556351" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#273556351">(Feb 28 2022 at 21:26)</a>:</h4>
<p>anything else to check <span class="user-mention" data-user-id="112516">@starseeker</span> ?</p>



<a name="273556707"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/273556707" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#273556707">(Feb 28 2022 at 21:29)</a>:</h4>
<p>Maybe check whether the older (working) versions are linking to any libraries that are different from the newer version?</p>
<p>I don't know how much trouble it would be, but it would be interesting to know if qged works on that platform or not (the qged setup shouldn't require X11 opengl, so I'm curious as to whether the problem also manifests if we take X out of the equation...)</p>



<a name="273706885"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/273706885" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#273706885">(Mar 01 2022 at 20:40)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I think the bzflag reboot must have introduced a new default compiler - libbu's sort.c is suddenly making it unhappy...</p>



<a name="273706927"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/273706927" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#273706927">(Mar 01 2022 at 20:41)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> yes, see announcement -- major OS upgrade happened</p>



<a name="273706948"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/273706948" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#273706948">(Mar 01 2022 at 20:41)</a>:</h4>
<p>Ah, OK.  I can see where the error is coming from, but I'm not sure what the "correct" thing to do instead is...</p>



<a name="273707121"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/273707121" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#273707121">(Mar 01 2022 at 20:43)</a>:</h4>
<p>I'll can take a look at it, I hadn't gotten to compiling there yet.   Been chasing fires, reviewing PR commits, and answering questions all day.</p>



<a name="273707145"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/273707145" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#273707145">(Mar 01 2022 at 20:43)</a>:</h4>
<p>speaking of which... I'll create another thread for an e-mail that came in</p>



<a name="273742914"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/273742914" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#273742914">(Mar 02 2022 at 02:12)</a>:</h4>
<p>@starseeker sorry, that was me bashing around. Clang 13 now, gcc 10.3 is also installed, so -DCMAKE_C_COMPILER=gcc</p>



<a name="273744321"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/273744321" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#273744321">(Mar 02 2022 at 02:26)</a>:</h4>
<p><span class="user-mention" data-user-id="103542">@Erik</span> no worries - we just need to fix the issue.  I'm not confident I know what the "right" answer should be yet...</p>



<a name="273744468"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/273744468" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#273744468">(Mar 02 2022 at 02:28)</a>:</h4>
<p>the subtracting a null ptr thing is buried in a macro from what I saw, could take a bit of doing to tease out. Using gcc pulls a sysinfo bridge header that mucks up libbu linking, that test should be moved from 'have the header' to 'can link the symbol' I think</p>



<a name="274564433"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274564433" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274564433">(Mar 08 2022 at 16:20)</a>:</h4>
<p>I just did a build on the latest Fedora, compiled clean, mgen runs, but then abruptly closes after drawing anything and running rt…. Rt window displays the rendering.  Terminal output says mged was Killed.</p>



<a name="274564673"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274564673" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274564673">(Mar 08 2022 at 16:22)</a>:</h4>
<p>ran in gdb and there’s nothing to break on as there indeed appears to be something in the system that send mged the kill signal after forking off the rt process.</p>



<a name="274564796"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274564796" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274564796">(Mar 08 2022 at 16:22)</a>:</h4>
<p>I’ve only seen that before when a process attempts to allocate too much memory, but haven’t yet seen evidence that’s what’s going on here</p>



<a name="274566149"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274566149" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274566149">(Mar 08 2022 at 16:31)</a>:</h4>
<p>Oof, okay I found the evidence.  It is getting killed by the Out of memory monitor.  Not seeing why as it only appears to be using 1mb…</p>



<a name="274570015"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274570015" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274570015">(Mar 08 2022 at 16:57)</a>:</h4>
<p>Ah, so turns out mged is using 5.4GB just with mged open… and that laptop is my low-resource test box, only has 4GB + 4GB swap.  It is running out of memory.  Seems a bit nuts that mged is using that much with essentially nothing open.</p>



<a name="274574145"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274574145" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274574145">(Mar 08 2022 at 17:23)</a>:</h4>
<p>Looks like it’s something in DM.  Every attach X is adding 1.5GB usage.  Kicking off the tcltk gui adds over 4GB (presumably from the dm+fb).</p>



<a name="274576128"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274576128" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274576128">(Mar 08 2022 at 17:37)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span>  can you see what mged does for you if you run mged -c share/db/moss.g. , attach nu, attach X , close the window, attach X again, then draw all.g. ?</p>



<a name="274602373"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274602373" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274602373">(Mar 08 2022 at 20:32)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  Wipes out with the following error:</p>
<div class="codehilite"><pre><span></span><code>X Error of failed request:  BadDrawable (invalid Pixmap or Window parameter)
  Major opcode of failed request:  62 (X_CopyArea)
  Resource id in failed request:  0x460000a
  Serial number of failed request:  3473
  Current serial number in output stream:  3474
</code></pre></div>



<a name="274604054"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274604054" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274604054">(Mar 08 2022 at 20:45)</a>:</h4>
<p>I'm also seeing a memory bump here.  Not sure why yet.</p>



<a name="274604215"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274604215" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274604215">(Mar 08 2022 at 20:46)</a>:</h4>
<p>(As an aside, here's something a little weird from valgrind when I run attach X):</p>
<div class="codehilite"><pre><span></span><code>==1409798== Invalid read of size 1
==1409798==    at 0x483FEF0: strcmp (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==1409798==    by 0x90A999E: _XimUnRegisterIMInstantiateCallback (in /usr/lib/x86_64-linux-gnu/libX11.so.6.3.0)
==1409798==    by 0x9090892: XUnregisterIMInstantiateCallback (in /usr/lib/x86_64-linux-gnu/libX11.so.6.3.0)
==1409798==    by 0x90A9866: _XimRegisterIMInstantiateCallback (in /usr/lib/x86_64-linux-gnu/libX11.so.6.3.0)
==1409798==    by 0x909080C: XRegisterIMInstantiateCallback (in /usr/lib/x86_64-linux-gnu/libX11.so.6.3.0)
==1409798==    by 0x5A392F2: TkpOpenDisplay (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59A0701: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59A0567: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59A0F4E: TkCreateMainWindow (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59ABA1D: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59AB40C: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59A349C: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==  Address 0xf205dc1 is 1 bytes inside a block of size 9 free&#39;d
==1409798==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==1409798==    by 0x909FB3F: XSetLocaleModifiers (in /usr/lib/x86_64-linux-gnu/libX11.so.6.3.0)
==1409798==    by 0x5A39ACA: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x5A39A4F: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x90A9866: _XimRegisterIMInstantiateCallback (in /usr/lib/x86_64-linux-gnu/libX11.so.6.3.0)
==1409798==    by 0x909080C: XRegisterIMInstantiateCallback (in /usr/lib/x86_64-linux-gnu/libX11.so.6.3.0)
==1409798==    by 0x5A392F2: TkpOpenDisplay (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59A0701: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59A0567: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59A0F4E: TkCreateMainWindow (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59ABA1D: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59AB40C: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==  Block was alloc&#39;d at
==1409798==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==1409798==    by 0x909F756: _XlcDefaultMapModifiers (in /usr/lib/x86_64-linux-gnu/libX11.so.6.3.0)
==1409798==    by 0x909FB2A: XSetLocaleModifiers (in /usr/lib/x86_64-linux-gnu/libX11.so.6.3.0)
==1409798==    by 0x5A39ACA: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x5A392D9: TkpOpenDisplay (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59A0701: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59A0567: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59A0F4E: TkCreateMainWindow (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59ABA1D: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59AB40C: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x59A349C: ??? (in /usr/lib/x86_64-linux-gnu/libtk8.6.so)
==1409798==    by 0x129B98: gui_setup (attach.c:333)
</code></pre></div>



<a name="274605634"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274605634" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274605634">(Mar 08 2022 at 20:57)</a>:</h4>
<p>Memory is being allocated at if_X24.c:2065, from a size calculation at if_X24.c:1997</p>



<a name="274605843"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274605843" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274605843">(Mar 08 2022 at 20:58)</a>:</h4>
<p>both ifp-&gt;i-&gt;if_max_height and  ifp-&gt;i-&gt;if_max_width are set to 20480</p>



<a name="274606177"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274606177" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274606177">(Mar 08 2022 at 21:00)</a>:</h4>
<p>I think that's coming from src/libdm/include/private.h:129</p>



<a name="274606749"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274606749" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274606749">(Mar 08 2022 at 21:04)</a>:</h4>
<p>However, that doesn't explain what's going on when the window is closed...</p>



<a name="274607028"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274607028" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274607028">(Mar 08 2022 at 21:06)</a>:</h4>
<p>Interestingly, the same general problem happens with ogl:</p>
<div class="codehilite"><pre><span></span><code>ATTACHING ogl (X Windows with OpenGL graphics)
mged&gt; X Error of failed request:  GLXBadDrawable
  Major opcode of failed request:  151 (GLX)
  Minor opcode of failed request:  5 (X_GLXMakeCurrent)
  Serial number of failed request:  1252
  Current serial number in output stream:  1252
</code></pre></div>



<a name="274609505"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274609505" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274609505">(Mar 08 2022 at 21:26)</a>:</h4>
<p>Also seems to be specific to the first attach - if I attach multiple windows and close the second, I can attach a new one successfully.</p>



<a name="274609571"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274609571" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274609571">(Mar 08 2022 at 21:27)</a>:</h4>
<p>Clearly memory is not being freed when the window is closed...</p>



<a name="274610032"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274610032" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274610032">(Mar 08 2022 at 21:30)</a>:</h4>
<p>None of dm_close,  fb_close nor fb_close_existing gets triggered when the window closes.</p>



<a name="274610986"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274610986" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274610986">(Mar 08 2022 at 21:38)</a>:</h4>
<p>Oof.  The first thing that comes to mind is to have the dm_open command bind a some Tcl command that will call dm_close  to the Tk &lt;Destroy&gt; event....</p>



<a name="274695414"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274695414" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274695414">(Mar 09 2022 at 14:32)</a>:</h4>
<p>(deleted)</p>



<a name="274698004"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274698004" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274698004">(Mar 09 2022 at 14:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/274609571">said</a>:</p>
<blockquote>
<p>Clearly memory is not being freed when the window is closed...</p>
</blockquote>
<p>yeah, I noticed that too.  I think that's may also be new, but more concerning is the crash.  The 20480x20480 change was made back in 7.16.0 and just testing a 7.24 version, it doesn't appear to explode memory use and seems to release when windows are closed.  I reduced the number down to 8096x8096 anyways, but some other change is likely involved, and I think the crash is definitely new.</p>



<a name="274698921"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274698921" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274698921">(Mar 09 2022 at 14:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/274602373">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  Wipes out with the following error:</p>
<p><div class="codehilite"><pre><span></span><code>X Error of failed request:  BadDrawable (invalid Pixmap or Window parameter)
  Major opcode of failed request:  62 (X_CopyArea)
  Resource id in failed request:  0x460000a
  Serial number of failed request:  3473
  Current serial number in output stream:  3474
</code></pre></div><br>
</p>
</blockquote>
<p>I think this is at the heart of the issue, but I'm not yet groking that stack trace..  will try to catch it on Mac to see if it gives a different path or at least more complete symbols -- looks like your build isn't enable-all'd.</p>



<a name="274724989"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274724989" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274724989">(Mar 09 2022 at 17:45)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I may have messed up the dm bookkeeping in MGED at some point - my recollection of MGED's management of those can be summed up as "messy", so it's actually quite likely I messed up somewhere.  I'll see if I can tease a 7.24 build into working and try to figure out how the fb memory got freed...</p>



<a name="274726269"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274726269" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274726269">(Mar 09 2022 at 17:52)</a>:</h4>
<p>One likely culprit of the increased memory usage may be my attempt to set up things so each dm has a built-in embedded fb by default.  Don't know if that's behind the window crash but it's likely why the dm's are suddenly taking up memory they didn't previously</p>



<a name="274731600"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274731600" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274731600">(Mar 09 2022 at 18:29)</a>:</h4>
<p>OK, got 7.24.4 building - here's what I'm seeing so far (I'm getting X11 windows and the first ogl window, but the second wipes out):</p>
<div class="codehilite"><pre><span></span><code>BRL-CAD Release 7.24.4  Geometry Editor (MGED)
    Wed, 09 Mar 2022 13:25:05 -0500, Compilation 0
    cyapp@ubuntu2019

attach (nu|txt|X|ogl)[nu]?
mged&gt; attach X
ATTACHING X (X Window System (X11))
mged&gt; attach X
ATTACHING X (X Window System (X11))
mged&gt; attach ogl
ATTACHING ogl (X Windows with OpenGL graphics)
mged&gt; attach ogl
ATTACHING ogl (X Windows with OpenGL graphics)
mged&gt; X Error of failed request:  GLXBadDrawable
  Major opcode of failed request:  151 (GLX)
  Minor opcode of failed request:  5 (X_GLXMakeCurrent)
  Serial number of failed request:  1181
  Current serial number in output stream:  1181
</code></pre></div>



<a name="274733351"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274733351" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274733351">(Mar 09 2022 at 18:43)</a>:</h4>
<p>Huh - now I'm seeing the exact same thing with latest main, fwiw.  I can't get 7.22.0 to build easily - will probably need to set up a VM if I need to go that far back.</p>



<a name="274734073"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274734073" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274734073">(Mar 09 2022 at 18:48)</a>:</h4>
<p>(Oh - should make clear I'm closing each window above before proceeding to the next attach)</p>



<a name="274734720"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274734720" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274734720">(Mar 09 2022 at 18:53)</a>:</h4>
<p>Aaaaand now I can't get the X attach to reproduce the failure, even with the fb memory set large... what on earth...</p>



<a name="274758896"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274758896" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274758896">(Mar 09 2022 at 22:03)</a>:</h4>
<p>OK, per recent discussion, drawing in the second "attach X" does indeed crash in latest main.</p>



<a name="274760355"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274760355" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274760355">(Mar 09 2022 at 22:16)</a>:</h4>
<p>Also crashes in 69b1b1bed2 (Tcl/Tk 8.5, just before the 8.6 switch)</p>



<a name="274760828"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274760828" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274760828">(Mar 09 2022 at 22:18)</a>:</h4>
<p>Same thing with rel-7-24-4</p>



<a name="274761571"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/274761571" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#274761571">(Mar 09 2022 at 22:24)</a>:</h4>
<p>7.24.0 is too old to readily build on this machine...</p>



<a name="275117024"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/275117024" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#275117024">(Mar 12 2022 at 21:01)</a>:</h4>
<p>Okay, I swear I'd tested 7.24 and it worked, but it's bombing for me too.   I documented it.</p>



<a name="275282321"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/275282321" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#275282321">(Mar 14 2022 at 18:54)</a>:</h4>
<p>I believe you <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span>   Interesting problem, in a hair-pulling sort of way...</p>



<a name="276074374"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/276074374" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#276074374">(Mar 21 2022 at 16:05)</a>:</h4>
<p>Just FYI, I'm working on the build Action testing issues from the recent materials merge.</p>



<a name="276143871"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/276143871" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Himanshu <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#276143871">(Mar 22 2022 at 04:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/276074374">said</a>:</p>
<blockquote>
<p>Just FYI, I'm working on the build Action testing issues from the recent materials merge.</p>
</blockquote>
<p>Latest commit failing in Windows.</p>



<a name="276181446"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/276181446" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Himanshu <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#276181446">(Mar 22 2022 at 12:37)</a>:</h4>
<p>/me thinks sometimes why msvc shows weird message that file not found but file is still there. Now builds fine.</p>



<a name="276263137"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/276263137" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#276263137">(Mar 22 2022 at 22:26)</a>:</h4>
<p><span class="user-mention" data-user-id="252475">@Himanshu Sekhar Nayak</span> hm, don't know what to say about that other than it helps to turn up the compilation verbosity (under Options -&gt; Project and Solutions -&gt; Build and Run).  I typically set output to Normal and log to Detailed.  That way, I can get to what exactly happened if needed.</p>



<a name="277929446"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/277929446" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#277929446">(Apr 05 2022 at 19:07)</a>:</h4>
<p>One of the unexpected side effects of the plugin changes is frequently running into runtime crashes now whenever something changes outside the plugin dll/so/dylib that is incompatible with whatever's going on inside the plugin (as it does not appear to automatically recompile).  At least that seems to be what's going on.  For example, just pulled latest view changes, compiled, and then all tools exhibit hard corruption, assert failures, bu_bombing, etc.   Cleaning and recompiling is apparently more often than not necessary now.  Rather unexpected and unintuitive that it's not updating/recompiling the plugins.  Maybe some dependencies aren't listed correctly?</p>



<a name="277929702"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/277929702" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#277929702">(Apr 05 2022 at 19:09)</a>:</h4>
<p>Also working with a student on a hard database I/O corruption situation that seems to be new.  Any database creation on his system is resulting in corrupted .g files.  Others with the same setup, same msvc, etc. are not experiencing the corruption.  It appears to have just started in the past two weeks.</p>



<a name="277930926"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/277930926" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#277930926">(Apr 05 2022 at 19:19)</a>:</h4>
<p>That is unexpected - I would have figured the logic would rebuild anything that would result in such  a pronounced failure.</p>



<a name="277930970"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/277930970" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#277930970">(Apr 05 2022 at 19:19)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I'll switch to working in a branch for this, so I don't keep disrupting everyone else.</p>



<a name="277931259"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/277931259" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#277931259">(Apr 05 2022 at 19:22)</a>:</h4>
<p>It's probable I wouldn't see that breakage mode myself, as my normal MO is to clear and rebuild.</p>



<a name="278999084"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/278999084" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#278999084">(Apr 14 2022 at 17:52)</a>:</h4>
<p>@starseeker I’m away from a computer to test, but getting multiple reports that mged is busted and recent updates, draw not working.  Can you or someone else check?</p>



<a name="279001493"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/279001493" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#279001493">(Apr 14 2022 at 18:11)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  I just pushed a reversion that should put it back.</p>



<a name="282032009"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/282032009" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#282032009">(May 11 2022 at 21:43)</a>:</h4>
<p>so, uh, 'sup with <em>make test</em> failing with asc and weight? :D is that just me?</p>



<a name="282032129"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/282032129" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#282032129">(May 11 2022 at 21:44)</a>:</h4>
<p>No that’s my doing.  The test is detecting a change due to new material object management and I need to resolve it.</p>



<a name="282032193"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/282032193" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#282032193">(May 11 2022 at 21:44)</a>:</h4>
<p>Probably will yank the attribute sync code but needs a bit of testing</p>



<a name="282034101"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/282034101" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#282034101">(May 11 2022 at 22:03)</a>:</h4>
<p>and that durn kryptonite slips in... :) I was mucking with converting jenkins to a pipeline (can be dropped into the repo as /Jenkinsfile and revision controlled)</p>



<a name="282140959"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/282140959" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#282140959">(May 12 2022 at 17:19)</a>:</h4>
<p>That's cool.  I've been wanting to do that myself too.   IaC FTW.</p>



<a name="282149509"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/282149509" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#282149509">(May 12 2022 at 18:13)</a>:</h4>
<p><span class="user-mention" data-user-id="102939">@Daniel Rossberg</span> any chance we could wire up your cubes examples as unit/regression tests to make sure the gqa behavior stays correct in the future?</p>



<a name="282149914"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/282149914" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#282149914">(May 12 2022 at 18:16)</a>:</h4>
<p>I was just looking at that PR too.  Very interesting!  Does it still interleave as resolution doubles?  That is one of the current features, no ray is shot twice -- it (is supposed to) refines the gaps in-between recursively without ever reshooting the same ray.</p>



<a name="282235206"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/282235206" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Rossberg <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#282235206">(May 13 2022 at 11:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/282149914">said</a>:</p>
<blockquote>
<p>I was just looking at that PR too.  Very interesting!  Does it still interleave as resolution doubles?  That is one of the current features, no ray is shot twice -- it (is supposed to) refines the gaps in-between recursively without ever reshooting the same ray.</p>
</blockquote>
<p>You may have a point here. I'll review it.</p>
<p>BTW, that's why I made a PR and didn't committed it directly: To give it a better review and discuss it first.</p>



<a name="282235382"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/282235382" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Rossberg <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#282235382">(May 13 2022 at 11:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/282149509">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102939">Daniel Rossberg</span> any chance we could wire up your cubes examples as unit/regression tests to make sure the gqa behavior stays correct in the future?</p>
</blockquote>
<p>I'll look for this ans see, how much effort this would be. Unfortunately, the result of gqa is aprint-out, which had to interpreted first.</p>



<a name="282270594"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/282270594" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#282270594">(May 13 2022 at 16:18)</a>:</h4>
<p><span class="user-mention" data-user-id="102939">@Daniel Rossberg</span> even if it reshoots, correct is obviously more important than performance.  I was just more wondering if that behavior changed (and the potential effect as the grid size continues to double, if half the rays are repeat work each level)</p>



<a name="282283442"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/282283442" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Rossberg <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#282283442">(May 13 2022 at 18:00)</a>:</h4>
<p>It hadn't reshot, but also not reused the old ray-traces. Changed back to the old grid generation.</p>
<p>The main fault was that in lines 1003-1005 the grid sizes were recomputed with the wrong number of steps (state-&gt;steps instead of state-&gt;steps-1).</p>
<p>The next improvement was to use gridSpacing there too. With every refinement the "old" moments have to be reduced, and its a problem if they were computed with on value and readjusted based on a different one.</p>
<p>state.steps+1 in lines 2619-2661 ensures that the rays reach mdl_max.</p>



<a name="284771954"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/284771954" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#284771954">(Jun 02 2022 at 16:45)</a>:</h4>
<p><span class="user-mention" data-user-id="102939">@Daniel Rossberg</span> thank you for that detail!  really helps to understand what's going on there.  that's awesome that you caught that off-by-one bug...  would take me quite a while to fully re-understand what is going on in there, so glad you figured out what was wrong.  :)</p>



<a name="289137760"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/289137760" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#289137760">(Jul 11 2022 at 03:03)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> Looks like the recent MSVC warning changes broke gcc linux building</p>



<a name="289150630"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/289150630" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#289150630">(Jul 11 2022 at 06:48)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="112516">@starseeker</span> and sorry, should be fixed now!  I hadn't cycled back to mac or linux yet as I was really trying to immerse in a windows dev workflow as much as possible last week so I could address categoric issues from that side I'm seeing in our stig listings.  Took a heck of a lot longer than expected to get things off the ground (still not done, but putting a thumbtack in it for now).</p>



<a name="289191137"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/289191137" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#289191137">(Jul 11 2022 at 13:37)</a>:</h4>
<p>thanks for clearing the last two.  was waiting for the scan to see what else was left and you'd fixed it before I got to see the next (as it's building for me locally clean)</p>



<a name="289191389"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/289191389" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#289191389">(Jul 11 2022 at 13:39)</a>:</h4>
<p>let me know if bio.h causes a problem; might get away with these vanilla environments, but I suspect that'll need to be handled differently to be fully portable</p>



<a name="291705248"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/291705248" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#291705248">(Aug 02 2022 at 13:00)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> gcc errors with latest changes:</p>
<div class="codehilite"><pre><span></span><code>/brlcad/src/conv/off/off-g.c: In function ‘off2nmg’:
/brlcad/src/conv/off/off-g.c:208:39: error: ‘%s’ directive output may be truncated writing up to 63 bytes into a region of size 62 [-Werror=format-truncation=]
  208 |     snprintf(sname, sizeof(sname), &quot;s.%s&quot;, title);
      |                                       ^~   ~~~~~
/brlcad/src/conv/off/off-g.c:208:5: note: ‘snprintf’ output between 3 and 66 bytes into a destination of size 64
  208 |     snprintf(sname, sizeof(sname), &quot;s.%s&quot;, title);
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/brlcad/src/conv/off/off-g.c:209:39: error: ‘%s’ directive output may be truncated writing up to 63 bytes into a region of size 62 [-Werror=format-truncation=]
  209 |     snprintf(rname, sizeof(sname), &quot;r.%s&quot;, title);
      |                                       ^~   ~~~~~
/brlcad/src/conv/off/off-g.c:209:5: note: ‘snprintf’ output between 3 and 66 bytes into a destination of size 64
  209 |     snprintf(rname, sizeof(sname), &quot;r.%s&quot;, title);
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cc1: all warnings being treated as errors
</code></pre></div>



<a name="291708307"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/291708307" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#291708307">(Aug 02 2022 at 13:26)</a>:</h4>
<p>Thank you!  Home stretch here with musl ...  hopefully one of the last issues.</p>



<a name="291709080"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/291709080" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#291709080">(Aug 02 2022 at 13:33)</a>:</h4>
<p>That's a fun one .. fixing one issue let it detect another underlying.  Commit fix pushed.</p>



<a name="291709188"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/291709188" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#291709188">(Aug 02 2022 at 13:34)</a>:</h4>
<p>I now appear to have a full build, so I'm going to let the gitlab folks know we're good to go.  Hopefully we can stay stable until the end of this week for their demo.</p>



<a name="291775354"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/291775354" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#291775354">(Aug 02 2022 at 22:08)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> Hint taken - I'll shift to a branch (sorry, didn't see this until now)</p>



<a name="291779865"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/291779865" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#291779865">(Aug 02 2022 at 22:56)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> do you want me to merge to RELEASE so we can start 7.34.0 shakedown?</p>



<a name="291946815"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/291946815" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#291946815">(Aug 03 2022 at 23:56)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> - FYI, CheckCompilerFlag is 3.19 and newer: <a href="https://cmake.org/cmake/help/latest/module/CheckCompilerFlag.html">https://cmake.org/cmake/help/latest/module/CheckCompilerFlag.html</a></p>



<a name="291952165"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/291952165" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#291952165">(Aug 04 2022 at 01:32)</a>:</h4>
<p>Yeah I just discovered that earlier today..  I fixed it but didn’t push yet.</p>



<a name="292015754"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/292015754" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#292015754">(Aug 04 2022 at 14:33)</a>:</h4>
<p>Files known to Git are not accounted for in build logic: <br>
doc/docbook/resources/brlcad/CMakeLists.txt<br>
doc/docbook/resources/brlcad/brlcad-article-fo-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-article-xhtml-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-book-fo-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-book-xhtml-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-common.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-fo-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-fonts.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-gendata.xsl<br>
doc/docbook/resources/brlcad/brlcad-lesson-fo-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-lesson-xhtml-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-man-fo-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-man-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-man-xhtml-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-presentation-fo-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-presentation-xhtml-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-specification-fo-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-specification-xhtml-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/brlcad-xhtml-header-navigation.xsl<br>
doc/docbook/resources/brlcad/brlcad-xhtml-stylesheet.xsl.in<br>
doc/docbook/resources/brlcad/center-table-print.xsl<br>
doc/docbook/resources/brlcad/images/brlcad-logo-669966.svg<br>
doc/docbook/resources/brlcad/images/brlcad-logo-6699cc.svg<br>
doc/docbook/resources/brlcad/images/brlcad-logo-blue.svg<br>
doc/docbook/resources/brlcad/images/brlcad-logo-cc6666.svg<br>
doc/docbook/resources/brlcad/images/brlcad-logo-cc9966.svg<br>
doc/docbook/resources/brlcad/images/brlcad-logo-green.svg<br>
doc/docbook/resources/brlcad/images/brlcad-logo-limegreen.svg<br>
doc/docbook/resources/brlcad/images/brlcad-logo-red.svg<br>
doc/docbook/resources/brlcad/images/logo-vm-gears.png<br>
doc/docbook/resources/brlcad/images/logo-vm-gears.svg<br>
doc/docbook/resources/brlcad/presentation.xsl.in<br>
doc/docbook/resources/brlcad/tutorial-cover-template.xsl.in<br>
doc/docbook/resources/brlcad/tutorial-template.xsl.in<br>
doc/docbook/resources/brlcad/wordpress.xsl.in</p>
<p>Files mentioned in build logic are not checked into the repository: <br>
doc/docbook/resourcesCMakeLists.txt<br>
doc/docbook/resourcesbrlcad-article-fo-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-article-xhtml-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-book-fo-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-book-xhtml-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-common.xsl.in<br>
doc/docbook/resourcesbrlcad-fo-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-fonts.xsl.in<br>
doc/docbook/resourcesbrlcad-gendata.xsl<br>
doc/docbook/resourcesbrlcad-lesson-fo-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-lesson-xhtml-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-man-fo-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-man-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-man-xhtml-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-presentation-fo-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-presentation-xhtml-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-specification-fo-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-specification-xhtml-stylesheet.xsl.in<br>
doc/docbook/resourcesbrlcad-xhtml-header-navigation.xsl<br>
doc/docbook/resourcesbrlcad-xhtml-stylesheet.xsl.in<br>
doc/docbook/resourcescenter-table-print.xsl<br>
doc/docbook/resourcesimages/brlcad-logo-669966.svg<br>
doc/docbook/resourcesimages/brlcad-logo-6699cc.svg<br>
doc/docbook/resourcesimages/brlcad-logo-blue.svg<br>
doc/docbook/resourcesimages/brlcad-logo-cc6666.svg<br>
doc/docbook/resourcesimages/brlcad-logo-cc9966.svg<br>
doc/docbook/resourcesimages/brlcad-logo-green.svg<br>
doc/docbook/resourcesimages/brlcad-logo-limegreen.svg<br>
doc/docbook/resourcesimages/brlcad-logo-red.svg<br>
doc/docbook/resourcesimages/logo-vm-gears.png<br>
doc/docbook/resourcesimages/logo-vm-gears.svg<br>
doc/docbook/resourcespresentation.xsl.in<br>
doc/docbook/resourcestutorial-cover-template.xsl.in<br>
doc/docbook/resourcestutorial-template.xsl.in<br>
doc/docbook/resourceswordpress.xsl.in</p>
<p>CMake Error at CMakeTmp/distcheck_repo_verify.cmake:228 (message):<br>
  ERROR: Distcheck cannot proceed until build files and repo are in sync (set<br>
  -DFORCE_DISTCHECK=ON to override)</p>



<a name="292058403"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/292058403" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#292058403">(Aug 04 2022 at 19:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/291952165">said</a>:</p>
<blockquote>
<p>Yeah I just discovered that earlier today..  I fixed it but didn’t push yet.</p>
</blockquote>
<p>pushed the fix last night, should be good to go.  Possibly related, I'm seeing two "Attempt to add a custom rule to output" cmake error rmessages on libnetpbm.a.rule and libgdal.a.rule<br>
Any ideas?</p>



<a name="292152897"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/292152897" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#292152897">(Aug 05 2022 at 13:23)</a>:</h4>
<p>Not offhand - the logic doing that management is src/other/ext/CMake/ExternalProject_Target.cmake:442 - it in turn uses the fcfgcpy function which defines custom rules</p>



<a name="292153283"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/292153283" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#292153283">(Aug 05 2022 at 13:26)</a>:</h4>
<p>You could try some message statements in those functions to see if you can bracket where that error is being generated</p>



<a name="298895350"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/298895350" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#298895350">(Sep 15 2022 at 03:13)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> appears to be a recent regression on draw -m2 ...</p>



<a name="298895356"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/298895356" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#298895356">(Sep 15 2022 at 03:13)</a>:</h4>
<p><a href="/user_uploads/1549/-toq-cMF78Rn5qe1VQemMPWH/unknown-1.png">unknown-1.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/-toq-cMF78Rn5qe1VQemMPWH/unknown-1.png" title="unknown-1.png"><img src="/user_uploads/1549/-toq-cMF78Rn5qe1VQemMPWH/unknown-1.png"></a></div>



<a name="298895362"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/298895362" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#298895362">(Sep 15 2022 at 03:13)</a>:</h4>
<p><a href="/user_uploads/1549/bCIKsgOElS-CLpZ5AENvgF6v/unknown.png">unknown.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/bCIKsgOElS-CLpZ5AENvgF6v/unknown.png" title="unknown.png"><img src="/user_uploads/1549/bCIKsgOElS-CLpZ5AENvgF6v/unknown.png"></a></div>



<a name="299074010"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/299074010" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#299074010">(Sep 16 2022 at 00:59)</a>:</h4>
<p>Your recent fix appears to have fixed it, nice!  Thank you.</p>



<a name="352310722"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/352310722" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#352310722">(Apr 24 2023 at 15:23)</a>:</h4>
<p><span class="user-mention" data-user-id="484201">@Christopher</span> looks like a few dirs are missing from the latest commit?  (fbx, dxf, pbrt in regress/gcv)</p>



<a name="352312183"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/352312183" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#352312183">(Apr 24 2023 at 15:28)</a>:</h4>
<p>Forgot some cleanup. Fix pushed</p>



<a name="359336414"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/359336414" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GregoryLi <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#359336414">(May 18 2023 at 08:55)</a>:</h4>
<p>It seems we have some problems with <code>brep</code> command. <code>ged_brep_core</code>will receive four arguments before. Now we only get two.<br>
<a href="/user_uploads/1549/CA6JGmf27mgfB2PDpqi6fT7B/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/CA6JGmf27mgfB2PDpqi6fT7B/image.png" title="image.png"><img src="/user_uploads/1549/CA6JGmf27mgfB2PDpqi6fT7B/image.png"></a></div>



<a name="359336570"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/359336570" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GregoryLi <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#359336570">(May 18 2023 at 08:56)</a>:</h4>
<p><a href="/user_uploads/1549/2PQC5kcILC9ZCOCJvP2Rnujm/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/2PQC5kcILC9ZCOCJvP2Rnujm/image.png" title="image.png"><img src="/user_uploads/1549/2PQC5kcILC9ZCOCJvP2Rnujm/image.png"></a></div>



<a name="359411615"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/359411615" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Rossberg <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#359411615">(May 18 2023 at 14:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="491779">GregoryLi</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/359336414">said</a>:</p>
<blockquote>
<p>It seems we have some problems with <code>brep</code> command. <code>ged_brep_core</code>will receive four arguments before. Now we only get two.</p>
</blockquote>
<p>Just tests with a clean build of current brlcad on Linux. I got <code>arb8.s.brep is made.</code>. Can you repeat your test with a clean build from scratch?</p>



<a name="359538243"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/359538243" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GregoryLi <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#359538243">(May 19 2023 at 03:47)</a>:</h4>
<p>Sorry, a clean build works well. <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="359761977"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/359761977" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#359761977">(May 19 2023 at 20:30)</a>:</h4>
<p>libged commands are loaded dynamically (as dynamic libs) and for some reason they don't always rebuild when a file has been edited despite having dependencies set in cmake (or perhaps one is missing).</p>



<a name="359762194"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/359762194" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#359762194">(May 19 2023 at 20:32)</a>:</h4>
<p>so if anyone edits a header, especially a structure, they all need to be rebuilt and that doesn't always happen automatically.  would be great if someone could make that not be a problem, but currently I make sure to delete the libged and libdm libs at a minimum so they're rebuilt.</p>



<a name="394589209"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/394589209" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GregoryLi <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#394589209">(Oct 03 2023 at 08:57)</a>:</h4>
<p>Hi, I just pulled the newest codes and found I can't open .g database.<br>
<a href="/user_uploads/1549/3f6uZIbjZowxTnD8Ywy7qLWO/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/3f6uZIbjZowxTnD8Ywy7qLWO/image.png" title="image.png"><img src="/user_uploads/1549/3f6uZIbjZowxTnD8Ywy7qLWO/image.png"></a></div>



<a name="394589367"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/394589367" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GregoryLi <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#394589367">(Oct 03 2023 at 08:58)</a>:</h4>
<p>I'm working on Ubuntu 20.04 at commit 753ca33.</p>



<a name="394592519"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/394592519" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GregoryLi <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#394592519">(Oct 03 2023 at 09:18)</a>:</h4>
<p>It's quite strange... For me, the problem existed many commit ago (before Sep 13 the problem exists). And it worked well on Aug 27. Does anyone else have this problem? Do I need to use the <code>git bisect</code> command to determine the location?</p>



<a name="394659284"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/394659284" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#394659284">(Oct 03 2023 at 15:31)</a>:</h4>
<p>That might need a bisect - it's probably related to the work I did with the open/opendb GED command work.</p>



<a name="394659503"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/394659503" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#394659503">(Oct 03 2023 at 15:32)</a>:</h4>
<p>A naive guess is that I didn't change something from open to opendb, but it could be something else.</p>



<a name="394737920"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/394737920" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GregoryLi <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#394737920">(Oct 04 2023 at 01:25)</a>:</h4>
<p>I just located the error using bisect. a7bba28a948a1939e53ab224fdc4e4a381cddb23 is the first bad commit.</p>



<a name="394743676"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/394743676" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#394743676">(Oct 04 2023 at 02:20)</a>:</h4>
<p><span class="user-mention" data-user-id="491779">@GregoryLi</span> OK, that' confirms somewhere in the Archer startup stack we're calling "open" where we should be calling "opendb"</p>



<a name="395474928"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/395474928" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#395474928">(Oct 08 2023 at 01:50)</a>:</h4>
<p><span class="user-mention" data-user-id="491779">@GregoryLi</span> Can you check if things are working again in the latest?</p>



<a name="395588446"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/395588446" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GregoryLi <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#395588446">(Oct 09 2023 at 00:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/recent.20bugs/near/395474928">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="491779">GregoryLi</span> Can you check if things are working again in the latest?</p>
</blockquote>
<p>Yeah, it works well now. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="400312496"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/400312496" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#400312496">(Nov 04 2023 at 16:38)</a>:</h4>
<p>Bah - bu_vls_vprintf tests 22 and 32 fail on Alpine Linux.</p>



<a name="400330913"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/400330913" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#400330913">(Nov 04 2023 at 22:26)</a>:</h4>
<p>I don't believe this - facetizing tor with a tolerance of r=0.0001 is causing an nmg_mdl_to_bot failure just on the mac, which seems to be why the lod drawing test is failing.</p>



<a name="475611579"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/475611579" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#475611579">(Oct 08 2024 at 16:28)</a>:</h4>
<p>Here's a crash reading/writing BREP:</p>
<div class="codehilite" data-code-language="c-objdump"><pre><span></span><code><span class="o">*</span><span class="w"> </span><span class="kr">thread</span><span class="w"> </span><span class="err">#</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">queue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">'</span><span class="n">com</span><span class="p">.</span><span class="n">apple</span><span class="p">.</span><span class="n">main</span><span class="o">-</span><span class="kr">thread</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">reason</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EXC_BAD_ACCESS</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="o">=</span><span class="mh">0x0</span><span class="p">)</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="err">#</span><span class="mi">0</span><span class="o">:</span><span class="w"> </span><span class="mh">0x00000001018c4884</span><span class="w"> </span><span class="n">libOpenNURBS</span><span class="p">.</span><span class="n">dylib</span><span class="err">`</span><span class="n">ON_Object</span><span class="o">::</span><span class="n">IsKindOf</span><span class="p">(</span><span class="n">ON_ClassId</span><span class="w"> </span><span class="k">const</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">20</span>
<span class="w">    </span><span class="n">frame</span><span class="w"> </span><span class="err">#</span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="mh">0x00000001017aeebc</span><span class="w"> </span><span class="n">libOpenNURBS</span><span class="p">.</span><span class="n">dylib</span><span class="err">`</span><span class="n">ON_Geometry</span><span class="o">::</span><span class="n">Cast</span><span class="p">(</span><span class="n">ON_Object</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">32</span>
<span class="w">    </span><span class="n">frame</span><span class="w"> </span><span class="err">#</span><span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="mh">0x00000001007be114</span><span class="w"> </span><span class="n">librt</span><span class="mf">.20</span><span class="p">.</span><span class="n">dylib</span><span class="err">`</span><span class="n">brep_dbi2on</span><span class="p">(</span><span class="n">rt_db_internal</span><span class="w"> </span><span class="k">const</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">ONX_Model</span><span class="o">&amp;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">176</span>
<span class="w">    </span><span class="n">frame</span><span class="w"> </span><span class="err">#</span><span class="mi">3</span><span class="o">:</span><span class="w"> </span><span class="mh">0x00000001007be560</span><span class="w"> </span><span class="n">librt</span><span class="mf">.20</span><span class="p">.</span><span class="n">dylib</span><span class="err">`</span><span class="n">rt_brep_export5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">168</span>
<span class="w">    </span><span class="n">frame</span><span class="w"> </span><span class="err">#</span><span class="mi">4</span><span class="o">:</span><span class="w"> </span><span class="mh">0x0000000100809088</span><span class="w"> </span><span class="n">librt</span><span class="mf">.20</span><span class="p">.</span><span class="n">dylib</span><span class="err">`</span><span class="n">rt_generic_xform</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">340</span>
<span class="w">    </span><span class="n">frame</span><span class="w"> </span><span class="err">#</span><span class="mi">5</span><span class="o">:</span><span class="w"> </span><span class="mh">0x000000010003bdec</span><span class="w"> </span><span class="n">mged</span><span class="err">`</span><span class="n">vls_solid</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">168</span>
<span class="w">    </span><span class="n">frame</span><span class="w"> </span><span class="err">#</span><span class="mi">6</span><span class="o">:</span><span class="w"> </span><span class="mh">0x000000010004c618</span><span class="w"> </span><span class="n">mged</span><span class="err">`</span><span class="n">refresh</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1040</span>
<span class="w">    </span><span class="n">frame</span><span class="w"> </span><span class="err">#</span><span class="mi">7</span><span class="o">:</span><span class="w"> </span><span class="mh">0x0000000100049988</span><span class="w"> </span><span class="n">mged</span><span class="err">`</span><span class="n">main</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">7080</span>
<span class="w">    </span><span class="n">frame</span><span class="w"> </span><span class="err">#</span><span class="mi">8</span><span class="o">:</span><span class="w"> </span><span class="mh">0x000000019234ff28</span><span class="w"> </span><span class="n">dyld</span><span class="err">`</span><span class="n">start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2236</span>
</code></pre></div>



<a name="475615932"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/475615932" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#475615932">(Oct 08 2024 at 16:46)</a>:</h4>
<p>commands invoked by mged:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>M
M<span class="w"> </span><span class="nv">$args</span>
M<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
adc<span class="w"> </span><span class="nv">$args</span>
adc<span class="w"> </span>draw
ae
aip<span class="w"> </span>f
attach
center
draw<span class="w"> </span><span class="nv">$esol_control</span><span class="o">(</span><span class="nv">$id</span>,name<span class="o">)</span>
has_embedded_fb
ill
ill<span class="w"> </span>-e<span class="w"> </span>-i<span class="w"> </span><span class="nv">$ri</span><span class="w"> </span><span class="nv">$spath</span>
ill<span class="w"> </span>-e<span class="w"> </span>-i<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">$path</span>
ill<span class="w"> </span>-e<span class="w"> </span>-i<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>lindex<span class="w"> </span><span class="nv">$spath_and_pos</span><span class="w"> </span><span class="m">0</span>
ill<span class="w"> </span>-e<span class="w"> </span>-n<span class="w"> </span>-i<span class="w"> </span><span class="nv">$ri</span><span class="w"> </span><span class="nv">$spath</span>
ill<span class="w"> </span>-i<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>lindex<span class="w"> </span><span class="nv">$paths</span><span class="w"> </span><span class="m">0</span>
ill<span class="w"> </span>-i<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="se">\$</span>mged_gui<span class="o">(</span><span class="nv">$id</span>,mgs_path<span class="o">)</span>
<span class="k">in</span><span class="w"> </span><span class="nv">$mged_gui</span><span class="o">(</span><span class="nv">$id</span>,solid_name<span class="o">)</span><span class="w"> </span>dsp<span class="w"> </span>f<span class="w"> </span><span class="se">\</span>
keep
keep<span class="w"> </span>db_glob
ls<span class="w"> </span>-c
ls<span class="w"> </span>-r
make<span class="w"> </span><span class="nv">$mged_gui</span><span class="o">(</span><span class="nv">$id</span>,solid_name<span class="o">)</span><span class="w"> </span><span class="nv">$type</span><span class="o">}</span><span class="w"> </span>msg
make_name<span class="w"> </span><span class="nv">$mged_default</span><span class="o">(</span>solid_name_fmt<span class="o">)}</span><span class="w"> </span>name
make_name<span class="w"> </span>comb@<span class="se">\</span>
matpick
matpick<span class="w"> </span><span class="nv">$item</span>
matpick<span class="w"> </span>-n<span class="w"> </span><span class="nv">$path_pos</span>
matpick<span class="w"> </span>-n<span class="w"> </span><span class="se">\$</span>item
matpick<span class="w"> </span><span class="o">[</span>lindex<span class="w"> </span><span class="nv">$spath_and_pos</span><span class="w"> </span><span class="m">1</span>
nirt<span class="w"> </span><span class="nv">$args</span>
opendb
pl
postscript
press
press<span class="w"> </span>oill
press<span class="w"> </span>reject
press<span class="w"> </span>reset
press<span class="w"> </span>sill
qray<span class="w"> </span>basename
qray<span class="w"> </span><span class="nb">echo</span>
qray<span class="w"> </span>effects
qray<span class="w"> </span>evencolor
qray<span class="w"> </span>fmt<span class="w"> </span>f
qray<span class="w"> </span>fmt<span class="w"> </span>g
qray<span class="w"> </span>fmt<span class="w"> </span>h
qray<span class="w"> </span>fmt<span class="w"> </span>m
qray<span class="w"> </span>fmt<span class="w"> </span>o
qray<span class="w"> </span>fmt<span class="w"> </span>p
qray<span class="w"> </span>fmt<span class="w"> </span>r
qray<span class="w"> </span>oddcolor
qray<span class="w"> </span>overlapcolor
qray<span class="w"> </span>script
qray<span class="w"> </span>voidcolor
quit
rset<span class="w"> </span>grid<span class="w"> </span>anchor
rt
saveview
sed<span class="w"> </span><span class="nv">$mged_gui</span><span class="o">(</span><span class="nv">$id</span>,solid_name<span class="o">)}</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">$item</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">$spath</span>
size
size<span class="w"> </span><span class="nv">$size</span>
status<span class="w"> </span>state
tie
tie<span class="w"> </span><span class="nv">$id</span>
tie<span class="w"> </span><span class="nv">$id</span><span class="w"> </span><span class="nv">$mged_gui</span><span class="o">(</span><span class="nv">$id</span>,active_dm<span class="o">)</span>
tree
tree<span class="w"> </span><span class="nv">$args</span><span class="o">}</span><span class="w"> </span>result
units<span class="w"> </span><span class="nv">$mged_display</span><span class="o">(</span>units<span class="o">)</span>
view
view<span class="w"> </span>center
view<span class="w"> </span>size
view_ring
view_ring<span class="w"> </span>next
view_ring<span class="w"> </span>prev
view_ring<span class="w"> </span>toggle
who
who<span class="w"> </span>phony
x<span class="w"> </span>-1
x<span class="w"> </span>-2
</code></pre></div>



<a name="475617520"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/475617520" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#475617520">(Oct 08 2024 at 16:53)</a>:</h4>
<p>generated from:</p>
<p>grep -r -e '[^a-z]_mged_' * | sed 's/.<em>_mged_//g' | sed 's/].</em>//g'  | sed 's/;.<em>//g' | sed 's/".</em>//g' | sort | uniq</p>



<a name="475620591"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/475620591" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#475620591">(Oct 08 2024 at 17:10)</a>:</h4>
<p>1738      const ON_ClassId* p = ClassId();<br>
(gdb) print *this<br>
$5 = {_vptr.ON_Object = 0x5d00000032, static m_s_ON_Object_ptr = 0x0, static m_ON_Object_class_rtti = {<br>
    static m_p0 = 0x7ffff3764e00 &lt;ON_3dmObjectAttributes::m_ON_3dmObjectAttributes_class_rtti&gt;, <br>
    static m_p1 = 0x7ffff37801e0 &lt;ON_RdkUserData::m_ON_RdkUserData_class_rtti&gt;, static m_mark0 = 0, <br>
    m_pNext = 0x7ffff376ed20 &lt;ON_HistoryRecord::m_ON_HistoryRecord_class_rtti&gt;, m_pBaseClassId = 0x0, m_sClassName = "ON_Object", '\000' &lt;repeats 70 times&gt;, <br>
    m_sBaseClassName = "0", '\000' &lt;repeats 78 times&gt;, m_create = 0x0, m_uuid = {Data1 = 1622531005, Data2 = 58976, Data3 = 4563, <br>
      Data4 = "\277\344\000\020\203\001", &lt;incomplete sequence \360&gt;}, m_mark = -2147483648, m_class_id_version = 0, m_f1 = 0x0, m_f2 = 0x0, m_f3 = 0x0, m_f4 = 0x0, <br>
    m_f5 = 0x0, m_f6 = 0x0, m_f7 = 0x0, m_f8 = 0x0}, m_userdata_list = 0x200000003a}</p>



<a name="475620669"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/475620669" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#475620669">(Oct 08 2024 at 17:11)</a>:</h4>
<p>opennurbs_object.h:</p>
<p>#define ON_VIRTUAL_OBJECT_IMPLEMENT( cls, basecls, uuid ) \<br>
    void* cls::m_s_##cls##_ptr = nullptr; \<br>
    const ON_ClassId cls::m_##cls##_class_rtti(#cls,#basecls,0,uuid);\<br>
    cls * cls::Cast( ON_Object* p) {return(p&amp;&amp;p-&gt;IsKindOf(&amp;cls::m_##cls##_class_rtti))?static_cast&lt; cls *&gt;(p):nullptr;}   \<br>
    const cls * cls::Cast( const ON_Object* p) {return(p&amp;&amp;p-&gt;IsKindOf(&amp;cls::m_##cls##_class_rtti))?static_cast&lt;const cls   *&gt;(p):nullptr;} \<br>
    const ON_ClassId* cls::ClassId() const {return &amp;cls::m_##cls##_class_rtti;} \<br>
    bool cls::CopyFrom(const ON_Object*) {return false;} \<br>
    cls * cls::Duplicate() const {return static_cast&lt; cls *&gt;(this-&gt;Internal_DeepCopy());} \<br>
    ON_Object* cls::Internal_DeepCopy() const {return nullptr;}</p>



<a name="475621519"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/475621519" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#475621519">(Oct 08 2024 at 17:16)</a>:</h4>
<p>(gdb) print *bi-&gt;brep<br>
$6 = {&lt;ON_Geometry&gt; = {&lt;ON_Object&gt; = {_vptr.ON_Object = 0x5d00000032, static m_s_ON_Object_ptr = 0x0, static m_ON_Object_class_rtti = {</p>



<a name="475634722"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/475634722" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#475634722">(Oct 08 2024 at 18:14)</a>:</h4>
<p>(gdb) print *this<br>
$3 = {_vptr.ON_Object = 0x7ffff372ed10 &lt;vtable for ON_Brep+16&gt;, static m_s_ON_Object_ptr = 0x0,</p>



<a name="475634795"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/475634795" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#475634795">(Oct 08 2024 at 18:14)</a>:</h4>
<p>(gdb) print *this<br>
$4 = {_vptr.ON_Object = 0xc00000004, static m_s_ON_Object_ptr = 0x0, static m_ON_Object_class_rtti = {</p>



<a name="475636282"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/475636282" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#475636282">(Oct 08 2024 at 18:21)</a>:</h4>
<p>#0  brep_dbi2on (intern=0x7fffffffd1c0, model=...) at /home/user/brlcad/src/librt/primitives/brep/brep.cpp:2321<br>
#1  0x00007ffff75b4c82 in rt_brep_get (logstr=0x5555556a70a0, intern=0x7fffffffd1c0, attr=0x0)</p>
<p>(gdb) print *bi-&gt;brep<br>
$1 = {&lt;ON_Geometry&gt; = {&lt;ON_Object&gt; = {_vptr.ON_Object = 0x7ffff372ed10 &lt;vtable for ON_Brep+16&gt;, <br>
      static m_s_ON_Object_ptr = 0x0, static m_ON_Object_class_rtti = {</p>



<a name="475636737"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/475636737" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#475636737">(Oct 08 2024 at 18:23)</a>:</h4>
<p>#0  brep_dbi2on (intern=0x55555565e320 &lt;es_int&gt;, model=...)<br>
    at /home/user/brlcad/src/librt/primitives/brep/brep.cpp:2331<br>
#1  0x00007ffff75b544f in rt_brep_export5 (ep=0x7fffffffd1a0, ip=0x55555565e320 &lt;es_int&gt;, UNUSED_local2mm=1,</p>
<p>$3 = {&lt;ON_Geometry&gt; = {&lt;ON_Object&gt; = {_vptr.ON_Object = 0x2c00000030, static m_s_ON_Object_ptr = 0x0, <br>
      static m_ON_Object_class_rtti = {</p>



<a name="475639048"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/475639048" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#475639048">(Oct 08 2024 at 18:36)</a>:</h4>
<p>==690562== Invalid read of size 8<br>
==690562==    at 0x9569A20: ON_Object::IsKindOf(ON_ClassId const*) const (opennurbs_object.cpp:1738)<br>
==690562==    by 0x93E6722: ON_Geometry::Cast(ON_Object*) (opennurbs_geometry.cpp:24)<br>
==690562==    by 0x4CD2A99: brep_dbi2on(rt_db_internal const*, ONX_Model&amp;) (brep.cpp:2345)<br>
==690562==    by 0x4CD344E: rt_brep_export5 (brep.cpp:2422)<br>
==690562==    by 0x4DB07D5: rt_generic_xform (generic.c:85)<br>
==690562==    by 0x4F7B733: rt_matrix_transform (transform.c:39)<br>
==690562==    by 0x16D989: transform_editing_solid (edsol.c:2712)<br>
==690562==    by 0x19247E: vls_solid (edsol.c:7349)<br>
==690562==    by 0x1D9835: create_text_overlay (titles.c:89)<br>
==690562==    by 0x1B9195: refresh (mged.c:2316)<br>
==690562==    by 0x1B72B0: main (mged.c:1695)<br>
==690562==  Address 0x13c29970 is 784 bytes inside an unallocated block of size 2,432 in arena "client"<br>
==690562== <br>
==690562== Invalid read of size 8<br>
==690562==    at 0x9569A23: ON_Object::IsKindOf(ON_ClassId const*) const (opennurbs_object.cpp:1738)<br>
==690562==    by 0x93E6722: ON_Geometry::Cast(ON_Object*) (opennurbs_geometry.cpp:24)<br>
==690562==    by 0x4CD2A99: brep_dbi2on(rt_db_internal const*, ONX_Model&amp;) (brep.cpp:2345)<br>
==690562==    by 0x4CD344E: rt_brep_export5 (brep.cpp:2422)<br>
==690562==    by 0x4DB07D5: rt_generic_xform (generic.c:85)<br>
==690562==    by 0x4F7B733: rt_matrix_transform (transform.c:39)<br>
==690562==    by 0x16D989: transform_editing_solid (edsol.c:2712)<br>
==690562==    by 0x19247E: vls_solid (edsol.c:7349)<br>
==690562==    by 0x1D9835: create_text_overlay (titles.c:89)<br>
==690562==    by 0x1B9195: refresh (mged.c:2316)<br>
==690562==    by 0x1B72B0: main (mged.c:1695)<br>
==690562==  Address 0x0 is not stack'd, malloc'd or (recently) free'd<br>
==690562== <br>
==690562== <br>
==690562== Process terminating with default action of signal 11 (SIGSEGV)<br>
==690562==  Access not within mapped region at address 0x0<br>
==690562==    at 0x9569A23: ON_Object::IsKindOf(ON_ClassId const*) const (opennurbs_object.cpp:1738)<br>
==690562==    by 0x93E6722: ON_Geometry::Cast(ON_Object*) (opennurbs_geometry.cpp:24)<br>
==690562==    by 0x4CD2A99: brep_dbi2on(rt_db_internal const*, ONX_Model&amp;) (brep.cpp:2345)<br>
==690562==    by 0x4CD344E: rt_brep_export5 (brep.cpp:2422)<br>
==690562==    by 0x4DB07D5: rt_generic_xform (generic.c:85)<br>
==690562==    by 0x4F7B733: rt_matrix_transform (transform.c:39)<br>
==690562==    by 0x16D989: transform_editing_solid (edsol.c:2712)<br>
==690562==    by 0x19247E: vls_solid (edsol.c:7349)<br>
==690562==    by 0x1D9835: create_text_overlay (titles.c:89)<br>
==690562==    by 0x1B9195: refresh (mged.c:2316)<br>
==690562==    by 0x1B72B0: main (mged.c:1695)</p>



<a name="475666280"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/475666280" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#475666280">(Oct 08 2024 at 20:33)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I might have fixed it - let me know if the latest commit works for you.  (I didn't put a NEWS item in yet, want more confirmation than just "works on my box" for this sucker...)</p>



<a name="477869652"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/477869652" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#477869652">(Oct 20 2024 at 05:54)</a>:</h4>
<p>New build error on a default build (on Mac):</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>morrison@Miniagua TCL_BLD-build % make

/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc -c -I"." -I/Volumes/X10/brlcad/.build/bext_build/tcl/TCL_BLD-prefix/src/TCL_BLD/unix -I/Volumes/X10/brlcad/.build/bext_build/tcl/TCL_BLD-prefix/src/TCL_BLD/generic -I/Volumes/X10/brlcad/.build/bext_build/tcl/TCL_BLD-prefix/src/TCL_BLD/libtommath -O2 -pipe  -I/Volumes/X10/brlcad/.build/bext_output/install/include  -Wall -Wpointer-arith -fno-common -DBUILD_tcl -DPACKAGE_NAME=\"tcl\" -DPACKAGE_TARNAME=\"tcl\" -DPACKAGE_VERSION=\"8.6\" -DPACKAGE_STRING=\"tcl\ 8.6\" -DPACKAGE_BUGREPORT=\"\" -DNO_DIRENT_H=1 -DNO_VALUES_H=1 -DNO_STDLIB_H=1 -DNO_STRING_H=1 -DNO_SYS_WAIT_H=1 -DNO_DLFCN_H=1 -DUSE_THREAD_ALLOC=1 -D_REENTRANT=1 -D_THREAD_SAFE=1 -DHAVE_PTHREAD_ATTR_SETSTACKSIZE=1 -DHAVE_PTHREAD_ATFORK=1 -DTCL_THREADS=1 -DTCL_CFGVAL_ENCODING=\"iso8859-1\" -DHAVE_ZLIB=1 -DMODULE_SCOPE=extern\ __attribute__\(\(__visibility__\(\"hidden\"\)\)\) -DHAVE_HIDDEN=1 -DMAC_OSX_TCL=1 -DHAVE_CAST_TO_UNION=1 -DHAVE_VFORK=1 -DHAVE_POSIX_SPAWNP=1 -DHAVE_POSIX_SPAWN_FILE_ACTIONS_ADDDUP2=1 -DHAVE_POSIX_SPAWNATTR_SETFLAGS=1 -DTCL_SHLIB_EXT=\".dylib\" -DNDEBUG=1 -DTCL_CFG_OPTIMIZED=1 -DTCL_TOMMATH=1 -DMP_PREC=4 -DTCL_WIDE_INT_IS_LONG=1 -DWORDS_BIGENDIAN=1 -DHAVE_GETCWD=1 -DHAVE_MKSTEMP=1 -DHAVE_OPENDIR=1 -DHAVE_STRTOL=1 -DHAVE_WAITPID=1 -DHAVE_GETNAMEINFO=1 -DHAVE_GETADDRINFO=1 -DHAVE_FREEADDRINFO=1 -DHAVE_GAI_STRERROR=1 -DNEED_FAKE_RFC2553=1 -DHAVE_MTSAFE_GETHOSTBYNAME=1 -DHAVE_MTSAFE_GETHOSTBYADDR=1 -DNO_FD_SET=1 -DHAVE_GMTIME_R=1 -DHAVE_LOCALTIME_R=1 -DHAVE_MKTIME=1 -Dmode_t=int -Dpid_t=int -Dsize_t=unsigned -Duid_t=int -Dgid_t=int -Dsocklen_t=int -DNO_UNION_WAIT=1 -DGETTOD_NOT_DECLARED=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_PUTENV_THAT_COPIES=1 -DHAVE_CHFLAGS=1 -DHAVE_MKSTEMPS=1 -DNO_ISNAN=1 -DHAVE_GETATTRLIST=1 -DHAVE_COPYFILE=1 -DTCL_DEFAULT_ENCODING=\"utf-8\" -DTCL_LOAD_FROM_MEMORY=1 -DTCL_WIDE_CLICKS=1 -DTCL_UNLOAD_DLLS=1     -DSTATIC_BUILD -fno-lto /Volumes/X10/brlcad/.build/bext_build/tcl/TCL_BLD-prefix/src/TCL_BLD/generic/tclStubLib.c

In file included from /Volumes/X10/brlcad/.build/bext_build/tcl/TCL_BLD-prefix/src/TCL_BLD/generic/tclStubLib.c:14:

In file included from /Volumes/X10/brlcad/.build/bext_build/tcl/TCL_BLD-prefix/src/TCL_BLD/generic/tclInt.h:36:

In file included from /Volumes/X10/brlcad/.build/bext_build/tcl/TCL_BLD-prefix/src/TCL_BLD/generic/tclPort.h:23:
**/Volumes/X10/brlcad/.build/bext_build/tcl/TCL_BLD-prefix/src/TCL_BLD/unix/tclUnixPort.h:32:10:** **fatal error:** **'errno.h' file not found**

#include &lt;errno.h&gt;

         **^~~~~~~~~**

1 error generated.

make: *** [tclStubLib.o] Error 1
</code></pre></div>



<a name="478057756"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/478057756" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#478057756">(Oct 21 2024 at 13:15)</a>:</h4>
<p>Does OSX not have errno.h?</p>



<a name="478106485"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/478106485" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#478106485">(Oct 21 2024 at 16:47)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span>  It most certainly does and always has.  Nothing on the system has changed.  Debug build worked just fine.  Just the default build is dying on that error during Tcl's bext build.</p>



<a name="478106811"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/478106811" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#478106811">(Oct 21 2024 at 16:49)</a>:</h4>
<p>Only thing I can see is all the -DNO_*_H=1 flags also look wrong, like something is wrong during/after tcl's configure phase.</p>



<a name="478106865"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/478106865" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#478106865">(Oct 21 2024 at 16:49)</a>:</h4>
<p>e.g., saying there is no string.h or stdlib.h also</p>



<a name="478107077"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/478107077" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#478107077">(Oct 21 2024 at 16:50)</a>:</h4>
<p>release and debug builds both seem to have worked, but I've not deleted them to check from scratch as I'm working on something else and the default build just surprised me that it's failing basic setup.</p>



<a name="493663356"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/493663356" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#493663356">(Jan 14 2025 at 20:21)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> you see the rtwiz failures?  Looks like it's rendering with a different/higher opacity, less transparency.  Any ideas?</p>



<a name="493664046"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/493664046" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#493664046">(Jan 14 2025 at 20:26)</a>:</h4>
<p>which failures?</p>



<a name="494012917"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494012917" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494012917">(Jan 15 2025 at 20:44)</a>:</h4>
<p><span class="user-mention" data-user-id="484201">@Christopher</span> when I run make regress on a Debug build on Mac, I got two failures:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>morrison@Miniagua<span class="w"> </span>.build<span class="w"> </span>%<span class="w"> </span>ctest<span class="w"> </span>-R<span class="w"> </span>rtwiz
Test<span class="w"> </span>project<span class="w"> </span>/Users/morrison/brlcad.main/.build
<span class="w">    </span>Start<span class="w"> </span><span class="m">1076</span>:<span class="w"> </span>regress-rtwiz_m35_A
<span class="m">1</span>/8<span class="w"> </span>Test<span class="w"> </span><span class="c1">#1076: regress-rtwiz_m35_A .................   Passed    2.45 sec</span>
<span class="w">    </span>Start<span class="w"> </span><span class="m">1077</span>:<span class="w"> </span>regress-rtwiz_m35_B
<span class="m">2</span>/8<span class="w"> </span>Test<span class="w"> </span><span class="c1">#1077: regress-rtwiz_m35_B .................   Passed    1.67 sec</span>
<span class="w">    </span>Start<span class="w"> </span><span class="m">1078</span>:<span class="w"> </span>regress-rtwiz_m35_C
<span class="m">3</span>/8<span class="w"> </span>Test<span class="w"> </span><span class="c1">#1078: regress-rtwiz_m35_C .................   Passed    2.92 sec</span>
<span class="w">    </span>Start<span class="w"> </span><span class="m">1079</span>:<span class="w"> </span>regress-rtwiz_m35_D
<span class="m">4</span>/8<span class="w"> </span>Test<span class="w"> </span><span class="c1">#1079: regress-rtwiz_m35_D .................   Passed    2.40 sec</span>
<span class="w">    </span>Start<span class="w"> </span><span class="m">1080</span>:<span class="w"> </span>regress-rtwiz_m35_E
<span class="m">5</span>/8<span class="w"> </span>Test<span class="w"> </span><span class="c1">#1080: regress-rtwiz_m35_E .................***Failed    2.27 sec</span>
<span class="w">    </span>Start<span class="w"> </span><span class="m">1081</span>:<span class="w"> </span>regress-rtwiz_m35_F
<span class="m">6</span>/8<span class="w"> </span>Test<span class="w"> </span><span class="c1">#1081: regress-rtwiz_m35_F .................***Failed    3.19 sec</span>
<span class="w">    </span>Start<span class="w"> </span><span class="m">1082</span>:<span class="w"> </span>regress-rtwiz_m35_edge_only
<span class="m">7</span>/8<span class="w"> </span>Test<span class="w"> </span><span class="c1">#1082: regress-rtwiz_m35_edge_only .........   Passed    1.68 sec</span>
<span class="w">    </span>Start<span class="w"> </span><span class="m">1083</span>:<span class="w"> </span>regress-rtwiz_m35_edge_only_color
<span class="m">8</span>/8<span class="w"> </span>Test<span class="w"> </span><span class="c1">#1083: regress-rtwiz_m35_edge_only_color ...   Passed    1.67 sec</span>
</code></pre></div>
<p>Looking into the failures, the rt images are at a different opacity for some reason.</p>



<a name="494016902"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494016902" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494016902">(Jan 15 2025 at 21:07)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> Josh updated the default intensity a while back (ee673972d23b5efaa5b0d1029dd855b494dfb102). We need to update the comparison. I'll grab it in a bit</p>



<a name="494066920"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494066920" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494066920">(Jan 16 2025 at 04:57)</a>:</h4>
<p><span class="user-mention" data-user-id="484201">@Christopher</span>  Begs a question why the test hasn't been failing elsewhere...</p>



<a name="494066989"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494066989" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494066989">(Jan 16 2025 at 04:58)</a>:</h4>
<p>I saw that the source didn't match, but overlooked it thinking the tcl code overrode --  rtwizard's tcl code sets it to 12...</p>
<p>I'm guessing rtwiz GUi and cmd line are just out of sync.</p>



<a name="494067048"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494067048" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494067048">(Jan 16 2025 at 04:59)</a>:</h4>
<p>Do you see that failure too?</p>



<a name="494067816"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494067816" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494067816">(Jan 16 2025 at 05:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/channel/104062-brlcad/topic/recent.20bugs/near/494067048">said</a>:</p>
<blockquote>
<p>Do you see that failure too?</p>
</blockquote>
<p>Yes, failing on Windows too. If I revert the commit it passes - so it's definitely at play</p>



<a name="494068013"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494068013" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494068013">(Jan 16 2025 at 05:10)</a>:</h4>
<p>Huh, okay.. well that's disconcerting that nobody noticed for a year.  I swear I've run regression tests since then that have passed but ... something must have been out of date/wrong.</p>



<a name="494068178"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494068178" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494068178">(Jan 16 2025 at 05:12)</a>:</h4>
<p>Whoa didn't notice  the date stamp on that commit.. I guess none of the runner's are checking regress? Does seem suspicious that it wouldn't have cropped up before now.</p>



<a name="494068548"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494068548" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494068548">(Jan 16 2025 at 05:15)</a>:</h4>
<p>I recently fully blew away that build dir, so maybe something prevented the test from failing unless it started fresh??   Def weird.</p>



<a name="494068602"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494068602" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494068602">(Jan 16 2025 at 05:15)</a>:</h4>
<p>we should have at least one CI runner that fully starts fresh every so often</p>



<a name="494259676"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494259676" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494259676">(Jan 17 2025 at 00:44)</a>:</h4>
<p>rtwizard in particular is disabled by default, IIRC - because of how the fbserv stuff is working right now, a distcheck-full can cause trouble with multiple builds trying to run it simultaneously.</p>



<a name="494259723"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494259723" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494259723">(Jan 17 2025 at 00:45)</a>:</h4>
<p>make check and using ctest directly will fire different sets of tests</p>



<a name="494412915"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494412915" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494412915">(Jan 17 2025 at 18:05)</a>:</h4>
<p>Is it just disabled for distcheck-full?</p>



<a name="494460751"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494460751" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494460751">(Jan 18 2025 at 00:08)</a>:</h4>
<p>It's filtered out by the STAND_ALONE flag, which is filtered out by the "check" target in BRLCAD_Test_Wrappers.cmake</p>



<a name="494460778"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494460778" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494460778">(Jan 18 2025 at 00:08)</a>:</h4>
<p>I'm not set up (IIRC) at the moment to filter out just on distcheck-full</p>



<a name="494461286"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494461286" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494461286">(Jan 18 2025 at 00:14)</a>:</h4>
<p>Huh, I thought I ran make regress when I got the error but maybe it was check.</p>



<a name="494464482"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494464482" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494464482">(Jan 18 2025 at 00:54)</a>:</h4>
<p>A ctest -R regress will probably pull it in, but neither regress nor check (the build targets) should</p>



<a name="494464497"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494464497" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494464497">(Jan 18 2025 at 00:55)</a>:</h4>
<p>ctest doesn't run the build targets in the build system, it's got a separate setup</p>



<a name="494604818"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494604818" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494604818">(Jan 19 2025 at 05:02)</a>:</h4>
<p>I didn't originally see it via ctest.  I only ran/pasted that way to show just the re-run of the rtwiz tests.  Didn't want to run all of them.  I guess I must have ran make test and noticed there.</p>



<a name="494645383"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/recent%20bugs/near/494645383" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/recent.20bugs.html#494645383">(Jan 19 2025 at 14:18)</a>:</h4>
<p>Yeah, IIRC make test will run everything - that's why we ended up defining a separate make check.</p>



<hr><p>Last updated: Jul 29 2025 at 01:06 UTC</p>
</html>