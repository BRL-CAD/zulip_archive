<html>
<head><meta charset="utf-8"><title>libged · brlcad · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/index.html">brlcad</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html">libged</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="204497450"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204497450" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204497450">(Jul 20 2020 at 23:38)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> I know it's not hooked up, but help is the furthest along of libged's new command structure.  Please don't merge the deletion.</p>



<a name="204499596"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204499596" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204499596">(Jul 21 2020 at 00:08)</a>:</h4>
<p>(talking about libged/help)</p>



<a name="204502895"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204502895" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204502895">(Jul 21 2020 at 01:00)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> No problem - I only merged the relocations because I figured they were harmless and would make life easier down the road - the bit I'm into now is a bit crazier.</p>
<p>What I'm trying is a bit different from what was there (at least, so far) so I don't know if it will be acceptable in the end or not - it's mostly an experiment, and may end up being a throw-away.</p>



<a name="204508128"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204508128" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204508128">(Jul 21 2020 at 02:52)</a>:</h4>
<p>the relocations aren't a problem, that's been the plan, so it's all good.  it's the commit on the branch deleting help/help.cpp that was a lil concerning.</p>



<a name="204536494"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204536494" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204536494">(Jul 21 2020 at 11:32)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> That was a temporary measure for compiling while setting up the change in the API - I should have commented it out rather than deleting it.</p>



<a name="204544894"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204544894" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204544894">(Jul 21 2020 at 13:08)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> fixed - gedplugins branch now has the help and zoom plugins enabled using the new setup.</p>



<a name="204600631"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204600631" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204600631">(Jul 21 2020 at 20:43)</a>:</h4>
<p>cool</p>



<a name="204600758"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204600758" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204600758">(Jul 21 2020 at 20:44)</a>:</h4>
<p>I like them dynamically loading.  will be interesting to see how that scales up, what if anything it does to initialization.</p>



<a name="204600802"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204600802" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204600802">(Jul 21 2020 at 20:45)</a>:</h4>
<p>also sets the stage for having a single runner process that dynamically loads and communicates back over a channel -- complete protected process encapsulation</p>



<a name="204612836"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204612836" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204612836">(Jul 21 2020 at 23:01)</a>:</h4>
<p>/me is being driven slightly batty by the libged file names and function  names not necessarily matching the invocation strings higher level code expects, but starting to get some interesting progress now.</p>
<p>Must confess I started down this road trying to see if I could come with a way to avoid all the verbose wrapping logic in the libtclcad layer... figured at the very least it would force me to understand which pieces are doing what.</p>
<p>/me sometimes prefers to trample down the maze rather than wind his way through it...</p>



<a name="204623122"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204623122" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204623122">(Jul 22 2020 at 01:51)</a>:</h4>
<p>My initialization here (and shutdown) seems to be dominated by Tcl/Tk.</p>



<a name="204626932"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204626932" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204626932">(Jul 22 2020 at 03:22)</a>:</h4>
<p>careful reading into those tea leaves there.  it's super i/o heavy, so throwing in a ton of additional syscalls could be exasperating it in ways that won't measure correctly easily.</p>



<a name="204726127"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204726127" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204726127">(Jul 22 2020 at 21:41)</a>:</h4>
<p>Fair enough - just going by wall clock time.  I've notice the same thing with other Tcl/Tk apps on this system (gitk, for example).</p>



<a name="204726550"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204726550" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204726550">(Jul 22 2020 at 21:46)</a>:</h4>
<p>There is a strange stall that seems to happen only sometimes (perhaps tcl index rebuilding, dunno, guessing) that can stall MGED on first launch after install, lasting 20-100 seconds...  I haven't been able to reproduce it reliably, but I have seen it.</p>



<a name="204726964"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204726964" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204726964">(Jul 22 2020 at 21:51)</a>:</h4>
<p>/me nods - seen that too, same symptoms.</p>



<a name="204727045"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727045" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727045">(Jul 22 2020 at 21:52)</a>:</h4>
<p>I think the libged refactor is starting to get interesting.  As far as I can tell, I've got MGED and libtclcad working with the new setup.</p>



<a name="204727098"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727098" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727098">(Jul 22 2020 at 21:52)</a>:</h4>
<p>I saw, looking good.</p>



<a name="204727128"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727128" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727128">(Jul 22 2020 at 21:53)</a>:</h4>
<p>only thought that's come to mind is "I wonder how slow that is" ;)</p>



<a name="204727136"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727136" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727136">(Jul 22 2020 at 21:53)</a>:</h4>
<p>I'll have to try a Windows build next, and maybe toss it on the Github mac runner</p>



<a name="204727166"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727166" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727166">(Jul 22 2020 at 21:53)</a>:</h4>
<p>Um.  Do we have benchmarks for that?  It shouldn't bother the standard raytracing benchmarks much...</p>



<a name="204727174"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727174" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727174">(Jul 22 2020 at 21:53)</a>:</h4>
<p>I had a little test runner I made for indianlarry that I wish I'd kept -- but could probably reproduce</p>



<a name="204727242"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727242" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727242">(Jul 22 2020 at 21:54)</a>:</h4>
<p>it timed how fast commands could run, pushed their limit</p>



<a name="204727294"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727294" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727294">(Jul 22 2020 at 21:55)</a>:</h4>
<p>I know it's not a fair question, but if there's any way to know what I need to aim for... How slow is "too slow" in this case?</p>



<a name="204727300"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727300" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727300">(Jul 22 2020 at 21:55)</a>:</h4>
<p>if restructuring libged slows down the benchmarks, that enters revert territory because libged shouldn't even be involved :D</p>



<a name="204727446"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727446" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727446">(Jul 22 2020 at 21:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/libged/near/204727294">said</a>:</p>
<blockquote>
<p>I know it's not a fair question, but if there's any way to know what I need to aim for... How slow is "too slow" in this case?</p>
</blockquote>
<p>I don't think any single command matters unless it gets into non-responsive territory.  commands that should complete immediately that are taking 500 to 5000ms for example, when they maybe took 5ms before -- that would be a problem I think</p>



<a name="204727556"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727556" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727556">(Jul 22 2020 at 21:58)</a>:</h4>
<p>Sounds like a candidate for a regression test, actually...</p>



<a name="204727618"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727618" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727618">(Jul 22 2020 at 21:59)</a>:</h4>
<p>the general bar for interactivity is 20 per sec, which is 50ms</p>



<a name="204727648"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727648" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727648">(Jul 22 2020 at 21:59)</a>:</h4>
<p>Would need to "normalize" somehow on the platform at the beginning of the run, but if we recorded an expected range based on a ratio of the control test maybe?  Even fairly large error bars might be useful for spotting bad problems getting introduced...</p>



<a name="204727757"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727757" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727757">(Jul 22 2020 at 22:00)</a>:</h4>
<p>if a command doesn't complete in under that, it's not "interactive".  now in practice, I think most people's tolerance is more like web page tolerance, not necessarily interactive rate, but "responsive" enough and that sits in the 2s ballpark.</p>



<a name="204727909"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727909" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727909">(Jul 22 2020 at 22:02)</a>:</h4>
<p>/me gets an idea...</p>



<a name="204727955"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727955" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727955">(Jul 22 2020 at 22:03)</a>:</h4>
<p>where a slowdown would be concerning is any commands that call into other commands.  like if search suddenly goes from 1s to 10s .. that implies an architecture problem getting introduced.</p>



<a name="204727965"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204727965" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204727965">(Jul 22 2020 at 22:03)</a>:</h4>
<p>I doubt that's happened though</p>



<a name="204728110"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204728110" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204728110">(Jul 22 2020 at 22:05)</a>:</h4>
<p>it'd be nice to have a dashboard of how long each command takes to do its intended function</p>



<a name="204728137"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204728137" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204728137">(Jul 22 2020 at 22:05)</a>:</h4>
<p>which would imply having a test for every command, which we don't have yet though either</p>



<a name="204728583"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204728583" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204728583">(Jul 22 2020 at 22:11)</a>:</h4>
<p>Well, my libged plugin test is iterating through calling all of them (or should be, at any rate)...</p>



<a name="204728705"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204728705" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204728705">(Jul 22 2020 at 22:12)</a>:</h4>
<p>the mged test calls them all too, to make sure they all report help -- not the same as doing and timing their intended function though</p>



<a name="204728767"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204728767" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204728767">(Jul 22 2020 at 22:13)</a>:</h4>
<p>Ah.  That shouldn't be needed for overhead comparison though, should it?  Or is there a chance that living as a shared object will slow down the execution?</p>



<a name="204728842"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204728842" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204728842">(Jul 22 2020 at 22:14)</a>:</h4>
<p>it depends on where slowdown came from</p>



<a name="204728932"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204728932" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204728932">(Jul 22 2020 at 22:15)</a>:</h4>
<p>saw we screwed up rt_db_export_internal performance for example, wouldn't show just by testing usage or help</p>



<a name="204728958"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204728958" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204728958">(Jul 22 2020 at 22:15)</a>:</h4>
<p>they have their place as a test, just not as interesting for dashboarding purposes at least</p>



<a name="204729116"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204729116" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204729116">(Jul 22 2020 at 22:17)</a>:</h4>
<p>and regarding performance for usability testing, startup time is just a fraction of the time that matters</p>



<a name="204731119"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204731119" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204731119">(Jul 22 2020 at 22:41)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I doubt it's the number you're after, but if it's of interest I added a timer in ged_exec...</p>



<a name="204732091"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204732091" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204732091">(Jul 22 2020 at 22:53)</a>:</h4>
<p>heh, you know you just added another syscall right??</p>



<a name="204732235"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204732235" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204732235">(Jul 22 2020 at 22:54)</a>:</h4>
<p>ah, apparently it depends -- might not be a syscall</p>



<a name="204732571"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204732571" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204732571">(Jul 22 2020 at 22:59)</a>:</h4>
<p>looks like it is a system call, but doesn't always provoke typical system call behavior -- it depends on the OS and libc implementation.  may at least avoid an allocation, but may still cause an interrupt/stall.</p>



<a name="204735979"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204735979" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204735979">(Jul 22 2020 at 23:46)</a>:</h4>
<p>To the overall timing, yes - I thought the issue of main concern was whether the invocation of the ged commands was being slowed?</p>



<a name="204736057"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204736057" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204736057">(Jul 22 2020 at 23:47)</a>:</h4>
<p>The idea was to show execution times to evaluate whether things look "too slow" or not, and then remove it once it passes muster...</p>



<a name="204736061"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204736061" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204736061">(Jul 22 2020 at 23:47)</a>:</h4>
<p>yes, that was the immediate question.  Doesn't need to persist as a feature, though -- just for awareness.</p>



<a name="204736069"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204736069" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204736069">(Jul 22 2020 at 23:47)</a>:</h4>
<p>yeah, thumbs up</p>



<a name="204736138"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204736138" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204736138">(Jul 22 2020 at 23:48)</a>:</h4>
<p>Ironically, the new approach is a whole lot easier to instrument than traditional ged calls - no single entry point there to watch.</p>



<a name="204736178"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204736178" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204736178">(Jul 22 2020 at 23:48)</a>:</h4>
<p>sure, but that's because you made a ged_exec to call them .. and that's been the plan all along regardless of them being dynamic or not</p>



<a name="204736242"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204736242" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204736242">(Jul 22 2020 at 23:50)</a>:</h4>
<p>/me nods.  So the question is whether they should just all be built as one library in lieu of the individual .so files?</p>



<a name="204736310"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204736310" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204736310">(Jul 22 2020 at 23:50)</a>:</h4>
<p>/me figured the latter was a good stepping stone to per-process commands (which I would expect to be slower than this approach, really...)</p>



<a name="204736311"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204736311" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204736311">(Jul 22 2020 at 23:50)</a>:</h4>
<p>all or some subset, we may find there's a benefit in having a core guaranteed preloaded</p>



<a name="204736325"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204736325" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204736325">(Jul 22 2020 at 23:50)</a>:</h4>
<p>yep</p>



<a name="204736370"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204736370" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204736370">(Jul 22 2020 at 23:51)</a>:</h4>
<p>per-process will be even more overhead, that's why it's all just situational awareness curiosity.  I don't expect it to be much more than a few ms increase.</p>



<a name="204736431"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204736431" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204736431">(Jul 22 2020 at 23:52)</a>:</h4>
<p>if anything, it could conceivably reduce overall runtime while increasing individual commands, because not all have to be resolved by ld during startup</p>



<a name="204736559"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204736559" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204736559">(Jul 22 2020 at 23:55)</a>:</h4>
<p>it should just be adding a few interrupts to do the .so search, open, scan+read the file to get the symbols.  that's probably not very much and should only be on the first call.</p>



<a name="204736673"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204736673" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204736673">(Jul 22 2020 at 23:56)</a>:</h4>
<p>So, bottom line, what's the path forward?  I'm not in a tearing hurry to merge - my target is libtclcad and I can tangle with that in this branch well enough - but we'll need some plan to move forward eventually.  This'll be a tough to maintain long term as a branch if any significant work starts on libged in trunk...</p>



<a name="204738675"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204738675" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204738675">(Jul 23 2020 at 00:26)</a>:</h4>
<p>if mged seems to be behaving and there's not an obvious slowdown, no major concerns from me.</p>



<a name="204738832"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204738832" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204738832">(Jul 23 2020 at 00:29)</a>:</h4>
<p>if it's slower, that should be born out by observation of an issue (e.g., search 10x slower or something).  any fix  should be with an eye towards fixing a specific observed problem.  i don't think this change warrants hunting for a problem necessarily.  a sanity check on a couple typical commands should be enough hopefully, and it'd be good to merge.</p>



<a name="204740116"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204740116" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204740116">(Jul 23 2020 at 00:50)</a>:</h4>
<p>Sounds good.  Time to boot the laptop into Windows again... ugh.</p>



<a name="204740171"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/libged/near/204740171" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/libged.html#204740171">(Jul 23 2020 at 00:51)</a>:</h4>
<p>/me does the github Mac test first because it's more fun...</p>



<hr><p>Last updated: Apr 06 2025 at 00:54 UTC</p>
</html>