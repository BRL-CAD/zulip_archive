<html>
<head><meta charset="utf-8"><title>OpenGL · brlcad · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/index.html">brlcad</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html">OpenGL</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="127641599"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/127641599" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Armin (LordOfBikes) <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#127641599">(Jun 06 2018 at 06:34)</a>:</h4>
<p>Think this concerns BRL-CAD too, when it's nearer the time:<br>
<a href="https://www.anandtech.com/show/12894/apple-deprecates-opengl-across-all-oses" target="_blank" title="https://www.anandtech.com/show/12894/apple-deprecates-opengl-across-all-oses">https://www.anandtech.com/show/12894/apple-deprecates-opengl-across-all-oses</a></p>



<a name="127695306"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/127695306" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#127695306">(Jun 07 2018 at 05:17)</a>:</h4>
<blockquote>
<p>Think this concerns BRL-CAD too, when it's nearer the time:<br>
<a href="https://www.anandtech.com/show/12894/apple-deprecates-opengl-across-all-oses" target="_blank" title="https://www.anandtech.com/show/12894/apple-deprecates-opengl-across-all-oses">https://www.anandtech.com/show/12894/apple-deprecates-opengl-across-all-oses</a></p>
</blockquote>
<p>Yeah, I saw the infuriating announcement earlier in the week, opencl too</p>



<a name="127695367"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/127695367" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#127695367">(Jun 07 2018 at 05:18)</a>:</h4>
<p>What I suspect will shake down in the near term is OpenGL will remain for at least 5+ years and the open source Vulkan driver's would take over from there (essentially wrapping Metal)</p>



<a name="207885692"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/207885692" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#207885692">(Aug 24 2020 at 19:27)</a>:</h4>
<p><span class="user-mention" data-user-id="103542">@Erik</span>   How's your Linux OpenGL foo these days?  I'm getting a maddening issue and I'm not sure where it's coming from...</p>
<p>When I do a low level MGED classic mode opengl display manager attach, I'm getting a really weird transparency effect in the window.  How do I disable this?</p>
<p><a href="/user_uploads/1549/gSwHaKk_fKtr-s6lBpG5M9Ik/opengl_drawing_oddness.png">opengl_drawing_oddness.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/gSwHaKk_fKtr-s6lBpG5M9Ik/opengl_drawing_oddness.png" title="opengl_drawing_oddness.png"><img src="/user_uploads/1549/gSwHaKk_fKtr-s6lBpG5M9Ik/opengl_drawing_oddness.png"></a></div>



<a name="207885904"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/207885904" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#207885904">(Aug 24 2020 at 19:28)</a>:</h4>
<p>I'm sure it's at least partially due to new effects from Gnome and compositing wms and such, but  as far as I know there's been no substantive change to our OpenGL drawing code in a very long time so I don't know what we're doing (or more likely not doing) to produce this result.</p>



<a name="207886019"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/207886019" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#207886019">(Aug 24 2020 at 19:29)</a>:</h4>
<p>(The part I REALLY don't get is that the terminal background shows through in the non-geometry areas, which would be annoying enough, but now the text is rendering on TOP of the geometry???)</p>



<a name="207892948"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/207892948" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#207892948">(Aug 24 2020 at 20:26)</a>:</h4>
<p>OK, it's definitely something to do with Gnome - when I switch to Fluxbox everything behaves.</p>



<a name="207893376"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/207893376" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#207893376">(Aug 24 2020 at 20:30)</a>:</h4>
<p>/me hasn't used fluxbox since switching to the high DPI monitor... kinda nice to be back, actually...</p>



<a name="207902055"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/207902055" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#207902055">(Aug 24 2020 at 21:54)</a>:</h4>
<p>Um, what's the clear color alpha? Could it be that?</p>



<a name="207902101"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/207902101" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#207902101">(Aug 24 2020 at 21:55)</a>:</h4>
<p>Heh, mate and icewm for me, lately...</p>



<a name="207915611"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/207915611" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#207915611">(Aug 25 2020 at 01:09)</a>:</h4>
<p>I tried flipping that from 0 to 1, didn't seem to change anything...</p>



<a name="207987675"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/207987675" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#207987675">(Aug 25 2020 at 16:45)</a>:</h4>
<p>try finding what the blending function is set to..  <a href="https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBlendFunc.xhtml">https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBlendFunc.xhtml</a></p>



<a name="207987896"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/207987896" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#207987896">(Aug 25 2020 at 16:47)</a>:</h4>
<p>Might need to set/call it if it's not set.  Default may have changed from one mode or another, might be getting set inside Tk or getting changed in the driver by another app and needing to be reset on our end each redraw, or something like that.</p>



<a name="207988054"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/207988054" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#207988054">(Aug 25 2020 at 16:48)</a>:</h4>
<p>looks kind of like it's GL_ONE_MINUS_DST_ALPHA</p>



<a name="207988131"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/207988131" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#207988131">(Aug 25 2020 at 16:48)</a>:</h4>
<p>or GL_DST_COLOR, something DST-related</p>



<a name="207988192"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/207988192" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#207988192">(Aug 25 2020 at 16:49)</a>:</h4>
<p>when it should be something else..</p>



<a name="208022905"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208022905" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208022905">(Aug 25 2020 at 21:00)</a>:</h4>
<p>HAH!  Used apitrace to look at the OpenGL calls in Gnome and Fluxbox with fbserv, and they were essentially the same despite different visual outcomes (Gnome transparent, Fluxbox not.)  That pointed the finger at the XVisual setup.  Some hunting and a stackoverflow post pointing to an obscure corner of the XVisualInfo setup, and we're now able to filter out transparent window types!</p>



<a name="208023032"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208023032" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208023032">(Aug 25 2020 at 21:01)</a>:</h4>
<p>Must confess fixing that is intensely satisfying - that's been a thorn in the graphics side of things for years now.</p>



<a name="208023679"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208023679" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208023679">(Aug 25 2020 at 21:07)</a>:</h4>
<p>Nice work</p>



<a name="208023930"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208023930" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208023930">(Aug 25 2020 at 21:09)</a>:</h4>
<p>We may need to ultimately support visuals with an alpha channel (e.g., if there aren't any), in which case the other fix look like to just set the clear color, which we probably don't do but should.   glClearColor(bg[R],bg[G],bg[B],1.0f);</p>



<a name="208024118"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024118" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024118">(Aug 25 2020 at 21:11)</a>:</h4>
<p>I tried fiddling around with that, but I couldn't seem to make a dent - it was almost like the entire window contents were being blended by the desktop's compositor.</p>



<a name="208024232"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024232" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024232">(Aug 25 2020 at 21:12)</a>:</h4>
<p>Did you see/set the blending function?  That still comes into play too.</p>



<a name="208024290"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024290" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024290">(Aug 25 2020 at 21:13)</a>:</h4>
<p>ogl has a transparency setting that toggles that - otherwise we don't touch it in our code as far as I can tell.</p>



<a name="208024313"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024313" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024313">(Aug 25 2020 at 21:13)</a>:</h4>
<p>It didn't get triggered in either fbserv invocation</p>



<a name="208024512"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024512" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024512">(Aug 25 2020 at 21:15)</a>:</h4>
<p>that's was my point though -- we are probably not setting it correctly</p>



<a name="208024528"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024528" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024528">(Aug 25 2020 at 21:15)</a>:</h4>
<p>I'm not very good at figuring out which OpenGL state transitions and functions need to go where in the dm drawing cycle to achieve specific effects - if we ever really have to drill down on that I'm going  to have to set up a stand-alone drawing app and do a lot of fiddling</p>



<a name="208024562"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024562" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024562">(Aug 25 2020 at 21:15)</a>:</h4>
<p>probably should be something like glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</p>



<a name="208024577"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024577" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024577">(Aug 25 2020 at 21:15)</a>:</h4>
<p>before the draw</p>



<a name="208024611"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024611" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024611">(Aug 25 2020 at 21:15)</a>:</h4>
<p>assuming GL_BLEND mode is being enabled</p>



<a name="208024628"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024628" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024628">(Aug 25 2020 at 21:15)</a>:</h4>
<p>Really hoping we can just move to a higher level drawing API and ditch the whole mess...</p>



<a name="208024744"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024744" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024744">(Aug 25 2020 at 21:16)</a>:</h4>
<p>Sure, but that's not happening today or tomorrow, so until that's basically pending release, it's a non-solution :)</p>



<a name="208024763"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024763" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024763">(Aug 25 2020 at 21:16)</a>:</h4>
<p>(hope, that is) ;)</p>



<a name="208024776"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024776" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024776">(Aug 25 2020 at 21:16)</a>:</h4>
<p>'specially since the planet seems to be moving to vulkan/metal...</p>



<a name="208024809"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208024809" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208024809">(Aug 25 2020 at 21:17)</a>:</h4>
<p>skipping visuals with an alpha confirms there's a bug</p>



<a name="208025008"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208025008" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208025008">(Aug 25 2020 at 21:18)</a>:</h4>
<p>definitely cool that it's fixed from users' perspective and we at least know more what the issue is</p>



<a name="208025096"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208025096" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208025096">(Aug 25 2020 at 21:19)</a>:</h4>
<p>We may also need to set some value to control the alphaMask on windows that have it - we're at the X11 layer with those calls, which I know virtually nothing about.</p>



<a name="208025222"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208025222" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208025222">(Aug 25 2020 at 21:20)</a>:</h4>
<p>still could also be just that we never clear the alpha channel, that'd be my guess</p>



<a name="208025315"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208025315" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208025315">(Aug 25 2020 at 21:20)</a>:</h4>
<p>in that case, something like glColorMask() to select the alpha channel, glClearColor() to set it to black or bg, then glClear().  I bet that does the trick</p>



<a name="208025351"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208025351" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208025351">(Aug 25 2020 at 21:21)</a>:</h4>
<p>Before each draw cycle you mean?  Or when the window is created?</p>



<a name="208025401"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208025401" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208025401">(Aug 25 2020 at 21:21)</a>:</h4>
<p>glColorMask(0, 0, 0, 1); glClearColor(0, 0, 0, 1.0); glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</p>



<a name="208025416"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208025416" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208025416">(Aug 25 2020 at 21:21)</a>:</h4>
<p>just when the window is created</p>



<a name="208025670"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208025670" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208025670">(Aug 25 2020 at 21:24)</a>:</h4>
<p>probably have to reset the mask to glColorMask(1, 1, 1, 1);</p>



<a name="208025829"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208025829" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208025829">(Aug 25 2020 at 21:25)</a>:</h4>
<p>That does seem to work, in a quick test.</p>



<a name="208025904"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208025904" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208025904">(Aug 25 2020 at 21:25)</a>:</h4>
<p>kind of amazing if that's not somewhere in the code already</p>



<a name="208025909"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208025909" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208025909">(Aug 25 2020 at 21:25)</a>:</h4>
<p>Let me try the FB too - if that's good, as you say it's a better solution.</p>



<a name="208025989"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208025989" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208025989">(Aug 25 2020 at 21:26)</a>:</h4>
<p>Or you can commit it if you prefer, since it's your fix ;-)</p>



<a name="208026051"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026051" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026051">(Aug 25 2020 at 21:26)</a>:</h4>
<p>no diff to me, I would have to search to even know where init is even happening.</p>



<a name="208026100"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026100" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026100">(Aug 25 2020 at 21:27)</a>:</h4>
<p>used to do a lot more opengl back in the day.  need to go through some vulkan exercises.</p>



<a name="208026124"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026124" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026124">(Aug 25 2020 at 21:27)</a>:</h4>
<p>/me isn't surprised - this code probably predates alpha channels, at least in any sort of practical implementation, so it was never added and never missed.  I'll bet we have a bunch of stuff missing that we "should" be doing by modern standards...</p>



<a name="208026151"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026151" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026151">(Aug 25 2020 at 21:27)</a>:</h4>
<p>I know the theory of the changes, but have no practical experience with it</p>



<a name="208026218"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026218" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026218">(Aug 25 2020 at 21:28)</a>:</h4>
<p>nah, alpha channel have been a thing since the 80's, before it was even called OpenGL</p>



<a name="208026229"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026229" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026229">(Aug 25 2020 at 21:28)</a>:</h4>
<p>PHIGS!</p>



<a name="208026279"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026279" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026279">(Aug 25 2020 at 21:29)</a>:</h4>
<p>support has been a thing since before opengl 1.0</p>



<a name="208026361"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026361" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026361">(Aug 25 2020 at 21:29)</a>:</h4>
<p>Hmm.  OK, probably just the active use of alpha channels for desktops then.</p>



<a name="208026435"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026435" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026435">(Aug 25 2020 at 21:30)</a>:</h4>
<p>we're almost certainly just suffering from Xorg initializing glx differently from X11 or maybe nvidia defaulting to something different in the driver</p>



<a name="208026513"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026513" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026513">(Aug 25 2020 at 21:31)</a>:</h4>
<p>Maybe, but the symptoms at least are desktop specific  - I wasn't restarting the Xserver (at least, not deliberately) flipping between Gnome and Fluxbox</p>



<a name="208026524"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026524" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026524">(Aug 25 2020 at 21:31)</a>:</h4>
<p>like diff of having int alpha; in the code and someone coming along and going, oh, that should be on and changing it to int alpha=1.0; so we suddenly are in trouble because we assumed 0.0</p>



<a name="208026672"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026672" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026672">(Aug 25 2020 at 21:32)</a>:</h4>
<p>you using Wayland?</p>



<a name="208026721"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026721" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026721">(Aug 25 2020 at 21:32)</a>:</h4>
<p>Should be Xorg - I've tried Wayland once or twice when Ubuntu came out with it, but wasn't quite there</p>



<a name="208026955"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026955" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026955">(Aug 25 2020 at 21:35)</a>:</h4>
<p>Blast it - now it's not working (???)</p>



<a name="208026979"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208026979" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208026979">(Aug 25 2020 at 21:35)</a>:</h4>
<p>What the heck.</p>



<a name="208027190"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208027190" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208027190">(Aug 25 2020 at 21:36)</a>:</h4>
<p>Wonder if I forgot to recompile or something - cleared out the window filters, and now I'm getting that transparency again with the dm and fb.</p>



<a name="208027463"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208027463" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208027463">(Aug 25 2020 at 21:39)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  Yeah, nothing doing now - can't clear the transparency.</p>



<a name="208027531"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208027531" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208027531">(Aug 25 2020 at 21:39)</a>:</h4>
<p>I think I see it.</p>



<a name="208027649"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208027649" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208027649">(Aug 25 2020 at 21:40)</a>:</h4>
<p>there's a bunch of glClearColor(0,0,0,0)'s in the code.  that's asking the alpha to be transparent, so when it clears, it's set to zero but not visible..</p>



<a name="208027746"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208027746" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208027746">(Aug 25 2020 at 21:41)</a>:</h4>
<p>try setting the four calls in ./glx/if_ogl.c to have alpha 1.0</p>



<a name="208027767"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208027767" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208027767">(Aug 25 2020 at 21:41)</a>:</h4>
<p>er, 5 calls</p>



<a name="208027928"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208027928" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208027928">(Aug 25 2020 at 21:42)</a>:</h4>
<p>yeah, I bet that's it... we're actually requesting a transparent background and it's finally obliging</p>



<a name="208027992"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208027992" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208027992">(Aug 25 2020 at 21:43)</a>:</h4>
<p>Do I still need to initialize as before?  Changed all glClearColor settings to 1, still getting transparency</p>



<a name="208028161"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208028161" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208028161">(Aug 25 2020 at 21:44)</a>:</h4>
<p>Nope, that doesn't help</p>



<a name="208028270"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208028270" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208028270">(Aug 25 2020 at 21:45)</a>:</h4>
<p>so you set glClearColor(#,#,#, 1.0)?</p>



<a name="208028321"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208028321" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208028321">(Aug 25 2020 at 21:46)</a>:</h4>
<p>yes</p>



<a name="208028338"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208028338" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208028338">(Aug 25 2020 at 21:46)</a>:</h4>
<p>and that was on dm or fb?</p>



<a name="208028354"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208028354" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208028354">(Aug 25 2020 at 21:46)</a>:</h4>
<p>both</p>



<a name="208028521"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208028521" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208028521">(Aug 25 2020 at 21:48)</a>:</h4>
<p><a href="/user_uploads/1549/Zhzbed366sLKzEcBHzblgjkP/patch">patch</a></p>



<a name="208028535"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208028535" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208028535">(Aug 25 2020 at 21:48)</a>:</h4>
<p>Think that was what you meant?</p>



<a name="208028552"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208028552" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208028552">(Aug 25 2020 at 21:49)</a>:</h4>
<p>/me looks</p>



<a name="208028968"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208028968" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208028968">(Aug 25 2020 at 21:53)</a>:</h4>
<p>yeah, so that is what I had in mind, so while that's an issue, it's apparently not <em>the</em> issue</p>



<a name="208029095"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029095" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029095">(Aug 25 2020 at 21:54)</a>:</h4>
<p>I wonder i ...</p>



<a name="208029106"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029106" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029106">(Aug 25 2020 at 21:54)</a>:</h4>
<p>So we should correct those anyway, just on general principles?</p>



<a name="208029128"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029128" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029128">(Aug 25 2020 at 21:54)</a>:</h4>
<p>so is this mged -c or tk mged?</p>



<a name="208029131"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029131" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029131">(Aug 25 2020 at 21:55)</a>:</h4>
<p>mged -c</p>



<a name="208029134"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029134" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029134">(Aug 25 2020 at 21:55)</a>:</h4>
<p>or both have the issu?</p>



<a name="208029193"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029193" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029193">(Aug 25 2020 at 21:55)</a>:</h4>
<p>Tk has never had it, as far as I know - embedding it in the Tk window seems to avoid the issue.  (I always figured that was because of how Tk was creating their X11 windows...)</p>



<a name="208029299"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029299" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029299">(Aug 25 2020 at 21:56)</a>:</h4>
<p>As much as I think it's wrong, I wouldn't change it if it's not fixing this issue as it could affect other things we're maybe not thinking about.  At least, not without having a half dozen platforms manually demonstrating it's still working as expected.</p>



<a name="208029313"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029313" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029313">(Aug 25 2020 at 21:56)</a>:</h4>
<p>ah, that's interesting</p>



<a name="208029334"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029334" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029334">(Aug 25 2020 at 21:57)</a>:</h4>
<p>Tk definitely has a bit more going on</p>



<a name="208029403"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029403" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029403">(Aug 25 2020 at 21:58)</a>:</h4>
<p>it's calling XChangeProperty, which might be setting the state differently.</p>



<a name="208029467"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029467" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029467">(Aug 25 2020 at 21:58)</a>:</h4>
<p>So when it does the transarent thing, and you move the window</p>



<a name="208029501"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029501" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029501">(Aug 25 2020 at 21:58)</a>:</h4>
<p>does it update the window contents, or does it look like the window took a snapshot of the background</p>



<a name="208029524"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029524" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029524">(Aug 25 2020 at 21:59)</a>:</h4>
<p>of what's behind it</p>



<a name="208029561"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029561" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029561">(Aug 25 2020 at 21:59)</a>:</h4>
<p>It's like a pane of semitransparent glass</p>



<a name="208029585"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029585" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029585">(Aug 25 2020 at 21:59)</a>:</h4>
<p>so it updates if you move it</p>



<a name="208029597"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029597" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029597">(Aug 25 2020 at 21:59)</a>:</h4>
<p>yes</p>



<a name="208029706"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029706" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029706">(Aug 25 2020 at 22:00)</a>:</h4>
<p>try a hide/expose event (minimize +  unminimize)</p>



<a name="208029741"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029741" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029741">(Aug 25 2020 at 22:00)</a>:</h4>
<p>no change - still shows/updating background</p>



<a name="208029766"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029766" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029766">(Aug 25 2020 at 22:01)</a>:</h4>
<p>so yeah, then it's definitely been set up (and set up wrong)</p>



<a name="208029833"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029833" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029833">(Aug 25 2020 at 22:01)</a>:</h4>
<p>do you know if it's a direct or indirect windowing context?</p>



<a name="208029963"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029963" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029963">(Aug 25 2020 at 22:03)</a>:</h4>
<p>Not sure</p>



<a name="208029988"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208029988" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208029988">(Aug 25 2020 at 22:03)</a>:</h4>
<p>Here's the visual, fwiw:<br>
<a href="/user_uploads/1549/xNB5MXvqc4XA8nvWQTJ12oAr/ogl_dm-2020-08-25-18-02.gif">ogl_dm-2020-08-25-18-02.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/xNB5MXvqc4XA8nvWQTJ12oAr/ogl_dm-2020-08-25-18-02.gif" title="ogl_dm-2020-08-25-18-02.gif"><img src="/user_uploads/1549/xNB5MXvqc4XA8nvWQTJ12oAr/ogl_dm-2020-08-25-18-02.gif"></a></div>



<a name="208030050"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030050" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030050">(Aug 25 2020 at 22:04)</a>:</h4>
<p>OH, that's telling</p>



<a name="208030101"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030101" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030101">(Aug 25 2020 at 22:04)</a>:</h4>
<p>notice it's blending the blue bg color</p>



<a name="208030191"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030191" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030191">(Aug 25 2020 at 22:05)</a>:</h4>
<p>let's see if we can find where that blue is getting set</p>



<a name="208030329"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030329" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030329">(Aug 25 2020 at 22:06)</a>:</h4>
<p>wait a min, didn't you say you were using dm-X?  or is that dm-ogl?</p>



<a name="208030422"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030422" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030422">(Aug 25 2020 at 22:07)</a>:</h4>
<p>That's dm-ogl</p>



<a name="208030430"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030430" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030430">(Aug 25 2020 at 22:07)</a>:</h4>
<p>X doesn't have the issue</p>



<a name="208030493"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030493" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030493">(Aug 25 2020 at 22:08)</a>:</h4>
<p>That was why I've been futzing with fixing the classic X dm's update behavior - I figured I was going to need it if the ogl windows kept showing that transparency effect.</p>



<a name="208030551"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030551" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030551">(Aug 25 2020 at 22:08)</a>:</h4>
<p>(well that and it was busted, but that's what made it urgent)</p>



<a name="208030553"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030553" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030553">(Aug 25 2020 at 22:08)</a>:</h4>
<p>okay, cool</p>



<a name="208030591"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030591" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030591">(Aug 25 2020 at 22:08)</a>:</h4>
<p>GLFW has some code that looks related to this alpha thing, but I've not wound through it yet</p>



<a name="208030606"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030606" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030606">(Aug 25 2020 at 22:09)</a>:</h4>
<p>good news is .. the bug's in src/libdm/glx/dm-ogl.c ;)</p>



<a name="208030639"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030639" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030639">(Aug 25 2020 at 22:09)</a>:</h4>
<p>and if_ogl.c, but yes</p>



<a name="208030665"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030665" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030665">(Aug 25 2020 at 22:09)</a>:</h4>
<p>what's an fb look like if you run rt on havoc?</p>



<a name="208030676"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030676" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030676">(Aug 25 2020 at 22:09)</a>:</h4>
<p>(not embedded, transient window)</p>



<a name="208030795"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208030795" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208030795">(Aug 25 2020 at 22:11)</a>:</h4>
<p><a href="/user_uploads/1549/XoKCpe4pszBm2PGlMWcF3Za6/havoc-2020-08-25-18-10.gif">havoc-2020-08-25-18-10.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/XoKCpe4pszBm2PGlMWcF3Za6/havoc-2020-08-25-18-10.gif" title="havoc-2020-08-25-18-10.gif"><img src="/user_uploads/1549/XoKCpe4pszBm2PGlMWcF3Za6/havoc-2020-08-25-18-10.gif"></a></div>



<a name="208031045"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208031045" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208031045">(Aug 25 2020 at 22:14)</a>:</h4>
<p>Maybe related, although they're doing this if the window is <em>not</em> transparent... <a href="https://github.com/glfw/glfw/blob/master/src/x11_window.c#L338">https://github.com/glfw/glfw/blob/master/src/x11_window.c#L338</a></p>



<a name="208031287"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208031287" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208031287">(Aug 25 2020 at 22:17)</a>:</h4>
<p>/me is reminded he needs to experiment with a GLFW based libdm/fb backend... won't work for embedded Tk windows, but for stand-alone gsh it would be perfect...</p>



<a name="208031399"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208031399" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208031399">(Aug 25 2020 at 22:19)</a>:</h4>
<p>hm, everyone is calling up that property and I have no idea what this XAtom stuff is all about</p>



<a name="208031421"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208031421" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208031421">(Aug 25 2020 at 22:19)</a>:</h4>
<p>no idea what XA_CARDINAL means, can't find much on it, except that it's 6</p>



<a name="208031523"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208031523" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208031523">(Aug 25 2020 at 22:20)</a>:</h4>
<p>bbiab</p>



<a name="208031574"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208031574" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208031574">(Aug 25 2020 at 22:21)</a>:</h4>
<p>oh, this might be it</p>



<a name="208032908"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208032908" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208032908">(Aug 25 2020 at 22:37)</a>:</h4>
<p>give that a try</p>



<a name="208037077"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208037077" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208037077">(Aug 25 2020 at 23:30)</a>:</h4>
<p>Nope - still transparent.</p>



<a name="208038856"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208038856" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208038856">(Aug 25 2020 at 23:55)</a>:</h4>
<p>hm, another thought could be a mismatch between glx and tk</p>



<a name="208038875"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208038875" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208038875">(Aug 25 2020 at 23:55)</a>:</h4>
<p>does the tk dm work?</p>



<a name="208040018"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208040018" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208040018">(Aug 26 2020 at 00:13)</a>:</h4>
<p>No, unfortunately.</p>



<a name="208040031"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208040031" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208040031">(Aug 26 2020 at 00:13)</a>:</h4>
<p>I had started on a rewrite earlier, but didn't get it to completion before I had to shift to other stuff</p>



<a name="208040034"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208040034" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208040034">(Aug 26 2020 at 00:13)</a>:</h4>
<p>wouldn't matter looking at the code, but I see it doesn't call glx</p>



<a name="208128336"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208128336" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208128336">(Aug 26 2020 at 18:21)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> diminishing returns.  I really think the issue is how the window+context is being set up, prior to opengl (which is why they made no change), but I think we can just run with your fix for now.  If I had a platform to debug on in front of me, I think I could knock it out in an evening, but again ... diminishing returns.  I think a better fix would be dm-tk or dm-osg or dm-sdl or dm-glut where this would almost certainly become a non-issue.</p>



<a name="208128478"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208128478" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208128478">(Aug 26 2020 at 18:22)</a>:</h4>
<p>Agreed.  Can revisit if we hit a case in the wild where there are no alpha free X11 windows.</p>



<a name="208128489"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208128489" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208128489">(Aug 26 2020 at 18:22)</a>:</h4>
<p>Looking at the code, we're mixing old and new calls for creating a context.  For example, we don't call glXChooseVisual with attributes, we do it all manually (old school).</p>



<a name="208128608"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208128608" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208128608">(Aug 26 2020 at 18:23)</a>:</h4>
<p>/me is pecking at the tk dm a bit again, but no  chance it'll be ready to replace X by release time.</p>



<a name="208128681"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208128681" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208128681">(Aug 26 2020 at 18:23)</a>:</h4>
<p>that's where I suspect the issue is.  don't even think it's "bug" per-se, as much as it is just something we're not specifying, that we didn't need to before but could/should now because of change.</p>



<a name="208128826"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208128826" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208128826">(Aug 26 2020 at 18:24)</a>:</h4>
<p>thought it was opengl, but your video yesterday that showed it clearly blending the window with a background color being draw punts this out of opengl's domain and into the window's.</p>



<a name="208129247"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208129247" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208129247">(Aug 26 2020 at 18:27)</a>:</h4>
<p>Oh, while I'm thinking about it: <span class="user-mention" data-user-id="102939">@Daniel Rossberg</span> , do you need the changes you started with librt in the 7.32.0 release?  If not my inclination is to not merge those to RELEASE yet, since that's a pretty low level of the stack to be modifying right before a release.</p>



<a name="208129580"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208129580" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208129580">(Aug 26 2020 at 18:29)</a>:</h4>
<p>sad thing is I bet a dm-sdl or dm-glut could be implemented in less than a day.  can almost see all the lines of code needed.</p>



<a name="208129639"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208129639" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208129639">(Aug 26 2020 at 18:30)</a>:</h4>
<p>need to get that comfortable with qt :/</p>



<a name="208137779"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/OpenGL/near/208137779" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Rossberg <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/OpenGL.html#208137779">(Aug 26 2020 at 19:36)</a>:</h4>
<p>It's okay for me to have them in the release after the 7.32.0.</p>



<hr><p>Last updated: Oct 24 2024 at 00:45 UTC</p>
</html>