<html>
<head><meta charset="utf-8"><title>GCV · brlcad · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/index.html">brlcad</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html">GCV</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="219511244"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219511244" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219511244">(Dec 10 2020 at 18:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/superbuild/near/217799890">said</a>:</p>
<blockquote>
<p>yeah, sorry for the ping <span class="user-mention silent" data-user-id="247135">Sumagna Das</span> -- that's not something you need to read through.  Summary is just that gcv needs some lovin' and your work making a plugin for it make that obvious.</p>
</blockquote>
<p>So i was busy with my studies and a personal project.......is there anything i can do to help fix GCV?</p>



<a name="219528406"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219528406" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219528406">(Dec 10 2020 at 20:19)</a>:</h4>
<p><span class="user-mention" data-user-id="247135">@Sumagna Das</span> woo hoo!  so how'd your testing go?  hopefully passed all your exams :)</p>



<a name="219528485"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219528485" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219528485">(Dec 10 2020 at 20:20)</a>:</h4>
<p>Yup...the exams went well..</p>



<a name="219528498"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219528498" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219528498">(Dec 10 2020 at 20:20)</a>:</h4>
<p>awesome</p>



<a name="219528524"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219528524" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219528524">(Dec 10 2020 at 20:20)</a>:</h4>
<p>that's always a good feeling to have that behind you.</p>



<a name="219528834"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219528834" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219528834">(Dec 10 2020 at 20:22)</a>:</h4>
<p>As for GCV, I think the main stopper is how mime types are implemented by gcv and bu.  If you recall, it was having trouble forwarding your PNG input file to your plugin.</p>



<a name="219528869"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219528869" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219528869">(Dec 10 2020 at 20:23)</a>:</h4>
<p>couple issues there, I think</p>



<a name="219528884"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219528884" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219528884">(Dec 10 2020 at 20:23)</a>:</h4>
<p>yea......it wasnt recognizing PNG files.</p>



<a name="219528990"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219528990" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219528990">(Dec 10 2020 at 20:24)</a>:</h4>
<p>right, that's because PNGs are a 2D type and GCV is expecting 3D types because that's how LIBBU was implemented, separating them into groups</p>



<a name="219529085"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219529085" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219529085">(Dec 10 2020 at 20:25)</a>:</h4>
<p>ohh.......thats why it was taking the PNG file as <code>GCV_MODEL_UNKNOWN</code> Or something like that</p>



<a name="219529105"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219529105" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219529105">(Dec 10 2020 at 20:25)</a>:</h4>
<p>you can find that nutty logic in src/libbu/mime.cmake where it autogenerates source code.  you can see the source code it generated by looking in the build dir at src/libbu/mime.c</p>



<a name="219529116"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219529116" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219529116">(Dec 10 2020 at 20:25)</a>:</h4>
<p>bingo, correct</p>



<a name="219529156"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219529156" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219529156">(Dec 10 2020 at 20:25)</a>:</h4>
<p>we had to say "handle anything" because it's a type in a completely different mime type bucket</p>



<a name="219529169"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219529169" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219529169">(Dec 10 2020 at 20:25)</a>:</h4>
<p>so I think we need to change that in libbu</p>



<a name="219529257"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219529257" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219529257">(Dec 10 2020 at 20:26)</a>:</h4>
<p>i will look into <code>mime.cmake</code> tomorrow</p>



<a name="219529306"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219529306" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219529306">(Dec 10 2020 at 20:26)</a>:</h4>
<p>to either flatten the mime typing like it is in the original data file (see misc/mime.types) with the groupings being optional tagging</p>



<a name="219529536"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219529536" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219529536">(Dec 10 2020 at 20:28)</a>:</h4>
<p>actually, that's the best approach I can come up with besides just recreating a mime typing API again (from scratch or otherwise)</p>



<a name="219529720"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219529720" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219529720">(Dec 10 2020 at 20:30)</a>:</h4>
<p>probably easier than looking at mime.cmake is to simply look at include/bu/mime.h with a critical eye towards what needs to change</p>



<a name="219529767"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219529767" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219529767">(Dec 10 2020 at 20:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/GCV/near/219529306">said</a>:</p>
<blockquote>
<p>to either flatten the mime typing like it is in the original data file (see misc/mime.types) with the groupings being optional tagging</p>
</blockquote>
<p>what do you mean by <em>flatten</em>?</p>



<a name="219529807"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219529807" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219529807">(Dec 10 2020 at 20:30)</a>:</h4>
<p>the issue is the bu_mime_context_t parameters -- those have apps pick between 2d, 3d, video, and other mime type sets</p>



<a name="219529885"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219529885" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219529885">(Dec 10 2020 at 20:31)</a>:</h4>
<p>they could all be combined into one, for example, thus grouping them into one context (for example)</p>



<a name="219530123"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219530123" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219530123">(Dec 10 2020 at 20:33)</a>:</h4>
<p>that's what was meant by flattening them -- grouping into one set</p>



<a name="219530670"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/219530670" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#219530670">(Dec 10 2020 at 20:37)</a>:</h4>
<p>or making null  or a default be all sets or something</p>



<a name="220161749"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220161749" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220161749">(Dec 16 2020 at 19:32)</a>:</h4>
<p>i just saw the files you told me to see....</p>



<a name="220161793"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220161793" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220161793">(Dec 16 2020 at 19:33)</a>:</h4>
<p>what am i supposed to do here?</p>



<a name="220286675"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220286675" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220286675">(Dec 17 2020 at 19:01)</a>:</h4>
<p><span class="user-mention" data-user-id="247135">@Sumagna Das</span> what's your perspective on the mime.h api?  we either need to add/create a mime group that has all types (in addition to or instead of the domain-specific groups), or we could remove the groupings so it's just a type-based lookup like the system mime-type system.</p>



<a name="220286721"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220286721" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220286721">(Dec 17 2020 at 19:01)</a>:</h4>
<p>Or something else entirely.  It's a design decision that has to be made next.  From there, the coding changes are pretty straightforward.</p>



<a name="220286808"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220286808" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220286808">(Dec 17 2020 at 19:02)</a>:</h4>
<p>maybe think about how you would have WANTED to write the code in gcv, in an ideal world.</p>



<a name="220290842"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220290842" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220290842">(Dec 17 2020 at 19:33)</a>:</h4>
<p>we can remove the groupings..</p>



<a name="220615777"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220615777" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220615777">(Dec 21 2020 at 18:44)</a>:</h4>
<p>(deleted)</p>



<a name="220615869"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220615869" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220615869">(Dec 21 2020 at 18:45)</a>:</h4>
<p>hey <span class="user-mention" data-user-id="102902">@Sean</span>, will any of the files in the rest of the codebase be affected if we remove the groupings?</p>



<a name="220625575"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220625575" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220625575">(Dec 21 2020 at 20:14)</a>:</h4>
<p>and one other thing........is there any named type called <code>bu_mime_context</code>?</p>



<a name="220646128"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220646128" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220646128">(Dec 22 2020 at 00:15)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  I offer this merely as food for thought - conceptually, could we think about "conversions" between different mime type categories (i.e. images and geometry files) not as conversions but as procedural geometry generations?  That would categorize the task of generating some kind of geometry file from a PNG image as a task for a different type of program...</p>



<a name="220646265"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220646265" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220646265">(Dec 22 2020 at 00:17)</a>:</h4>
<p>That appeals to me in some ways since it would mean the conceptually ambiguity (i.e. should a PNG import become a binary object in a .g file, a shader texture, a terrain DSP object, etc...) would then be out of scope for GCV.</p>



<a name="220729802"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220729802" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220729802">(Dec 22 2020 at 20:15)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> i dont know if i were supposed to do this before telling anything but i removed the <code>bu_mime_image_t</code>-kinda grouping and combined them into <code>bu_mime_context_t</code> group. I renamed the group containing <code>BU_MIME_APPLICATION</code>, <code>BU_MIME_IMAGE</code>, etc from <code>bu_mime_context_t</code> to <code>bu_mime_context</code>.</p>



<a name="220729904"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220729904" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220729904">(Dec 22 2020 at 20:16)</a>:</h4>
<p>/me is bad at naming variables.</p>



<a name="220730441"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220730441" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220730441">(Dec 22 2020 at 20:23)</a>:</h4>
<p>imma send the <code>mime_types.h</code> and <code>mime.cmake</code> so that you can see what i did (other than doing the other naming changes)</p>



<a name="220730585"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220730585" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220730585">(Dec 22 2020 at 20:25)</a>:</h4>
<p><a href="/user_uploads/1549/LgALZjf0Kn3yIDlR7rON_2ym/mime.cmake">mime.cmake</a><br>
<a href="/user_uploads/1549/lKyJeVEIofC14d-yknxjFVlS/mime_types.h">mime_types.h</a></p>



<a name="220730674"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220730674" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220730674">(Dec 22 2020 at 20:26)</a>:</h4>
<p>these are the two main files that have been changed (i know that <code>mime.cmake</code> changes the second file but it was one of the major changes i did)</p>



<a name="220816281"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220816281" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220816281">(Dec 23 2020 at 18:46)</a>:</h4>
<p>i fixed GCV not taking any mime type other than <code>BU_MIME_MODEL_UNKNOWN</code></p>



<a name="220816899"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220816899" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220816899">(Dec 23 2020 at 18:53)</a>:</h4>
<p>the <code>((bu_mime_context_t)type_int) != BU_MIME_MODEL_UNKNOWN</code> condition in <code>fmt_type()</code> function in <code>gcv.c</code> was causing the problem...i changed it to <code>((bu_mime_context_t)type_int) != BU_MIME_MODEL_UNKNOWN &amp;&amp; type_int != -1</code></p>



<a name="220817440"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220817440" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220817440">(Dec 23 2020 at 19:00)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  PS: if you didnt see the <code>mime.cmake</code> file, then i want to notify you that i flattened the groupings and because of that,  every group like <code>bu_mime_model_t</code> is combined into <code>bu_mime_context_t</code></p>



<a name="220971168"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220971168" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220971168">(Dec 26 2020 at 17:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/220646265">said</a>:</p>
<blockquote>
<p>That appeals to me in some ways since it would mean the conceptually ambiguity (i.e. should a PNG import become a binary object in a .g file, a shader texture, a terrain DSP object, etc...) would then be out of scope for GCV.</p>
</blockquote>
<p>Hm, interesting though but I think it'd be fairly arbitrary and (more importantly) not user friendly.  Don't think it's a distinction that fits our modeling paradigm as implicit geometry means object data is often in some lower-dimensional form.  Your gdal linkage is a good example.  Perfectly normal for terrain data to live in 2D tiff/png/jpg container, and as such I'd entirely expect gcv to handle converting it.  Same for vol data.  The data lives in 2D containers, and I would expect gcv to handle them just the same.  Pulling out terrain, vol, ebm, pnts, and even BoT creation (e.g., when container is say a txt file with xyz, for example) wouldn't be terribly obvious to me. </p>
<p>I think gcv's on the right track already.  The mime type issue is just an issue because the current BU interface is attempting to categorize and the categories are obviously restricting visibility.  They're a namespace.  We just need to complete the metaphor by introducing global namespacing (i.e., uncategorized), and this should be solved.</p>



<a name="220971291"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220971291" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220971291">(Dec 26 2020 at 17:04)</a>:</h4>
<p>I kind of see this getting inverted.  We have a master list of types (mime.types) that are string-&gt;type mappings.  We have a series of additional types that are akin to "image/* -&gt; png, tiff, jpg, gif, ..." mappings so callers can distinguish on any type or rich subsets of types (or exclude types).</p>



<a name="220971326"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220971326" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220971326">(Dec 26 2020 at 17:05)</a>:</h4>
<p>Towards that, we may want to make those explicit in our mime.types file so any grouping types are auto-generated instead of encoded.</p>



<a name="220971517"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220971517" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220971517">(Dec 26 2020 at 17:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="247135">Sumagna Das</span> <a href="#narrow/stream/104062-general/topic/GCV/near/220730441">said</a>:</p>
<blockquote>
<p>imma send the <code>mime_types.h</code> and <code>mime.cmake</code> so that you can see what i did (other than doing the other naming changes)</p>
</blockquote>
<p>Can you send an svn diff too?  Not easy to see what all was changed in mime.cmake, how it compares.</p>



<a name="220971644"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220971644" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220971644">(Dec 26 2020 at 17:15)</a>:</h4>
<p>I'm increasingly thinking we want a traditional string mapping, so apps/callers can do globbing or lookups on their own (e.g., mime.lookup("/path/to/myfile") or mime.lookup(".jpg"))</p>



<a name="220972911"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220972911" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220972911">(Dec 26 2020 at 17:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/GCV/near/220971517">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="247135">Sumagna Das</span> <a href="#narrow/stream/104062-general/topic/GCV/near/220730441">said</a>:</p>
<blockquote>
<p>imma send the <code>mime_types.h</code> and <code>mime.cmake</code> so that you can see what i did (other than doing the other naming changes)</p>
</blockquote>
<p>Can you send an svn diff too?  Not easy to see what all was changed in mime.cmake, how it compares.</p>
</blockquote>
<p>only for mime.cmake?</p>



<a name="220973095"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220973095" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220973095">(Dec 26 2020 at 17:59)</a>:</h4>
<p><a href="/user_uploads/1549/N8gW_jcR8gNbo8t81kQYGXo2/changes.diff">changes.diff</a></p>



<a name="220973270"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220973270" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220973270">(Dec 26 2020 at 18:03)</a>:</h4>
<p>it might be a little dirty because i wasnt sure about the changes i was making.....if it needs cleaning up, then tell me where it needs <br>
a little cleanup..</p>



<a name="220981246"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220981246" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220981246">(Dec 26 2020 at 22:11)</a>:</h4>
<p>I'm not entirely sure I follow - you mean we'd define image/png and terrain/png as distinct mime types, and given a png file the user would need to identify the mime type explicitly so the converter would know what to do with it?</p>



<a name="220996397"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/220996397" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#220996397">(Dec 27 2020 at 06:33)</a>:</h4>
<p>no, not inventing types like that.  I meant making the categoric groupings like image/* be an enum type in the same namespace.  So like how BU_MIME_IMAGE_JPEG is supposed to match "jpg" or "jpeg" etc, there'd also be a BU_MIME_IMAGE that'd represent all the BU_MIME_IMAGE_* types instead of having a separate context data structure.  There'd just be a master registry like sumagna has now with additional groupings like we had before so plugins can just ask for a type, or can narrow in on a subset, or call out a custom set.</p>



<a name="221040591"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/221040591" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#221040591">(Dec 28 2020 at 05:41)</a>:</h4>
<p>(Sorry - I'm sure I'm either being dense or missing the point...) </p>
<p>I'm still not following... when gcv gets the input:</p>
<p>gcv image.tiff output.g</p>
<p>how is the question decided as to whether that tiff image ends up as an ebm, a terrain object, a shader object, or just a straight up binary object holding the image?  All of those are potentially valid interpretations of the same data...</p>



<a name="221040640"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/221040640" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#221040640">(Dec 28 2020 at 05:42)</a>:</h4>
<p>The only way I can see is the user must provide somehow additional context that specifies one of those outcomes, but I'm not seeing a good way yet to do it...</p>



<a name="221363301"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/221363301" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#221363301">(Jan 01 2021 at 18:42)</a>:</h4>
<p>SO what should i do about the changes i made in the files for flattening the mime types alongside keeping the group names only?</p>



<a name="225009881"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/225009881" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#225009881">(Feb 03 2021 at 12:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="247135">Sumagna Das</span> <a href="#narrow/stream/104062-general/topic/GCV/near/221363301">said</a>:</p>
<blockquote>
<p>SO what should i do about the changes i made in the files for flattening the mime types alongside keeping the group names only?</p>
</blockquote>
<p>hey <span class="user-mention" data-user-id="102902">@Sean</span>  what should i do about these changes?</p>



<a name="231832124"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231832124" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231832124">(Mar 25 2021 at 16:24)</a>:</h4>
<p>Did we ever come to a conclusion on this?  I'm really not happy about flattening the image vs. geometry context out of the mime types unless/until we have another way to distinguish those categories...</p>
<p>Looking at the icv/io.h changes in the pull request, bu_mime_context_t just feels too generic to me - personally, I want things to fail immediately and hard at build time if I accidentally  try to feed a geometry file type through an image conversion...</p>



<a name="231832434"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231832434" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231832434">(Mar 25 2021 at 16:26)</a>:</h4>
<p>I still don't have any good feeling for what gcv is supposed to do when the input "gcv image.png image.g" is given to it...</p>



<a name="231853024"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231853024" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231853024">(Mar 25 2021 at 18:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/231832124">said</a>:</p>
<blockquote>
<p>Did we ever come to a conclusion on this?  I'm really not happy about flattening the image vs. geometry context out of the mime types unless/until we have another way to distinguish those categories...</p>
<p>Looking at the icv/io.h changes in the pull request, bu_mime_context_t just feels too generic to me - personally, I want things to fail immediately and hard at build time if I accidentally  try to feed a geometry file type through an image conversion...</p>
</blockquote>
<p>oh.......didnt knew you wouldnt agree with that.</p>



<a name="231853340"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231853340" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231853340">(Mar 25 2021 at 18:32)</a>:</h4>
<p><span class="user-mention" data-user-id="247135">@Sumagna Das</span> I'll defer to <span class="user-mention" data-user-id="102902">@Sean</span>  - he has a clearer vision than I do of where he wants to go with GCV.  I'm just fundamentally bothered by my inability to answer the question "What is supposed to happen when the user gives us 'gcv image.png output.g' on the command line."</p>



<a name="231855610"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231855610" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231855610">(Mar 25 2021 at 18:47)</a>:</h4>
<p>The options I know of for "gcv image.png output.g" are:</p>
<ol>
<li>
<p>Just error out with some sort of inadequate specification error unless something like a specific backend is supplied - i.e., require something like "gcv image.png --plugin GDAL output.g" before proceeding.  Works, but has negative usability implications.</p>
</li>
<li>
<p>Always default to the "highest order" output - i.e. for a PNG file, we can default to a height field geometric interpretion and require specification for something else like a texture/shader object or binary object.  Easiest from the user perspective IF what we default to is what they want, but potentially frustrating if it does the "wrong" thing for their particular case and they don't know what to do to change the behavior.</p>
</li>
<li>
<p>Just define any non geometry-&gt;geometry conversions as out of scope for gcv - i.e. turning cases involving image data that can't be unambiguously identified as terrain data over to procedural geometry generators rather than the gcv converter.   This has the virtue of simplicity, since anything that doesn't have an unambiguous geometric interpretation is simply an invalid input to gcv and another tool is required.  However, in prior discussions Sean felt that failing to convert in such cases would be a usability hit.</p>
</li>
</ol>



<a name="231858710"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231858710" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231858710">(Mar 25 2021 at 19:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/231832124">said</a>:</p>
<blockquote>
<p>Did we ever come to a conclusion on this?  I'm really not happy about flattening the image vs. geometry context out of the mime types unless/until we have another way to distinguish those categories...</p>
<p>Looking at the icv/io.h changes in the pull request, bu_mime_context_t just feels too generic to me - personally, I want things to fail immediately and hard at build time if I accidentally  try to feed a geometry file type through an image conversion...</p>
</blockquote>
<p>i was also checking the changes for the removing the 2nd level groupings and it does seem like that removing them could pose a problem.</p>



<a name="231859063"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231859063" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231859063">(Mar 25 2021 at 19:08)</a>:</h4>
<p>if a specific category is not specified, then there is actually a program that some program using these types can be fed anything as input rather than getting files from a specific category. for example, like you said, ICV is supposed to get only images as input but removing the 2nd level grouping can mean that it can get any type of file as input</p>



<a name="231859315"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231859315" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231859315">(Mar 25 2021 at 19:10)</a>:</h4>
<p>one thing i did in one of the commits is that alongside keeping the 2nd level grouping is that i added a <code>BU_MIME_AUTO</code> which acted like a switch saying that search from the whole of the mime types' namespace.</p>



<a name="231859410"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231859410" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231859410">(Mar 25 2021 at 19:11)</a>:</h4>
<p>that enum can work pretty well for now for GCV so that it gets all the types of files</p>



<a name="231859773"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231859773" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231859773">(Mar 25 2021 at 19:14)</a>:</h4>
<p>but as you said for the 2nd option, the plugin will not know what the user wants and do a default conversion</p>



<a name="231878217"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231878217" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231878217">(Mar 25 2021 at 21:22)</a>:</h4>
<p>A lot of excellent insights mentioned, but we shouldn't lose sight of the implementation goal at hand -- namely, creating a vol from a stack of one or more images and how that usability and discovery plays out.  The existing BU interface can't/couldn't handle it, so changes are needed.  That's not to say that we can also have groupings, or that we don't still also have to sort out what a given conversion request behavior should be, too.</p>



<a name="231878591"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231878591" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231878591">(Mar 25 2021 at 21:25)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> I think your summary of "gcv image.png output.g" options are spot-on.  I would flat-out reject #3 as unreasonable and unnecessary restriction.  The problem of there being multiple conversion results possible for a given input is not unique to images by any stretch.   Geometry have that problem as well.</p>



<a name="231878764"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231878764" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231878764">(Mar 25 2021 at 21:26)</a>:</h4>
<p>I think the gdal integration is further supporting evidence -- it makes complete usability sense to me that the conversion tool will accept a 2d input and have the wherewithall to generate a 3d representation from it.</p>



<a name="231878986"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231878986" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231878986">(Mar 25 2021 at 21:28)</a>:</h4>
<p>As for options #1 and #2, they're not mutually exclusive and I think we'll end up wanting to do a mix of both.  They're certainly related to the typing system and ability to do something high-order automatically, but not strictly coupled to it (beyond our existing implementation coupling them).</p>



<a name="231879563"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231879563" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231879563">(Mar 25 2021 at 21:32)</a>:</h4>
<p>So then what's our way forward to arrive at a concrete implementation design?</p>



<a name="231880007"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231880007" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231880007">(Mar 25 2021 at 21:35)</a>:</h4>
<p>That's where I keep getting stuck... if we want to allow the complexity explosion of N conceptual interpretations of what it means to convert image data to geometry data, how do we encapsulate that in a usable way for programmer and user?  Every attempt I've made has fallen short...</p>



<a name="231880377"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231880377" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231880377">(Mar 25 2021 at 21:38)</a>:</h4>
<p>Actually I wouldn't have said the first attempt fell short, it just made an assumption that didn't hold up to the next plugin.  So we know some adaptation is needed.</p>



<a name="231880683"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231880683" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231880683">(Mar 25 2021 at 21:40)</a>:</h4>
<p>Without punting the adaptation to the user yet, there are two issues.  First there is/was no way for a plugin to declare that it handles a non-geometric type.  Second, there didn't appear to be a way to route to the plugin manually (had to manually disable other plugins).</p>



<a name="231880861"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231880861" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231880861">(Mar 25 2021 at 21:42)</a>:</h4>
<p>I think the original plan for gcv plugins is still the way to go -- namely that plugins define the processing architecture by declaring what they can handle and reporting whether they can handle a particular input.</p>



<a name="231881170"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231881170" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231881170">(Mar 25 2021 at 21:44)</a>:</h4>
<p>With #1 fixed by doing "some change" to the typing system -- there is a decision we have to immediately face, namely what to do when two plugins support the type and two plugins say yes to handling that particular input.  A PNG input is nominally something we can handle today in three ways (gdal, this new vol plugin, and binary/image object).</p>



<a name="231881251"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231881251" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231881251">(Mar 25 2021 at 21:45)</a>:</h4>
<p>There's another issue as well - if we're allowing multiple interpretations (terrain, shader, extrusion, binary blob, etc.) then the mime specification isn't going to be sufficient for the plugin API identification on its own.  We need some way for a plugin to say "I support image-&gt;terrain, image-&gt;blob, but not image-&gt;shader" (for example.)</p>



<a name="231881969"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231881969" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231881969">(Mar 25 2021 at 21:51)</a>:</h4>
<p>That's for filter plugins.  There can be many plugins, but a given plugin is going to do one of those.  We can probably constrain it to only being one of those from a declaration standpoint, or let the input callback make more complex or specific determinations.</p>



<a name="231882203"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231882203" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231882203">(Mar 25 2021 at 21:53)</a>:</h4>
<p>In the original architecture concept, filters did not deal with typed input at all.  We could reduce them down to that and it would probably greatly simplify processing (and plugin implementation).</p>



<a name="231882619"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231882619" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231882619">(Mar 25 2021 at 21:56)</a>:</h4>
<p>Actually, I semi-lost site of the original prompting issue for the question - in the proposed github pull request, the icv API is changed so that it too takes a generic mime type, rather than just image mime types.  For your design vision, is that an OK direction?</p>



<a name="231882970"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231882970" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231882970">(Mar 25 2021 at 22:00)</a>:</h4>
<p>That's a good question.  I'd not looked into the pull request in detail yet, but the gist I think is not unreasonable.  And for similar reasons, say one wanted to implement a plugin that created an image from a .txt file that contained r g b d data, or from an .xls file where some range of cells has rgb values, etc.</p>



<a name="231883770"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231883770" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231883770">(Mar 25 2021 at 22:06)</a>:</h4>
<p>I think all that's needed to let that work is for a plugin to be able to list it's types.  Any nuance  can be handled in the callback.  To make it convenient, we can provide meta types (e.g., BU_MIME_IMAGE, BU_MIME_MODEL, etc.).</p>



<a name="231883910"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231883910" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231883910">(Mar 25 2021 at 22:08)</a>:</h4>
<p>That would preserve the two-level namespace as data.</p>



<a name="231886031"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231886031" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231886031">(Mar 25 2021 at 22:26)</a>:</h4>
<p>The outstanding questions for bu_mime are 1) do we need to make multiple typedefs available, i.e., what code or feature(s) will benefit from a compile-time type restriction and 2) do we want/need defines for meta groupings and 3) do we want/need string-based type associations (whether as a grouping mechanism, for interfacing with other things, or ...?)</p>



<a name="231909895"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231909895" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231909895">(Mar 26 2021 at 03:31)</a>:</h4>
<p>i understood most of the part here until the last 4 or 5 messages <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="231998100"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231998100" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231998100">(Mar 26 2021 at 16:52)</a>:</h4>
<p>LOL <span class="user-mention" data-user-id="247135">@Sumagna Das</span></p>



<a name="231998581"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231998581" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231998581">(Mar 26 2021 at 16:55)</a>:</h4>
<p>basically, trying to figure out what/how exactly should bu_mime change so that we can still hard-fail during compilation on a categoric type (if that is needed somewhere) but also support plugins declaring their support and being potentially more nuanced in their input validation callback.</p>



<a name="231999599"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/231999599" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#231999599">(Mar 26 2021 at 17:01)</a>:</h4>
<p>I think @starseeker is probably not (yet)fond of the idea of some tools like icv handling non-image formats (e.g., data files), and that's a valid critique.  I see it essentially required and thus will require a bit more thought on how tools like icv/gcv respond when there are 2+ plugins that say they can handle a given input.</p>
<p>For example, we likely will have 3 plugins that read a png file in gcv and they're all roughly equal probability:  png-to-dsp-via-gdal, png-to-vol, png-to-binunif</p>



<a name="232007916"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232007916" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232007916">(Mar 26 2021 at 17:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/GCV/near/231999599">said</a>:</p>
<blockquote>
<p>I think @starseeker is probably not (yet)fond of the idea of some tools like icv handling non-image formats (e.g., data files), and that's a valid critique.  I see it essentially required and thus will require a bit more thought on how tools like icv/gcv respond when there are 2+ plugins that say they can handle a given input.</p>
<p>For example, we likely will have 3 plugins that read a png file in gcv and they're all roughly equal probability:  png-to-dsp-via-gdal, png-to-vol, png-to-binunif</p>
</blockquote>
<p>thats a big problem......</p>



<a name="232323601"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232323601" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232323601">(Mar 29 2021 at 19:37)</a>:</h4>
<p>did you guys come to any conclusion? i want to finish this thing before my exams from 12th april.</p>



<a name="232374156"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232374156" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232374156">(Mar 30 2021 at 04:56)</a>:</h4>
<p><span class="user-mention" data-user-id="247135">@Sumagna Das</span> I'm not seeing a better way around it.  Options seem to be:<br>
A) require non-geometric plugins to resort to being an "unknown" type whereupon the same problem of routing still exists for all such plugins (which would also require something like forced user-specification which would hurt usability/discoverability).  I think this is architecturally a problem because there's not a more appropriate place for such functionality, yet typing as unknown would kind of imply they're second-class plugins or otherwise unsupported.<br>
B) let the functionality be handled elsewhere and limit gcv strictly to geometry file inputs.  for example, the vol command could read in from images, the dsp command could read in via gdal.  while that would be useful in workflows, it seems like it doesn't address gcv being an intuitive place to read data files that result in geoemtry.  again, gdal is a great example of this.<br>
C) make changes to the typing system and gcv so it will route files to plugins that handle that file(s) type.   fairly unobtrusive change imho.  it doesn't answer what happens when multiple plugins handle the same input type but then neither does the current code or options A or B. <br>
D) eliminate the typing system.  it's not strictly required.  its intent was to improve usability so if there was only one plugin or set of plugins that could handle a given conversion, that it would just do it instead of a user explicitly having to say which plugin (e.g., gcv --i gdal input.png output.g</p>
<p>There is declarative simplicity with D and in some respects we probably should have started there, but B and C have superior usability in my view, C winning out overall as more discoverable. </p>
<p>Towards that end, I think what we should do is keep some means to know we have (for example) and image vs geometry vs something else.  I think that can be a sub-typedef like bu_mime_image_t and bu_mime_model_t for compile time restriction or it can be a meta type like BU_MIME_IMAGE for runtime restriction (I don't feel strongly for either being better).  That will be helpful for commands like overlay or screengrab that only deal with images.  As for gcv, I think that'll generalize to something like bu_mime_t (which has all types) and plugins declare a set of one or more mime types.  In the case where multiple plugins match, we'll make it report the conflict, list out available options, and require the user specify.</p>



<a name="232376266"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232376266" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232376266">(Mar 30 2021 at 05:33)</a>:</h4>
<p>B and D sound more like it to me.</p>



<a name="232376406"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232376406" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232376406">(Mar 30 2021 at 05:35)</a>:</h4>
<p>but the problem still stays that there will a uncertainty about what happens when multiple plugins handle the same file type</p>



<a name="232376658"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232376658" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232376658">(Mar 30 2021 at 05:40)</a>:</h4>
<p>we can do B but alongside we can make it report if any conflict exists where multiple plugins are trying to handle the same file.</p>



<a name="232443786"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232443786" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232443786">(Mar 30 2021 at 15:18)</a>:</h4>
<p><span class="user-mention" data-user-id="247135">@Sumagna Das</span> they are certainly options, but they have an undeniable impact on usability and discoverability, and which went or at least go against the original design plans for gcv (that it will figure out what's best when/where it can)</p>



<a name="232487262"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232487262" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232487262">(Mar 30 2021 at 19:55)</a>:</h4>
<p>(deleted)</p>



<a name="232487633"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232487633" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232487633">(Mar 30 2021 at 19:58)</a>:</h4>
<p>i was trying to find out the real definition of GCV and found out what it was initially made for (Geometry Conversion library) so i think the plugins which handle non-geometry types should be seperated from GCV and either be made into a command inside mged or be  made a fully seperate executable or be added as an option to existing commands inside or outside mged.</p>



<a name="232514081"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232514081" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232514081">(Mar 30 2021 at 23:36)</a>:</h4>
<p><span class="user-mention" data-user-id="247135">@Sumagna Das</span> except what constitutes "non-geometry" is very much debatable, it depends on the data format, and depends on the data domain (where it came from).</p>



<a name="232514140"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232514140" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232514140">(Mar 30 2021 at 23:37)</a>:</h4>
<p>for example, is a text file full of XYZ vertices a geometry type?</p>



<a name="232515669"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232515669" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232515669">(Mar 30 2021 at 23:55)</a>:</h4>
<p>because that's a common "geometry" format that could be a polygonal mesh (it's called xyz format) or it could be point cloud scan data (is that geometry??) or it could be raw terrain elevation data (certainly represents geometry) ...</p>



<a name="232515800"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232515800" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232515800">(Mar 30 2021 at 23:56)</a>:</h4>
<p>and yet that same can be said of an image files too -- they're just a quantized array of data.  could be terrain (PNG <em>is</em> a standard format for terrain data) ... or could just be an image.</p>



<a name="232515937"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232515937" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232515937">(Mar 30 2021 at 23:58)</a>:</h4>
<p>in the medical industry, dicom is their geometry file format, but they are just sets of images.  they can represent 3D volumes or point clouds ... or just be images with no 3D implication.</p>



<a name="232516271"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232516271" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232516271">(Mar 31 2021 at 00:01)</a>:</h4>
<p>gcv's original scope was the consolidation of a bunch of geometry converters into one tool, but even from the onset that already included data files too, so I don't think it's a out of place to include them.  moreover, and more problematically, it doesn't solve a problem by excluding them -- if anything it would create pointless work like extracting gdal from gcv.</p>



<a name="232526177"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232526177" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232526177">(Mar 31 2021 at 02:16)</a>:</h4>
<p>didnt know geometry types were this complicated</p>



<a name="232579647"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232579647" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232579647">(Mar 31 2021 at 12:16)</a>:</h4>
<p>The waters are muddy and we're learning, will make mistakes.  I think it's all good.  We can try a direction and if it doesn't work out, we can change it.  I think the least code churn at this point is to just tweak bu_mime to provide a means to scan all types and let plugins declare whatever it is they read/write.  We'll learn.</p>



<a name="232614893"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232614893" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232614893">(Mar 31 2021 at 15:48)</a>:</h4>
<p>I had that part ready so that it could scan from all types</p>



<a name="232614959"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232614959" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232614959">(Mar 31 2021 at 15:48)</a>:</h4>
<p>But It would need the 2nd level grouping which I removed</p>



<a name="232615104"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232615104" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232615104">(Mar 31 2021 at 15:49)</a>:</h4>
<p>Also<br>
Is it needed tobring back <code>bu_mime_*_t</code> enums or should they be combined like they are right now?</p>



<a name="232649055"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232649055" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232649055">(Mar 31 2021 at 19:18)</a>:</h4>
<p>I think we should keep both typedefs for now.  That way commands like screengrab can literally be hard-limited to image formats.</p>



<a name="232649093"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232649093" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232649093">(Mar 31 2021 at 19:19)</a>:</h4>
<p>but then also have a bu_mime_t that has them all</p>



<a name="232649165"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232649165" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232649165">(Mar 31 2021 at 19:19)</a>:</h4>
<p>(instead of bu_mime_context_t, not really a benefit introducing another term)</p>



<a name="232649359"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232649359" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232649359">(Mar 31 2021 at 19:20)</a>:</h4>
<p>can you check the PR</p>



<a name="232649418"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232649418" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232649418">(Mar 31 2021 at 19:21)</a>:</h4>
<p>i removed the commit which remove the 2nd level grouping like BU_MIME_IMAGE, etc</p>



<a name="232649486"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/232649486" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#232649486">(Mar 31 2021 at 19:21)</a>:</h4>
<p>i also added BU_MIME_AUTO which searches from all of them</p>



<a name="235559156"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235559156" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235559156">(Apr 21 2021 at 18:30)</a>:</h4>
<p>sorry for the inactivity<br>
i had exams going on<br>
now that I am done with the exams<br>
what were the plans for this part <span class="user-mention" data-user-id="102902">@Sean</span> ?</p>



<a name="235563319"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235563319" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235563319">(Apr 21 2021 at 19:00)</a>:</h4>
<p><span class="user-mention" data-user-id="247135">@Sumagna Das</span> how'd the exams go?</p>



<a name="235563401"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235563401" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235563401">(Apr 21 2021 at 19:00)</a>:</h4>
<p>no worries, good to focus on your exams.... they're kind of important ;)</p>



<a name="235563472"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235563472" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235563472">(Apr 21 2021 at 19:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235563319">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="247135">Sumagna Das</span> how'd the exams go?</p>
</blockquote>
<p>it went pretty well</p>



<a name="235740910"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235740910" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235740910">(Apr 22 2021 at 20:15)</a>:</h4>
<p>there is one thing i want to ask</p>



<a name="235741065"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235741065" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235741065">(Apr 22 2021 at 20:16)</a>:</h4>
<p>should i bring back all of the <code>bu_mime_*_t</code> and keep one <code>bu_mime_t</code> namespace along with it?</p>



<a name="235783167"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235783167" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235783167">(Apr 23 2021 at 03:59)</a>:</h4>
<p><span class="user-mention" data-user-id="247135">@Sumagna Das</span> that would probably be good for now, so an app / use case could choose to be type-limited or not.  longer term I think we could probably find a way that does it with fewer API symbols, if needed.</p>



<a name="235801595"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235801595" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235801595">(Apr 23 2021 at 07:53)</a>:</h4>
<div class="codehilite"><pre><span></span><code>[  0%] Built target timestamp
[  0%] Built target BENCHMARK_PIX_cp
Scanning dependencies of target libbu-obj
[  0%] Built target netpbm
[  0%] Built target 04238f4c3429a37ca335f9352ba2dc81_cp
[  0%] Building C object src/libbu/CMakeFiles/libbu-obj.dir/crashreport.c.o
[  0%] Built target openNURBS_headers_cp
[  0%] Built target fix_6r_cp
[  0%] Built target nonie_r_12_cp
[  0%] Built target nurb_example_c_cp
[  0%] Built target raydebug_tcl_cp
[  0%] Building C object src/libbu/CMakeFiles/libbu-obj.dir/mime.c.o
[  0%] Built target CL_FILES_cp
[  0%] Built target tpkg_c_cp
[  0%] Built target termcap_cp
[  0%] Built target brlman_tcl_cp
[  0%] Building C object src/libbu/CMakeFiles/libbu-obj.dir/vers.c.o
In file included from /home/sumagnadas/github/brlcad_git/include/bu/mime.h:27,
                 from /home/sumagnadas/github/brlcad_git/build1/src/libbu/mime.c:21:
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:887:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_AUTO’
  887 |     BU_MIME_APPLICATION_AUTO,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:44:5: note: previous definition of ‘BU_MIME_APPLICATION_AUTO’ was here
   44 |     BU_MIME_APPLICATION_AUTO,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:888:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_ANDREW_DASH_INSET’
  888 |     BU_MIME_APPLICATION_ANDREW_DASH_INSET,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:45:5: note: previous definition of ‘BU_MIME_APPLICATION_ANDREW_DASH_INSET’ was here
   45 |     BU_MIME_APPLICATION_ANDREW_DASH_INSET,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:889:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_APPLIXWARE’
  889 |     BU_MIME_APPLICATION_APPLIXWARE,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:46:5: note: previous definition of ‘BU_MIME_APPLICATION_APPLIXWARE’ was here
   46 |     BU_MIME_APPLICATION_APPLIXWARE,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:890:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_ATOMCAT_PLUS_XML’
  890 |     BU_MIME_APPLICATION_ATOMCAT_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:47:5: note: previous definition of ‘BU_MIME_APPLICATION_ATOMCAT_PLUS_XML’ was here
   47 |     BU_MIME_APPLICATION_ATOMCAT_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:891:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_ATOMSVC_PLUS_XML’
  891 |     BU_MIME_APPLICATION_ATOMSVC_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:48:5: note: previous definition of ‘BU_MIME_APPLICATION_ATOMSVC_PLUS_XML’ was here
   48 |     BU_MIME_APPLICATION_ATOMSVC_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:892:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_ATOM_PLUS_XML’
  892 |     BU_MIME_APPLICATION_ATOM_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:49:5: note: previous definition of ‘BU_MIME_APPLICATION_ATOM_PLUS_XML’ was here
   49 |     BU_MIME_APPLICATION_ATOM_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:893:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_CCXML_PLUS_XML’
  893 |     BU_MIME_APPLICATION_CCXML_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:50:5: note: previous definition of ‘BU_MIME_APPLICATION_CCXML_PLUS_XML’ was here
   50 |     BU_MIME_APPLICATION_CCXML_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:894:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_CDMI_DASH_CAPABILITY’
  894 |     BU_MIME_APPLICATION_CDMI_DASH_CAPABILITY,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:51:5: note: previous definition of ‘BU_MIME_APPLICATION_CDMI_DASH_CAPABILITY’ was here
   51 |     BU_MIME_APPLICATION_CDMI_DASH_CAPABILITY,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:895:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_CDMI_DASH_CONTAINER’
  895 |     BU_MIME_APPLICATION_CDMI_DASH_CONTAINER,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:52:5: note: previous definition of ‘BU_MIME_APPLICATION_CDMI_DASH_CONTAINER’ was here
   52 |     BU_MIME_APPLICATION_CDMI_DASH_CONTAINER,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:896:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_CDMI_DASH_DOMAIN’
  896 |     BU_MIME_APPLICATION_CDMI_DASH_DOMAIN,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:53:5: note: previous definition of ‘BU_MIME_APPLICATION_CDMI_DASH_DOMAIN’ was here
   53 |     BU_MIME_APPLICATION_CDMI_DASH_DOMAIN,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:897:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_CDMI_DASH_OBJECT’
  897 |     BU_MIME_APPLICATION_CDMI_DASH_OBJECT,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:54:5: note: previous definition of ‘BU_MIME_APPLICATION_CDMI_DASH_OBJECT’ was here
   54 |     BU_MIME_APPLICATION_CDMI_DASH_OBJECT,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:898:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_CDMI_DASH_QUEUE’
  898 |     BU_MIME_APPLICATION_CDMI_DASH_QUEUE,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:55:5: note: previous definition of ‘BU_MIME_APPLICATION_CDMI_DASH_QUEUE’ was here
   55 |     BU_MIME_APPLICATION_CDMI_DASH_QUEUE,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:899:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_CU_DASH_SEEME’
  899 |     BU_MIME_APPLICATION_CU_DASH_SEEME,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:56:5: note: previous definition of ‘BU_MIME_APPLICATION_CU_DASH_SEEME’ was here
   56 |     BU_MIME_APPLICATION_CU_DASH_SEEME,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:900:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_DAVMOUNT_PLUS_XML’
  900 |     BU_MIME_APPLICATION_DAVMOUNT_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:57:5: note: previous definition of ‘BU_MIME_APPLICATION_DAVMOUNT_PLUS_XML’ was here
   57 |     BU_MIME_APPLICATION_DAVMOUNT_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:901:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_DOCBOOK_PLUS_XML’
  901 |     BU_MIME_APPLICATION_DOCBOOK_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:58:5: note: previous definition of ‘BU_MIME_APPLICATION_DOCBOOK_PLUS_XML’ was here
   58 |     BU_MIME_APPLICATION_DOCBOOK_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:902:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_DSSC_PLUS_DER’
  902 |     BU_MIME_APPLICATION_DSSC_PLUS_DER,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:59:5: note: previous definition of ‘BU_MIME_APPLICATION_DSSC_PLUS_DER’ was here
   59 |     BU_MIME_APPLICATION_DSSC_PLUS_DER,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:903:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_DSSC_PLUS_XML’
  903 |     BU_MIME_APPLICATION_DSSC_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:60:5: note: previous definition of ‘BU_MIME_APPLICATION_DSSC_PLUS_XML’ was here
   60 |     BU_MIME_APPLICATION_DSSC_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:904:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_ECMASCRIPT’
  904 |     BU_MIME_APPLICATION_ECMASCRIPT,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:61:5: note: previous definition of ‘BU_MIME_APPLICATION_ECMASCRIPT’ was here
   61 |     BU_MIME_APPLICATION_ECMASCRIPT,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/sumagnadas/github/brlcad_git/build1/include/bu/mime_types.h:905:5: error: redeclaration of enumerator ‘BU_MIME_APPLICATION_EMMA_PLUS_XML’
  905 |     BU_MIME_APPLICATION_EMMA_PLUS_XML,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.....
</code></pre></div>
<p>i knew something like this would happen</p>



<a name="235801651"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235801651" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235801651">(Apr 23 2021 at 07:54)</a>:</h4>
<p>any suggestion how to overcome this?</p>



<a name="235816305"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235816305" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235816305">(Apr 23 2021 at 10:08)</a>:</h4>
<p>You've got multiple definitions in the generated output looks like...  I'd pick one, check where it's getting defined, and trace that back to see where it's coming from in the generated logic.</p>



<a name="235818589"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235818589" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235818589">(Apr 23 2021 at 10:30)</a>:</h4>
<p>A thought - what if we completely eliminate any notion of mime type typedefs, and instead make it all integer defines.  The categories would become:</p>
<div class="codehilite"><pre><span></span><code>#define BU_MIME_UNKNOWN 0
#define BU_MIME_APPLICATION 1
#define BU_MIME_AUDIO 2
...
</code></pre></div>
<p>and the mime types would be one long list of defines:</p>
<div class="codehilite"><pre><span></span><code>#define BU_MIME_APPLICATION_ANDREW_DASH_INSET 1
#define BU_MIME_APPLICATION_APPLIXWARE 2
....
</code></pre></div>
<p>Then we define zero terminated static  integer arrays or something similar to encode the context information:</p>
<div class="codehilite"><pre><span></span><code>static long BU_MIME_IMAGES[] = {
BU_MIME_IMAGE_PNG,
BU_MIME_IMAGE_JPG,
...
0
};
</code></pre></div>
<p>and a function <code>long bu_mime_context( long mime_id)</code> to walk the arrays and find the right context.</p>
<p>The only other functions we would need should be translators to/from strings, which we're already generating now.</p>
<p>This both eliminates the separate typedefs for each context, and allows us to assert categories in user code if we so desire.</p>



<a name="235819841"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235819841" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235819841">(Apr 23 2021 at 10:43)</a>:</h4>
<p>Then, on the gcv side, we change the plugin setup slightly.  </p>
<p>On the GCV library side, we define a series of bit flag types that correspond to various geometry object output categories:</p>
<div class="codehilite"><pre><span></span><code>#define BINARY_OBJ 0x01
#define IMAGE_OBJ   0x02
#define  GEOM_OBJ  0x04
...
</code></pre></div>
<p>We have each plugin provide a function which takes two integers - a mime context and a mime type and returns an integer holding bit flags set to correspond to what that plugin can either write or create given that input.</p>
<p>The mime context argument could be set to either BU_MIME_UNKNOWN - in which case a plugin will decide on its own if it can handle a PNG image as image data, terrain (geometry) data, or both.  If it can do both, it sets both bit flags in the return.  If the caller does provide it a mime context (BU_MIME_MODEL, say) then it will only return - if it can do it- the GEOM_OBJ flag set.</p>
<p>Then, for a given pairing of inputs and outputs, we have a way forward.  By default, if the user doesn't constrain the solution set, gcv will make a stab at determining the file mime type but will pass BU_MIME_UNKNOWN to the reader/writer plugins to get the full range of options.  It will then look at the mime types returned from all the plugins and identify viable pairings.  If either or both of the plugin and mime context interpretations are not unique, it will report the available options back to the user and request specification of either or all of a mime context interpretation, desired output object category, and reader/writer plugin to use.  If, however, only one unique interpretation is found, then it doesn't have to ask anything and will try the only thing it can.</p>
<p>This allows conversion problems with unique potential solutions (3dm-g, for example) to simply proceed.  Ambiguous cases (multiple plugins supporting STL or interpreting PNG as either terrain or an image object) will report the available options and give the user guidance on how to refine the problem.</p>



<a name="235819987"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235819987" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235819987">(Apr 23 2021 at 10:44)</a>:</h4>
<p>Theoretically, icv and gcv might collapse completely into just gcv...</p>



<a name="235821191"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235821191" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235821191">(Apr 23 2021 at 10:57)</a>:</h4>
<p>We may also want to add a .gcv defaults file where users can set plugin or interpretation defaults so they can avoid specifying things all the time (command line options would override the defaults file, but the defaults file could make things more automatic for "normal" use.)</p>



<a name="235829961"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235829961" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235829961">(Apr 23 2021 at 12:16)</a>:</h4>
<p>the define method sounds good<br>
we can work with that</p>



<a name="235830221"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235830221" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235830221">(Apr 23 2021 at 12:18)</a>:</h4>
<p>it doesnt require any redefining of symbols/enums</p>



<a name="235830327"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235830327" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235830327">(Apr 23 2021 at 12:19)</a>:</h4>
<p>the one thing i am havin problems understanding is the GCV part.</p>



<a name="235830564"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235830564" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235830564">(Apr 23 2021 at 12:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="247135">Sumagna Das</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235830327">said</a>:</p>
<blockquote>
<p>the one thing i am havin problems understanding is the GCV part.</p>
</blockquote>
<p>so in the plugin file, there is a define part?<br>
or is it on the api part?</p>



<a name="235830885"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235830885" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235830885">(Apr 23 2021 at 12:22)</a>:</h4>
<p>plus the part about how we are going to name the inputs and outputs for the plugins.</p>



<a name="235830940"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235830940" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235830940">(Apr 23 2021 at 12:23)</a>:</h4>
<p>The GCV plugins provide hooks to the main gcv library.  Right now (for example) there's a "rhino_can_read" function which takes the file and tests it.  What we can try instead is a function that accepts the mime arguments in addition to the file - this allows the plugin to have more context when making its decisions about what it can/can't read.</p>



<a name="235831161"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235831161" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235831161">(Apr 23 2021 at 12:25)</a>:</h4>
<p>If, for example, the 3DM mime type was passed in and the context passed in was BU_MIME_MODEL, the rhino_can_read function would know to try the file and see if it can open it.  However, if the context passed in was BU_MIME_IMAGE (i.e. the specific conversion path of interest is to treat the 3DM data as an image format) then rhino_can_read would report that it can't read the file.  It only supports reading the 3DM format as geometry, not as an image.</p>



<a name="235831463"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235831463" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235831463">(Apr 23 2021 at 12:27)</a>:</h4>
<p>So the function would look something like:</p>
<div class="codehilite"><pre><span></span><code>static long
  rhino_can_read(long mime_context, long mime_type, const char *source_path)
  {
     if (mime_type != BU_MIME_MODEL_VND_RHINO)
         return 0;

     if (mime_context != BU_MIME_MODEL)
         return 0;

      int fv;
      ON_String mSC;
      ON_3dmProperties mprop;
      if (!source_path) return 0;
      FILE *fp = ON::OpenFile(source_path,&quot;rb&quot;);
      if (!fp) return 0;
      ON_BinaryFile file(ON::on_read3dm,fp);
      if (!file.Read3dmStartSection(&amp;fv, mSC)) return 0;
      if (!file.Read3dmProperties(mprop)) return 0;
      return GEOM_OBJ;
  }
</code></pre></div>



<a name="235831903"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235831903" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235831903">(Apr 23 2021 at 12:31)</a>:</h4>
<p>This gets at addressing the issue that was causing me mental indigestion earlier - how to deal with the situation where a tiff image might need to come into a .g as a terrain import or an image.  Even a generic GEOM_OBJ return type might not be enough - we may need to encode certain supported BRL-CAD entity types as flags.  An image, for example, could be a source for dsp terrain primitives or also for an extruded bitmap...</p>



<a name="235832787"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235832787" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235832787">(Apr 23 2021 at 12:38)</a>:</h4>
<p>But as a next step we can probably just see if that approach will work - if it does, more specificity just means defining additional contexts beyond BU_MIME_MODEL and BU_MIME_IMAGE for plugins to check for.</p>



<a name="235903589"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235903589" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235903589">(Apr 23 2021 at 20:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235818589">said</a>:</p>
<blockquote>
<p>A thought - what if we completely eliminate any notion of mime type typedefs, and instead make it all integer defines.  The categories would become:</p>
<div class="codehilite"><pre><span></span><code>#define BU_MIME_UNKNOWN 0
#define BU_MIME_APPLICATION 1
#define BU_MIME_AUDIO 2
...
</code></pre></div>
<p>and the mime types would be one long list of defines:</p>
<div class="codehilite"><pre><span></span><code>#define BU_MIME_APPLICATION_ANDREW_DASH_INSET 1
#define BU_MIME_APPLICATION_APPLIXWARE 2
....
</code></pre></div>
<p>Then we define zero terminated static  integer arrays or something similar to encode the context information:</p>
<div class="codehilite"><pre><span></span><code>static long BU_MIME_IMAGES[] = {
BU_MIME_IMAGE_PNG,
BU_MIME_IMAGE_JPG,
...
0
};
</code></pre></div>
<p>and a function <code>long bu_mime_context( long mime_id)</code> to walk the arrays and find the right context.</p>
<p>The only other functions we would need should be translators to/from strings, which we're already generating now.</p>
<p>This both eliminates the separate typedefs for each context, and allows us to assert categories in user code if we so desire.</p>
</blockquote>
<p>done the first two define parts</p>



<a name="235903692"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235903692" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235903692">(Apr 23 2021 at 20:27)</a>:</h4>
<p>now the left of the tasks are </p>
<ul>
<li>making the arrays</li>
<li>changing the codebase to accomodate the changes</li>
</ul>



<a name="235903922"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235903922" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235903922">(Apr 23 2021 at 20:29)</a>:</h4>
<p>also<br>
should i make the arrays in the mime_types.h file?</p>



<a name="235903943"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235903943" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235903943">(Apr 23 2021 at 20:29)</a>:</h4>
<p>or somewhere other would be much better?</p>



<a name="235905570"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235905570" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235905570">(Apr 23 2021 at 20:43)</a>:</h4>
<p>whatever you think makes sense - could be inside the generated bu_mime_context funtion</p>



<a name="235905683"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235905683" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235905683">(Apr 23 2021 at 20:44)</a>:</h4>
<p>ohk<br>
so what would the function do exactly?</p>



<a name="235905755"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235905755" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235905755">(Apr 23 2021 at 20:44)</a>:</h4>
<p>So given an input, it would check a series of arrays to see which one (if any) contain that integer</p>



<a name="235905824"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235905824" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235905824">(Apr 23 2021 at 20:45)</a>:</h4>
<p>get an mime type id/value, walk all the arrays, find the right type<br>
if available, return a string that will say which context it belongs to else BU_mime_unknown?</p>



<a name="235905854"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235905854" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235905854">(Apr 23 2021 at 20:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="247135">Sumagna Das</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235905824">said</a>:</p>
<blockquote>
<p>get an mime type id/value, walk all the arrays, find the right type<br>
if available, return a string that will say which context it belongs to else BU_mime_unknown?</p>
</blockquote>
<p>is this roughly the way it will work?</p>



<a name="235906002"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906002" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906002">(Apr 23 2021 at 20:46)</a>:</h4>
<p>Roughly, yes - I'd return the mime integer, rather than a string - we can define a function to translate mime contexts to strings if we want that (user messages, etc.), but the integer itself is probably enough for most uses.</p>



<a name="235906095"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906095" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906095">(Apr 23 2021 at 20:47)</a>:</h4>
<p>My first cut at it would be to generate the per-mime-context arrays, then generate a NULL terminated array of pointers to those arrays.</p>



<a name="235906223"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906223" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906223">(Apr 23 2021 at 20:48)</a>:</h4>
<p>Then you iterate over the array-of-arrays, and iterate over each array's contents.</p>



<a name="235906224"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906224" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906224">(Apr 23 2021 at 20:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235906002">said</a>:</p>
<blockquote>
<p>Roughly, yes - I'd return the mime integer, rather than a string - we can define a function to translate mime contexts to strings if we want that (user messages, etc.), but the integer itself is probably enough for most uses.</p>
</blockquote>
<p>a function which returns a string would be handy for the message as you said</p>



<a name="235906271"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906271" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906271">(Apr 23 2021 at 20:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235906223">said</a>:</p>
<blockquote>
<p>Then you iterate over the array-of-arrays, and iterate over each array's contents.</p>
</blockquote>
<p>that sounds better</p>



<a name="235906289"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906289" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906289">(Apr 23 2021 at 20:48)</a>:</h4>
<p>I would just make a <code>const char *bu_mime_context_str(long ctx) </code> function</p>



<a name="235906373"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906373" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906373">(Apr 23 2021 at 20:49)</a>:</h4>
<p>currently i am trying to atleast get the part for arrays working<br>
then make the array of pointers if it helps</p>



<a name="235906442"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906442" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906442">(Apr 23 2021 at 20:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235906289">said</a>:</p>
<blockquote>
<p>I would just make a <code>const char *bu_mime_context_str(long ctx) </code> function</p>
</blockquote>
<p>that i will keep for the endgame</p>



<a name="235906469"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906469" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906469">(Apr 23 2021 at 20:50)</a>:</h4>
<p>the main part is the one which returns the integer</p>



<a name="235906498"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906498" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906498">(Apr 23 2021 at 20:50)</a>:</h4>
<p>However you want to approach it.  <span class="user-mention" data-user-id="102902">@Sean</span> hasn't weighed in, and he may have other thoughts</p>



<a name="235906530"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906530" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906530">(Apr 23 2021 at 20:51)</a>:</h4>
<p>thats the problem right now</p>



<a name="235906563"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906563" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906563">(Apr 23 2021 at 20:51)</a>:</h4>
<p>You mean the big one to return the integer?  Yes, that's the main logic.</p>



<a name="235906584"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906584" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906584">(Apr 23 2021 at 20:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235906563">said</a>:</p>
<blockquote>
<p>You mean the big one to return the integer?  Yes, that's the main logic.</p>
</blockquote>
<p>yea</p>



<a name="235906787"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906787" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906787">(Apr 23 2021 at 20:53)</a>:</h4>
<div class="codehilite"><pre><span></span><code>foreach(context ${ACTIVE_TYPES})
  string(TOUPPER &quot;${context}&quot; c)
  set(mcstr &quot;${mcstr}             if (mime_${context}(ext) != -1){\n&quot;)
  set(mcstr &quot;${mcstr}                  return mime_${context}(ext);\n&quot;)
  set(mcstr &quot;${mcstr}             }\n&quot;)
endforeach(context ${ACTIVE_TYPES})
</code></pre></div>
<p>i had this part before to iterate between all of the mime types</p>



<a name="235906835"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906835" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906835">(Apr 23 2021 at 20:54)</a>:</h4>
<p>do you think i could reuse this logic for this one in "the" function?</p>



<a name="235906914"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906914" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906914">(Apr 23 2021 at 20:54)</a>:</h4>
<p>you'll have to experiment - it'll most likely take a few iterations to arrive at a final design.</p>



<a name="235906995"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235906995" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235906995">(Apr 23 2021 at 20:55)</a>:</h4>
<p>will try to setup atleast the array part right now</p>



<a name="235907010"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907010" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907010">(Apr 23 2021 at 20:55)</a>:</h4>
<p>then move on to the function</p>



<a name="235907021"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907021" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907021">(Apr 23 2021 at 20:55)</a>:</h4>
<p>the function is nothing without the arrays</p>



<a name="235907108"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907108" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907108">(Apr 23 2021 at 20:56)</a>:</h4>
<p>but right now thinking whether it is better to put it with the mime_types.h file or in the mime.c file</p>



<a name="235907145"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907145" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907145">(Apr 23 2021 at 20:56)</a>:</h4>
<p>which one sounds better for keeping the array for the defines?</p>



<a name="235907202"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907202" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907202">(Apr 23 2021 at 20:57)</a>:</h4>
<p>If it were me I'd probably define the arrays as part of the function.</p>



<a name="235907217"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907217" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907217">(Apr 23 2021 at 20:57)</a>:</h4>
<p>ok</p>



<a name="235907244"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907244" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907244">(Apr 23 2021 at 20:57)</a>:</h4>
<p>lemme try then</p>



<a name="235907338"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907338" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907338">(Apr 23 2021 at 20:58)</a>:</h4>
<p>vs code just crashed out of nowhere <span aria-label="neutral" class="emoji emoji-1f610" role="img" title="neutral">:neutral:</span></p>



<a name="235907345"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907345" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907345">(Apr 23 2021 at 20:58)</a>:</h4>
<p>in the current mime.c I generated all the string to number and back mappings as static if checks, IIRC...</p>



<a name="235907381"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907381" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907381">(Apr 23 2021 at 20:58)</a>:</h4>
<p>You might give Ninja on windows a try... less overhead</p>



<a name="235907394"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907394" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907394">(Apr 23 2021 at 20:59)</a>:</h4>
<p>It should work - that's what our CI on github is using.</p>



<a name="235907411"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907411" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907411">(Apr 23 2021 at 20:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235907345">said</a>:</p>
<blockquote>
<p>in the current mime.c I generated all the string to number and back mappings as static if checks, IIRC...</p>
</blockquote>
<p>yea<br>
all the functions are present in the mime.c file</p>



<a name="235907430"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907430" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907430">(Apr 23 2021 at 20:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235907381">said</a>:</p>
<blockquote>
<p>You might give Ninja on windows a try... less overhead</p>
</blockquote>
<p>is ninja available in linux?</p>



<a name="235907478"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907478" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907478">(Apr 23 2021 at 21:00)</a>:</h4>
<p>Oh, sorry - I thought you meant visual studio.  yes, ninja is primarily used on Linux</p>



<a name="235907633"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907633" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907633">(Apr 23 2021 at 21:00)</a>:</h4>
<p>That won't help you though if you're using vs code as your source editor</p>



<a name="235907749"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907749" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907749">(Apr 23 2021 at 21:00)</a>:</h4>
<p>let me check though</p>



<a name="235907843"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907843" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907843">(Apr 23 2021 at 21:00)</a>:</h4>
<p>i use the terminal inside VS code for building most of the time as i use a different build folder for this change or else normal building gets messed up</p>



<a name="235907937"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235907937" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235907937">(Apr 23 2021 at 21:01)</a>:</h4>
<p>/me uses vim most of the time, and Emacs when he must (DocBook editing usually).</p>



<a name="235908286"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235908286" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235908286">(Apr 23 2021 at 21:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235907937">said</a>:</p>
<blockquote>
<p>/me uses vim most of the time, and Emacs when he must (DocBook editing usually).</p>
</blockquote>
<p>i heard that vim is a good one but havent tried yet because no time for learning new things <span aria-label="sweat" class="emoji emoji-1f613" role="img" title="sweat">:sweat:</span></p>



<a name="235908596"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235908596" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235908596">(Apr 23 2021 at 21:03)</a>:</h4>
<p>have my 10th grade's exam coming next year</p>



<a name="235913740"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235913740" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235913740">(Apr 23 2021 at 21:41)</a>:</h4>
<p>and one last thing.....should there be an auto and an unknown special for every category like "BU_MIME_IMAGE_AUTO", "BU_MIME_IMAGE_UNKNOWN" in every array?</p>



<a name="235914174"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235914174" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235914174">(Apr 23 2021 at 21:45)</a>:</h4>
<p>right now, the arrays part is ready without those special ones including the array of arrays<br>
now the only part that is left is the real logic which returns the integer for the right context/category</p>



<a name="235915483"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235915483" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235915483">(Apr 23 2021 at 22:00)</a>:</h4>
<p>Not sure about the unknowns - my thought right now is one generic unknown mime type is probably enough, unless we think of a use case.</p>



<a name="235942141"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235942141" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235942141">(Apr 24 2021 at 05:00)</a>:</h4>
<p>ohk</p>



<a name="235942358"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235942358" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235942358">(Apr 24 2021 at 05:02)</a>:</h4>
<p>right now, the only thing i am having a problem is that i can iterate thru the array of arrays but when it comes to the array containing the types, i have no such variable in the cmake file which can help me get the number of elements in each array</p>



<a name="235942411"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235942411" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235942411">(Apr 24 2021 at 05:04)</a>:</h4>
<p>so do you know of any condition which can help me get each of the elements in the array</p>



<a name="235942452"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235942452" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235942452">(Apr 24 2021 at 05:04)</a>:</h4>
<p>like for using while?</p>



<a name="235969433"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235969433" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235969433">(Apr 24 2021 at 13:14)</a>:</h4>
<p>I'm not 100% sure I follow, but you can build a counter in CMake if you need to so you can write out that information.  I think it's the math() command...</p>



<a name="235969669"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235969669" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235969669">(Apr 24 2021 at 13:19)</a>:</h4>
<p>would it be worth it for each array tho?</p>



<a name="235969738"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235969738" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235969738">(Apr 24 2021 at 13:20)</a>:</h4>
<p>i thought that it might make it take more memory while generating the file <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="235969896"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235969896" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235969896">(Apr 24 2021 at 13:22)</a>:</h4>
<p>right now, i just came with an idea. as the last element  of the arrays will always be 0, we can put a while loop for *elem !=0.</p>



<a name="235969900"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235969900" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235969900">(Apr 24 2021 at 13:22)</a>:</h4>
<p>how does that sound?</p>



<a name="235970431"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/235970431" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#235970431">(Apr 24 2021 at 13:32)</a>:</h4>
<p>Sounds good.</p>



<a name="236002388"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236002388" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236002388">(Apr 24 2021 at 20:22)</a>:</h4>
<p>any idea how or where we can make an use of it?</p>



<a name="236002436"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236002436" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236002436">(Apr 24 2021 at 20:22)</a>:</h4>
<p>the function is implemented</p>



<a name="236005287"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236005287" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236005287">(Apr 24 2021 at 20:59)</a>:</h4>
<p>And also<br>
In how many places we have to change the logic of a function to work with this define logic?</p>



<a name="236005792"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236005792" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236005792">(Apr 24 2021 at 21:01)</a>:</h4>
<p>Except for the mime.c file</p>



<a name="236024791"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236024791" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236024791">(Apr 25 2021 at 01:05)</a>:</h4>
<p>You could try reworking a gcv plugin and the library to use the new setup, maybe starting with the 3dm (rhino) convertor and disabling the others.</p>



<a name="236089644"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236089644" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236089644">(Apr 25 2021 at 20:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235819841">said</a>:</p>
<blockquote>
<p>Then, on the gcv side, we change the plugin setup slightly.  </p>
<p>On the GCV library side, we define a series of bit flag types that correspond to various geometry object output categories:</p>
<div class="codehilite"><pre><span></span><code>#define BINARY_OBJ 0x01
#define IMAGE_OBJ   0x02
#define  GEOM_OBJ  0x04
...
</code></pre></div>
<p>We have each plugin provide a function which takes two integers - a mime context and a mime type and returns an integer holding bit flags set to correspond to what that plugin can either write or create given that input.</p>
<p>The mime context argument could be set to either BU_MIME_UNKNOWN - in which case a plugin will decide on its own if it can handle a PNG image as image data, terrain (geometry) data, or both.  If it can do both, it sets both bit flags in the return.  If the caller does provide it a mime context (BU_MIME_MODEL, say) then it will only return - if it can do it- the GEOM_OBJ flag set.</p>
<p>Then, for a given pairing of inputs and outputs, we have a way forward.  By default, if the user doesn't constrain the solution set, gcv will make a stab at determining the file mime type but will pass BU_MIME_UNKNOWN to the reader/writer plugins to get the full range of options.  It will then look at the mime types returned from all the plugins and identify viable pairings.  If either or both of the plugin and mime context interpretations are not unique, it will report the available options back to the user and request specification of either or all of a mime context interpretation, desired output object category, and reader/writer plugin to use.  If, however, only one unique interpretation is found, then it doesn't have to ask anything and will try the only thing it can.</p>
<p>This allows conversion problems with unique potential solutions (3dm-g, for example) to simply proceed.  Ambiguous cases (multiple plugins supporting STL or interpreting PNG as either terrain or an image object) will report the available options and give the user guidance on how to refine the problem.</p>
</blockquote>
<p>this was one of the things you wanted with the gcv library?</p>



<a name="236089909"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236089909" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236089909">(Apr 25 2021 at 20:09)</a>:</h4>
<p>if i follow this, there are some questions in my mind</p>
<ul>
<li>how many flags do we need to define?</li>
<li>how are we going to handle the flags?</li>
</ul>



<a name="236094541"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236094541" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236094541">(Apr 25 2021 at 21:17)</a>:</h4>
<p>one other question, how do i return both bit flags?</p>



<a name="236096697"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236096697" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236096697">(Apr 25 2021 at 21:56)</a>:</h4>
<p>There are tutorials online about bit flags and bit masks - see, for example, <a href="https://www.learn-c.org/en/Bitmasks">https://www.learn-c.org/en/Bitmasks</a></p>



<a name="236096742"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236096742" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236096742">(Apr 25 2021 at 21:57)</a>:</h4>
<p><a href="https://www.codeproject.com/Articles/2247/An-introduction-to-bitwise-operators">https://www.codeproject.com/Articles/2247/An-introduction-to-bitwise-operators</a></p>



<a name="236096812"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236096812" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236096812">(Apr 25 2021 at 21:58)</a>:</h4>
<p>Basically the idea is you return a single number, and the on/off status of the individual bits is used to contain information.</p>



<a name="236096839"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236096839" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236096839">(Apr 25 2021 at 21:59)</a>:</h4>
<p>I tend to go with an unsigned long long to maximize the potential number of flags that can be set in a single number.</p>



<a name="236096851"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236096851" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236096851">(Apr 25 2021 at 21:59)</a>:</h4>
<p>As to how many flags we will need to define, that's one of the things that isn't fully clear yet.</p>



<a name="236096966"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236096966" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236096966">(Apr 25 2021 at 22:00)</a>:</h4>
<p>They'll be handled (set and checked) as bit masks (there are other examples in our code where we use such flags)</p>



<a name="236097000"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236097000" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236097000">(Apr 25 2021 at 22:01)</a>:</h4>
<p>So we return a single number, but the bit flags are used to encode multiple pieces of information within the single number.</p>



<a name="236097129"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236097129" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236097129">(Apr 25 2021 at 22:03)</a>:</h4>
<p>An unsigned long long will be (at least) 64 bits, so that gives us up to 64 flags within that single number.</p>



<a name="236097244"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236097244" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236097244">(Apr 25 2021 at 22:04)</a>:</h4>
<p>I would suggest making a small C or C++ program and exploring how those flags work, if you're unfamiliar with them.</p>



<a name="236133879"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236133879" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236133879">(Apr 26 2021 at 07:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/236097244">said</a>:</p>
<blockquote>
<p>I would suggest making a small C or C++ program and exploring how those flags work, if you're unfamiliar with them.</p>
</blockquote>
<p>it looks like i will have to do this to understand it</p>



<a name="236133960"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236133960" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236133960">(Apr 26 2021 at 07:56)</a>:</h4>
<p>its a bit mind boggling</p>



<a name="236281556"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236281556" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236281556">(Apr 27 2021 at 04:21)</a>:</h4>
<p>I'm late to the party, but I'd question the value of bitsets for typedefs, and they're fundamentally limited to the number of available bits.  It'd have to go over 64 bits if we're talking the types themselves (or is this only for categories?), and solutions for that are typically obnoxious...</p>



<a name="236281756"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236281756" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236281756">(Apr 27 2021 at 04:25)</a>:</h4>
<p>The usual reason for doing bit flags is for performance, which really isn't needed here.  This whole system is primarily dealing with file identification, in I/O land (i.e., as slow as it gets).  If the direction is to get a handle to an identifier, then we might as well directly adopt the mime-type classifier string-as-data and ditch all the API complexity.</p>



<a name="236281762"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236281762" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236281762">(Apr 27 2021 at 04:25)</a>:</h4>
<p>That would greatly simplify things.</p>



<a name="236281870"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236281870" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236281870">(Apr 27 2021 at 04:27)</a>:</h4>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>Apps/Libs could set "*" (i.e., mime unknown) or "model\*" (i.e., mime category 'model') etc.
Plugins could declare categories or specific types or sets of types (e.g., "model/*" and/or "text/plain").
</code></pre></div>



<a name="236282005"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236282005" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236282005">(Apr 27 2021 at 04:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="247135">Sumagna Das</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235942358">said</a>:</p>
<blockquote>
<p>right now, the only thing i am having a problem is that i can iterate thru the array of arrays but when it comes to the array containing the types, i have no such variable in the cmake file which can help me get the number of elements in each array</p>
</blockquote>
<p>If you've created a fixed array at compile time, then you can determine the size with:<br>
size_t length = sizeof(array) / sizeof(array[0]);</p>



<a name="236292076"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236292076" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236292076">(Apr 27 2021 at 07:02)</a>:</h4>
<p>If I got that correctly, The bit flags are only for the categories and not for all the types.</p>



<a name="236390966"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236390966" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236390966">(Apr 27 2021 at 19:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/GCV/near/236282005">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="247135">Sumagna Das</span> <a href="#narrow/stream/104062-general/topic/GCV/near/235942358">said</a>:</p>
<blockquote>
<p>right now, the only thing i am having a problem is that i can iterate thru the array of arrays but when it comes to the array containing the types, i have no such variable in the cmake file which can help me get the number of elements in each array</p>
</blockquote>
<p>If you've created a fixed array at compile time, then you can determine the size with:<br>
size_t length = sizeof(array) / sizeof(array[0]);</p>
</blockquote>
<p>yea got this part working......</p>



<a name="236399881"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236399881" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236399881">(Apr 27 2021 at 20:06)</a>:</h4>
<p>one thing i have to ask, should i work using the bit flags?</p>



<a name="236399918"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236399918" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236399918">(Apr 27 2021 at 20:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="247135">Sumagna Das</span> <a href="#narrow/stream/104062-general/topic/GCV/near/236399881">said</a>:</p>
<blockquote>
<p>one thing i have to ask, should i work using the bit flags?</p>
</blockquote>
<p><span class="user-mention" data-user-id="102902">@Sean</span></p>



<a name="236572841"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236572841" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236572841">(Apr 28 2021 at 20:27)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span>  got the functions working with the extra arguments but how to use the returned bit flag tho?</p>



<a name="236573056"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236573056" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236573056">(Apr 28 2021 at 20:29)</a>:</h4>
<p>right now, testing the syntax atleast thru the 3DM plugin. the other plugins are disabled for now.</p>



<a name="236573331"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236573331" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236573331">(Apr 28 2021 at 20:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="247135">Sumagna Das</span> <a href="#narrow/stream/104062-general/topic/GCV/near/236572841">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span>  got the functions working with the extra arguments but how to use the returned bit flag tho?</p>
</blockquote>
<p>like what should i do with bit flags?<br>
should i check for the output types?<br>
should i send them to the user through a selection menu?</p>



<a name="236582586"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236582586" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236582586">(Apr 28 2021 at 21:21)</a>:</h4>
<p>So my thinking, for what it's worth, was to do the following:</p>
<p>Have the gcv executable support an option to specify the processing mode:  --image for example to treat a .tiff file as an image, and --geom to force processing as geometry.</p>
<p>What should happen if you feed gcv the .3dm file and tell it to process it as an image, would be for it to query the plugin with the mime context set to BU_MIME_IMAGE.  The plugin, in turn, should recognize that it can't process a 3dm file as an image, and return nothing.</p>
<p>With the --geom option set, the context would be set to BU_MIME_MODEL, and without it the context would be BU_MIME_UNKNOWN.  In either of those cases the plugin would then report it could handle the 3dm input successfully, and return a value with the GEOM bit flag set.  The gcv executable would then know it had at least one conversion path.</p>
<p>This gets more interesting with an image format like .png.  Since it could be interpreted as either an image or terrain data, if we don't supply either --image or --geom to introduce a context both a plugin to read pngs and generate .g files containing those images and the gdal plugin producing geometry files will report they can handle the PNG file.  If --image or --geom are supplied, and the prospective plugins return values with their respective bit flags set, gcv can select the plugin that not only handles PNG but handles it as the desired type of information.  If neither --image or --geom are supplied and the PNG file is fed to gcv, we don't know what to do with it - there are multiple valid options.  In that case gcv can use the return codes from the plugin tests to report the available options.  Something like:</p>
<div class="codehilite"><pre><span></span><code>gcv terrain.png outfile.g

Error - multiple conversion alternatives found:

Image conversions (--image):
     png2gtexture  - Import PNG image as BRL-CAD texture file

Geometry conversions (--geom):
    gdal            - Import PNG image as DSP terrain data
</code></pre></div>
<p>To actually get the gdal conversion path in this scenario, the command would be either:</p>
<div class="codehilite"><pre><span></span><code>gdal --geom terrain.png outfile.g
</code></pre></div>
<p>or </p>
<div class="codehilite"><pre><span></span><code>gda --plugin=gdal terrain.png outfile.pn
</code></pre></div>



<a name="236583675"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236583675" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236583675">(Apr 28 2021 at 21:26)</a>:</h4>
<p>If a plugin could be capable of producing either image or geometry outputs from the same input (let's say hypothetically the gdal plugin was also able to produce a texture as well as a terrain file) it would return with both the image and geom bit flags set.  In that case, even if it was the only plugin that could handle the format, gcv would know it needs additional context before the plugin can proceed to do a conversion:</p>
<div class="codehilite"><pre><span></span><code>gcv --plugin gdal terrain.png output.png

Error:  plugin supports both image and geometry conversion paths:

   image:   produces a .g texture object
    geom:   produces a dsp terrain file
</code></pre></div>
<p>The terrain path would then become:</p>
<div class="codehilite"><pre><span></span><code>gcv --plugin gdal --geom terrain.png output.png
</code></pre></div>



<a name="236745774"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236745774" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236745774">(Apr 29 2021 at 21:05)</a>:</h4>
<p>got the options <code>--geom</code> and <code>--image</code> working somewhat. currently it just passes the <code>BU_MIME_MODEL</code> and <code>BU_MIME_IMAGE</code> defs respectively.</p>



<a name="236993666"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/236993666" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#236993666">(May 01 2021 at 19:46)</a>:</h4>
<p>i just want to ask.....is the returned bit flag mainly going to be used to check if there are options for plugins for a certain file?</p>



<a name="237000797"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237000797" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237000797">(May 01 2021 at 21:14)</a>:</h4>
<p>and i am a little bit confused right now........i tried to go for it and couldnt find out where it is checking for the types and using the function *_can_read</p>



<a name="237000846"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237000846" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237000846">(May 01 2021 at 21:15)</a>:</h4>
<p>so it might help if someone can get me thru this confusion</p>



<a name="237005269"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237005269" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237005269">(May 01 2021 at 22:19)</a>:</h4>
<p>My idea (which <span class="user-mention" data-user-id="102902">@Sean</span>  may shoot down - it's just a notion) was to use the return bit flag to determine what sorts of input/output a given importer/exporter can handle.</p>
<p>If I'm following this correctly (it's been a while) struct gcv_filter in include/gcv/api.h has a callback function data_supported - I think that's where the can_read functions get hooked in.  To make sure, try stepping through a gcv conversion in gdb and breaking on the can_read function in question - the backtrace should tell you how it's being called.</p>



<a name="237006801"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237006801" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237006801">(May 01 2021 at 22:44)</a>:</h4>
<p>Here's another stab at how I envisioned this working.  Given the conversion input:</p>
<div class="codehilite"><pre><span></span><code>gcv file.png file.g
</code></pre></div>
<p>The initial filename based characterizations would be:</p>
<p>mime-characterize png -&gt; BU_MIME_IMAGE, BU_MIME_IMAGE_PNG<br>
mime-characterize g -&gt; BU_MIME_MODEL, BU_MIME_MODEL_VND_BRLCAD_G</p>
<p>Step 1a:  ask all reader plugins if they can handle BU_MIME_UNKNOWN, BU_MIME_IMAGE_PNG and collect responses<br>
Step 1b:  ask all writer plugins if they can handle BU_MIME_UNKNOWN, BU_MIME_MODEL_VND_BRLCAD_G and collect responses</p>
<p>Step 2:  for any plugins that answer non-zero, characterize their responses as being BU_MIME_IMAGE, BU_MIME_MODEL, or both.  The possibilities for both readers and writers are:</p>
<ol>
<li>1 plugin, with BU_MIME_MODEL as its response.</li>
<li>1 plugin, with BU_MIME_IMAGE as its response.</li>
<li>2+ plugins, with BU_MIME_MODEL as their response.</li>
<li>2+ plugins, non-BU_MIME_MODEL types.</li>
<li>Multiple types from same plugin</li>
<li>Multiple types, multiple plugins</li>
</ol>
<p>Step 3:  Find matching reader and writer context pairings that offer conversion paths.  For our hypothetical example where gdal can read a PNG both as image and terrain data, we would get the following valid conversion path pairings:</p>
<p>(BU_MIME_IMAGE,gdal)-&gt;(BU_MIME_IMAGE,g)<br>
(BU_MIME_MODEL,gdal)-&gt;(BU_MIME_MODEL,g)</p>
<p>This situation is thus ambiguous - both the reader and writer have multiple valid interpretations of the data.  The user  will have to provide more context (for example --geom to specify our desired conversion context is BU_MIME_MODEL) to resolve the ambiguity.</p>



<a name="237029038"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237029038" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237029038">(May 02 2021 at 05:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/237005269">said</a>:</p>
<blockquote>
<p>My idea (which <span class="user-mention silent" data-user-id="102902">Sean</span>  may shoot down - it's just a notion) was to use the return bit flag to determine what sorts of input/output a given importer/exporter can handle.</p>
<p>If I'm following this correctly (it's been a while) struct gcv_filter in include/gcv/api.h has a callback function data_supported - I think that's where the can_read functions get hooked in.  To make sure, try stepping through a gcv conversion in gdb and breaking on the can_read function in question - the backtrace should tell you how it's being called.</p>
</blockquote>
<p>for some reason, the <code>can_read</code> function wasnt being called when i tried putting it thru gdb. thats why i asked for where it is being called. IIRC in the code the only place where the function was called was in a condition and one of other conditions in that if statement was <code>if (emt == BU_MIME_MODEL_AUTO &amp;&amp; ......)</code> and because of that the function is not being called for some reason.</p>



<a name="237073937"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237073937" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237073937">(May 02 2021 at 19:05)</a>:</h4>
<p><span class="user-mention" data-user-id="247135">@Sumagna Das</span> you may have to alter the gcv logic flows somewhat - they've always been a bit haphazard, so if something else makes sense to you feel free to give it a go.</p>



<a name="237442414"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237442414" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237442414">(May 05 2021 at 05:15)</a>:</h4>
<p><span class="user-mention" data-user-id="247135">@Sumagna Das</span> how's it going?  any luck deciphering the logic flow?</p>



<a name="237442834"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237442834" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237442834">(May 05 2021 at 05:23)</a>:</h4>
<p>While I'm not convinced there's usability value in having categoric flags, I'm not terribly opposed.  More concerned where this is heading.  I think the user isn't necessarily going to know what a particular input plugin was coded to receive or what a particular filter plugin is expecting.   So they're probably going to have to hunt or try them all to see what they do and that won't be a good user experience.</p>



<a name="237443279"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237443279" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237443279">(May 05 2021 at 05:31)</a>:</h4>
<p>There's also an issue with many formats that have even more interpretations beyond image or geometry ... could also be data, could be a container format, could be a single format that holds multiple interpretations or multiple representations simultaneously.  It's messy and categorization works against us.</p>



<a name="237443774"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237443774" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237443774">(May 05 2021 at 05:40)</a>:</h4>
<p>As mentioned earlier, I'd think it'd be beneficial to focus on specific issues, such as getting vol plugin to simply work, and address the problems that specific case provokes.  That's not to suggest undoing or changing anything that's been done on the pull request, but to wrap it up and get back to considering how that vol plugin works now and talking about that usability.</p>
<p>i.e., how it is discovered and how is it invoked unambiguously with a starting premise that a user begins with a naive invocation such as "gcv input.png output.g"</p>



<a name="237980652"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237980652" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237980652">(May 08 2021 at 19:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/GCV/near/237442414">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="247135">Sumagna Das</span> how's it going?  any luck deciphering the logic flow?</p>
</blockquote>
<p>somewhat<br>
havent been able to play with it in the last few days because of studies and dont think i will be able to do that in the next few days<br>
so not much luck you can say</p>



<a name="237980853"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237980853" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237980853">(May 08 2021 at 20:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/GCV/near/237443774">said</a>:</p>
<blockquote>
<p>As mentioned earlier, I'd think it'd be beneficial to focus on specific issues, such as getting vol plugin to simply work, and address the problems that specific case provokes.  That's not to suggest undoing or changing anything that's been done on the pull request, but to wrap it up and get back to considering how that vol plugin works now and talking about that usability.</p>
<p>i.e., how it is discovered and how is it invoked unambiguously with a starting premise that a user begins with a naive invocation such as "gcv input.png output.g"</p>
</blockquote>
<p>thats actually done <br>
i had that on sideby in a git stash so i can put all of the work right now into another stash, pop the stash which contains the vol plugin work and with some minor changes, voila! the plugin and the initial work for the GCV rework is done in the pull request.</p>



<a name="237981596"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237981596" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237981596">(May 08 2021 at 20:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/GCV/near/237442834">said</a>:</p>
<blockquote>
<p>While I'm not convinced there's usability value in having categoric flags, I'm not terribly opposed.  More concerned where this is heading.  I think the user isn't necessarily going to know what a particular input plugin was coded to receive or what a particular filter plugin is expecting.   So they're probably going to have to hunt or try them all to see what they do and that won't be a good user experience.</p>
</blockquote>
<p>The user won't know what the plugins can do or expect - that's the idea of the proposed scheme, to have the plugins themselves tell gcv what they can and can't do, and have gcv solve the problem of what combinations constitute potentially viable conversion paths.  If the path solution is not unique, gcv then presents the viable paths and how to invoke them to the user.</p>



<a name="237981912"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/237981912" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#237981912">(May 08 2021 at 20:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/GCV/near/237443279">said</a>:</p>
<blockquote>
<p>There's also an issue with many formats that have even more interpretations beyond image or geometry ... could also be data, could be a container format, could be a single format that holds multiple interpretations or multiple representations simultaneously.  It's messy and categorization works against us.</p>
</blockquote>
<p>If we've got inputs that are fundamentally that messy (not all of them are, but I'm sure some are) then I see no alternative other than analyzing them to find the viable interpretations and reporting them back to the user with instructions for how to select the interpretation they want.  That means we need some universal language in which to communicate those capabilities and options (data, image, geometry, video, etc.)  The set of categoric data possibilities must ultimately be finite in order to be implementable, and for our problems there are usually just a few big ones (image, geometry, etc.) - hence my thinking that we could use the bit flag to communicate the viable options back from a plugin.</p>



<a name="238053044"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/238053044" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#238053044">(May 09 2021 at 18:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="247135">Sumagna Das</span> <a href="#narrow/stream/104062-general/topic/GCV/near/237980853">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/GCV/near/237443774">said</a>:</p>
<blockquote>
<p>As mentioned earlier, I'd think it'd be beneficial to focus on specific issues, such as getting vol plugin to simply work, and address the problems that specific case provokes.  That's not to suggest undoing or changing anything that's been done on the pull request, but to wrap it up and get back to considering how that vol plugin works now and talking about that usability.</p>
<p>i.e., how it is discovered and how is it invoked unambiguously with a starting premise that a user begins with a naive invocation such as "gcv input.png output.g"</p>
</blockquote>
<p>thats actually done <br>
i had that on sideby in a git stash so i can put all of the work right now into another stash, pop the stash which contains the vol plugin work and with some minor changes, voila! the plugin and the initial work for the GCV rework is done in the pull request.</p>
</blockquote>
<p>i had pushed the vol plugin changes alongside the changes for flattening the mime namespace. review it when you can</p>



<a name="238423822"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/238423822" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#238423822">(May 12 2021 at 05:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/237981596">said</a>:</p>
<blockquote>
<p>The user won't know what the plugins can do or expect - that's the idea of the proposed scheme, to have the plugins themselves tell gcv what they can and can't do, and have gcv solve the problem of what combinations constitute potentially viable conversion paths.  If the path solution is not unique, gcv then presents the viable paths and how to invoke them to the user.</p>
</blockquote>
<p>I agree the user won't know, but for that same reason they won't necessarily know whether -image or -data or -model or whatever taxonomy we come up with is appropriate.  It's still not unambiguous what that means if the user specifies a png file with a category flag.  It turns into "try them all and see what they do".  It's compounded by the fact that category flags attempt to characterize an input or/and output homogeneously which isn't necessarily true or even a common case.</p>
<p>The resulting workflow sounds like a problematic UX to me..  So much so that I think we're better off focusing on declarative and getting that UX right first..  It's needed no matter what.  Let's keep it simple.  We really need to resist overarchitecting as simplicity will be central to any external adoption.</p>



<a name="238424996"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/238424996" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#238424996">(May 12 2021 at 05:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/GCV/near/237981912">said</a>:</p>
<blockquote>
<p>If we've got inputs that are fundamentally that messy (not all of them are, but I'm sure some are) then I see no alternative other than analyzing them to find the viable interpretations and reporting them back to the user with instructions for how to select the interpretation they want.</p>
</blockquote>
<p>Agreed!</p>
<blockquote>
<p>That means we need some universal language in which to communicate those capabilities and options (data, image, geometry, video, etc.)</p>
</blockquote>
<p>Sort of!  :)</p>
<p>I think that's the leap to a particular solution implementat that I don't think is demonstrated.  The universal language couple be plain english.  If there are three plugins that can handle an input, we could simply itemize them with a description and let the user pick based on that info.  In this particular instance, the user would see something like:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>$ gcv image.png file.g
 Multiple plugins read PNG input.  Please select the one most appropriate with the --input=[label] option:
    gdal: Reads image and data files typically representing terrain creating height field (DSP) geometry.
    png-to-vol: Reads PNG format image files creating volumetric (VOL) geometry.
    magick: Reads multiple image file formats.
</code></pre></div>
<p>So then the user can decide which seems most appropriate and issue:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>$ gcv --input=png-to-vol image.png file.g
</code></pre></div>
<p>It's simple, discoverable, and doesn't require taxonomy awareness other than what the plugins declare.  The user may still try all of them, but it'll be in the context of a plugin's immediate description and other available plugins.  We can later look into user preferences for default handlers or auto-pathing.</p>



<a name="425135293"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/425135293" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#425135293">(Mar 06 2024 at 16:59)</a>:</h4>
<p><span class="user-mention" data-user-id="484201">@Christopher</span> So the next logical question I guess is what is needed to make assetimport prioritized over the other tinygltf method.  Could just remove the other method since it's crashing if the other works, or does it handle text gltf better in some regard?  Otherwise that's a design issue that needs to be sorted out - how to have smart defaulting.</p>



<a name="425135985"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/425135985" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#425135985">(Mar 06 2024 at 17:03)</a>:</h4>
<p>well, if it's just a matter of wanting it to prioritize assetimport over tinygltf, we just need to recognize it as the default 'mime type'. As of yet, gcv isn't advanced enough have <em>smart</em> defaulting or really any notion fallbacks; Only the hard-set default, anything else is up to the user to manually specify</p>



<a name="425136064"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/425136064" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#425136064">(Mar 06 2024 at 17:03)</a>:</h4>
<p>as for why it's crashing or if one is preferable over the other.. I'm not sure</p>



<a name="425145630"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/425145630" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#425145630">(Mar 06 2024 at 17:54)</a>:</h4>
<p>I'd vote for removing tinygltf in favor of assetimport, unless there's something the former can handle that the latter can't.</p>



<a name="425151179"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/GCV/near/425151179" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/GCV.html#425151179">(Mar 06 2024 at 18:25)</a>:</h4>
<p>I think one of us will have to spend a few minutes looking at the implementations to figure that out.  I don't recall the one in gcv being different than the gltf-g but there's clearly some difference or change.  Looking at the commits, maybe a casualty of refactoring errors.</p>
<p>I naively assumed gcv was only using assetimport as I'd just ran "gcv file.glb file.g".  Either way, I do think the default should be made to work, so if assetimport's working I think that's strong enough motivation to default to it over the gltf plugin.  Can schedule them and gltf-g for review in the next minor.  Maybe do a quick walkthrough.</p>



<hr><p>Last updated: Oct 29 2024 at 00:47 UTC</p>
</html>