<html>
<head><meta charset="utf-8"><title>datums · brlcad · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/index.html">brlcad</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html">datums</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="204793007"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204793007" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204793007">(Jul 23 2020 at 12:59)</a>:</h4>
<p>Gah, how did datums get busted?!?!</p>



<a name="204793732"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204793732" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204793732">(Jul 23 2020 at 13:04)</a>:</h4>
<p>looks like minortype is correct (44).. majortype is 255, though, and that's not right</p>



<a name="204794037"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204794037" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204794037">(Jul 23 2020 at 13:06)</a>:</h4>
<p>yeah, it's supposed to be 1 (majortype BRLCAD)</p>



<a name="204795687"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204795687" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204795687">(Jul 23 2020 at 13:20)</a>:</h4>
<p>Busted in 7-30-2-1</p>



<a name="204795704"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204795704" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204795704">(Jul 23 2020 at 13:20)</a>:</h4>
<p>works in 7-26-0</p>



<a name="204795713"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204795713" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204795713">(Jul 23 2020 at 13:20)</a>:</h4>
<p>looks like the datum_in code has never set the majortype but worked, so either extra validation checks were added or majortype setting was removed from someplace common to multipl types</p>



<a name="204795765"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204795765" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204795765">(Jul 23 2020 at 13:20)</a>:</h4>
<p>OK, you're deeper than I am - want me to add a regression test while you're hunting?</p>



<a name="204795772"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204795772" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204795772">(Jul 23 2020 at 13:20)</a>:</h4>
<p>can you see what the majortype is in 26.0?</p>



<a name="204795833"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204795833" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204795833">(Jul 23 2020 at 13:21)</a>:</h4>
<p>what's a quick way to print that?</p>



<a name="204795853"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204795853" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204795853">(Jul 23 2020 at 13:21)</a>:</h4>
<p>does the datum from 26 open in 30?</p>



<a name="204795963"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204795963" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204795963">(Jul 23 2020 at 13:22)</a>:</h4>
<p>Opens in trunk, actually - draws too</p>



<a name="204796005"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204796005" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204796005">(Jul 23 2020 at 13:23)</a>:</h4>
<p>okay, so it's not extra validation then</p>



<a name="204796057"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204796057" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204796057">(Jul 23 2020 at 13:23)</a>:</h4>
<p>just to confirm, you can try running: gex file.g</p>



<a name="204796093"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204796093" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204796093">(Jul 23 2020 at 13:23)</a>:</h4>
<p>see if there's an unknown majortype listed  (assuming you didn't create invalid and valid ones)</p>



<a name="204796098"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204796098" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204796098">(Jul 23 2020 at 13:23)</a>:</h4>
<p>===============================================<br>
 Objects found in BRL-CAD V5 database: datum.g <br>
===============================================</p>
<p>Object DLI type/major/minor type:   1/  0/  0 name: (none)<br>
Object DLI type/major/minor type:   0/  2/  0 name: _GLOBAL<br>
  Has one or more attributes.<br>
Object DLI type/major/minor type:   0/  1/ 44 name: datum.s<br>
  Has one or more attributes.</p>
<p>==========================================<br>
 Summary for BRL-CAD V5 database: datum.g<br>
==========================================</p>
<p>Found 3 objects:<br>
  free space:      0<br>
  named     :      2<br>
  other     :      1</p>
<p>2 objects have one or more attributes.</p>
<p>Object DLI types (the main category: defined in H Flags):<br>
    0 (APPLICATION_DATA_OBJECT)   :      2<br>
    1 (HEADER_OBJECT)             :      1<br>
Object major types:<br>
    0 (RESERVED)                  :      1<br>
    1 (BRLCAD)                    :      1<br>
    2 (ATTRIBUTE_ONLY)            :      1<br>
Object minor types:<br>
    0 (RESERVED)                  :      2<br>
   44 (unknown)                   :      1</p>
<p>Note: file read ended normally at EOF.</p>



<a name="204796195"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204796195" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204796195">(Jul 23 2020 at 13:24)</a>:</h4>
<p>yeah that looks right</p>



<a name="204796231"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204796231" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204796231">(Jul 23 2020 at 13:24)</a>:</h4>
<p>created prior to my fix creates:</p>



<a name="204796233"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204796233" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204796233">(Jul 23 2020 at 13:24)</a>:</h4>
<p>Object major types:<br>
    0 (RESERVED)                  :      4<br>
    1 (BRLCAD)                    :     14<br>
    2 (ATTRIBUTE_ONLY)            :      1<br>
    9 (BINARY_UNIF)               :      1<br>
  255 (unknown)                   :      1</p>



<a name="204796333"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204796333" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204796333">(Jul 23 2020 at 13:25)</a>:</h4>
<p>ah, right, there it is: Object DLI type/major/minor type: 0/ 1/ 44 name: datum.s</p>



<a name="204796346"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204796346" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204796346">(Jul 23 2020 at 13:26)</a>:</h4>
<p>vs Object DLI type/major/minor type:   0/255/ 44 name: datum</p>



<a name="204796499"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204796499" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204796499">(Jul 23 2020 at 13:27)</a>:</h4>
<p>busted in rel-7-28-2</p>



<a name="204796526"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204796526" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204796526">(Jul 23 2020 at 13:27)</a>:</h4>
<p>this is where having a database with all objects in the regression suite would have triggered a failure, caught it</p>



<a name="204796558"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204796558" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204796558">(Jul 23 2020 at 13:27)</a>:</h4>
<p>.. <span class="user-mention" data-user-id="253014">@Thusal Ranawaka</span> can you make sure you add datums to your list? :)</p>



<a name="204797099"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204797099" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204797099">(Jul 23 2020 at 13:32)</a>:</h4>
<p>rel-7-26-4 works</p>



<a name="204797722"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204797722" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204797722">(Jul 23 2020 at 13:38)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> Is r76443 the full fix?  I'll have to start bisecting if you want me to ID which commit actually broke it</p>



<a name="204797906"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204797906" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204797906">(Jul 23 2020 at 13:40)</a>:</h4>
<p>May want to put out a patch release with that fix - trunk would be a heck of a jump just for that...</p>



<a name="204798188"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204798188" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204798188">(Jul 23 2020 at 13:42)</a>:</h4>
<p>Working as of r71000</p>



<a name="204799294"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204799294" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thusal Ranawaka <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204799294">(Jul 23 2020 at 13:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/datums/near/204796558">said</a>:</p>
<blockquote>
<p>.. <span class="user-mention silent" data-user-id="253014">Thusal Ranawaka</span> can you make sure you add datums to your list? :)</p>
</blockquote>
<p><span class="user-mention" data-user-id="102902">@Sean</span> Roger that! <span aria-label="police" class="emoji emoji-1f46e" role="img" title="police">:police:</span></p>



<a name="204804201"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204804201" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204804201">(Jul 23 2020 at 14:27)</a>:</h4>
<p>Found it - I did it, commit r71953</p>



<a name="204810490"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204810490" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204810490">(Jul 23 2020 at 15:12)</a>:</h4>
<p>I don't think we need to bisect the cause</p>



<a name="204810508"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204810508" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204810508">(Jul 23 2020 at 15:12)</a>:</h4>
<p>oh, I see you found it, great</p>



<a name="204810747"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204810747" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204810747">(Jul 23 2020 at 15:14)</a>:</h4>
<p>so what that might imply is that other 'in' command primitives could be busted.  we should check them since this reared its head</p>



<a name="204810883"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204810883" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204810883">(Jul 23 2020 at 15:15)</a>:</h4>
<p>/me agrees</p>



<a name="204810894"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204810894" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204810894">(Jul 23 2020 at 15:15)</a>:</h4>
<p>most manually set, but I did see at least two other commits where the type was added back in, presumably to fix a released error</p>



<a name="204810992"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204810992" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204810992">(Jul 23 2020 at 15:16)</a>:</h4>
<p>also implies a NEWS item will be in order for those types</p>



<a name="204811056"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/datums/near/204811056" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/datums.html#204811056">(Jul 23 2020 at 15:16)</a>:</h4>
<p>/me nods - I'm thinking a 7.30.10 patch release?  Should be easy to backport the changes for this issue...</p>



<hr><p>Last updated: Aug 14 2025 at 00:57 UTC</p>
</html>