<html>
<head><meta charset="utf-8"><title>openCL · brlcad · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/index.html">brlcad</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html">openCL</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="237558363"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237558363" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237558363">(May 05 2021 at 20:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/GSoC.20ideas/near/237438658">said</a>:</p>
<blockquote>
<p>Assuming that doesn't fix everything, next I'd suggest you delete your cmake cache, and run cmake again -- and then post a log of the entire output.  There is a lot of relevant info on whether opencl was detected properly or not in the output.  Would also help to post the CMakeOutput.txt and CMakeError.txt log files.</p>
</blockquote>
<p>Here <a href="/user_uploads/1549/W9Vo1FNtCuzuU1AxiYH1F2Rp/CMakeError.log">CMakeError.log</a> <a href="/user_uploads/1549/sB55-BXJvb0STBzYaNnlQOnT/CMakeOutput.log">CMakeOutput.log</a> <br>
I am using brl-cad 7.28 for now. Returned clLinkProgram access violation error @clt_get_program. ALLBUILD and INSTALL is done. <span class="user-mention" data-user-id="102902">@Sean</span></p>



<a name="237567711"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237567711" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237567711">(May 05 2021 at 21:11)</a>:</h4>
<p>Okay, those logs do seem to indicate that it found the intel opencl sdk successfully</p>



<a name="237568102"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237568102" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237568102">(May 05 2021 at 21:13)</a>:</h4>
<p>access violation is way too vague...  but it implies the sdk runtime components aren't getting found or linked correctly.  Can you run any sample opencl programs that came with the sdk?</p>



<a name="237618699"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237618699" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237618699">(May 06 2021 at 07:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237568102">said</a>:</p>
<blockquote>
<p>access violation is way too vague...  but it implies the sdk runtime components aren't getting found or linked correctly.  Can you run any sample opencl programs that came with the sdk?</p>
</blockquote>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  ok , done :) I installed latest intel graphic cards drivers, but I have to say that It was a bit messy because SDK has included a run time cpu driver but when I tried to install, It raised an error about uninstalling the GPU driver first.  I did some installations and updated GPU also. I do not know  the codes are designed for which device type in BRL-CAD.</p>



<a name="237619249"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237619249" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237619249">(May 06 2021 at 07:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237618699">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237568102">said</a>:</p>
<blockquote>
<p>access violation is way too vague...  but it implies the sdk runtime components aren't getting found or linked correctly.  Can you run any sample opencl programs that came with the sdk?</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  ok , done :) I installed latest intel graphic cards drivers, but I have to say that It was a bit messy because SDK has included a run time cpu driver but when I tried to install, It raised an error about uninstalling the GPU driver first.  I did some installations and updated GPU also. I do not know  the codes are designed for which device type in BRL-CAD.</p>
</blockquote>
<p>But now stuck at BU_ASSERT((counts[i-1] % 2) == 0) @primitive_util.c. My geometry is complicated, contains BoTs , ARBS not a small one. Is count  == number of shoots?</p>



<a name="237624040"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237624040" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237624040">(May 06 2021 at 08:33)</a>:</h4>
<p>I am very much enjoying while exploring BRL-cad. Like solving puzzle <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span>  , I do not know if there are any other CAD community like here. There is definitely very much to do and fastest  raytrace  among other CADs?? <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="237660347"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237660347" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237660347">(May 06 2021 at 13:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237618699">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237568102">said</a>:<br>
<span class="user-mention silent" data-user-id="102902">Sean</span>  ok , done :) I installed latest intel graphic cards drivers, but I have to say that It was a bit messy because SDK has included a run time cpu driver but when I tried to install, It raised an error about uninstalling the GPU driver first.  I did some installations and updated GPU also. I do not know  the codes are designed for which device type in BRL-CAD.</p>
</blockquote>
<p>Are there any samples programs that came with the intel sdk that you can run to confirm opencl runtime is installed and working correctly?</p>



<a name="237661480"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237661480" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237661480">(May 06 2021 at 13:55)</a>:</h4>
<p>The good news is the BU_ASSERT is clear proof that you compiled with OpenCL enabled, so yay!</p>



<a name="237661670"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237661670" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237661670">(May 06 2021 at 13:56)</a>:</h4>
<p>That assert failure  I believe indicates that the geometry you are ray tracing has a solidity issue which hasn't been implemented yet.  Some pixels have an odd number of hits instead of even, which it's not expecting.  Perhaps try something less complicated geometry first.</p>



<a name="237662784"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237662784" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237662784">(May 06 2021 at 14:03)</a>:</h4>
<p>detect&amp;paint would be neat. Definitely help 'close up' geometry if the rt is interactive :D</p>



<a name="237664018"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237664018" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237664018">(May 06 2021 at 14:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237624040">said</a>:</p>
<blockquote>
<p>I am very much enjoying while exploring BRL-cad. Like solving puzzle <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span>  , I do not know if there are any other CAD community like here. There is definitely very much to do and fastest  raytrace  among other CADs?? <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>
</blockquote>
<p>That's great to hear <span class="user-mention" data-user-id="228172">@scorp08</span> and glad you're having fun exploring!  That matters more than anything.</p>
<p>BRL-CAD is by far the fastest solid geometry ray tracer.  There are faster non-solid (e.g., triangle) tracers and academic demos, but nothing in the class of solid geometry and nothing as verified for analytic use that I'm aware of.</p>
<p>In all my comparisons against commercial CAD ray tracing (e.g., Creo, NX, CATIA, etc), BRL-CAD's ray tracer has been orders of magnitude faster.  Getting a truly apples-to-apples comparison is really hard, but it's usually not even in the ballpark.  Depending on the format and complexity of the geometry and hardware capabilities, LIBRT is typically 10k-100M rays per sec per CPU core.  The commercial options I've seen are usually in the 100-10k rays per sec per CPU core range.</p>



<a name="237664398"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237664398" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237664398">(May 06 2021 at 14:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="103542">Erik</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237662784">said</a>:</p>
<blockquote>
<p>detect&amp;paint would be neat. Definitely help 'close up' geometry if the rt is interactive :D</p>
</blockquote>
<p><span class="user-mention" data-user-id="103542">@Erik</span> you got to see the interactive ray tracing GUI I worked on a couple years ago.  It's pretty amazing to open any geometry and spin it around seamlessly with real-time ray tracing.  It's like isst was but with any geometry and much higher quality rendering (thx to intel).  ... I really need to get that committed, recompiled, and demo'd again.</p>



<a name="237689327"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237689327" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237689327">(May 06 2021 at 16:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237661670">said</a>:</p>
<blockquote>
<p>That assert failure  I believe indicates that the geometry you are ray tracing has a solidity issue which hasn't been implemented yet.  Some pixels have an odd number of hits instead of even, which it's not expecting.  Perhaps try something less complicated geometry first.</p>
</blockquote>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  I tried with simple geom (1 arb8.r) It produced no error but did not fired any ray :)).  And It frozing in raytraced resulted window. material assigned and it was a region.It raytraced without opencl , no problem. I could not see any sample programs but I tried a couple of code to get deviceinfo, It was working.Do I need to run cpu only (without gpu)</p>



<a name="237933417"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/237933417" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#237933417">(May 08 2021 at 07:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237689327">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237661670">said</a>:</p>
<blockquote>
<p>That assert failure  I believe indicates that the geometry you are ray tracing has a solidity issue which hasn't been implemented yet.  Some pixels have an odd number of hits instead of even, which it's not expecting.  Perhaps try something less complicated geometry first.</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  I tried with simple geom (1 arb8.r) It produced no error but did not fired any ray :)).  And It frozing in raytraced resulted window. material assigned and it was a region.It raytraced without opencl , no problem. I could not see any sample programs but I tried a couple of code to get deviceinfo, It was working.Do I need to run cpu only (without gpu)</p>
</blockquote>
<p>no error, no bomb output. Why did not fire any ray, am I the choosen one <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span> <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="238242135"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/238242135" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#238242135">(May 11 2021 at 02:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237689327">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  I tried with simple geom (1 arb8.r) It produced no error but did not fired any ray :)).  And It frozing in raytraced resulted window. material assigned and it was a region.It raytraced without opencl , no problem. I could not see any sample programs but I tried a couple of code to get deviceinfo, It was working.Do I need to run cpu only (without gpu)</p>
</blockquote>
<p>If it froze, you should be able to attach to the process using gdb to see where/why it's frozen.  Get the PID of the rt process, then run gdb, and run the command "attach [pid]" where [pid] is the rt process ID (e.g., 12345).</p>
<p>You shouldn't need to run cpu only.  It will try gpu and if that fails, it will fall back to cpu.</p>



<a name="238242257"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/238242257" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#238242257">(May 11 2021 at 02:30)</a>:</h4>
<p>then you should be able to ctrl-c and run "bt" in gdb to get the backtrace -- post that.</p>



<a name="238242335"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/238242335" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#238242335">(May 11 2021 at 02:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237933417">said</a>:</p>
<blockquote>
<p>no error, no bomb output. Why did not fire any ray, am I the choosen one <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span> <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>
</blockquote>
<p>Sorry, there's simply not yet enough information to answer or even determine what's really going on yet.  The attach backtraces would be informative.  You also might simply try to run rt within gdb from the beginning and step through it to understand what's happening.</p>



<a name="238255891"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/238255891" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#238255891">(May 11 2021 at 05:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238242135">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237689327">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  I tried with simple geom (1 arb8.r) It produced no error but did not fired any ray :)).  And It frozing in raytraced resulted window. material assigned and it was a region.It raytraced without opencl , no problem. I could not see any sample programs but I tried a couple of code to get deviceinfo, It was working.Do I need to run cpu only (without gpu)</p>
</blockquote>
<p>If it froze, you should be able to attach to the process using gdb to see where/why it's frozen.  Get the PID of the rt process, then run gdb, and run the command "attach [pid]" where [pid] is the rt process ID (e.g., 12345).</p>
<p>You shouldn't need to run cpu only.  It will try gpu and if that fails, it will fall back to cpu.</p>
</blockquote>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  I tried run rt with windbg . It did not find BRLCAD_ROOT env when begin debugging . But when I run rt with cmd   it finds, <span aria-label="unamused" class="emoji emoji-1f612" role="img" title="unamused">:unamused:</span></p>



<a name="238318425"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/238318425" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#238318425">(May 11 2021 at 14:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238255891">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238242135">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237689327">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  I tried with simple geom (1 arb8.r) It produced no error but did not fired any ray :)).  And It frozing in raytraced resulted window. material assigned and it was a region.It raytraced without opencl , no problem. I could not see any sample programs but I tried a couple of code to get deviceinfo, It was working.Do I need to run cpu only (without gpu)</p>
</blockquote>
<p>If it froze, you should be able to attach to the process using gdb to see where/why it's frozen.  Get the PID of the rt process, then run gdb, and run the command "attach [pid]" where [pid] is the rt process ID (e.g., 12345).</p>
<p>You shouldn't need to run cpu only.  It will try gpu and if that fails, it will fall back to cpu.</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  I tried run rt with windbg . It did not find BRLCAD_ROOT env when begin debugging . But when I run rt with cmd   it finds, <span aria-label="unamused" class="emoji emoji-1f612" role="img" title="unamused">:unamused:</span></p>
</blockquote>
<p>I set curdir , then rt found. When compiling windbg shows "Unable to deliver callback, Unable to deliver callback, 3131" . I tihnk its a driver problem</p>



<a name="238426892"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/238426892" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#238426892">(May 12 2021 at 06:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238318425">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238255891">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238242135">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237689327">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  I tried with simple geom (1 arb8.r) It produced no error but did not fired any ray :)).  And It frozing in raytraced resulted window. material assigned and it was a region.It raytraced without opencl , no problem. I could not see any sample programs but I tried a couple of code to get deviceinfo, It was working.Do I need to run cpu only (without gpu)</p>
</blockquote>
<p>If it froze, you should be able to attach to the process using gdb to see where/why it's frozen.  Get the PID of the rt process, then run gdb, and run the command "attach [pid]" where [pid] is the rt process ID (e.g., 12345).</p>
<p>You shouldn't need to run cpu only.  It will try gpu and if that fails, it will fall back to cpu.</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  I tried run rt with windbg . It did not find BRLCAD_ROOT env when begin debugging . But when I run rt with cmd   it finds, <span aria-label="unamused" class="emoji emoji-1f612" role="img" title="unamused">:unamused:</span></p>
</blockquote>
<p>I set curdir , then rt found. When compiling windbg shows "Unable to deliver callback, Unable to deliver callback, 3131" . I tihnk its a driver problem</p>
</blockquote>
<p>I tried with  a different gpu driver and uninstalled cpu_runtimes. Here is the call stack <a href="/user_uploads/1549/4yUAcLCpO_xrZoT9IIR0Qcyx/stack_trace.dat">stack_trace.dat</a></p>



<a name="238994745"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/238994745" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#238994745">(May 16 2021 at 17:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238426892">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238318425">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238255891">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238242135">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237689327">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  I tried with simple geom (1 arb8.r) It produced no error but did not fired any ray :)).  And It frozing in raytraced resulted window. material assigned and it was a region.It raytraced without opencl , no problem. I could not see any sample programs but I tried a couple of code to get deviceinfo, It was working.Do I need to run cpu only (without gpu)</p>
</blockquote>
<p>If it froze, you should be able to attach to the process using gdb to see where/why it's frozen.  Get the PID of the rt process, then run gdb, and run the command "attach [pid]" where [pid] is the rt process ID (e.g., 12345).</p>
<p>You shouldn't need to run cpu only.  It will try gpu and if that fails, it will fall back to cpu.</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  I tried run rt with windbg . It did not find BRLCAD_ROOT env when begin debugging . But when I run rt with cmd   it finds, <span aria-label="unamused" class="emoji emoji-1f612" role="img" title="unamused">:unamused:</span></p>
</blockquote>
<p>I set curdir , then rt found. When compiling windbg shows "Unable to deliver callback, Unable to deliver callback, 3131" . I tihnk its a driver problem</p>
</blockquote>
<p>I tried with  a different gpu driver and uninstalled cpu_runtimes. Here is the call stack <a href="/user_uploads/1549/4yUAcLCpO_xrZoT9IIR0Qcyx/stack_trace.dat">stack_trace.dat</a></p>
</blockquote>
<p>This time , I tried with CUDA. Same simple arb8.  from windbg , no driver problem is occured but here is the stack trace <a href="/user_uploads/1549/NryXR4uM2QCb2D812vf3_Ydy/stack_trace.dat">stack_trace.dat</a> I do n ot know  about "clt_shade_segs_kernel"</p>



<a name="241684630"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/241684630" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#241684630">(Jun 06 2021 at 10:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238994745">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238426892">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238318425">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238255891">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/openCL/near/238242135">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/237689327">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  I tried with simple geom (1 arb8.r) It produced no error but did not fired any ray :)).  And It frozing in raytraced resulted window. material assigned and it was a region.It raytraced without opencl , no problem. I could not see any sample programs but I tried a couple of code to get deviceinfo, It was working.Do I need to run cpu only (without gpu)</p>
</blockquote>
<p>If it froze, you should be able to attach to the process using gdb to see where/why it's frozen.  Get the PID of the rt process, then run gdb, and run the command "attach [pid]" where [pid] is the rt process ID (e.g., 12345).</p>
<p>You shouldn't need to run cpu only.  It will try gpu and if that fails, it will fall back to cpu.</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>  I tried run rt with windbg . It did not find BRLCAD_ROOT env when begin debugging . But when I run rt with cmd   it finds, <span aria-label="unamused" class="emoji emoji-1f612" role="img" title="unamused">:unamused:</span></p>
</blockquote>
<p>I set curdir , then rt found. When compiling windbg shows "Unable to deliver callback, Unable to deliver callback, 3131" . I tihnk its a driver problem</p>
</blockquote>
<p>I tried with  a different gpu driver and uninstalled cpu_runtimes. Here is the call stack <a href="/user_uploads/1549/4yUAcLCpO_xrZoT9IIR0Qcyx/stack_trace.dat">stack_trace.dat</a></p>
</blockquote>
<p>This time , I tried with CUDA. Same simple arb8.  from windbg , no driver problem is occured but here is the stack trace <a href="/user_uploads/1549/NryXR4uM2QCb2D812vf3_Ydy/stack_trace.dat">stack_trace.dat</a> I do n ot know  about "clt_shade_segs_kernel"</p>
</blockquote>
<p>Does anyone had a chance to look ? <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="242645031"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/242645031" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#242645031">(Jun 14 2021 at 19:08)</a>:</h4>
<p>I still did not solve clEnqueueNDRangeKernel (primitive_util.c @ 1134)  problem when I tried with CUDA. Can it be a driver problem?</p>



<a name="242684457"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/242684457" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#242684457">(Jun 15 2021 at 03:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/242645031">said</a>:</p>
<blockquote>
<p>I still did not solve clEnqueueNDRangeKernel (primitive_util.c @ 1134)  problem when I tried with CUDA. Can it be a driver problem?</p>
</blockquote>
<p>Is there an example of  run only  rt_shootray with opencl  ? <span aria-label="dizzy" class="emoji emoji-1f635" role="img" title="dizzy">:dizzy:</span></p>



<a name="243221777"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/243221777" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#243221777">(Jun 19 2021 at 01:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/242645031">said</a>:</p>
<blockquote>
<p>I still did not solve clEnqueueNDRangeKernel (primitive_util.c @ 1134)  problem when I tried with CUDA. Can it be a driver problem?</p>
</blockquote>
<p>I'm not much help with that without spending a lot of time in a debugger.  I'm just not sure.  On the surface, it sounds like a driver problem.  It certainly was working before and (as far as I know) the code hasn't changed, so there's that too.</p>



<a name="243221809"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/243221809" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#243221809">(Jun 19 2021 at 01:53)</a>:</h4>
<p>Have you tried compiling a simple opencl "hello world" program to make sure opencl is working (make sure you try both gpu and cpu mode).</p>



<a name="243552179"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/openCL/near/243552179" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scorp08 <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/openCL.html#243552179">(Jun 22 2021 at 17:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> <a href="#narrow/stream/104062-general/topic/openCL/near/243221777">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="228172">scorp08</span> <a href="#narrow/stream/104062-general/topic/openCL/near/242645031">said</a>:</p>
<blockquote>
<p>I still did not solve clEnqueueNDRangeKernel (primitive_util.c @ 1134)  problem when I tried with CUDA. Can it be a driver problem?</p>
</blockquote>
<p>I'm not much help with that without spending a lot of time in a debugger.  I'm just not sure.  On the surface, it sounds like a driver problem.  It certainly was working before and (as far as I know) the code hasn't changed, so there's that too.</p>
</blockquote>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  ok thanks. I looked for an example of run rt_shootray with opencl but could not find .</p>



<hr><p>Last updated: Apr 05 2025 at 00:50 UTC</p>
</html>