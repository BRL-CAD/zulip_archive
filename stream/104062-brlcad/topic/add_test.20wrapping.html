<html>
<head><meta charset="utf-8"><title>add_test wrapping · brlcad · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/index.html">brlcad</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html">add_test wrapping</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="216234453"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216234453" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216234453">(Nov 10 2020 at 16:17)</a>:</h4>
<p>So the first thing to do is probably to replace add_test with brlcad_add_test in our code and see what breaks (if anything)</p>



<a name="216235060"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216235060" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216235060">(Nov 10 2020 at 16:20)</a>:</h4>
<p>yeah, I suppose.  should it be lowercase like that or uppercase for consistency?  do we have anything else lowercase?</p>



<a name="216235100"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216235100" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216235100">(Nov 10 2020 at 16:21)</a>:</h4>
<p>I see we have BRLCAD_REGRESSION_TEST() and friends in Targets</p>



<a name="216235149"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216235149" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216235149">(Nov 10 2020 at 16:21)</a>:</h4>
<p>Er, yeah - upper case.</p>



<a name="216235173"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216235173" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216235173">(Nov 10 2020 at 16:21)</a>:</h4>
<p>I guess we can keep that workaround, but arrgh...</p>



<a name="216235240"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216235240" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216235240">(Nov 10 2020 at 16:22)</a>:</h4>
<p>(different calling for all the space cases)</p>



<a name="216235277"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216235277" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216235277">(Nov 10 2020 at 16:22)</a>:</h4>
<p>then in the function, it'd change from calling _add_test() to add_test()</p>



<a name="216235338"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216235338" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216235338">(Nov 10 2020 at 16:22)</a>:</h4>
<p>Was that space issue specific to add_test?  If so, maybe we'd be good...</p>



<a name="216236543"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216236543" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216236543">(Nov 10 2020 at 16:30)</a>:</h4>
<p>yes, it was iirc, specific to both add_test and _add_test, but not to our function calling them -- that's why the workaround worked.  I had to backtrack to figure out whose code was ignoring empty args.</p>



<a name="216236851"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216236851" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216236851">(Nov 10 2020 at 16:32)</a>:</h4>
<p>OK, so BRLCAD_ADD_TEST may do the trick, and with ExternalProject_Add coming online any 3rd party tests we may care about will have to be handled differently anyway.</p>



<a name="216236916"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216236916" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216236916">(Nov 10 2020 at 16:33)</a>:</h4>
<p>Should I do the alteration in the extbuild branch, since that's where we've got ExternalProject_Add set up, or go ahead and do it in trunk?</p>



<a name="216238778"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216238778" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216238778">(Nov 10 2020 at 16:46)</a>:</h4>
<p>I'd say trunk as it's not really specific to the external build</p>



<a name="216238879"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216238879" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216238879">(Nov 10 2020 at 16:47)</a>:</h4>
<p>and then merge back to extbuild</p>
<p>want me to refactor trunk?</p>



<a name="216242360"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216242360" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216242360">(Nov 10 2020 at 17:11)</a>:</h4>
<p>If you've got time, but more urgent is probably to try extbuild on the Mac</p>



<a name="216242678"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216242678" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216242678">(Nov 10 2020 at 17:13)</a>:</h4>
<p>I'm hitting some odd-pathnames test issues (a couple of which I'm not really sure are resolvable - if the external build system doesn't like them...) but if the Windows issue really has been addressed then I'm closing in on merge.</p>



<a name="216268595"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216268595" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216268595">(Nov 10 2020 at 20:22)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I switched the wrapper - getting a couple new bu_vls_simplify failures, but not sure why yet...</p>



<a name="216268851"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216268851" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216268851">(Nov 10 2020 at 20:24)</a>:</h4>
<p>Ah!  that's the empty failure.</p>



<a name="216268870"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216268870" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216268870">(Nov 10 2020 at 20:24)</a>:</h4>
<p>/me tries to boil it down</p>



<a name="216269204"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216269204" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216269204">(Nov 10 2020 at 20:26)</a>:</h4>
<p>I just commented again on the github issue.  The chunk of code that packs and unpacks is probably still necessary unless there's some way to forward a subset of argv quoted.</p>



<a name="216269301"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216269301" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216269301">(Nov 10 2020 at 20:27)</a>:</h4>
<p>what little digging I did indicates it's an issue with forwarding ${ARGV}'s in general</p>



<a name="216269336"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216269336" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216269336">(Nov 10 2020 at 20:27)</a>:</h4>
<p>so we happened to hit it in our override function, but it's an issue for any function</p>



<a name="216271658"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/add_test%20wrapping/near/216271658" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/add_test.20wrapping.html#216271658">(Nov 10 2020 at 20:44)</a>:</h4>
<p>There we go - restored and working.</p>



<hr><p>Last updated: Feb 24 2026 at 01:12 UTC</p>
</html>