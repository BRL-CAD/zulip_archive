<html>
<head><meta charset="utf-8"><title>tests · brlcad · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/index.html">brlcad</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html">tests</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="128791418"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/128791418" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cezar <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#128791418">(Jun 28 2018 at 20:06)</a>:</h4>
<p>i've tried running the tests, and regressions from 829 onwards are timing out</p>



<a name="128791777"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/128791777" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saran Narayan <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#128791777">(Jun 28 2018 at 20:14)</a>:</h4>
<p>it works fine for me here</p>



<a name="128791824"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/128791824" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saran Narayan <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#128791824">(Jun 28 2018 at 20:15)</a>:</h4>
<p><a href="https://hastebin.com/ejokomojaf" target="_blank" title="https://hastebin.com/ejokomojaf">https://hastebin.com/ejokomojaf</a></p>



<a name="128792807"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/128792807" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cezar <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#128792807">(Jun 28 2018 at 20:35)</a>:</h4>
<p>hmm... ok, then the error is on my end. thanks</p>



<a name="130342649"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130342649" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cezar <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130342649">(Jul 26 2018 at 13:15)</a>:</h4>
<p>i tried running the tests, and the rtwizard regressions fail (853 to 859, from A to F + edge only)</p>



<a name="130343494"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130343494" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130343494">(Jul 26 2018 at 13:27)</a>:</h4>
<p>yes, and I confirmed they fail too a while back.  they look like genuine regressions that somehow only affect mac</p>



<a name="130343559"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130343559" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cezar <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130343559">(Jul 26 2018 at 13:28)</a>:</h4>
<p>are you referring to our previous discussion? because then, only D was failing. the others were fine</p>



<a name="130344524"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130344524" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130344524">(Jul 26 2018 at 13:43)</a>:</h4>
<p>ah, good point -- the disease is spreading</p>



<a name="130344570"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130344570" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130344570">(Jul 26 2018 at 13:44)</a>:</h4>
<p>the new ones may be unrelated, will have to check them</p>



<a name="130528685"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130528685" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Pronai <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130528685">(Jul 29 2018 at 15:41)</a>:</h4>
<p>I still have those regression failures from months ago and I'm on Linux</p>



<a name="130528972"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130528972" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cezar <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130528972">(Jul 29 2018 at 15:50)</a>:</h4>
<p>rtwizard regressions? or others? also, what linux + compiler?</p>



<a name="130529758"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130529758" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Pronai <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130529758">(Jul 29 2018 at 16:19)</a>:</h4>
<div class="codehilite"><pre><span></span>$ gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-pc-linux-gnu/8.1.1/lto-wrapper
Target: x86_64-pc-linux-gnu
Configured with: /build/gcc/src/gcc/configure --prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=https://bugs.archlinux.org/ --enable-languages=c,c++,ada,fortran,go,lto,objc,obj-c++ --enable-shared --enable-threads=posix --enable-libmpx --with-system-zlib --with-isl --enable-__cxa_atexit --disable-libunwind-exceptions --enable-clocale=gnu --disable-libstdcxx-pch --disable-libssp --enable-gnu-unique-object --enable-linker-build-id --enable-lto --enable-plugin --enable-install-libiberty --with-linker-hash-style=gnu --enable-gnu-indirect-function --enable-multilib --disable-werror --enable-checking=release --enable-default-pie --enable-default-ssp
Thread model: posix
gcc version 8.1.1 20180531 (GCC)
</pre></div>


<div class="codehilite"><pre><span></span>The following tests FAILED:
      1 - NOTE: some &#39;test&#39; tests are expected to fail, &#39;regress&#39; must pass (Failed)
    824 - regress-solids (Failed)
    828 - regress-weight (Failed)
    831 - regress-usage (Timeout)
    853 - regress-rtwizard-rtwiz_m35_A (Timeout)
    854 - regress-rtwizard-rtwiz_m35_B (Timeout)
    855 - regress-rtwizard-rtwiz_m35_C (Timeout)
    856 - regress-rtwizard-rtwiz_m35_D (Timeout)
    857 - regress-rtwizard-rtwiz_m35_E (Timeout)
    858 - regress-rtwizard-rtwiz_m35_F (Timeout)
    859 - regress-rtwizard-rtwiz_m35_edge_only (Timeout)
    860 - regress-rtwizard-rtwiz_m35_edge_only_color (Timeout)
</pre></div>



<a name="130530114"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130530114" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Pronai <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130530114">(Jul 29 2018 at 16:19)</a>:</h4>
<p>i could try it with Clang if necessary</p>



<a name="130533274"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130533274" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cezar <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130533274">(Jul 29 2018 at 17:50)</a>:</h4>
<p>you can try to <code>ctest -V -I 831,831</code> for example, to get more info on why 831 is timing out</p>



<a name="130934744"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130934744" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cezar <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130934744">(Aug 05 2018 at 15:22)</a>:</h4>
<p><a href="https://sourceforge.net/p/brlcad/code/71347/#diff-4" target="_blank" title="https://sourceforge.net/p/brlcad/code/71347/#diff-4">in r71347</a>, <code>rt</code> was made to return 0 when (extended?) usage is printed, causing <code>regress-usage</code> to fail (it expects <code>rt -?</code> to have exit code 1). i changed <code>rt</code> to return 1 when the extended usage is printed, but i'm not sure if this is the way to go (if i should've changed the test instead)</p>



<a name="130973943"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130973943" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cezar <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130973943">(Aug 06 2018 at 11:58)</a>:</h4>
<p>some tests are failing on my computer (814, 817, 822). i've traced the problem to running <code>make sph sph</code> inside <code>mged</code>. i've traced the problem to <code>mged/chgmodel.c:f_make</code>, which expands the command to <code>make -o -0 -0 -0 -s 1000 sph sph</code>. after that, <code>ged_make</code> tries to parse <code>-o</code> and expects an argument to <code>-o</code>, but then sees that <code>-0</code> starts with a minus and thinks that <code>-o</code> received no arguments</p>



<a name="130974050"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130974050" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cezar <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130974050">(Aug 06 2018 at 12:00)</a>:</h4>
<p>i don't know why the tests are failing now (a few weeks ago they did not), and i don't know what the proper fix is. what i did was to remove the <code>-</code> from <code>sprintf</code> in <code>f_make</code>, but there are other places in the code which also put the minus there, and i think minus goes in the opposite direction, so it changes the logic if you remove it</p>



<a name="130987279"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130987279" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130987279">(Aug 06 2018 at 15:56)</a>:</h4>
<blockquote>
<p><a href="https://sourceforge.net/p/brlcad/code/71347/#diff-4" target="_blank" title="https://sourceforge.net/p/brlcad/code/71347/#diff-4">in r71347</a>, <code>rt</code> was made to return 0 when (extended?) usage is printed, causing <code>regress-usage</code> to fail (it expects <code>rt -?</code> to have exit code 1). i changed <code>rt</code> to return 1 when the extended usage is printed, but i'm not sure if this is the way to go (if i should've changed the test instead)</p>
</blockquote>
<p>I think the test should be updated.  The user requested help and the tool did exactly that, no error.  Non-zero is supposed to imply something went wrong, not just whenever usage is printed.</p>



<a name="130987891"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130987891" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130987891">(Aug 06 2018 at 16:06)</a>:</h4>
<blockquote>
<p>some tests are failing on my computer (814, 817, 822). i've traced the problem to running <code>make sph sph</code> inside <code>mged</code>. i've traced the problem to <code>mged/chgmodel.c:f_make</code>, which expands the command to <code>make -o -0 -0 -0 -s 1000 sph sph</code>. after that, <code>ged_make</code> tries to parse <code>-o</code> and expects an argument to <code>-o</code>, but then sees that <code>-0</code> starts with a minus and thinks that <code>-o</code> received no arguments</p>
</blockquote>
<p><span class="user-mention" data-user-id="106398">@Cezar</span> that failure is my fault, I'm working on it -- support was added for optional commands but it affected other behavior.</p>



<a name="130987898"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/130987898" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#130987898">(Aug 06 2018 at 16:06)</a>:</h4>
<p>unit tests are doing their job :)</p>



<a name="284772325"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/284772325" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#284772325">(Jun 02 2022 at 16:48)</a>:</h4>
<p>just FYI, looks like I'm finally getting to the bottom of the apparent rabbit hole fixing the integration issues of recent.  there's still an issue that affects my testing on linux, but I should have the regression failures knocked back out soon, this week.</p>



<a name="284774164"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/284774164" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#284774164">(Jun 02 2022 at 17:03)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="289888407"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/289888407" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#289888407">(Jul 17 2022 at 14:44)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I know there's been a lot going on - just curious where the regression fixes are in the queue?</p>



<a name="289917106"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/tests/near/289917106" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/tests.html#289917106">(Jul 18 2022 at 02:44)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> they're top of the queue now that last week is done, so my fingers are crossed for knocking them out</p>



<hr><p>Last updated: Aug 25 2024 at 00:44 UTC</p>
</html>