<html>
<head><meta charset="utf-8"><title>windows runner error · brlcad · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/index.html">brlcad</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html">windows runner error</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="215374390"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215374390" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215374390">(Nov 02 2020 at 20:31)</a>:</h4>
<div class="codehilite"><pre><span></span><code>2/3295] Performing build step for &#39;TCL_BLD&#39;
FAILED: src/other/ext/TCL_BLD-prefix/src/TCL_BLD-stamp/TCL_BLD-build
cmd.exe /C &quot;cd /D D:\a\cadcitest\cadcitest\build\src\other\ext\TCL_BLD-prefix\src\TCL_BLD\win &amp;&amp; &quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Auxiliary\Build\vcvars64.bat&quot; &amp;&amp; nmake -f makefile.vc INSTALLDIR=D:/a/cadcitest/cadcitest/build/extinstall/tcl SUFX= &amp;&amp; D:\a\_temp\-575274851\cmake-3.18.3-win64-x64\bin\cmake.exe -E touch D:/a/cadcitest/cadcitest/build/src/other/ext/TCL_BLD-prefix/src/TCL_BLD-stamp/TCL_BLD-build&quot;
**********************************************************************
** Visual Studio 2019 Developer Command Prompt v16.7.6
** Copyright (c) 2020 Microsoft Corporation
**********************************************************************
[ERROR:team_explorer.bat] Directory not found : &quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\Common7\IDE;DOTNET_MULTILEVEL_LOOKUP=0CommonExtensions\Microsoft\TeamFoundation\Team Explorer&quot;
[ERROR:VsDevCmd.bat] *** VsDevCmd.bat encountered errors. Environment may be incomplete and/or incorrect. ***
[ERROR:VsDevCmd.bat] In an uninitialized command prompt, please &#39;set VSCMD_DEBUG=[value]&#39; and then re-run
[ERROR:VsDevCmd.bat] vsdevcmd.bat [args] for additional details.
[ERROR:VsDevCmd.bat] Where [value] is:
[ERROR:VsDevCmd.bat]    1 : basic debug logging
[ERROR:VsDevCmd.bat]    2 : detailed debug logging
[ERROR:VsDevCmd.bat]    3 : trace level logging. Redirection of output to a file when using this level is recommended.
[ERROR:VsDevCmd.bat] Example: set VSCMD_DEBUG=3
[ERROR:VsDevCmd.bat]          vsdevcmd.bat &gt; vsdevcmd.trace.txt 2&gt;&amp;1
ninja: build stopped: subcommand failed.
CMake Error at D:/a/_temp/449c7ed4-647d-4a1f-acb2-aae9481a6426:55 (message):
  Bad exit status
</code></pre></div>



<a name="215376917"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215376917" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215376917">(Nov 02 2020 at 20:51)</a>:</h4>
<p><a href="https://renenyffenegger.ch/notes/Windows/development/Visual-Studio/environment-variables/index">https://renenyffenegger.ch/notes/Windows/development/Visual-Studio/environment-variables/index</a></p>



<a name="215377730"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215377730" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215377730">(Nov 02 2020 at 20:58)</a>:</h4>
<p>set VSCMD_DEBUG=3</p>



<a name="215377803"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215377803" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215377803">(Nov 02 2020 at 20:58)</a>:</h4>
<p><a href="https://brlcad.org/~starseeker/github_env.txt">https://brlcad.org/~starseeker/github_env.txt</a></p>



<a name="215378597"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215378597" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215378597">(Nov 02 2020 at 21:05)</a>:</h4>
<p><a href="https://developercommunity.visualstudio.com/content/problem/359683/vs2017-developer-command-prompt-directory-not-foun.html">https://developercommunity.visualstudio.com/content/problem/359683/vs2017-developer-command-prompt-directory-not-foun.html</a></p>



<a name="215379088"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215379088" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215379088">(Nov 02 2020 at 21:09)</a>:</h4>
<p><a href="https://superuser.com/questions/539666/how-to-get-the-visual-studio-installation-path-in-a-batch-file">https://superuser.com/questions/539666/how-to-get-the-visual-studio-installation-path-in-a-batch-file</a></p>



<a name="215385161"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215385161" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215385161">(Nov 02 2020 at 21:59)</a>:</h4>
<p>For those who may see this later - the problem looks like it is in our .yml file's handling of the output of the bat file's output .  It's doing some parsing, and it looks like file(STRINGS) in CMake isn't properly producing one-entry-per-line if the last character on the line is a back slash ('\')</p>



<a name="215398936"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215398936" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215398936">(Nov 03 2020 at 00:45)</a>:</h4>
<p>Well, that was a problem but not the problem - still getting that failure.</p>



<a name="215405591"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215405591" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215405591">(Nov 03 2020 at 02:08)</a>:</h4>
<p>The environment vars showed the right values for VCINSTALLDIRS and the other envdir one?</p>



<a name="215406561"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215406561" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215406561">(Nov 03 2020 at 02:21)</a>:</h4>
<p>I see you're going another route and so be it, but I do find it concerning as it implies a house of sand.  :(  strongly implies something about the env is wrong.  could be minor, could be major.  either way, makes future errors suspect.  I certainly wouldn't / won't trust an error is not something underlying  or something in the workaround; it's going to slow down future dev.   is there someone we could ask for help?</p>



<a name="215407009"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215407009" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215407009">(Nov 03 2020 at 02:30)</a>:</h4>
<p>Not sure - would have to construct a minimal test case and see if we can interest github, I suppose...</p>



<a name="215407021"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215407021" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215407021">(Nov 03 2020 at 02:31)</a>:</h4>
<p>(Environment appears to show the right vars, yes)</p>



<a name="215413895"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215413895" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215413895">(Nov 03 2020 at 05:24)</a>:</h4>
<p>Here's a build log: <a href="/user_uploads/1549/-QSIQ32MNgBZOmdUL3yRcUEP/build.log">build.log</a> </p>
<p>Appears to be a few new issues it warns about, but appears to ignore.   Different build settings from trunk?  It eventually fails on the tclint header.  Let me know if you'd like me to check anything.</p>



<a name="215447710"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215447710" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215447710">(Nov 03 2020 at 12:41)</a>:</h4>
<p>OK, it's picking up your system framework Tcl headers even though the bundled libraries are enabled.  Grr...</p>
<p>The src/other builds are more verbose right now since their configure and build processes aren't getting the silencing flags from the old src/other setup - eventually I can try to pipe that to files or something so it isn't so loud, but right now we need it to see what's going on.</p>



<a name="215448784"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215448784" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215448784">(Nov 03 2020 at 12:52)</a>:</h4>
<p>Urk.  Actually, this may be worse than include paths...  that's our tclInt.h, although I don't know why we're getting a system tcl.h...</p>



<a name="215448857"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215448857" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215448857">(Nov 03 2020 at 12:53)</a>:</h4>
<p>Is the Tcl.framework based on 8.5?  That might explain that particular error...</p>



<a name="215448928"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215448928" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215448928">(Nov 03 2020 at 12:54)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> Can you do a make VERBOSE=1 so we can see where it's including things from?</p>



<a name="215449171"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215449171" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215449171">(Nov 03 2020 at 12:57)</a>:</h4>
<p>If we've got the wrong Tcl include path that's easily explained, so I'm hoping that's what we're into here...</p>



<a name="215451840"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215451840" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215451840">(Nov 03 2020 at 13:23)</a>:</h4>
<p>OK, I can reproduce the vsvars issue in my smaller citest repo - I'll see if I can dig a bit.</p>



<a name="215465447"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215465447" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215465447">(Nov 03 2020 at 15:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/windows.20runner.20error/near/215448928">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> Can you do a make VERBOSE=1 so we can see where it's including things from?</p>
</blockquote>
<p>Certainly, give me a few</p>



<a name="215465689"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215465689" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215465689">(Nov 03 2020 at 15:10)</a>:</h4>
<p>and yeah, I don't think verbosity is so much an issue as it is whether any of the warnings are new indicators of some other issue.  Most of the ones I saw didn't appear to be verbosity-related, but subtle misconfiguration (tcl/tk being obvious but there were others).</p>



<a name="215466614"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215466614" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215466614">(Nov 03 2020 at 15:17)</a>:</h4>
<p>for example, the very first warning -  it's compiling tcl/compat/strstr.c, but that shouldn't be happening (I think); and it reporting that tcl and tk are using a different prefix (perhaps this is system tcl but appears to be ours in the configure output).</p>



<a name="215469350"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215469350" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215469350">(Nov 03 2020 at 15:37)</a>:</h4>
<p>The check there is to see what the vanilla tcl build does on that platform - I may be feeding it some options that are causing it problems...</p>



<a name="215497219"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215497219" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215497219">(Nov 03 2020 at 19:03)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I made a few adjustments to extbuild, one of which has some slight potential to improve the Tcl/Tk build behavior.</p>



<a name="215497340"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215497340" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215497340">(Nov 03 2020 at 19:04)</a>:</h4>
<p>I'm trying another approach to the github CI yml file, one that doesn't require parsing the vsvars output with CMake.</p>



<a name="215498225"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215498225" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215498225">(Nov 03 2020 at 19:12)</a>:</h4>
<p>hey, can I try helping you with the CI yml file? I also know a little bit about them.</p>



<a name="215498578"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215498578" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215498578">(Nov 03 2020 at 19:16)</a>:</h4>
<p><span class="user-mention" data-user-id="247135">@Sumagna Das</span> the current version is in misc/repoconv/github_ci_actions.yml</p>



<a name="215498638"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215498638" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215498638">(Nov 03 2020 at 19:17)</a>:</h4>
<p>It does some elaborate steps - I'm trying to simplify currently:  <a href="https://github.com/starseeker/cadcitest/blob/master/.github/workflows/btest.yml">https://github.com/starseeker/cadcitest/blob/master/.github/workflows/btest.yml</a></p>



<a name="215498916"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215498916" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215498916">(Nov 03 2020 at 19:19)</a>:</h4>
<p>Reading in the vsvars.bat output seems to be fragile - I was able to confirm that doing the ENV trick with its output caused the breakage we were seeing trying to subsequently run it again, although I'm not sure why yet.</p>



<a name="215499035"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215499035" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215499035">(Nov 03 2020 at 19:20)</a>:</h4>
<p>So, rather than jump through all the hoops, we can instead just do a simpler one-per-platform definition that is easier to understand, even if there is some duplication in some of the per-OS steps.</p>



<a name="215499134"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215499134" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215499134">(Nov 03 2020 at 19:21)</a>:</h4>
<p>That seems to be work OK so far (currently testing) but the build for the extbuild branch is currently broken for some other reason (at the moment exp2cxx is wiping out with an Abort trap error) so I haven't yet been able to do a full test.</p>



<a name="215499526"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215499526" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215499526">(Nov 03 2020 at 19:25)</a>:</h4>
<p>The way I'm testing in the cadcitest repo is just checking in the current CAD sources, and then setting up the actions.  Hopefully, once we eventually migrate to github we'll have the actions defined and ready to turn on.</p>



<a name="215500405"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215500405" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumagna Das <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215500405">(Nov 03 2020 at 19:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/windows.20runner.20error/near/215498578">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="247135">Sumagna Das</span> the current version is in misc/repoconv/github_ci_actions.yml</p>
</blockquote>
<p>will look into the file ASAP.</p>



<a name="215512888"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215512888" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215512888">(Nov 03 2020 at 21:33)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> here's the updated log without and with verbose (on the second pass): <a href="/user_uploads/1549/MkshZi5AgE_6el-Y30kcK94d/build-77668.log">build-77668.log</a></p>



<a name="215514551"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215514551" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215514551">(Nov 03 2020 at 21:54)</a>:</h4>
<p>OK, yeah - we're definitely getting the Tcl and Tk frameworks in when we shouldn't be.</p>



<a name="215514859"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215514859" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215514859">(Nov 03 2020 at 21:57)</a>:</h4>
<p>What's supposed to happen is the find_package(TCL) call in itcl3/CMakeLists.txt should be using the TCL_ROOT passed to it from the parent build, finding the staged Tcl in the build directory, and using that to populate the Tcl variables.  Let's see...</p>



<a name="215514953"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215514953" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215514953">(Nov 03 2020 at 21:58)</a>:</h4>
<p>let me know if you need any other files/tests</p>



<a name="215514985"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215514985" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215514985">(Nov 03 2020 at 21:59)</a>:</h4>
<p>TCL_FRAMEWORK_INCLUDES is the most likely culprit I can see at a glance...</p>



<a name="215515133"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515133" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515133">(Nov 03 2020 at 22:00)</a>:</h4>
<p>fighting my own build demons.  tried switching one of my debugging sessions to a different linux system and it's crapping out on the lib_regex test despite having gcc/g++ 11</p>



<a name="215515174"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515174" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515174">(Nov 03 2020 at 22:01)</a>:</h4>
<p>Ugh.</p>



<a name="215515462"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515462" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515462">(Nov 03 2020 at 22:04)</a>:</h4>
<p>Doh!  Could it be that simple?</p>



<a name="215515483"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515483" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515483">(Nov 03 2020 at 22:04)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> r77674 may help with it pulling the wrong include dirs.</p>



<a name="215515512"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515512" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515512">(Nov 03 2020 at 22:04)</a>:</h4>
<p>I'll give it a try</p>



<a name="215515521"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515521" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515521">(Nov 03 2020 at 22:05)</a>:</h4>
<p>What's the Linux system wiping out on the lib_regex error?</p>



<a name="215515535"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515535" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515535">(Nov 03 2020 at 22:05)</a>:</h4>
<p>Must admit I've not hit that problem in a while...</p>



<a name="215515587"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515587" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515587">(Nov 03 2020 at 22:06)</a>:</h4>
<p>it's one of the gcc compile farm nodes (gcc110)</p>



<a name="215515684"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515684" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515684">(Nov 03 2020 at 22:07)</a>:</h4>
<p>CentOS7?</p>



<a name="215515715"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515715" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515715">(Nov 03 2020 at 22:07)</a>:</h4>
<p>You'll need scl enable devtoolset on that OS, IIRC</p>



<a name="215515814"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515814" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515814">(Nov 03 2020 at 22:08)</a>:</h4>
<p>I've got the steps in doc/README.Linux, IIRC</p>



<a name="215515859"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515859" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515859">(Nov 03 2020 at 22:08)</a>:</h4>
<p>this is my own toolchain for debugging, gcc11 + latest cmake</p>



<a name="215515889"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515889" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515889">(Nov 03 2020 at 22:09)</a>:</h4>
<p>and scl is not installed</p>



<a name="215515992"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215515992" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215515992">(Nov 03 2020 at 22:10)</a>:</h4>
<p>Blegh.  I've tried to bootstrap my own toolchain a time or two - it's no cakewalk, especially if you need a newer libstdc++ or some such to keep it company.</p>



<a name="215516371"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215516371" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215516371">(Nov 03 2020 at 22:14)</a>:</h4>
<p>(sorry, I thought you were referring to a C++ 11 enabled g++, not g++ version 11)</p>



<a name="215525417"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215525417" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215525417">(Nov 03 2020 at 23:46)</a>:</h4>
<p>I've bootstrapped dozens of times, usually no issue.  It's not that complicated -- everything literally boils down to preprocessor, compiler, or linker and the first two are usually hard-wired together.</p>



<a name="215525453"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215525453" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215525453">(Nov 03 2020 at 23:46)</a>:</h4>
<p>Got it working.  Just forgot that gcc/g++ defers to ld, and I hadn't specified the path to the gcc I installed.</p>



<a name="215526960"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215526960" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215526960">(Nov 04 2020 at 00:08)</a>:</h4>
<p>That's a newer gcc than anything I've built with - do they have anything majorly interesting in the newer versions?</p>



<a name="215579719"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215579719" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215579719">(Nov 04 2020 at 13:30)</a>:</h4>
<p>yeah, it's now reporting a slew of type mismatches and type-based pointer over-read conditions that it wasn't before.  which is funny because these are the opposite type changes that were necessary back in the early 00's to keep optimizers happy.</p>



<a name="215645143"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215645143" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215645143">(Nov 04 2020 at 21:42)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> did that FindTCL fix help with the Mac build?</p>



<a name="215927836"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/windows%20runner%20error/near/215927836" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/windows.20runner.20error.html#215927836">(Nov 07 2020 at 02:49)</a>:</h4>
<p>I hadn’t noticed that you’d made a change but I have recompiled since then successfully.  Should I be testing enable all or default?</p>



<hr><p>Last updated: Jul 03 2025 at 00:56 UTC</p>
</html>