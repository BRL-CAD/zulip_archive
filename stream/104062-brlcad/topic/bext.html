<html>
<head><meta charset="utf-8"><title>bext · brlcad · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/index.html">brlcad</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html">bext</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="421967391"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/bext/near/421967391" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html#421967391">(Feb 17 2024 at 02:33)</a>:</h4>
<p>For those experimenting with bext, the latest main will now clone and build its own copy of bext as part of the configure stage if a BRLCAD_EXT_DIR location isn't supplied.</p>



<a name="455960417"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/bext/near/455960417" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html#455960417">(Aug 02 2024 at 15:10)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> If you're going to remove the src/bext submodule, be sure to update the docs and remove the build logic that checks for it</p>



<a name="456036990"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/bext/near/456036990" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html#456036990">(Aug 02 2024 at 20:26)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span>  Ooops, I just saw an empty dir and thought it was leftover.  Where does it check for it?  Why does it need to be there empty?</p>



<a name="456052905"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/bext/near/456052905" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html#456052905">(Aug 02 2024 at 22:26)</a>:</h4>
<p><a href="https://github.com/BRL-CAD/brlcad/blob/main/misc/CMake/BRLCAD_EXT_Setup.cmake#L50">https://github.com/BRL-CAD/brlcad/blob/main/misc/CMake/BRLCAD_EXT_Setup.cmake#L50</a></p>



<a name="456052933"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/bext/near/456052933" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html#456052933">(Aug 02 2024 at 22:26)</a>:</h4>
<p>That's how unpopulated submodules in git work, AFAIK - a shallow bext clone is like that, as well</p>



<a name="456109914"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/bext/near/456109914" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html#456109914">(Aug 03 2024 at 06:02)</a>:</h4>
<p>okay, so it's currently looking for it that way.. and that possibly explains some other issues I kept running into. </p>
<p>bit unexpected to have running something in the build dir affect the source tree by default.  I assumed it was cloning into the build dir.  Invoking action was a build action, so it probably shouldn't be touching the source dir.</p>
<p>Any reason it couldn't just be an external project add like bext is doing?  That way, the clone rule will live in the build logic and the files will be in the build tree.</p>



<a name="456158063"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/bext/near/456158063" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html#456158063">(Aug 03 2024 at 13:16)</a>:</h4>
<p>If the cmake configure does a clone, it <em>is</em> doing it in the build dir.  The submodule in src/ was to allow a single git clone command to download everything needed for any BRL-CAD build config, in a single shot</p>



<a name="456158228"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/bext/near/456158228" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html#456158228">(Aug 03 2024 at 13:17)</a>:</h4>
<p>If the user clones BRL-CAD with a git clone --recursive, then (and only then) src/bext is populated.  Otherwise, everything happens in the build directory</p>



<a name="456177994"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/bext/near/456177994" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html#456177994">(Aug 03 2024 at 15:36)</a>:</h4>
<p>Ahh, okay, so then it doesn't explain some other issues I kept running into...</p>



<a name="456178292"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/bext/near/456178292" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html#456178292">(Aug 03 2024 at 15:38)</a>:</h4>
<p>Weird.  I never did the recursive, but the auto kept giving me trouble.  I've since switched to a manual build of bext because it would be broken after any change to a submodule (different reasons iirc).</p>



<a name="456178560"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/bext/near/456178560" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html#456178560">(Aug 03 2024 at 15:39)</a>:</h4>
<p>So then sounds like there's three ways -- a recursive clone into src, an auto clone into builddir, or manual BRLCAD_EXT_DIR</p>



<a name="456197123"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/bext/near/456197123" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html#456197123">(Aug 03 2024 at 17:50)</a>:</h4>
<p>Correct.</p>



<a name="456197324"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/bext/near/456197324" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/bext.html#456197324">(Aug 03 2024 at 17:51)</a>:</h4>
<p>The first is intended for the "I don't care about disk space, make sure I've got everything I'll ever need" case.  The second is the "only build what I need for this config of BRL-CAD" case.  The third is the "I'm going to be compiling this sucker a lot, I don't want to keep rebuilding this" case.</p>



<hr><p>Last updated: Aug 06 2024 at 00:40 UTC</p>
</html>