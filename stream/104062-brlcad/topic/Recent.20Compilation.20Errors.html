<html>
<head><meta charset="utf-8"><title>Recent Compilation Errors · brlcad · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/index.html">brlcad</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html">Recent Compilation Errors</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="193406706"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/193406706" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#193406706">(Apr 09 2020 at 04:41)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> Looks like build is Sad Mac.  It finds system Tcl/Tk but then fails to find TCL_STUB_LIBRARY: </p>
<div class="codehilite"><pre><span></span>Compile Tcl ........................: OFF
Compile Tk .........................: OFF
Compile Itcl/Itk ...................: OFF
Compile Iwidgets ...................: OFF
Compile Tkhtml .....................: ON
Compile Tktable ....................: OFF
Compile libpng .....................: OFF
Compile libregex ...................: OFF
Compile zlib .......................: OFF
Compile Utah Raster Toolkit ........: ON
Compile openNURBS ..................: ON
Compile STEPcode....................: ON

OpenGL support <span class="o">(</span>optional<span class="o">)</span> ..........: ON
X11 support <span class="o">(</span>optional<span class="o">)</span> .............: ON
Qt support <span class="o">(</span>optional<span class="o">)</span> ..............: OFF
Run-time debuggability <span class="o">(</span>optional<span class="o">)</span> ..: ON

Build <span class="m">32</span>/64-bit release ............: 64BIT <span class="o">(</span>Auto<span class="o">)</span>
Build optimized release ............: OFF
Build static libraries .............: ON
Build dynamic libraries ............: ON
Install example geometry models ....: ON
Generate extra docs ................: ON <span class="o">(</span>html/man<span class="o">)</span>

Elapsed configuration time: <span class="m">2</span> minutes <span class="m">22</span> seconds
-- Configuring <span class="k">done</span>
CMake Error: The following variables are used in this project, but they are <span class="nb">set</span> to NOTFOUND.
Please <span class="nb">set</span> them or make sure they are <span class="nb">set</span> and tested correctly in the CMake files:
TCL_STUB_LIBRARY
    linked by target <span class="s2">&quot;Tkhtml&quot;</span> in directory /Users/morrison/brlcad.trunk/src/other/tkhtml

-- Generating <span class="k">done</span>
CMake Generate step failed.  Build files cannot be regenerated correctly.
</pre></div>



<a name="193445333"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/193445333" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#193445333">(Apr 09 2020 at 12:53)</a>:</h4>
<p>Erm.  Does Apple's install of Tcl/Tk have the stub library?  (Alternately, we might try just TCL_LIBRARY on Mac...)</p>



<a name="193445399"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/193445399" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#193445399">(Apr 09 2020 at 12:54)</a>:</h4>
<p>What does ENABLE_ALL do?</p>



<a name="194522900"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/194522900" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#194522900">(Apr 18 2020 at 03:08)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> build is still sad mac with enable all too</p>



<a name="194522911"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/194522911" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#194522911">(Apr 18 2020 at 03:08)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="p">[</span> <span class="mi">56</span><span class="o">%</span><span class="p">]</span> <span class="n">Building</span> <span class="n">C</span> <span class="n">object</span> <span class="n">src</span><span class="o">/</span><span class="n">other</span><span class="o">/</span><span class="n">tcl</span><span class="o">/</span><span class="n">CMakeFiles</span><span class="o">/</span><span class="n">tcl</span><span class="p">.</span><span class="n">dir</span><span class="o">/</span><span class="n">unix</span><span class="o">/</span><span class="n">tclLoadDyld</span><span class="p">.</span><span class="n">c</span><span class="p">.</span><span class="n">o</span>
<span class="p">[</span> <span class="mi">56</span><span class="o">%</span><span class="p">]</span> <span class="n">Linking</span> <span class="n">C</span> <span class="n">shared</span> <span class="n">library</span> <span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libtcl</span><span class="p">.</span><span class="n">dylib</span>
<span class="n">duplicate</span> <span class="n">symbol</span> <span class="err">&#39;</span><span class="n">_TclpDlopen</span><span class="err">&#39;</span> <span class="nl">in</span><span class="p">:</span>
    <span class="n">CMakeFiles</span><span class="o">/</span><span class="n">tcl</span><span class="p">.</span><span class="n">dir</span><span class="o">/</span><span class="n">unix</span><span class="o">/</span><span class="n">tclLoadDl</span><span class="p">.</span><span class="n">c</span><span class="p">.</span><span class="n">o</span>
    <span class="n">CMakeFiles</span><span class="o">/</span><span class="n">tcl</span><span class="p">.</span><span class="n">dir</span><span class="o">/</span><span class="n">unix</span><span class="o">/</span><span class="n">tclLoadDyld</span><span class="p">.</span><span class="n">c</span><span class="p">.</span><span class="n">o</span>
<span class="n">duplicate</span> <span class="n">symbol</span> <span class="err">&#39;</span><span class="n">_TclGuessPackageName</span><span class="err">&#39;</span> <span class="nl">in</span><span class="p">:</span>
    <span class="n">CMakeFiles</span><span class="o">/</span><span class="n">tcl</span><span class="p">.</span><span class="n">dir</span><span class="o">/</span><span class="n">unix</span><span class="o">/</span><span class="n">tclLoadDl</span><span class="p">.</span><span class="n">c</span><span class="p">.</span><span class="n">o</span>
    <span class="n">CMakeFiles</span><span class="o">/</span><span class="n">tcl</span><span class="p">.</span><span class="n">dir</span><span class="o">/</span><span class="n">unix</span><span class="o">/</span><span class="n">tclLoadDyld</span><span class="p">.</span><span class="n">c</span><span class="p">.</span><span class="n">o</span>
<span class="nl">ld</span><span class="p">:</span> <span class="mi">2</span> <span class="n">duplicate</span> <span class="n">symbols</span> <span class="k">for</span> <span class="n">architecture</span> <span class="n">x86_64</span>
<span class="nl">clang</span><span class="p">:</span> <span class="nl">error</span><span class="p">:</span> <span class="n">linker</span> <span class="n">command</span> <span class="n">failed</span> <span class="n">with</span> <span class="n">exit</span> <span class="n">code</span> <span class="mi">1</span> <span class="p">(</span><span class="n">use</span> <span class="o">-</span><span class="n">v</span> <span class="n">to</span> <span class="n">see</span> <span class="n">invocation</span><span class="p">)</span>
<span class="n">make</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">:</span> <span class="o">***</span> <span class="p">[</span><span class="n">lib</span><span class="o">/</span><span class="n">libtcl</span><span class="mf">.8.6.10</span><span class="p">.</span><span class="n">dylib</span><span class="p">]</span> <span class="n">Error</span> <span class="mi">1</span>
<span class="n">make</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span> <span class="o">***</span> <span class="p">[</span><span class="n">src</span><span class="o">/</span><span class="n">other</span><span class="o">/</span><span class="n">tcl</span><span class="o">/</span><span class="n">CMakeFiles</span><span class="o">/</span><span class="n">tcl</span><span class="p">.</span><span class="n">dir</span><span class="o">/</span><span class="n">all</span><span class="p">]</span> <span class="n">Error</span> <span class="mi">2</span>
</pre></div>



<a name="194526056"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/194526056" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#194526056">(Apr 18 2020 at 04:49)</a>:</h4>
<p>Looks like Mac is even more sad I skip that error.  Termio compile errors next, missing libbu symbols.</p>



<a name="194543486"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/194543486" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#194543486">(Apr 18 2020 at 13:01)</a>:</h4>
<p>Ah, that's me - I switched a couple logging statements and string opts to bu versions</p>



<a name="194543494"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/194543494" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#194543494">(Apr 18 2020 at 13:01)</a>:</h4>
<p>forgot to update libtermio CMakeLists.txt</p>



<a name="194544181"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/194544181" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#194544181">(Apr 18 2020 at 13:17)</a>:</h4>
<p>I think I fixed where OSX build was pulling in the file with colliding symbols.</p>



<a name="196202285"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196202285" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Rossberg <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196202285">(May 04 2020 at 16:06)</a>:</h4>
<p>The (Linux)build is still broken?</p>
<div class="codehilite"><pre><span></span><code>Build Time: Mon May  4 18:01:26 2020

[  0%] Built target timestamp
[  0%] Built target lcheck
[  0%] Built target toplevel_DOCFILES_cp
[  0%] Built target lemon
[  1%] Built target re2c_bootstrap
[  1%] Built target re2c
[  1%] Built target perplex_template_cp
[  2%] Built target perplex
[  2%] Built target astyle
[  2%] Built target env2c
[  2%] Built target debug2c
[  2%] Built target 04238f4c3429a37ca335f9352ba2dc81_cp
[  2%] Built target openNURBS_headers_cp
[  2%] Built target lz4
[  2%] Built target lz4-static
[  2%] Built target netpbm-static
[  3%] Built target netpbm
[  4%] Built target utahrle-static
[  4%] Built target utahrle
[  4%] Built target itclstub
[  4%] Linking C shared library ../../../lib/libitcl.so
/usr/bin/ld: -ltclstub kann nicht gefunden werden
collect2: error: ld returned 1 exit status
make[2]: *** [src/other/itcl3/CMakeFiles/itcl.dir/build.make:250: lib/libitcl.so.3.4] Fehler 1
make[1]: *** [CMakeFiles/Makefile2:3600: src/other/itcl3/CMakeFiles/itcl.dir/all] Fehler 2
make: *** [Makefile:163: all] Fehler 2
</code></pre></div>



<a name="196242622"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196242622" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196242622">(May 04 2020 at 21:32)</a>:</h4>
<p>This could be the same issue I ran across.  I think the underlying issue was a system libtcl that did not install libtclstub?  Or perhaps the cmake detection of it failed?  I don't recall the detail but does enable all work for you¿</p>



<a name="196314249"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196314249" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Rossberg <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196314249">(May 05 2020 at 14:22)</a>:</h4>
<p>Right, libtcl8.6 is there, but no libtclstub. And, there seems to be no Debian package providing it.</p>



<a name="196319022"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196319022" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Rossberg <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196319022">(May 05 2020 at 14:54)</a>:</h4>
<p>It looks like the old find-TCL hasn't found the system TCL library, but the new one does.</p>



<a name="196357048"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196357048" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196357048">(May 05 2020 at 19:44)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  Are you able to build trunk on OSX now, or is it still busted?</p>



<a name="196358521"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196358521" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196358521">(May 05 2020 at 19:54)</a>:</h4>
<p>Trunk built yesterday, but I haven't tested it since.  I'll kick off a build</p>



<a name="196608397"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196608397" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196608397">(May 06 2020 at 09:27)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> new opennurbs-zlib-related compilation error encountered after a fresh cmake: </p>
<div class="codehilite"><pre><span></span><code>/usr/local/Cellar/llvm/10.0.0_3/bin/clang++  -w -m64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk -mmacosx-version-min=10.14 -dynamiclib -Wl,-headerpad_max_install_names  -m64 -current_version 2012.10.245 -o ../../../lib/libopenNURBS.2012.10.245.dylib -install_name @rpath/libopenNURBS.2012.10.245.dylib CMakeFiles/openNURBS-obj.dir/opennurbs_basic.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_brep_changesrf.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_brep_kinky.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_x.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_3dm_attributes.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_3dm_properties.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_3dm_settings.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_annotation.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_annotation2.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_arc.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_arccurve.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_archive.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_array.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_base32.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_base64.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_beam.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_bezier.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_beziervolume.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_bitmap.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_bounding_box.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_box.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_brep.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_brep_extrude.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_brep_io.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_brep_isvalid.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_brep_region.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_brep_tools.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_brep_v2valid.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_circle.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_color.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_compress.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_cone.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_crc.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_curve.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_curveonsurface.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_curveproxy.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_cylinder.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_defines.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_detail.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_dimstyle.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_dll.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_ellipse.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_embedded_file.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_error.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_error_message.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_evaluate_nurbs.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_extensions.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_font.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_fsp.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_geometry.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_group.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_hatch.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_instance.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_intersect.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_knot.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_layer.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_light.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_line.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_linecurve.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_linetype.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_lookup.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_material.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_math.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_massprop.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_matrix.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_memory.c.o CMakeFiles/openNURBS-obj.dir/opennurbs_memory_util.c.o CMakeFiles/openNURBS-obj.dir/opennurbs_mesh.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_mesh_ngon.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_mesh_tools.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_morph.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_nurbscurve.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_nurbssurface.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_nurbsvolume.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_object.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_object_history.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_objref.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_offsetsurface.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_optimize.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_plane.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_planesurface.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_pluginlist.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_point.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_pointcloud.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_pointgeometry.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_pointgrid.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_polycurve.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_polyedgecurve.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_polyline.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_polylinecurve.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_rand.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_revsurface.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_rtree.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_sort.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_sphere.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_string.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_sum.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_sumsurface.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_surface.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_surfaceproxy.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_textlog.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_torus.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_unicode.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_userdata.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_uuid.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_viewport.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_workspace.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_wstring.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_xform.cpp.o CMakeFiles/openNURBS-obj.dir/opennurbs_zlib.cpp.o  /usr/lib/libz.dylib
Undefined symbols for architecture x86_64:
  &quot;_brl_deflate&quot;, referenced from:
      ON_CompressStream::In(unsigned long long, void const*) in opennurbs_compress.cpp.o
      ON_CompressStream::End() in opennurbs_compress.cpp.o
      ON_BinaryArchive::WriteDeflate(unsigned long, void const*) in opennurbs_zlib.cpp.o
      ON_CompressedBuffer::DeflateHelper(ON_CompressedBufferHelper*, unsigned long, void const*) in opennurbs_zlib.cpp.o
  &quot;_brl_deflateEnd&quot;, referenced from:
      ON_CompressStream::End() in opennurbs_compress.cpp.o
      ON_BinaryArchive::CompressionEnd() in opennurbs_zlib.cpp.o
      ON_CompressedBuffer::CompressionEnd(ON_CompressedBufferHelper*) const in opennurbs_zlib.cpp.o
  &quot;_brl_deflateInit_&quot;, referenced from:
      ON_CompressStream::Begin() in opennurbs_compress.cpp.o
      ON_BinaryArchive::CompressionInit() in opennurbs_zlib.cpp.o
      ON_CompressedBuffer::CompressionInit(ON_CompressedBufferHelper*) const in opennurbs_zlib.cpp.o
  &quot;_brl_inflate&quot;, referenced from:
      ON_UncompressStream::In(unsigned long long, void const*) in opennurbs_compress.cpp.o
      ON_UncompressStream::End() in opennurbs_compress.cpp.o
      ON_BinaryArchive::ReadInflate(unsigned long, void*) in opennurbs_zlib.cpp.o
      ON_CompressedBuffer::InflateHelper(ON_CompressedBufferHelper*, unsigned long, void*) const in opennurbs_zlib.cpp.o
  &quot;_brl_inflateEnd&quot;, referenced from:
      ON_UncompressStream::End() in opennurbs_compress.cpp.o
      ON_BinaryArchive::CompressionEnd() in opennurbs_zlib.cpp.o
      ON_CompressedBuffer::CompressionEnd(ON_CompressedBufferHelper*) const in opennurbs_zlib.cpp.o
  &quot;_brl_inflateInit_&quot;, referenced from:
      ON_UncompressStream::Begin() in opennurbs_compress.cpp.o
      ON_BinaryArchive::CompressionInit() in opennurbs_zlib.cpp.o
      ON_CompressedBuffer::CompressionInit(ON_CompressedBufferHelper*) const in opennurbs_zlib.cpp.o
ld: symbol(s) not found for architecture x86_64
</code></pre></div>



<a name="196608453"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196608453" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196608453">(May 06 2020 at 09:28)</a>:</h4>
<p>this was on mac</p>



<a name="196608743"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196608743" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196608743">(May 06 2020 at 09:31)</a>:</h4>
<p>looks like it's still linking system libz there at the end</p>



<a name="196628456"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196628456" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196628456">(May 06 2020 at 12:47)</a>:</h4>
<p>That's... weird.  Wonder why it's doing that only on one platform.</p>
<p>The license scanning is in place now - might be time to subsume the openNURBS build under libbrep.</p>



<a name="196675096"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196675096" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196675096">(May 06 2020 at 18:13)</a>:</h4>
<p>Because we're only testing 2-3 platforms?</p>



<a name="196675345"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196675345" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196675345">(May 06 2020 at 18:15)</a>:</h4>
<p>Characterizing it diminutively as "only on one platform" is not exactly a healthy perspective for the build...  That was absolutely broken elsewhere as well.</p>
<p>It depends how ld is configured on the system, the type of library being compiled, and options in use (two of those are in the user's purview).   Libraries can be resolved at compilation, at linkage, or at runtime (or combinations thereof).  Mac happens to default to resolved dynamic libraries, but Linux, UNIX, and BSD linking can be configured this way as well (and some distros do).</p>



<a name="196675441"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196675441" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196675441">(May 06 2020 at 18:16)</a>:</h4>
<p>All that was probably needed was listing our renamed libz as a dependendency to cmake and it would have probably done the right thing.</p>



<a name="196675533"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196675533" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196675533">(May 06 2020 at 18:17)</a>:</h4>
<p>We've hit that issue before repeatedly over the years.  Usually from Mac, but also from some Linux platforms.  Cmake figures it out if things are fully declared correctly.</p>



<a name="196675698"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196675698" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196675698">(May 06 2020 at 18:18)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> build now fails with a different set of issues:</p>
<div class="codehilite"><pre><span></span><code>In file included from /Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array.h:1788:
/Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array_defs.h:120:36: error: unknown
      warning group &#39;-Wclass-memaccess&#39;, ignored [-Werror,-Wunknown-warning-option]
#  pragma clang diagnostic ignored &quot;-Wclass-memaccess&quot;
                                   ^
[ 12%] Built target SPSR
/Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array_defs.h:434:36: error: unknown
      warning group &#39;-Wclass-memaccess&#39;, ignored [-Werror,-Wunknown-warning-option]
#  pragma clang diagnostic ignored &quot;-Wclass-memaccess&quot;
                                   ^
/Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array_defs.h:463:36: error: unknown
      warning group &#39;-Wclass-memaccess&#39;, ignored [-Werror,-Wunknown-warning-option]
#  pragma clang diagnostic ignored &quot;-Wclass-memaccess&quot;
                                   ^
/Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array_defs.h:557:36: error: unknown
      warning group &#39;-Wclass-memaccess&#39;, ignored [-Werror,-Wunknown-warning-option]
#  pragma clang diagnostic ignored &quot;-Wclass-memaccess&quot;
                                   ^
/Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array_defs.h:583:36: error: unknown
      warning group &#39;-Wclass-memaccess&#39;, ignored [-Werror,-Wunknown-warning-option]
#  pragma clang diagnostic ignored &quot;-Wclass-memaccess&quot;
                                   ^
/Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array_defs.h:875:36: error: unknown
      warning group &#39;-Wclass-memaccess&#39;, ignored [-Werror,-Wunknown-warning-option]
#  pragma clang diagnostic ignored &quot;-Wclass-memaccess&quot;
                                   ^
/Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array_defs.h:901:36: error: unknown
      warning group &#39;-Wclass-memaccess&#39;, ignored [-Werror,-Wunknown-warning-option]
#  pragma clang diagnostic ignored &quot;-Wclass-memaccess&quot;
                                   ^
/Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array_defs.h:966:36: error: unknown
      warning group &#39;-Wclass-memaccess&#39;, ignored [-Werror,-Wunknown-warning-option]
#  pragma clang diagnostic ignored &quot;-Wclass-memaccess&quot;
                                   ^
[ 12%] Building C object src/libnmg/CMakeFiles/libnmg-obj.dir/copy.c.o
/Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array_defs.h:1585:36: error: unknown
      warning group &#39;-Wclass-memaccess&#39;, ignored [-Werror,-Wunknown-warning-option]
#  pragma clang diagnostic ignored &quot;-Wclass-memaccess&quot;
                                   ^
/Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array_defs.h:1627:36: error: unknown
      warning group &#39;-Wclass-memaccess&#39;, ignored [-Werror,-Wunknown-warning-option]
#  pragma clang diagnostic ignored &quot;-Wclass-memaccess&quot;
                                   ^
/Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array_defs.h:1663:36: error: unknown
      warning group &#39;-Wclass-memaccess&#39;, ignored [-Werror,-Wunknown-warning-option]
#  pragma clang diagnostic ignored &quot;-Wclass-memaccess&quot;
                                   ^
/Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array_defs.h:1890:36: error: unknown
      warning group &#39;-Wclass-memaccess&#39;, ignored [-Werror,-Wunknown-warning-option]
#  pragma clang diagnostic ignored &quot;-Wclass-memaccess&quot;
                                   ^
[ 12%] Building C object src/libbu/CMakeFiles/libbu-obj.dir/whereis.c.o
/Users/morrison/brlcad.trunk/src/libbrep/openNURBS/opennurbs_array_defs.h:1970:36: error: unknown
      warning group &#39;-Wclass-memaccess&#39;, ignored [-Werror,-Wunknown-warning-option]
#  pragma clang diagnostic ignored &quot;-Wclass-memaccess&quot;
                                   ^
</code></pre></div>



<a name="196677185"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196677185" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196677185">(May 06 2020 at 18:30)</a>:</h4>
<p>trying a different compiler...</p>



<a name="196677543"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196677543" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196677543">(May 06 2020 at 18:32)</a>:</h4>
<p>also horked.   looks like more pragmas.  did you add those or were they already there?  some seem to be in include/defines.h, others in opennurbs files.</p>



<a name="196679405"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196679405" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196679405">(May 06 2020 at 18:47)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span>  I see you riddled it with the pragmas.  Please, please...<br>
Please don't make huge changes like this.  I get why as we've talked about moving opennurbs, but this is so unstable an approach with pragma hacks on top of a major dependency restructure.. all to fix what should have been a single line declaration that was missing.</p>



<a name="196680076"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196680076" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196680076">(May 06 2020 at 18:53)</a>:</h4>
<p>Reverted.  FWIW, wasn't just for that - figured it would avoid the Windows zlib issue as well.</p>



<a name="196680232"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196680232" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196680232">(May 06 2020 at 18:54)</a>:</h4>
<p>Still need to figure out why openNURBS is getting system zlib on the mac - by the time it gets to src/other/openNURBS FindZLIB should be satisfied</p>



<a name="196680417"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196680417" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196680417">(May 06 2020 at 18:55)</a>:</h4>
<p>I'm sure it wasn't, but it's just the unexpected stress of everything coming to a halt.  Was dead in the water again and that went in a more unstable direction with maintenance issues embedded.</p>



<a name="196680665"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196680665" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196680665">(May 06 2020 at 18:57)</a>:</h4>
<p>fair enough.  I'll see if I can coax a mac build out of github - that's failing when Ubuntu, BSD and Windows don't so I'm having a hard time predicting failures reliably.</p>



<a name="196680922"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196680922" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196680922">(May 06 2020 at 18:59)</a>:</h4>
<p>Sorry if my frustration is coming through.  I hear Lee from 15 years ago in my messages.  Just needing things to be a bit more stable on trunk to make progress debugging.</p>



<a name="196681068"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681068" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681068">(May 06 2020 at 19:00)</a>:</h4>
<p>No problem - I'm getting a bit greedy trying to push through things that I've wanted to do for a long time, and now isn't the time for it.</p>



<a name="196681085"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681085" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681085">(May 06 2020 at 19:00)</a>:</h4>
<p>BSD was also broken with the pragmas, fwiw.</p>



<a name="196681128"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681128" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681128">(May 06 2020 at 19:01)</a>:</h4>
<p>right,  that one's on me - the class-memaccess warning must be unique to GCC right now.</p>



<a name="196681165"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681165" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681165">(May 06 2020 at 19:01)</a>:</h4>
<p>(probably a real issue though - that may bite us someday with the openNURBS code...)</p>



<a name="196681194"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681194" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681194">(May 06 2020 at 19:01)</a>:</h4>
<p>there were 3-4 pragmas it was complaining about, different files, that was just the first</p>



<a name="196681295"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681295" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681295">(May 06 2020 at 19:02)</a>:</h4>
<p>Yeah, clang and GCC define different sets.  Right now the src/other builds deliberately don't enable any of the warnings so we don't see any of that.</p>



<a name="196681321"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681321" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681321">(May 06 2020 at 19:02)</a>:</h4>
<p>and I get why, but pragmas should be last resort imho, when there is not a build system solution because that is intrinsically unstable</p>



<a name="196681380"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681380" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681380">(May 06 2020 at 19:03)</a>:</h4>
<p>a -w flag forced on src/libbrep/openNURBS would have been better I think</p>



<a name="196681423"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681423" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681423">(May 06 2020 at 19:03)</a>:</h4>
<p>or maybe -Wno-error</p>



<a name="196681439"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681439" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681439">(May 06 2020 at 19:03)</a>:</h4>
<p>Probably what would have had to happen in that case is including src/libbrep/openNURBS with -isystem</p>



<a name="196681530"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681530" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681530">(May 06 2020 at 19:04)</a>:</h4>
<p>Anyway,  moot</p>



<a name="196681532"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681532" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681532">(May 06 2020 at 19:04)</a>:</h4>
<p>pragmas went into our headers too, which means the instability infection spread</p>



<a name="196681797"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681797" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681797">(May 06 2020 at 19:06)</a>:</h4>
<p>Well, the revert should be clean - two commits only, not mixed with anything</p>



<a name="196681848"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196681848" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196681848">(May 06 2020 at 19:06)</a>:</h4>
<p>I'm less sure what to do about the system zlib creeping in - can you send me your CMakeCache.txt file?</p>



<a name="196682436"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196682436" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196682436">(May 06 2020 at 19:11)</a>:</h4>
<p>sure</p>



<a name="196683034"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196683034" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196683034">(May 06 2020 at 19:17)</a>:</h4>
<p>any idea what this is about?  I don't get it all the time and it doesn't halt cmake despite the message:</p>
<div class="codehilite"><pre><span></span><code>CMake Error: The source directory &quot;/Users/morrison/brlcad.trunk/.build/remove&quot; does not exist.
Specify --help for usage, or press the help button on the CMake GUI.
CMake Error: The source directory &quot;/Users/morrison/brlcad.trunk/.build/remove&quot; does not exist.
Specify --help for usage, or press the help button on the CMake GUI.
CMake Error: The source directory &quot;/Users/morrison/brlcad.trunk/.build/remove&quot; does not exist.
Specify --help for usage, or press the help button on the CMake GUI.
...
</code></pre></div>



<a name="196683072"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196683072" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196683072">(May 06 2020 at 19:17)</a>:</h4>
<p>Not sure - I've been seeing that too, but haven't run it down yet.</p>



<a name="196683089"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196683089" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196683089">(May 06 2020 at 19:18)</a>:</h4>
<p>Happens repeatedly intermixed throughout the cmake output, so it's undoubtedly in some macro/function</p>



<a name="196683345"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196683345" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196683345">(May 06 2020 at 19:19)</a>:</h4>
<p>that message isn't in our code (at least I didnt' find it)<br>
not sure what to make of 'remove' either as that's not a file in our repo.  we do test for the remove function, but that seems entirely unrelated to the messages and this message appearing just in the past few days.</p>



<a name="196683556"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196683556" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196683556">(May 06 2020 at 19:21)</a>:</h4>
<p>I think I noticed it when I started using a newer CMake, but I'll have to confirm that.  It didn't seem to break anything, and I'm using a way newer CMake than most distros, so I wasn't sure if it needed to be run down for general use yet...  Since you're seeing it too, that decides it</p>



<a name="196683983"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196683983" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196683983">(May 06 2020 at 19:24)</a>:</h4>
<p>I'm on a newer cmake too 3.16</p>



<a name="196684094"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196684094" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196684094">(May 06 2020 at 19:25)</a>:</h4>
<p>also have 3.12 to test with when I'm trying to make sure things work back a ways</p>



<a name="196686527"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196686527" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196686527">(May 06 2020 at 19:42)</a>:</h4>
<p>well hot diggity, looks like github workflows will let me kick off a Mac build</p>



<a name="196687285"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196687285" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196687285">(May 06 2020 at 19:47)</a>:</h4>
<p>And now (of course) it doesn't want to give me the remove error.  Did it happen on a clean CMake run, or is it when reconfiguring with an existing build dir?</p>



<a name="196691553"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196691553" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196691553">(May 06 2020 at 20:20)</a>:</h4>
<p>growl... the non-enable-all github osx build didn't help any - it built</p>



<a name="196691592"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196691592" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196691592">(May 06 2020 at 20:20)</a>:</h4>
<p>enable_all might be more promising, but also quite slow...</p>



<a name="196694687"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196694687" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196694687">(May 06 2020 at 20:45)</a>:</h4>
<p>arrrrgh.  that built as well.</p>



<a name="196694833"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196694833" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196694833">(May 06 2020 at 20:46)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  I've got Xcode_11.4.1.app with AppleClang 11.0.3.11030032 on the runner - is that radically different from yours?</p>



<a name="196694900"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196694900" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196694900">(May 06 2020 at 20:47)</a>:</h4>
<p>may be a different tool chain or different compiler version or different cmake.  i'll see if I can repeat the error with everything reverted.</p>



<a name="196695777"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196695777" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196695777">(May 06 2020 at 20:55)</a>:</h4>
<p>appreciate you checking.  maybe something in my newer cmake's find zlib or something with newer clang (I have multiple compilers installed, xcode's isn't sufficient for some things, e.g., fuzzing)</p>



<a name="196696516"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196696516" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196696516">(May 06 2020 at 21:00)</a>:</h4>
<p>The log and cache files may help, once you get them.  If we absolutely have to we can revert back to pre 8.6.</p>



<a name="196706431"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196706431" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196706431">(May 06 2020 at 22:28)</a>:</h4>
<p>Yeah, struck out - got a successful make check run on github's osx runner.  Only build failure I've got right now is on OpenBSD, and that's something totally different.</p>



<a name="196717709"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196717709" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196717709">(May 07 2020 at 01:16)</a>:</h4>
<p>OK, pretty sure I found the source of the spurious .build/remove messages (cmake --trace to the rescue.)</p>



<a name="196720221"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196720221" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196720221">(May 07 2020 at 02:08)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>   There's a slight chance that the "build/remove" messages error could have had an impact on what was being found on the Mac - if configurations were switched between system and local, that was the piece of logic that was supposed to be clearing out stale files.  The files didn't end up removed.  My initial guess would have been that that failure was more likely to result in a local copy being found instead of a system copy rather than the other way around, but it certainly could have caused something unexpected to happen.</p>



<a name="196720396"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196720396" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196720396">(May 07 2020 at 02:12)</a>:</h4>
<p>okay, I've got several builds going at the moment so I'll let you know how things are looking</p>



<a name="196722214"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722214" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722214">(May 07 2020 at 02:52)</a>:</h4>
<p>I think that's about as good as it's going to get for OpenBSD right now, at least until they add a way to get the executable pathname.</p>



<a name="196722233"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722233" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722233">(May 07 2020 at 02:53)</a>:</h4>
<p>how's that?  none of the implemented methods work?</p>



<a name="196722294"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722294" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722294">(May 07 2020 at 02:54)</a>:</h4>
<p>Apparently not.  Poked around online a bit and it seems like that's just a feature that OpenBSD either deliberately doesn't support or hasn't bothered to support.</p>



<a name="196722303"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722303" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722303">(May 07 2020 at 02:54)</a>:</h4>
<p>but one of the methods is a gcc method</p>



<a name="196722309"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722309" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722309">(May 07 2020 at 02:54)</a>:</h4>
<p>or are they llvm only?</p>



<a name="196722340"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722340" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722340">(May 07 2020 at 02:55)</a>:</h4>
<p>Primary compilation is clang/llvm now - don't know if gcc is still in there or not, but my understanding is that it's on its way out if it is</p>



<a name="196722346"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722346" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722346">(May 07 2020 at 02:55)</a>:</h4>
<p>HAVE_PROGRAM_INVOCATION_NAME is false?</p>



<a name="196722348"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722348" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722348">(May 07 2020 at 02:55)</a>:</h4>
<p>Looking at the whoami.c code, I think they need some runtime support from the kernel to be able to know their location</p>



<a name="196722425"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722425" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722425">(May 07 2020 at 02:57)</a>:</h4>
<p>er, whereami.c rather</p>



<a name="196722495"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722495" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722495">(May 07 2020 at 02:58)</a>:</h4>
<p><a href="https://stackoverflow.com/questions/31494901/how-to-get-the-executable-path-on-openbsd" title="https://stackoverflow.com/questions/31494901/how-to-get-the-executable-path-on-openbsd">https://stackoverflow.com/questions/31494901/how-to-get-the-executable-path-on-openbsd</a></p>



<a name="196722675"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722675" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722675">(May 07 2020 at 03:02)</a>:</h4>
<p>This seems to be the email referenced in the second comment:  <a href="https://marc.info/?l=openbsd-misc&amp;m=144987773230417&amp;w=2" title="https://marc.info/?l=openbsd-misc&amp;m=144987773230417&amp;w=2">https://marc.info/?l=openbsd-misc&amp;m=144987773230417&amp;w=2</a></p>



<a name="196722809"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722809" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722809">(May 07 2020 at 03:05)</a>:</h4>
<p>I think streams are getting crossed there.  Theo is talking about the kernel providing some intrinsic storage/lookup capability.  Similarly one of the responses is about whether it's immediately available, but even that is half wrong.</p>



<a name="196722860"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722860" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722860">(May 07 2020 at 03:06)</a>:</h4>
<p>you don't need either of those. <br>
in fact the second SO response is closer to being on track</p>



<a name="196722892"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722892" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722892">(May 07 2020 at 03:07)</a>:</h4>
<p>guarantee there's a way to figure it out.  worst case, we can repeat what the shell does to invoke the binary (which I originally had in there but found it to be unnecessary complexity, even as a fallback, so I stripped it out).</p>



<a name="196722938"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196722938" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196722938">(May 07 2020 at 03:08)</a>:</h4>
<p>still, I'm surprised llvm doesn't supply program_invocation_name -- can you check the cmakeerror?</p>



<a name="196723019"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723019" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723019">(May 07 2020 at 03:09)</a>:</h4>
<p>ld: error: undefined symbol: program_invocation_name</p>



<a name="196723083"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723083" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723083">(May 07 2020 at 03:10)</a>:</h4>
<p>from CheckFunctionExists test</p>



<a name="196723105"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723105" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723105">(May 07 2020 at 03:11)</a>:</h4>
<p>yeah, darn.  that's the easiest.  clang totally could have stashed it during _start</p>



<a name="196723226"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723226" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723226">(May 07 2020 at 03:13)</a>:</h4>
<p>Does getprogname do anything useful? <a href="https://man.openbsd.org/getprogname.3" title="https://man.openbsd.org/getprogname.3">https://man.openbsd.org/getprogname.3</a></p>



<a name="196723283"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723283" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723283">(May 07 2020 at 03:14)</a>:</h4>
<p>well yeah, but it should already be testing for that and using it</p>



<a name="196723290"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723290" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723290">(May 07 2020 at 03:14)</a>:</h4>
<p>grep GETPROGNAME in the cache</p>



<a name="196723295"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723295" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723295">(May 07 2020 at 03:14)</a>:</h4>
<p>Doesn't look like it's realpathed anyway...</p>



<a name="196723301"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723301" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723301">(May 07 2020 at 03:14)</a>:</h4>
<p>bu_getprogname() uses it</p>



<a name="196723345"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723345" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723345">(May 07 2020 at 03:15)</a>:</h4>
<p>neither is program_invocation_name, they are just faster alternatives to stashing argv0</p>



<a name="196723372"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723372" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723372">(May 07 2020 at 03:15)</a>:</h4>
<p>&lt;not&gt; - what we need is the all-up full path</p>



<a name="196723387"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723387" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723387">(May 07 2020 at 03:15)</a>:</h4>
<p>&lt;nod&gt; rather</p>



<a name="196723392"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723392" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723392">(May 07 2020 at 03:15)</a>:</h4>
<p>it's undesirable to have to call setprogname(argv[0]) in every application, so half the code in question is simply trying to figure out the name of the running app.</p>



<a name="196723427"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723427" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723427">(May 07 2020 at 03:16)</a>:</h4>
<p>the other half figures out the path to that app</p>



<a name="196723454"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723454" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723454">(May 07 2020 at 03:16)</a>:</h4>
<p>if you have the name, you can always find the path brute force in all but theoretical edge cases that we don't care about.</p>



<a name="196723459"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723459" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723459">(May 07 2020 at 03:16)</a>:</h4>
<p>we've got getprogname detected - it's the whereami.c code that doesn't know how to resolve the full path on OpenBSD</p>



<a name="196723468"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723468" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723468">(May 07 2020 at 03:17)</a>:</h4>
<p>whereami's that external code you added for bu_dir right?</p>



<a name="196723472"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723472" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723472">(May 07 2020 at 03:17)</a>:</h4>
<p>right</p>



<a name="196723484"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723484" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723484">(May 07 2020 at 03:17)</a>:</h4>
<p>you recall what exactly in bu_dir is using it?  I just see the include.</p>



<a name="196723531"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723531" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723531">(May 07 2020 at 03:18)</a>:</h4>
<p>wai_getExecutablePath</p>



<a name="196723534"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723534" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723534">(May 07 2020 at 03:18)</a>:</h4>
<p>ah, I found it</p>



<a name="196723548"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723548" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723548">(May 07 2020 at 03:18)</a>:</h4>
<p>did whereis.c compile?</p>



<a name="196723557"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723557" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723557">(May 07 2020 at 03:19)</a>:</h4>
<p>Originally, it bailed.</p>



<a name="196723565"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723565" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723565">(May 07 2020 at 03:19)</a>:</h4>
<p>I added a "always return -1" fallback</p>



<a name="196723567"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723567" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723567">(May 07 2020 at 03:19)</a>:</h4>
<p>not whereami.c .. the other, whereis.c</p>



<a name="196723571"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723571" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723571">(May 07 2020 at 03:19)</a>:</h4>
<p>ah - let me check</p>



<a name="196723637"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723637" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723637">(May 07 2020 at 03:20)</a>:</h4>
<p>yes, compiled - makes a .o file</p>



<a name="196723639"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723639" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723639">(May 07 2020 at 03:20)</a>:</h4>
<p>so then we have the means</p>



<a name="196723650"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723650" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723650">(May 07 2020 at 03:20)</a>:</h4>
<p>we just have to merge or replace whereami.c with whereis.c</p>



<a name="196723658"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723658" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723658">(May 07 2020 at 03:21)</a>:</h4>
<p>they do the same thing, there were just platform robustness differences</p>



<a name="196723801"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723801" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723801">(May 07 2020 at 03:24)</a>:</h4>
<p>I don't recall the exact motivation for why you pulled in whereami.c but I think you had some concern with whereis.c for some reason.  You remember what the issue was?</p>



<a name="196723849"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723849" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723849">(May 07 2020 at 03:26)</a>:</h4>
<p>it wasn't robust to arbitrary maneuvering on the file system, IIRC</p>



<a name="196723954"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723954" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723954">(May 07 2020 at 03:28)</a>:</h4>
<p>Illustrated simply:</p>
<p>mged&gt; bu_brlcad_root bin<br>
/home/user/brlcad/build/bin<br>
mged&gt; cd ../../<br>
mged&gt; bu_brlcad_root bin<br>
mged&gt; bu_dir bin<br>
/home/user/brlcad/build/bin</p>



<a name="196723955"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723955" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723955">(May 07 2020 at 03:28)</a>:</h4>
<p>(that's on Linux)</p>



<a name="196723973"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196723973" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196723973">(May 07 2020 at 03:29)</a>:</h4>
<p>that's not bu_whereis() though ... what's the bu_whereis() call -- I'm not sure how whereis would even be put to work there because bin is a directory, not a command</p>



<a name="196724028"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724028" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724028">(May 07 2020 at 03:30)</a>:</h4>
<p>maybe bu_brlcad_root had/has misuse?</p>



<a name="196724044"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724044" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724044">(May 07 2020 at 03:31)</a>:</h4>
<p>No, bu_brlcad_root doesn't use whereis.  The above is just illustrating why I put whereami.c in.</p>



<a name="196724135"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724135" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724135">(May 07 2020 at 03:33)</a>:</h4>
<p>heh, yeah I seemed to remember it being some bug and instead of debugging, you pulled in someone else's code.  :)</p>



<a name="196724184"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724184" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724184">(May 07 2020 at 03:34)</a>:</h4>
<p>and now we have code debt from both  :D</p>



<a name="196724190"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724190" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724190">(May 07 2020 at 03:34)</a>:</h4>
<p>and a working feature :P</p>



<a name="196724193"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724193" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724193">(May 07 2020 at 03:35)</a>:</h4>
<p>not on openbsd apparently</p>



<a name="196724216"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724216" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724216">(May 07 2020 at 03:35)</a>:</h4>
<p>I don't think it ever worked there with any of the methods except probably your shell mimicking code.</p>



<a name="196724231"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724231" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724231">(May 07 2020 at 03:35)</a>:</h4>
<p>bu_dir didn't, you're right -- that was all stubbed empty</p>



<a name="196724273"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724273" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724273">(May 07 2020 at 03:36)</a>:</h4>
<p>bu_brlcad_root is still just a straight up bug -- it shouldn't be invariant to cwd at all</p>



<a name="196724275"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724275" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724275">(May 07 2020 at 03:36)</a>:</h4>
<p>s/invariant/variant/</p>



<a name="196724293"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724293" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724293">(May 07 2020 at 03:37)</a>:</h4>
<p>the method that whereami code is using is the method to use on windows, and I think it's using the same as other code on linux</p>



<a name="196724398"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724398" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724398">(May 07 2020 at 03:40)</a>:</h4>
<p>In fairness - the above mged log I showed used an mged invoked from the build/lib dir as follows:</p>
<p>../bin/mged -c -a nu ../share/db/moss.g</p>



<a name="196724402"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724402" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724402">(May 07 2020 at 03:40)</a>:</h4>
<p>I think the only immediate solution is extending bu_dir with different methods</p>



<a name="196724417"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724417" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724417">(May 07 2020 at 03:41)</a>:</h4>
<p>or, hm</p>



<a name="196724418"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724418" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724418">(May 07 2020 at 03:41)</a>:</h4>
<p>So I should more precisely have said it isn't just cwd but cwd+invocation argv0</p>



<a name="196724458"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724458" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724458">(May 07 2020 at 03:42)</a>:</h4>
<p>getExecutablePath() intrinsically relies on a global program name, we could just feed it the name we know</p>



<a name="196724478"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724478" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724478">(May 07 2020 at 03:43)</a>:</h4>
<p>you mean the relative path from argv[0]?</p>



<a name="196724481"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724481" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724481">(May 07 2020 at 03:43)</a>:</h4>
<p>bu_getprogname()</p>



<a name="196724485"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724485" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724485">(May 07 2020 at 03:43)</a>:</h4>
<p>which worst case will just be argv[0] passed from the app</p>



<a name="196724533"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724533" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724533">(May 07 2020 at 03:44)</a>:</h4>
<p>it can call bu_whereis to get the resolved path as another method either in getExecutablePath() or in bu_dir() if we want to keep our code separate</p>



<a name="196724555"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724555" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724555">(May 07 2020 at 03:45)</a>:</h4>
<p>what will happen once the cwd changes though?  Do we replace the recorded argv[0] with it's resolution immediately upon program launch before the app has a chance to change it's working directory?</p>



<a name="196724617"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724617" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724617">(May 07 2020 at 03:46)</a>:</h4>
<p>I think you're getting issues mixed up -- that's some bu_brlcad_root issue</p>



<a name="196724629"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724629" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724629">(May 07 2020 at 03:47)</a>:</h4>
<p>getprogname doesn't stop working after cwd</p>



<a name="196724632"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724632" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724632">(May 07 2020 at 03:47)</a>:</h4>
<p>Maybe - to me the "user level" issue is I want bu_dir to always resolve correctly.</p>



<a name="196724633"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724633" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724633">(May 07 2020 at 03:47)</a>:</h4>
<p>bu_which logic has nothing that introspects cwd</p>



<a name="196724686"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724686" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724686">(May 07 2020 at 03:48)</a>:</h4>
<p>heh, um, yes... and me too...</p>



<a name="196724703"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724703" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724703">(May 07 2020 at 03:49)</a>:</h4>
<p>Are you saying that the bu_brlcad_root issue is independent of the program name?</p>



<a name="196724772"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724772" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724772">(May 07 2020 at 03:50)</a>:</h4>
<p>i'm saying nothing about the bu_brlcad_root issue at the moment -- there is some issue there to be looked into at some point, but I didn't refer to it</p>



<a name="196724778"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724778" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724778">(May 07 2020 at 03:50)</a>:</h4>
<p>OK</p>



<a name="196724828"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724828" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724828">(May 07 2020 at 03:52)</a>:</h4>
<p>the issue at hand I thought was getting bu_dir to return the path that getExecutablePath() is/should be providing because there's some compilation issue on obsd</p>



<a name="196724839"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724839" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724839">(May 07 2020 at 03:52)</a>:</h4>
<p>we have everything needed to get the current executable path on obsd</p>



<a name="196724867"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724867" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724867">(May 07 2020 at 03:54)</a>:</h4>
<p>OK... that's the whereis.c code?</p>



<a name="196724896"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724896" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724896">(May 07 2020 at 03:54)</a>:</h4>
<p>that can be got using bu_getprogname and bu_which, or we could tweak the logic in whereami.c -- there is a bsd section in there, so I'm a little surprised i it doesn't work</p>



<a name="196724902"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724902" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724902">(May 07 2020 at 03:54)</a>:</h4>
<p>er, yes s/which/whereis/</p>



<a name="196724906"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724906" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724906">(May 07 2020 at 03:54)</a>:</h4>
<p>I tried - OpenBSD doesn't define KERN_PROC_PATHNAME</p>



<a name="196724927"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196724927" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196724927">(May 07 2020 at 03:55)</a>:</h4>
<p>sure, but what about KERN_PROC_ARGS and KERN_PROC_ARGV ?</p>



<a name="196725050"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725050" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725050">(May 07 2020 at 03:58)</a>:</h4>
<p>assuming it supplies access to argv globally, then we either call bu_whereis/bu_which or replicate that logic in whereami.c for obsd</p>



<a name="196725072"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725072" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725072">(May 07 2020 at 03:59)</a>:</h4>
<p>I believe it has those...</p>



<a name="196725073"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725073" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725073">(May 07 2020 at 03:59)</a>:</h4>
<p>that's what I was originally saying -- the choice is between modifying whereami.c to extend it with openbsd support or using existing support at the higher call in bu_dir to call getprogname+whereis</p>



<a name="196725150"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725150" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725150">(May 07 2020 at 04:01)</a>:</h4>
<p>Thomas' response at <a href="https://stackoverflow.com/questions/31494901/how-to-get-the-executable-path-on-openbsd" title="https://stackoverflow.com/questions/31494901/how-to-get-the-executable-path-on-openbsd">https://stackoverflow.com/questions/31494901/how-to-get-the-executable-path-on-openbsd</a> looks like a near drop-in for whereami.c if you want to try it on openbsd; that might make a good upstream patch anyways</p>



<a name="196725161"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725161" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725161">(May 07 2020 at 04:02)</a>:</h4>
<p>whereami.c supports a nice variety of platforms already, so second choice would be to extend it with a LIBBU fallback method using getprogname+whereis</p>



<a name="196725205"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725205" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725205">(May 07 2020 at 04:02)</a>:</h4>
<p>I think either of those are superior to doing anything in bu_dir</p>



<a name="196725215"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725215" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725215">(May 07 2020 at 04:03)</a>:</h4>
<p>Agreed - I guess I'm going to have to try it before it will "click"</p>



<a name="196725262"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725262" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725262">(May 07 2020 at 04:04)</a>:</h4>
<p>I suppose this is something relatively safe for me to chew on...</p>



<a name="196725263"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725263" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725263">(May 07 2020 at 04:04)</a>:</h4>
<p>for what it's worth, that stack overflow response  is basically doing a argv0 lookup followed by a PATH search, which is essentially the exact same code as calling bu_getprogname+bu_whereis</p>



<a name="196725282"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725282" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725282">(May 07 2020 at 04:06)</a>:</h4>
<p>bu_whereis searches the system path a lot harder, so I guess his method is actually identical to bu_which()</p>



<a name="196725329"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725329" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725329">(May 07 2020 at 04:06)</a>:</h4>
<p>searching env(PATH)</p>



<a name="196725371"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725371" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725371">(May 07 2020 at 04:08)</a>:</h4>
<p>Am I wrong, or will bu_whereis fail in the case with a relative path to an executable that isn't in any normal binary launching path?</p>



<a name="196725413"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725413" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725413">(May 07 2020 at 04:08)</a>:</h4>
<p>I.e. not in PATH, not in any standard system bin dir</p>



<a name="196725482"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725482" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725482">(May 07 2020 at 04:11)</a>:</h4>
<p>it should fail, that's what 'whereis' does.  'which' will return the relative path.  calling code must call realpath on relative paths.</p>



<a name="196725493"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725493" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725493">(May 07 2020 at 04:11)</a>:</h4>
<p>But realpath will only succeed if the current path is still the same as it was when the original invocation occurred?</p>



<a name="196725529"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725529" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725529">(May 07 2020 at 04:12)</a>:</h4>
<p>bingo</p>



<a name="196725534"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725534" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725534">(May 07 2020 at 04:12)</a>:</h4>
<p>and isn't that the problem?</p>



<a name="196725537"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725537" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725537">(May 07 2020 at 04:12)</a>:</h4>
<p>(and yes, that's a problem)</p>



<a name="196725543"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725543" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725543">(May 07 2020 at 04:12)</a>:</h4>
<p>my understanding was that <em>that</em> is the issue whereami.c was trying to resolve</p>



<a name="196725547"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725547" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725547">(May 07 2020 at 04:12)</a>:</h4>
<p>hah, my sausage fingers are slow tonight .. fell down the stairs</p>



<a name="196725554"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725554" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725554">(May 07 2020 at 04:12)</a>:</h4>
<p>yikes!</p>



<a name="196725560"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725560" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725560">(May 07 2020 at 04:13)</a>:</h4>
<p>gonna be sore tomorrow</p>



<a name="196725618"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725618" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725618">(May 07 2020 at 04:14)</a>:</h4>
<p>it is, it's the same reason bu_argv0_full_path() exists too</p>



<a name="196725658"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725658" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725658">(May 07 2020 at 04:16)</a>:</h4>
<p>So... won't what we're proposing to implement for OpenBSD end up failing in those cases without something like KERN_PROC_PATHNAME to fall back on?</p>



<a name="196725687"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725687" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725687">(May 07 2020 at 04:16)</a>:</h4>
<p>same reason it's deprecated, but almost impossible to remove.  the only full-proof way for it to work is to either do a realpath() lookup right away (which should be happening when bu_setprogname() is called) or otherwise stashing the cwd on init</p>



<a name="196725701"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725701" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725701">(May 07 2020 at 04:17)</a>:</h4>
<p>if you just pull that persons code as-is, yes -- it will be suseptiple to path changes, but we did resolve the initial path issue in our code</p>



<a name="196725705"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725705" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725705">(May 07 2020 at 04:17)</a>:</h4>
<p>bu_getiwd()</p>



<a name="196725708"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725708" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725708">(May 07 2020 at 04:17)</a>:</h4>
<p>bu_setprogname is currently just copying argv0 - no realpath resolution at all that I can see...</p>



<a name="196725760"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725760" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725760">(May 07 2020 at 04:19)</a>:</h4>
<p>that's likely the bit missing that makes all the realpath() callers in libbu fail after a chdir</p>



<a name="196725839"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725839" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725839">(May 07 2020 at 04:20)</a>:</h4>
<p>will try that tomorrow - might be able to ditch the whereami.c code if that does the trick...</p>



<a name="196725842"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725842" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725842">(May 07 2020 at 04:20)</a>:</h4>
<p>like I said, I wouldn't ditch it.</p>



<a name="196725849"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725849" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725849">(May 07 2020 at 04:21)</a>:</h4>
<p>it's got good platform case variety and they're good, just not piecewise generalized</p>



<a name="196725851"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725851" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725851">(May 07 2020 at 04:21)</a>:</h4>
<p>that's why I didn't complain about it being added, it's a good path forward</p>



<a name="196725908"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725908" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725908">(May 07 2020 at 04:22)</a>:</h4>
<p>ah - so, bu_realpath the progname at set time, then use it as a fallback implementation if we don't have a platform answer?</p>



<a name="196725917"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725917" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725917">(May 07 2020 at 04:22)</a>:</h4>
<p>s/as/to support a/</p>



<a name="196725918"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725918" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725918">(May 07 2020 at 04:22)</a>:</h4>
<p>to be ditched would probably be path_normalize and all the bu_brlcad* routines and the bu_argv0_full_path logic (and callers)</p>



<a name="196725937"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725937" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725937">(May 07 2020 at 04:23)</a>:</h4>
<p>Actually, I think I use path_normalize for some .g path operations, not just filesystem stuff</p>



<a name="196725946"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196725946" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196725946">(May 07 2020 at 04:23)</a>:</h4>
<p>would need to check, but I think search calls it</p>



<a name="196726015"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196726015" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196726015">(May 07 2020 at 04:24)</a>:</h4>
<p>yeah, libged/search.c</p>



<a name="196726017"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196726017" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196726017">(May 07 2020 at 04:25)</a>:</h4>
<p>it's just redundant with something else in libbu iirc</p>



<a name="196726024"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196726024" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196726024">(May 07 2020 at 04:25)</a>:</h4>
<p>O.o</p>



<a name="196726035"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196726035" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196726035">(May 07 2020 at 04:25)</a>:</h4>
<p>I sure missed it if it is...</p>



<a name="196726105"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196726105" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196726105">(May 07 2020 at 04:26)</a>:</h4>
<p>I could be wrong</p>



<a name="196726159"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196726159" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196726159">(May 07 2020 at 04:28)</a>:</h4>
<p>it's just one func with no system calls too, so not a big deal even if that logic is somewhere, and like you said it might not be</p>



<a name="196726169"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196726169" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196726169">(May 07 2020 at 04:28)</a>:</h4>
<p>If you're thinking of realpath_bsd.c, that's the actual filesystem resolver from OpenBSD - using that to avoid that crazy crasher case we hit trying to use the Linux realpath</p>



<a name="196726256"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196726256" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196726256">(May 07 2020 at 04:30)</a>:</h4>
<p>OK, that's enough finger torture - get some rest!</p>



<a name="196731704"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196731704" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196731704">(May 07 2020 at 06:38)</a>:</h4>
<p>yeah you're right, file_path_normalize() is cool.  I think I was remembering bu_file_realpath() and GetFullPathName()'s behavior, but it's not the same as realpath().</p>



<a name="196767882"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196767882" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196767882">(May 07 2020 at 13:15)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>   To be sure I understand - we shouldn't be using bio.h in our public header files, correct?</p>



<a name="196794193"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196794193" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196794193">(May 07 2020 at 16:13)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> you probably told me, but I'm afraid I don't recall - what's the reason we don't call bu_setprogname from libbu_init along with bu_getiwd?</p>



<a name="196812602"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196812602" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196812602">(May 07 2020 at 18:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196767882" title="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196767882">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span>   To be sure I understand - we shouldn't be using bio.h in our public header files, correct?</p>
</blockquote>
<p>No, it's fine for use in our headers.  I mean, usage should be minimized, but there's not a problem.  Why you ask?</p>



<a name="196813094"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196813094" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196813094">(May 07 2020 at 18:38)</a>:</h4>
<p>The <a href="http://repository.sh" title="http://repository.sh">repository.sh</a> script has a test that says "make sure nobody includes private headers like bio.h in a public header"</p>



<a name="196813097"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196813097" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196813097">(May 07 2020 at 18:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196794193" title="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196794193">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> you probably told me, but I'm afraid I don't recall - what's the reason we don't call bu_setprogname from libbu_init along with bu_getiwd?</p>
</blockquote>
<p>Because we don't have the argument to pass that it needs.  bu_init() is called before main(), before argv0 exists.</p>



<a name="196813124"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196813124" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196813124">(May 07 2020 at 18:38)</a>:</h4>
<p>Ah.</p>



<a name="196813318"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196813318" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196813318">(May 07 2020 at 18:39)</a>:</h4>
<p>I implemented a C++ version that looked for bio.h in include/ and there were a fair number.  I scrubbed them back out, but I was wondering if the comment was wrong or the test was broken...</p>



<a name="196814094"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196814094" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196814094">(May 07 2020 at 18:45)</a>:</h4>
<p>"why not both"?</p>



<a name="196814128"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196814128" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196814128">(May 07 2020 at 18:46)</a>:</h4>
<p>I'm looking</p>



<a name="196815059"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196815059" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196815059">(May 07 2020 at 18:53)</a>:</h4>
<p>yeah, that test was broken.  I removed it.  the single quotes stop expansion of ${i} so grep will never report a match</p>
<p>but also, the restriction that bio.h and friends not be included was removed a few years ago, so it's no longer needed.</p>



<a name="196815092"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196815092" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196815092">(May 07 2020 at 18:53)</a>:</h4>
<p>Well crud</p>



<a name="196815099"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196815099" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196815099">(May 07 2020 at 18:53)</a>:</h4>
<p>good catch</p>



<a name="196815205"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196815205" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196815205">(May 07 2020 at 18:54)</a>:</h4>
<p>I'll put it back for the windows.h includes then - those are the messy ones.</p>



<a name="196815206"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196815206" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196815206">(May 07 2020 at 18:54)</a>:</h4>
<p>note the other bio check is still good, make sure no redundant bio.h and stdio.h inclusions together</p>



<a name="196815290"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196815290" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196815290">(May 07 2020 at 18:55)</a>:</h4>
<p>I think we've even used the wrapper headers in src/other .. though maybe not any longer</p>



<a name="196815434"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196815434" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196815434">(May 07 2020 at 18:56)</a>:</h4>
<p>yeah looks like no longer</p>



<a name="196815575"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196815575" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196815575">(May 07 2020 at 18:57)</a>:</h4>
<p>you mean put the bio.h public header inclusion test back?  no entiendo</p>



<a name="196815698"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196815698" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196815698">(May 07 2020 at 18:58)</a>:</h4>
<p>brep/defines.h bu/tcl.h and fb/fb_wgl.h were using bio.h because they need window.h - I switched it to just the guarded windows.h include, but it's a lot more verbose.</p>



<a name="196815718"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196815718" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196815718">(May 07 2020 at 18:58)</a>:</h4>
<p>So I'll put bio.h back in those three headers</p>



<a name="196815805"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196815805" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196815805">(May 07 2020 at 18:59)</a>:</h4>
<p>Ah, I hadn't noticed you'd removed them yet</p>



<a name="196815840"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196815840" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196815840">(May 07 2020 at 18:59)</a>:</h4>
<p>I compile tested the snot out of it this time, so hopefully it shouldn't hurt anything...</p>



<a name="196816019"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196816019" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196816019">(May 07 2020 at 19:00)</a>:</h4>
<p>you're on point, duplication and verbosity trump as being problematic</p>



<a name="196816282"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196816282" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196816282">(May 07 2020 at 19:02)</a>:</h4>
<p>the only reason they had that rule at the beginning is because they weren't originally safe for public header inclusion.  and once we had something they provided needed in a couple places, the refactoring and testing cleanup happened to make sure they were safe.</p>



<a name="196816370"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196816370" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196816370">(May 07 2020 at 19:03)</a>:</h4>
<p>Ah, yeah I remember that now.</p>



<a name="196816585"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196816585" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196816585">(May 07 2020 at 19:04)</a>:</h4>
<p>OK.  I think I've got a working whereami.c fallback for OpenBSD now - once that's in I'll go test VS2019 and do a final across the board check.  If that's all good it will mean trunk is building on everything I have access to.</p>



<a name="196816593"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196816593" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196816593">(May 07 2020 at 19:05)</a>:</h4>
<p>the main issue is their usage of cmake-tested symbols to define/set/unset logic (for example HAVE_SYS_TIME_H is defined, so we know we can #include &lt;sys/time.h&gt;).  we suddenly have a header that is dependent on compilation logic that may not be true on an installed system where the headers get used.</p>



<a name="196816779"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196816779" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196816779">(May 07 2020 at 19:06)</a>:</h4>
<p>the solution was to simply minimize cmake-test-symbol usage as much possible (which is a good practice for public headers regardless) and to at last document their usage in each header.</p>



<a name="196816860"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196816860" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196816860">(May 07 2020 at 19:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196816585" title="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196816585">said</a>:</p>
<blockquote>
<p>OK.  I think I've got a working whereami.c fallback for OpenBSD now - once that's in I'll go test VS2019 and do a final across the board check.  If that's all good it will mean trunk is building on everything I have access to.</p>
</blockquote>
<p>cool, did you end up using bu_getiwd() or doing something else?</p>



<a name="196816875"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196816875" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196816875">(May 07 2020 at 19:06)</a>:</h4>
<p>Yep, bu_getiwd</p>



<a name="196817019"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196817019" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196817019">(May 07 2020 at 19:08)</a>:</h4>
<p>I have a distcheck-full running on RELEASE going, so should have a status check there once that finishes</p>



<a name="196817060"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196817060" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196817060">(May 07 2020 at 19:08)</a>:</h4>
<p>did you end up getting any CMakeCache.txt files or logs with failures?</p>



<a name="196817289"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196817289" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196817289">(May 07 2020 at 19:10)</a>:</h4>
<p>I need to test RELEASE with a large .g file.</p>



<a name="196817300"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196817300" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196817300">(May 07 2020 at 19:10)</a>:</h4>
<p>that's what's running.  I'm going methodically through settings  to help make sure a failure doesn't come from something from a previous test, or different compiler, etc</p>



<a name="196817404"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196817404" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196817404">(May 07 2020 at 19:11)</a>:</h4>
<p>OK, sounds good.  Once you've got that take a shot at trunk, if you can - I'm trying to get trunk into a solid state, and then I'll switch off into branches for a while to keep it stable.</p>



<a name="196818829"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196818829" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196818829">(May 07 2020 at 19:23)</a>:</h4>
<p>Yep, RELEASE on Windows was able to open a big .g test - phew</p>



<a name="196819543"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196819543" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196819543">(May 07 2020 at 19:29)</a>:</h4>
<p>alright, let's see what VS2019 has to say...</p>



<a name="196822006"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196822006" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196822006">(May 07 2020 at 19:50)</a>:</h4>
<p>shouldn't 75729 be reverted? looks like all of the bio.h's pushed down into headers were because the bu headers didn' declare something they needed (FILE), which means the public headers are incomplete, possibly broken  now</p>



<a name="196822033"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196822033" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196822033">(May 07 2020 at 19:51)</a>:</h4>
<p>I don't think we have a test in there any more that tests isolated header compilation, but that'd probably be good to restore</p>



<a name="196822659"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196822659" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196822659">(May 07 2020 at 19:57)</a>:</h4>
<p>hm, looks like we need that -- doing a quick test, looks like we have a dozen or so headers on trunk that have type declaration errors, missing headers, and most look like relatively recent changes.  would be neat to get cmake doing something like this:</p>
<p>find include -name \*.h -exec g++ -Iinclude -I.build/include -Isrc/other/openNURBS  -fsyntax-only -Wall -Wextra -Wno-deprecated {} \;</p>



<a name="196822768"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196822768" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196822768">(May 07 2020 at 19:58)</a>:</h4>
<p>Can revert it, but I build tested on multiple platforms... you're thinking it's still broken somewhere?</p>



<a name="196822817"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196822817" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196822817">(May 07 2020 at 19:58)</a>:</h4>
<p>I added stdio.h in lieu of bio.h when it just needed FILE, for example</p>



<a name="196822983"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196822983" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196822983">(May 07 2020 at 20:00)</a>:</h4>
<p>Hmm.  That might be possible, actually...</p>



<a name="196823171"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196823171" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196823171">(May 07 2020 at 20:01)</a>:</h4>
<p>I'll try it in the branch</p>



<a name="196824466"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196824466" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196824466">(May 07 2020 at 20:12)</a>:</h4>
<p>Erm.  How do I configure test for a compiler flag that by design produces no .o file?</p>



<a name="196828729"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196828729" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196828729">(May 07 2020 at 20:53)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  A rough attempt at such a header testing target is in trunk:</p>
<p>cmake .. -DBRLCAD_HDR_CHECK=ON &amp;&amp; make check-headers -k</p>



<a name="196829413"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196829413" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196829413">(May 07 2020 at 21:00)</a>:</h4>
<p>I don't see any  at first glance that look like they're due to r75729...</p>



<a name="196829580"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196829580" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196829580">(May 07 2020 at 21:01)</a>:</h4>
<p>Do you want me to start fixing them?  The two I'm not sure how to handle are vector_x86.h and vector_fpu.h</p>



<a name="196830012"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830012" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830012">(May 07 2020 at 21:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196822768" title="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196822768">said</a>:</p>
<blockquote>
<p>Can revert it, but I build tested on multiple platforms... you're thinking it's still broken somewhere?</p>
</blockquote>
<p>Not a big deal yet, but there is an issue there.  </p>
<p>The headers are likely broken by the nature of using a symbol that hasn't been declared yet, but compilation won't stop because you added the header in all the places it was used (thus masking the fact the header didn't declare it like it should have).</p>
<p>Later someone goes to use the header and gets the error, and they either perpetuate by adding stdio/bio to their source or the fix the header leaving a lot of unnecessary redundant includes in all the callers.</p>



<a name="196830228"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830228" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830228">(May 07 2020 at 21:07)</a>:</h4>
<p>Wouldn't the g++ check you ran see the  undeclared symbols?  Maybe I'm misunderstanding what' that's telling us...</p>



<a name="196830241"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830241" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830241">(May 07 2020 at 21:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196822817" title="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196822817">said</a>:</p>
<blockquote>
<p>I added stdio.h in lieu of bio.h when it just needed FILE, for example</p>
</blockquote>
<p>if you actually did catch them all, then they're not broken, but then it means all the bio.h in the usage locations are redundant/unnecessary right?</p>



<a name="196830319"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830319" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830319">(May 07 2020 at 21:08)</a>:</h4>
<p>Some yes, some no - open/close calls need unistd.h</p>



<a name="196830376"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830376" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830376">(May 07 2020 at 21:08)</a>:</h4>
<p>which is to say those headers aren't right</p>



<a name="196830461"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830461" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830461">(May 07 2020 at 21:09)</a>:</h4>
<p>sorry, I was talking about the source files</p>



<a name="196830495"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830495" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830495">(May 07 2020 at 21:09)</a>:</h4>
<p>you're talking about bio.h usage in the headers?</p>



<a name="196830500"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830500" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830500">(May 07 2020 at 21:09)</a>:</h4>
<p>if the symbols were only in the source files then it's certainly fine</p>



<a name="196830619"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830619" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830619">(May 07 2020 at 21:10)</a>:</h4>
<p>there are only 3 bio.h usages in the headers, and they should all be for windows.h (things like HANDLE, iirc, or getting ahead of opennurbs.h in one case.)</p>



<a name="196830622"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830622" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830622">(May 07 2020 at 21:10)</a>:</h4>
<p>I mean symbols in the public headers that were satisfied by bio.h (regardless of the comment about it being for whatever reason)</p>



<a name="196830678"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830678" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830678">(May 07 2020 at 21:11)</a>:</h4>
<p>right, I tried to get all of those when I made the switch.</p>



<a name="196830733"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830733" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830733">(May 07 2020 at 21:11)</a>:</h4>
<p>but did you get them by making sure they included what they declared, or did you get them by putting a header in a source file</p>



<a name="196830803"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830803" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830803">(May 07 2020 at 21:12)</a>:</h4>
<p>including what they declared</p>



<a name="196830814"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830814" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830814">(May 07 2020 at 21:12)</a>:</h4>
<p>then there's no problem</p>



<a name="196830852"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830852" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830852">(May 07 2020 at 21:12)</a>:</h4>
<p>a little surprising, but not a problem if true ;)</p>



<a name="196830869"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196830869" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196830869">(May 07 2020 at 21:13)</a>:</h4>
<p>if that means what I think it means - i.e. bu_function(FILE *stream) needs stdio in the header because the function signature exposes the FILE type</p>



<a name="196831000"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831000" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831000">(May 07 2020 at 21:14)</a>:</h4>
<p>yep, that's exactly it</p>



<a name="196831038"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831038" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831038">(May 07 2020 at 21:14)</a>:</h4>
<p>you tested windows?  iirc, there's a handful of things that come from stdio.h on linux that come from windows.h on windows.</p>



<a name="196831094"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831094" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831094">(May 07 2020 at 21:14)</a>:</h4>
<p>I've built on windows - haven't tried your g++ style test there (can it be done with msvc?)</p>



<a name="196831120"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831120" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831120">(May 07 2020 at 21:15)</a>:</h4>
<p>I don't think we have any in public headers, but wouldn't bet on it</p>



<a name="196831230"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831230" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831230">(May 07 2020 at 21:15)</a>:</h4>
<p>I think I listed the platforms I tested in the commit message... let me see...  ah:</p>
<p>Passes make check on MSVC 2017, Linux GCC 9.2, Linux clang 9,  OSX (github runner), and OpenBSD (clang 8)</p>



<a name="196831349"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831349" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831349">(May 07 2020 at 21:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196829580" title="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196829580">said</a>:</p>
<blockquote>
<p>Do you want me to start fixing them?  The two I'm not sure how to handle are vector_x86.h and vector_fpu.h</p>
</blockquote>
<p>If you want, but I wouldn't mix it with that branch work.  Adding missing headers should be low risk (because in theory all the callers will simply have redundant includes once they get fixed).</p>



<a name="196831417"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831417" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831417">(May 07 2020 at 21:17)</a>:</h4>
<p>would be fun to test the new gcc that came out today</p>



<a name="196831436"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831436" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831436">(May 07 2020 at 21:17)</a>:</h4>
<p>it's been a year I think?</p>



<a name="196831521"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831521" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831521">(May 07 2020 at 21:18)</a>:</h4>
<p>The branch is pretty well closed out at this point - adding the header check in basic form was simple and non-invasive, and if you decide you want it in that form we can juice it up later in trunk.</p>



<a name="196831703"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831703" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831703">(May 07 2020 at 21:20)</a>:</h4>
<p>Last thing I should need to do in trunk (unless your mac builds identify more problems)  is clean up the bot command refactor I started.</p>



<a name="196831709"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831709" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831709">(May 07 2020 at 21:20)</a>:</h4>
<p>don't understand -- you added the header check to trunk</p>



<a name="196831738"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831738" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831738">(May 07 2020 at 21:20)</a>:</h4>
<p>just now, yeah - I did the initial experimentation in the branch</p>



<a name="196831858"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831858" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831858">(May 07 2020 at 21:21)</a>:</h4>
<p>Once it proved simple to add, I went ahead and merged it to trunk</p>



<a name="196831860"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831860" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831860">(May 07 2020 at 21:21)</a>:</h4>
<p>ah, it's no risk so <em>shrug</em></p>



<a name="196831899"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831899" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831899">(May 07 2020 at 21:21)</a>:</h4>
<p>the header check is cool, thanks!</p>



<a name="196831977"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831977" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831977">(May 07 2020 at 21:22)</a>:</h4>
<p>It's a little more work to tie in compiler flag detection and hook it into make regress (which presumably is where you eventually want it to go) but for now now it's a quick manual check if the hard-coded build flags work for the current platform.</p>



<a name="196831992"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196831992" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196831992">(May 07 2020 at 21:22)</a>:</h4>
<p>is there a way to get rid of all the line added to every header dir though?  it's ancillary to that file's purpose and begs questions to newcomers</p>



<a name="196832053"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196832053" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196832053">(May 07 2020 at 21:23)</a>:</h4>
<p>make regress only after all headers are fixed.  they were all last clean and verified maybe 5 years ago</p>



<a name="196832201"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196832201" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196832201">(May 07 2020 at 21:24)</a>:</h4>
<p>yes, but there are trade-offs - using the lists this way we can be sure we aren't testing stray files stashed in the directories (CMAKEFILES ignored files, for example.)  I could do one toplevel build that reaches down into the lower directories, but then any renaming done a lower levels will have non-obvious breakage consequences.</p>



<a name="196832262"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196832262" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196832262">(May 07 2020 at 21:25)</a>:</h4>
<p>this is one of the rare instances where recursive globbing would have been kosher :)</p>



<a name="196832287"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196832287" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196832287">(May 07 2020 at 21:25)</a>:</h4>
<p>how do we exclude files though?</p>



<a name="196832297"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196832297" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196832297">(May 07 2020 at 21:25)</a>:</h4>
<p>besides CMakeLists.txt I mean...</p>



<a name="196832410"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196832410" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196832410">(May 07 2020 at 21:26)</a>:</h4>
<p>For example, bu has column.h and tbl.h stashed in it - a recursive glob will grab those, which we don't want</p>



<a name="196832485"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196832485" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196832485">(May 07 2020 at 21:27)</a>:</h4>
<p>I suppose I can try it and see if any of those cause breakage - maybe it won't matter</p>



<a name="196832488"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196832488" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196832488">(May 07 2020 at 21:27)</a>:</h4>
<p>why not?<br>
I would expect to glob on *.h .. and if there's a header in our include folder, good to know if it's busted.</p>



<a name="196832515"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196832515" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196832515">(May 07 2020 at 21:27)</a>:</h4>
<p>if they work, then no problem, great to know if we ever do add a broken one</p>



<a name="196832602"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196832602" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196832602">(May 07 2020 at 21:28)</a>:</h4>
<p>if they don't work, they they specifically could be excluded ... the downside is completely localized to the test itself</p>



<a name="196832604"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196832604" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196832604">(May 07 2020 at 21:28)</a>:</h4>
<p>A couple are "headers in progress" I left there years ago.  I suppose if they're a problem they've just now qualified for removal as a maintenance burden ;-)</p>



<a name="196832706"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196832706" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196832706">(May 07 2020 at 21:29)</a>:</h4>
<p>it's also super easy to fix headers in general if they are broken.  it's just they propagate a slew of unnecessary includes and #ifdef logic to callers when they're broken</p>



<a name="196832752"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196832752" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196832752">(May 07 2020 at 21:29)</a>:</h4>
<p>bsd used to be notorious for that</p>



<a name="196833780"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196833780" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196833780">(May 07 2020 at 21:40)</a>:</h4>
<p>OK, r75745 localizes it</p>



<a name="196836401"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196836401" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196836401">(May 07 2020 at 22:06)</a>:</h4>
<p>r75746 gets most of them - we're down to the weirdly recursive trio of bn/dvec.h bn/vector_fpu.h and bn/vector_x86.h and RtServerImpl.h wanting JNIEXPORT (which our headers don't define anywhere.)</p>



<a name="196836443"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196836443" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196836443">(May 07 2020 at 22:06)</a>:</h4>
<p>my vote would be to yank RtServerImpl.h, unless someone is still using it...</p>



<a name="196836629"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196836629" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196836629">(May 07 2020 at 22:09)</a>:</h4>
<p>I've tangled with the bn/vec* files once or twice in the past and lost - IIRC they have something to do with the NURBS code</p>



<a name="196838949"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196838949" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196838949">(May 07 2020 at 22:36)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> back to clean build state and confirmed.  distcheck-full failures are consistent and repeatable.  iges error is real, i'm back debugging it.  Looks like it's crashing during a boolean evaluation export.</p>



<a name="196846315"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196846315" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196846315">(May 08 2020 at 00:13)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  excellent</p>



<a name="196846414"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196846414" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196846414">(May 08 2020 at 00:14)</a>:</h4>
<p>There we go - make check-headers is now clean!</p>



<a name="196846751"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196846751" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196846751">(May 08 2020 at 00:20)</a>:</h4>
<p>once project I did many many mmmmany years ago (before I met yall), I had a 'no recursive include' policy and occasionally tried commenting out includes, the compile time was amazeballs</p>



<a name="196847284"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196847284" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196847284">(May 08 2020 at 00:33)</a>:</h4>
<p>Heh - I'd hate to even contemplate what that would take for BRL-CAD</p>



<a name="196847351"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196847351" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196847351">(May 08 2020 at 00:34)</a>:</h4>
<p>Heh - seven commits away from 75757</p>



<a name="196855891"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196855891" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196855891">(May 08 2020 at 04:02)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span>  haven't yet isolated if it's bsd-specific, probably not, but it is only exhibiting on freebsd (thus far) and only in optimized builds.  it's not limited to g-iges, just happens to be the tool more reliably triggering the race.  error appears to be not new, so it doesn't have to be a release blocker.</p>



<a name="196900401"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196900401" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196900401">(May 08 2020 at 14:15)</a>:</h4>
<p>freebsd, not OSX?</p>



<a name="196900479"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196900479" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196900479">(May 08 2020 at 14:15)</a>:</h4>
<p><span class="user-mention" data-user-id="102939">@Daniel Rossberg</span> Is RELEASE branch still good for you?</p>



<a name="196900589"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196900589" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196900589">(May 08 2020 at 14:16)</a>:</h4>
<p>I don't think I've changed anything since your last test, but it's now last call ;-)</p>



<a name="196900866"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196900866" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Rossberg <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196900866">(May 08 2020 at 14:19)</a>:</h4>
<p>No, nothing has changed. It's still revision 75755.</p>



<a name="196900904"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196900904" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Rossberg <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196900904">(May 08 2020 at 14:19)</a>:</h4>
<p>I.e., it's still good.</p>



<a name="196901008"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196901008" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196901008">(May 08 2020 at 14:20)</a>:</h4>
<p>OK.  Changelog updates are going in, release date gets updated (again), and then we're tagging!</p>



<a name="196901964"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196901964" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196901964">(May 08 2020 at 14:28)</a>:</h4>
<p>Whew</p>



<a name="196901983"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196901983" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196901983">(May 08 2020 at 14:28)</a>:</h4>
<p>Lot of fun for a "patch" release...</p>



<a name="196971515"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196971515" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196971515">(May 09 2020 at 03:42)</a>:</h4>
<p>Thank you, OpenBSD.  Getting a core file from MGED (but no other failure report in make regress, so don't know what's producing it) and the old gdb can't read it.  Compiled the new gdb from ports, ran egdb... and gdb itself crashed trying to read the core file.  Now I have a gdb core dump.</p>



<a name="196971553"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196971553" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196971553">(May 09 2020 at 03:43)</a>:</h4>
<p>That's a big help.</p>



<a name="196971944"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196971944" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196971944">(May 09 2020 at 03:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196900401" title="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/196900401">said</a>:</p>
<blockquote>
<p>freebsd, not OSX?</p>
</blockquote>
<p>ugh, I literally lost track of which platform I was debugging on (I have like 20 terminals open atm) and somehow got into an "i'm on freebsd" because the debugging looked exactly like the issue we've been having on freebsd.</p>
<p>I was wrong, very wrong.  the corruption is on mac, release builds, not limited to g-iges.</p>



<a name="196971958"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196971958" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196971958">(May 09 2020 at 03:55)</a>:</h4>
<p>talk about a massive brain fart.</p>



<a name="196972024"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196972024" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196972024">(May 09 2020 at 03:56)</a>:</h4>
<p>anyways, I have a reliable stack trace and have a lead on the cause.  going to keep at it this weekend to see if I can suss it out.</p>



<a name="196991619"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196991619" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196991619">(May 09 2020 at 13:24)</a>:</h4>
<p>I think you might need to change your brain drawers, boy :D</p>



<a name="196999781"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/196999781" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#196999781">(May 09 2020 at 16:29)</a>:</h4>
<p>I do.  Got too much going on.</p>



<a name="197051269"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197051269" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197051269">(May 10 2020 at 12:00)</a>:</h4>
<p>well, poop, I grabbed an rpi3b+ to pop up a new backup server and they only have usb2, I think writing to the disk may be slower than my network O.o :/</p>



<a name="197454858"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197454858" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197454858">(May 13 2020 at 18:19)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> Just did an update and now seeing this error again:</p>
<div class="codehilite"><pre><span></span><code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc -std=c11  -D_POSIX_C_SOURCE=200809L -D_XOPEN_SOURCE=700 -pipe -fno-strict-aliasing -fn\
o-common -fexceptions -m64 -ggdb -Qunused-arguments -fstack-protector-all -fno-omit-frame-pointer -pedantic -pedantic-errors -Wall -Wextra -Wundef -Wfloat-equal -Wshadow -Wbad-\
function-cast -Wc++-compat -Winline -Wno-long-long -Wno-variadic-macros -Wdocumentation -Wno-c11-extensions -Werror -isysroot /Applications/Xcode.app/Contents/Developer/Platfor\
ms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk -mmacosx-version-min=10.14 -dynamiclib -Wl,-headerpad_max_install_names  -m64 -ggdb -compatibility_version 20.0.0 -current_ver\
sion 20.0.1 -o ../../lib/libicv.20.0.1.dylib -install_name @rpath/libicv.20.dylib CMakeFiles/libicv-obj.dir/fileformat.c.o CMakeFiles/libicv-obj.dir/rot.c.o CMakeFiles/libicv-o\
bj.dir/color_space.c.o CMakeFiles/libicv-obj.dir/crop.c.o CMakeFiles/libicv-obj.dir/filter.c.o CMakeFiles/libicv-obj.dir/encoding.c.o CMakeFiles/libicv-obj.dir/operations.c.o C\
MakeFiles/libicv-obj.dir/stat.c.o CMakeFiles/libicv-obj.dir/size.c.o CMakeFiles/libicv-obj.dir/pix.c.o CMakeFiles/libicv-obj.dir/png.c.o CMakeFiles/libicv-obj.dir/ppm.c.o CMake\
Files/libicv-obj.dir/bw.c.o CMakeFiles/libicv-obj.dir/dpix.c.o  -Wl,-rpath,/Users/morrison/brlcad.trunk/.build/lib ../../lib/libbn.20.0.1.dylib /usr/local/lib/libpng.dylib ../.\
./lib/libnetpbm.dylib ../../lib/libbu.20.0.1.dylib -framework Foundation -ldl -framework System /usr/lib/libc.dylib -lm
Undefined symbols for architecture x86_64:
  &quot;_brl_png_create_info_struct&quot;, referenced from:
      _png_write in png.c.o
      _png_read in png.c.o
  &quot;_brl_png_create_read_struct&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_create_write_struct&quot;, referenced from:
      _png_write in png.c.o
  &quot;_brl_png_destroy_read_struct&quot;, referenced from:
      _png_write in png.c.o
  &quot;_brl_png_destroy_write_struct&quot;, referenced from:
      _png_write in png.c.o
  &quot;_brl_png_get_bKGD&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_get_bit_depth&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_get_color_type&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_get_gAMA&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_get_image_height&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_get_image_width&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_init_io&quot;, referenced from:
      _png_write in png.c.o
      _png_read in png.c.o
  &quot;_brl_png_read_image&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_read_info&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_read_update_info&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_set_IHDR&quot;, referenced from:
      _png_write in png.c.o
  &quot;_brl_png_set_background&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_set_expand&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_set_gAMA&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_set_gray_to_rgb&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_set_longjmp_fn&quot;, referenced from:
      _png_write in png.c.o
  &quot;_brl_png_set_sig_bytes&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_set_strip_16&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_sig_cmp&quot;, referenced from:
      _png_read in png.c.o
  &quot;_brl_png_write_end&quot;, referenced from:
      _png_write in png.c.o
  &quot;_brl_png_write_info&quot;, referenced from:
      _png_write in png.c.o
  &quot;_brl_png_write_row&quot;, referenced from:
      _png_write in png.c.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [lib/libicv.20.0.1.dylib] Error 1
</code></pre></div>



<a name="197454972"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197454972" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197454972">(May 13 2020 at 18:20)</a>:</h4>
<p>Any ideas?  It seems like maybe something stateful as it didn't error on a fresh build, but did after a simple re-run that had nothing to do with libicv.</p>



<a name="197473305"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197473305" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197473305">(May 13 2020 at 20:29)</a>:</h4>
<p>So it got /usr/local/lib/libpng.dylib somehow.... weird.</p>



<a name="197473494"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197473494" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197473494">(May 13 2020 at 20:30)</a>:</h4>
<p>@Sean CMakeCache.txt file available?</p>



<a name="197475989"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197475989" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197475989">(May 13 2020 at 20:51)</a>:</h4>
<p>Somehow PNG_LIBRARIES must be getting overridden - that's the variable libicv is referencing.  When you say "rerun" is that a CMake re-run or a re-build?</p>



<a name="197476828"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197476828" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197476828">(May 13 2020 at 20:59)</a>:</h4>
<p>If it's a CMake re-run you'll probably see something in the CMake output about "finding" PNG - that would be when things are getting messed up.  The question would be why it thinks it needs to look for PNG in the first place.  I'll see if I can try a double-configure on github...</p>



<a name="197478027"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197478027" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197478027">(May 13 2020 at 21:09)</a>:</h4>
<p>Sorry, I already wiped some files out and have it working again</p>



<a name="197478419"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197478419" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197478419">(May 13 2020 at 21:12)</a>:</h4>
<p>it was an svn up followed by make, which re-ran cmake, which then failed.  did make clean, wiped out cmake cache, wiped out cmakefiles dir, and still failed.  deleted build/cmake* and build/include, re-ran cmake, and seems to be back working.  is there perhaps something getting written into the brlcad_config that gets screwed up on a second pass?</p>



<a name="197478601"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197478601" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197478601">(May 13 2020 at 21:14)</a>:</h4>
<p>this is a simple default "cmake .." so it's the auto-detect default and there is a proper libpng for it to find</p>



<a name="197478679"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197478679" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197478679">(May 13 2020 at 21:14)</a>:</h4>
<p>this is the fresh start cmakecache results that succeeds:</p>
<div class="codehilite"><pre><span></span><code>agua:.build morrison$ grep -r -i png CMakeCache.txt
CMakeCache.txt://define BRLCAD_PNG
CMakeCache.txt:BRLCAD_PNG:STRING=SYSTEM (AUTO)
CMakeCache.txt://PNG_INCLUDE_DIR
CMakeCache.txt:PNG_INCLUDE_DIR:STRING=PNG-NOTFOUND
CMakeCache.txt://PNG include directory
CMakeCache.txt:PNG_INCLUDE_DIRS:STRING=/usr/local/include
CMakeCache.txt://PNG_LIBRARIES
CMakeCache.txt:PNG_LIBRARIES:STRING=/usr/local/lib/libpng.dylib
CMakeCache.txt://PNG_LIBRARY
CMakeCache.txt:PNG_LIBRARY:STRING=PNG-NOTFOUND
CMakeCache.txt:PNG_LIBRARY_DEBUG:FILEPATH=PNG_LIBRARY_DEBUG-NOTFOUND
CMakeCache.txt:PNG_LIBRARY_RELEASE:FILEPATH=/usr/local/lib/libpng.dylib
CMakeCache.txt://Set PNG_MAN_DIR to the global MAN_DIR
CMakeCache.txt:PNG_MAN_DIR:STRING=share/man
CMakeCache.txt://Option to disable Console IO in PNG
CMakeCache.txt:PNG_NO_CONSOLE_IO:BOOL=OFF
CMakeCache.txt://Option to disable STDIO in PNG
CMakeCache.txt:PNG_NO_STDIO:BOOL=OFF
CMakeCache.txt:PNG_PNG_INCLUDE_DIR:PATH=/usr/local/include
CMakeCache.txt://BRL-CAD prefix for libpng
CMakeCache.txt:PNG_PREFIX:STRING=brl_
CMakeCache.txt://Disable building png test executables
CMakeCache.txt:PNG_TESTS:STRING=0
CMakeCache.txt:libdm_LIB_DEPENDS:STATIC=general;librt;general;libfb;general;/usr/X11/lib/libSM.dylib;general;/usr/X11/lib/libICE.dylib;general;/usr/X11/lib/libX11.dylib;general;/usr/X11/lib/libXext.dylib;general;/usr/X11/lib/libXi.dylib;general;/usr/lib/libtcl.dylib;general;/usr/lib/libtk.dylib;general;/usr/local/lib/libpng.dylib;
CMakeCache.txt:libfb_LIB_DEPENDS:STATIC=general;libbu;general;libpkg;general;/usr/local/lib/libpng.dylib;general;/usr/lib/libtcl.dylib;general;/usr/X11/lib/libSM.dylib;general;/usr/X11/lib/libICE.dylib;general;/usr/X11/lib/libX11.dylib;general;/usr/X11/lib/libXext.dylib;general;/usr/X11/lib/libXi.dylib;general;/usr/X11/lib/libGLU.dylib;general;/usr/X11/lib/libGL.dylib;general;/usr/X11/lib/libSM.dylib;general;/usr/X11/lib/libICE.dylib;general;/usr/X11/lib/libX11.dylib;general;/usr/X11/lib/libXext.dylib;general;/usr/X11/lib/libXi.dylib;general;/usr/lib/libtk.dylib;
CMakeCache.txt:libged_LIB_DEPENDS:STATIC=general;libwdb;general;liboptical;general;librt;general;libbrep;general;libnmg;general;libfb;general;libbg;general;libbn;general;libbu;general;libicv;general;libanalyze;general;/usr/local/lib/libpng.dylib;general;/usr/lib/libc.dylib;general;m;
CMakeCache.txt:libicv_LIB_DEPENDS:STATIC=general;libbu;general;libbn;general;/usr/local/lib/libpng.dylib;general;netpbm;
CMakeCache.txt://STRINGS property for variable: BRLCAD_PNG
CMakeCache.txt:BRLCAD_PNG-STRINGS:INTERNAL=AUTO;BUNDLED;SYSTEM
CMakeCache.txt://Details about finding PNG
CMakeCache.txt:FIND_PACKAGE_MESSAGE_DETAILS_PNG:INTERNAL=[/usr/local/lib/libpng.dylib][/usr/local/include][v1.6.37()]
CMakeCache.txt://ADVANCED property for variable: PNG_INCLUDE_DIR
CMakeCache.txt:PNG_INCLUDE_DIR-ADVANCED:INTERNAL=1
CMakeCache.txt://ADVANCED property for variable: PNG_INCLUDE_DIRS
CMakeCache.txt:PNG_INCLUDE_DIRS-ADVANCED:INTERNAL=1
CMakeCache.txt://ADVANCED property for variable: PNG_LIBRARIES
CMakeCache.txt:PNG_LIBRARIES-ADVANCED:INTERNAL=1
CMakeCache.txt://ADVANCED property for variable: PNG_LIBRARY
CMakeCache.txt:PNG_LIBRARY-ADVANCED:INTERNAL=1
CMakeCache.txt://ADVANCED property for variable: PNG_LIBRARY_DEBUG
CMakeCache.txt:PNG_LIBRARY_DEBUG-ADVANCED:INTERNAL=1
CMakeCache.txt://ADVANCED property for variable: PNG_LIBRARY_RELEASE
CMakeCache.txt:PNG_LIBRARY_RELEASE-ADVANCED:INTERNAL=1
CMakeCache.txt://ADVANCED property for variable: PNG_MAN_DIR
CMakeCache.txt:PNG_MAN_DIR-ADVANCED:INTERNAL=1
CMakeCache.txt://ADVANCED property for variable: PNG_NO_CONSOLE_IO
CMakeCache.txt:PNG_NO_CONSOLE_IO-ADVANCED:INTERNAL=1
CMakeCache.txt://ADVANCED property for variable: PNG_NO_STDIO
CMakeCache.txt:PNG_NO_STDIO-ADVANCED:INTERNAL=1
CMakeCache.txt://ADVANCED property for variable: PNG_PNG_INCLUDE_DIR
CMakeCache.txt:PNG_PNG_INCLUDE_DIR-ADVANCED:INTERNAL=1
CMakeCache.txt://ADVANCED property for variable: PNG_PREFIX
CMakeCache.txt:PNG_PREFIX-ADVANCED:INTERNAL=1
CMakeCache.txt://ADVANCED property for variable: PNG_TESTS
CMakeCache.txt:PNG_TESTS-ADVANCED:INTERNAL=1
</code></pre></div>



<a name="197478694"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197478694" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197478694">(May 13 2020 at 21:15)</a>:</h4>
<p>OK, so the error was the prefix definition being set when it should <em>not</em> have been set?</p>



<a name="197478717"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197478717" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197478717">(May 13 2020 at 21:15)</a>:</h4>
<p>presumably</p>



<a name="197478746"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197478746" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197478746">(May 13 2020 at 21:15)</a>:</h4>
<p>so second pass, somehow the header has _brl_ getting defined, so libicv can't resolve when it tries to link</p>



<a name="197478938"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197478938" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197478938">(May 13 2020 at 21:17)</a>:</h4>
<p>I'm a little surprised that succeeded - PNG_PREFIX is set.</p>



<a name="197478944"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197478944" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197478944">(May 13 2020 at 21:17)</a>:</h4>
<p>testing a simple touch CMakelists.txt src/libicv/* + make, cmake rerunning now to see if it triggers</p>



<a name="197479196"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197479196" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197479196">(May 13 2020 at 21:19)</a>:</h4>
<p>that worked, so it's something a bit more complex than just re-running cmake</p>



<a name="197479357"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197479357" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197479357">(May 13 2020 at 21:21)</a>:</h4>
<p>A stale pnglibconf.h is one possibility</p>



<a name="197479373"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197479373" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197479373">(May 13 2020 at 21:21)</a>:</h4>
<p>$ nm src/libicv/CMakeFiles/libicv-obj.dir/png.c.o <br>
does not have _brl_</p>



<a name="197479386"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197479386" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197479386">(May 13 2020 at 21:21)</a>:</h4>
<p>If it's finding a local pnglibconf.h but a system libpng, that'll most likely blow up</p>



<a name="197479584"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197479584" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197479584">(May 13 2020 at 21:22)</a>:</h4>
<p>Ah, that could very well be actually.  pnglibconf.h, IIRC, is generated as a build output.  Just switching the third party setting probably isn't clearing it out.  Let me see where it ends up in the output...</p>



<a name="197480079"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197480079" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197480079">(May 13 2020 at 21:27)</a>:</h4>
<p>Looking at the cache file, an initial configure leaves PNG_INCLUDE_DIR set to NOTFOUND.  The ENABLE_ALL is actually setting that.  Let me see if libicv is looking at the wrong PNG include var...</p>



<a name="197480098"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197480098" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197480098">(May 13 2020 at 21:27)</a>:</h4>
<p>no...</p>



<a name="197480493"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197480493" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197480493">(May 13 2020 at 21:32)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>   with that result, something somehow is getting an ENABLE_ALL header with a system libpng, since clearly the PNG_PREFIX CMake variable by itself didn't trigger the issue (and I see why it doesn't, looking at libpng)</p>



<a name="197480662"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197480662" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197480662">(May 13 2020 at 21:33)</a>:</h4>
<p>Maybe I should go back to getting that third party build system rework done, even if it does mean a rewrite of the top level flow... I've lost count of the number of times that ThirdParty.cmake state management has bitten me subtly over the years...</p>



<a name="197480716"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197480716" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197480716">(May 13 2020 at 21:34)</a>:</h4>
<p>(no, I'm not going to, don't worry...)</p>



<a name="197486075"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197486075" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197486075">(May 13 2020 at 22:37)</a>:</h4>
<p>Don't think it needs to a nuclear option.  It's almost certainly a single var mispelled, misplaced, ifdef/ifndef switcheroo or something else really simple.</p>



<a name="197979023"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197979023" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197979023">(May 18 2020 at 18:43)</a>:</h4>
<p>Updated, and now seeing after make test:</p>
<div class="codehilite"><pre><span></span><code>    881 - regress-flawfinder (Failed)
    882 - regress-mged (Failed)
    901 - regress-gcv-dem (Failed)
    905 - regress-pkg (Timeout)
</code></pre></div>



<a name="197979216"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197979216" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197979216">(May 18 2020 at 18:45)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  make test is the one that won't work reliably - it runs everything, even the non-working tests.  You probably wanted make check?</p>



<a name="197979320"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197979320" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197979320">(May 18 2020 at 18:46)</a>:</h4>
<p>I know that, but I thought the first three were working</p>



<a name="197979333"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197979333" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197979333">(May 18 2020 at 18:46)</a>:</h4>
<p>I know the pkg one is nwe</p>



<a name="197979623"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197979623" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197979623">(May 18 2020 at 18:48)</a>:</h4>
<p>Flawfinder I don't think has ever worked fully (or at least, not in a long time.)  If that mged test is the old one I was working on it hasn't worked in a long time.  The gcv-dem is too sensitive, IIRC - it's md5summing the output dsp</p>



<a name="197980249"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/197980249" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#197980249">(May 18 2020 at 18:53)</a>:</h4>
<p>okay, hrm.  thanks!  will ignore.</p>



<a name="202095183"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202095183" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sadeep Darshana <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202095183">(Jun 26 2020 at 14:10)</a>:</h4>
<p>Is Archer working in the latest revision?</p>



<a name="202095220"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202095220" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sadeep Darshana <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202095220">(Jun 26 2020 at 14:11)</a>:</h4>
<p>also MGED</p>



<a name="202103405"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202103405" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202103405">(Jun 26 2020 at 15:15)</a>:</h4>
<p>It should be...</p>



<a name="202103421"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202103421" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202103421">(Jun 26 2020 at 15:15)</a>:</h4>
<p>What are the errors?</p>



<a name="202103982"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202103982" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202103982">(Jun 26 2020 at 15:20)</a>:</h4>
<p>Which Visual Studio are you using?  The testing I've done was with 2017, so 2019 might have some issues...</p>



<a name="202107284"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202107284" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sadeep Darshana <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202107284">(Jun 26 2020 at 15:46)</a>:</h4>
<p><strong>Archer</strong><br>
C:\summer\brlcad-code\build\Debug\bin\archer.exe<br>
ERROR:  Requisite display manager is not available.<br>
BRL-CAD may need to be recompiled with support for:  <br>
Run 'fbhelp' for a list of available display managers.</p>
<p>Unexpected error encountered while running Archer.<br>
Aborting.</p>
<p>Process finished with exit code 1<br>
<strong>MGED</strong><br>
This is what MGED looks like. <a href="/user_uploads/1549/gaXhCgjQLD8bK9xk6Hvm3v_t/image.png">image.png</a><br>
Visual Studio 16 2019, no special build options used</p>
<div class="message_inline_image"><a href="/user_uploads/1549/gaXhCgjQLD8bK9xk6Hvm3v_t/image.png" title="image.png"><img src="/user_uploads/1549/gaXhCgjQLD8bK9xk6Hvm3v_t/image.png"></a></div>



<a name="202107681"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202107681" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202107681">(Jun 26 2020 at 15:49)</a>:</h4>
<p>OK.  Something about the new display manager setup must be unhappy.  We've shifted to plugins, and that failure mode indicates that it can't locate the plugins.</p>



<a name="202107770"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202107770" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202107770">(Jun 26 2020 at 15:50)</a>:</h4>
<p>Let me see what 2017 does, then I'll see if I can try 2019</p>



<a name="202107782"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202107782" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sadeep Darshana <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202107782">(Jun 26 2020 at 15:50)</a>:</h4>
<p>I'll check that</p>



<a name="202108026"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202108026" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202108026">(Jun 26 2020 at 15:52)</a>:</h4>
<p>Do you have a "libexec" directory in your build output (in either Release or Debug, depending on which configuration you used to build...)</p>



<a name="202108034"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202108034" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sadeep Darshana <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202108034">(Jun 26 2020 at 15:52)</a>:</h4>
<p>I didn't build ALL_BUILD, but archer</p>



<a name="202108064"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202108064" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202108064">(Jun 26 2020 at 15:52)</a>:</h4>
<p>Ah.  OK, you'll need to build dm-wgl as well</p>



<a name="202108180"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202108180" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202108180">(Jun 26 2020 at 15:53)</a>:</h4>
<p>That's a point, archer and mged should explicitly depend on those targets now...</p>



<a name="202108372"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202108372" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sadeep Darshana <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202108372">(Jun 26 2020 at 15:55)</a>:</h4>
<p>It works <span class="user-mention" data-user-id="112516">@starseeker</span> . Thanks</p>



<a name="202108391"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202108391" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sadeep Darshana <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202108391">(Jun 26 2020 at 15:55)</a>:</h4>
<p>I thought building archer builds all dependancies</p>



<a name="202108486"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202108486" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sadeep Darshana <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202108486">(Jun 26 2020 at 15:56)</a>:</h4>
<p>Is it not what used to happen? (or did I build ALL_BUILD last time, because it used to work)</p>



<a name="202108496"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202108496" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202108496">(Jun 26 2020 at 15:56)</a>:</h4>
<p>It should.  I didn't think through all the implications of moving to plugin based architectures - there's no longer a link time dependency between the backends and applications, so the build system won't automatically make the connection</p>



<a name="202108595"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202108595" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202108595">(Jun 26 2020 at 15:57)</a>:</h4>
<p>The introduction of plugins into trunk is very new, so you might not have seen it previously, but ALL_BUILD would also have avoided it (that's why I didn't see it in earlier testing)</p>



<a name="202108641"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202108641" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202108641">(Jun 26 2020 at 15:57)</a>:</h4>
<p>Easy to fix - just need to specify the required backends as build dependencies.</p>



<a name="202108670"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202108670" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202108670">(Jun 26 2020 at 15:57)</a>:</h4>
<p>Testing now, hang on...</p>



<a name="202108678"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202108678" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sadeep Darshana <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202108678">(Jun 26 2020 at 15:58)</a>:</h4>
<p>cool</p>



<a name="202109504"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202109504" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202109504">(Jun 26 2020 at 16:04)</a>:</h4>
<p>r76220 should handle it for the most obvious cases - there are more that will need similar logic to build in isolation, but those will catch the most common cases.</p>



<a name="202400151"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202400151" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sadeep Darshana <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202400151">(Jun 30 2020 at 06:40)</a>:</h4>
<p>-- Could NOT find TCL (missing: TCL_STUB_LIBRARY TCL_INCLUDE_PATH) <br>
-- Could NOT find TCLTK (missing: TCL_STUB_LIBRARY TCL_INCLUDE_PATH TK_STUB_LIBRARY TK_INCLUDE_PATH) <br>
-- Could NOT find TK (missing: TK_STUB_LIBRARY TK_INCLUDE_PATH) <br>
-- Could NOT find TCLTK (missing: TK_STUB_LIBRARY TK_INCLUDE_PATH) <br>
-- Could NOT find TK (missing: TK_STUB_LIBRARY TK_INCLUDE_PATH) </p>
<p>Any idea why this happens eve after I installed required libraries under <a href="https://sourceforge.net/p/brlcad/code/HEAD/tree/brlcad/trunk/doc/README.Linux">https://sourceforge.net/p/brlcad/code/HEAD/tree/brlcad/trunk/doc/README.Linux</a><br>
(apt-get install xserver-xorg-dev libx11-dev libxi-dev libxext-dev  libfontconfig-dev libglu1-mesa-dev)<br>
See everything is installed.</p>
<p>root@sadeep-VirtualBox:/media/sf_summer/brlcad-code/build_linux# apt-get install xserver-xorg-dev libx11-dev libxi-dev libxext-dev  libfontconfig-dev libglu1-mesa-dev<br>
Reading package lists... Done<br>
Building dependency tree       <br>
Reading state information... Done<br>
Note, selecting 'libfontconfig1-dev' instead of 'libfontconfig-dev'<br>
libfontconfig1-dev is already the newest version (2.13.1-2ubuntu3).<br>
libglu1-mesa-dev is already the newest version (9.0.1-1build1).<br>
libx11-dev is already the newest version (2:1.6.9-2ubuntu1).<br>
libxext-dev is already the newest version (2:1.3.4-0ubuntu1).<br>
libxi-dev is already the newest version (2:1.7.10-0ubuntu1).<br>
xserver-xorg-dev is already the newest version (2:1.20.8-2ubuntu2.1).<br>
0 upgraded, 0 newly installed, 0 to remove and 218 not upgraded.</p>



<a name="202400594"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202400594" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sadeep Darshana <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202400594">(Jun 30 2020 at 06:47)</a>:</h4>
<p>(Ubuntu)</p>



<a name="202406196"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202406196" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sadeep Darshana <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202406196">(Jun 30 2020 at 08:13)</a>:</h4>
<p>Fixed this. Had to delete the cmake directory and reload after installing missing libraries. Simply reloading was not sufficient.</p>



<a name="202537417"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/202537417" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#202537417">(Jul 01 2020 at 07:15)</a>:</h4>
<p>Yeah, it will usually default to cache'd results, so you have to nuke it all.</p>



<a name="206113959"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206113959" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Rossberg <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206113959">(Aug 06 2020 at 08:05)</a>:</h4>
<p>What is the background of revision 75933 "ON_DLL_EXPORTS/ON_DLL_IMPORTS is no longer specific enough for an MSVC only override."? It breaks my MS Visual Studio brlcad.dll build with static libs.</p>



<a name="206135023"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206135023" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206135023">(Aug 06 2020 at 12:42)</a>:</h4>
<p>The import/export logic was generalized to be enabled both on MSVC and on GCC/clang - the latter has had such an ability for a little while, but we didn't use it.  When enabling it (mostly so we could detect changes that would break the import/export bit on platforms other than Windows) we had to adjust the import/export logic to be more general.  OpenNURBS was one of the libraries that had to be adjusted to accommodate it.</p>



<a name="206135528"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206135528" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206135528">(Aug 06 2020 at 12:47)</a>:</h4>
<p>If I recall correctly, that change triggered MSVC only logic in opennurbs, which is what prompted the change - I think your adjustment should be fine.</p>



<a name="206135801"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206135801" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Rossberg <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206135801">(Aug 06 2020 at 12:49)</a>:</h4>
<p>Okay, good.</p>



<a name="206967391"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206967391" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206967391">(Aug 14 2020 at 19:22)</a>:</h4>
<p>@starseeker got a new failure -- btclsh is crashing on launch on Mac inside dm_init()</p>



<a name="206967395"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206967395" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206967395">(Aug 14 2020 at 19:22)</a>:</h4>
<p>frame #4: 0x000000010077cd2e libdm.20.dylib`libdm_init() at dm_init.cpp:109:18</p>



<a name="206967429"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206967429" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206967429">(Aug 14 2020 at 19:22)</a>:</h4>
<p>dm_get_name() returned NULL, code didn't handle it</p>



<a name="206967709"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206967709" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206967709">(Aug 14 2020 at 19:25)</a>:</h4>
<p>er, not just btclsh. looks like mged is crashing too, anything doing dm init</p>



<a name="206967956"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206967956" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206967956">(Aug 14 2020 at 19:27)</a>:</h4>
<p>trunk or RELEASE?</p>



<a name="206968347"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206968347" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206968347">(Aug 14 2020 at 19:30)</a>:</h4>
<p>trunk</p>



<a name="206968406"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206968406" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206968406">(Aug 14 2020 at 19:31)</a>:</h4>
<p>I haven't tested RELEASE in a long while.</p>



<a name="206968501"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206968501" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206968501">(Aug 14 2020 at 19:32)</a>:</h4>
<p>OK.  Let me see what happens here... I've been hitting RELEASE so something may have slipped on trunk...</p>



<a name="206968585"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206968585" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206968585">(Aug 14 2020 at 19:33)</a>:</h4>
<p>That's a strange error... it indicates that the plugin loaded but didn't define a display manager with a name?</p>



<a name="206968969"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206968969" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206968969">(Aug 14 2020 at 19:36)</a>:</h4>
<p>Linux doesn't reproduce it...</p>



<a name="206969940"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206969940" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206969940">(Aug 14 2020 at 19:40)</a>:</h4>
<p>Looking at the code, dmp must be NULL so there are at least two issues in the code.  First issue is introducing a bunch of getter functions in dm-generic.c that can return NULL in r76200 -- every place those are called must check for NULL or the functions should get changed so NULL is not returnable.  Second issue is obviously whatever caused dmp to be NULL.</p>



<a name="206970665"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206970665" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206970665">(Aug 14 2020 at 19:43)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I just committed a check and err msg to dm_init.cpp - can you rebuild and run src/libdm/tests/dm_test  to see what happens?</p>



<a name="206970669"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206970669" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206970669">(Aug 14 2020 at 19:43)</a>:</h4>
<p>looks like that list is dm_interp, dm_get_fb, dm_get_dm_name, dm_get_dm_lname, dm_get_bg, dm_get_fg, dm_get_pathname, dm_get_name, dm_get_dname, dm_get_graphics_system, dm_get_tkname, dm_get_vp, dm_get_vparse, and dm_get_mvars</p>



<a name="206970694"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206970694" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206970694">(Aug 14 2020 at 19:43)</a>:</h4>
<p>sure</p>



<a name="206971364"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206971364" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206971364">(Aug 14 2020 at 19:46)</a>:</h4>
<p>hm, now cmake is failing</p>



<a name="206971438"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206971438" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206971438">(Aug 14 2020 at 19:46)</a>:</h4>
<p>/me closes eyes in pain</p>



<a name="206971769"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206971769" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206971769">(Aug 14 2020 at 19:47)</a>:</h4>
<p>It's a build from scratch, but I wouldn't expect that necessarily for the minor changes just made.. don't yet see why it's actually halting.</p>



<a name="206971930"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206971930" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206971930">(Aug 14 2020 at 19:48)</a>:</h4>
<div class="codehilite"><pre><span></span><code>agua:.build morrison$ make
**********************************************************
*** Configuring BRL-CAD Release 7.31.0, Build 20200814 ***
**********************************************************
X11 detected and enabled
Defining HAVE_X11_XLIB_H
Defining HAVE_X11_EXTENSIONS_XINPUT_H
-- Could NOT find Appleseed (missing: Appleseed_INCLUDE_DIR Appleseed_LIBRARY)
^[[D^[[D

-------------------- BRL-CAD Release 7.31.0, Build 20200814 --------------------

        Prefix: /usr/brlcad/dev-7.31.0
      Binaries: /usr/brlcad/dev-7.31.0/bin
     Libraries: /usr/brlcad/dev-7.31.0/lib
  Manual pages: /usr/brlcad/dev-7.31.0/share/man
Data resources: /usr/brlcad/dev-7.31.0/share

CC       = /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc
CXX      = /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++
CFLAGS   = -std=c11 -D_POSIX_C_SOURCE=200809L -D_XOPEN_SOURCE=700 -pipe
           -fvisibility=hidden -fno-strict-aliasing -fno-common -fexceptions
           -m64 -ggdb -Qunused-arguments -fstack-protector-all
           -fno-omit-frame-pointer -pedantic -pedantic-errors -Wall -Wextra
           -Wundef -Wfloat-equal -Wshadow -Wbad-function-cast -Wc++-compat
           -Winline -Wno-long-long -Wno-variadic-macros -Wdocumentation
           -Wno-c11-extensions -Werror
CXXFLAGS = -std=c++11 -D_POSIX_C_SOURCE=200809L -D_XOPEN_SOURCE=700 -pipe
           -fvisibility=hidden -fno-strict-aliasing -fno-common -fexceptions
           -ftemplate-depth-128 -m64 -ggdb -Qunused-arguments
           -fstack-protector-all -fno-omit-frame-pointer -pedantic -Wall
           -Wextra -Wundef -Wfloat-equal -Wshadow -Wbad-function-cast -Winline
           -Wno-long-long -Wno-variadic-macros -Wdocumentation
           -Wno-c11-extensions -Werror
LDFLAGS  = -m64 -ggdb

Compile Tcl ........................: ON
Compile Tk .........................: ON
Compile Itcl/Itk ...................: ON
Compile Iwidgets ...................: ON
Compile Tkhtml .....................: ON
Compile Tktable ....................: ON
Compile libpng .....................: ON
Compile libregex ...................: ON
Compile zlib .......................: ON
Compile Utah Raster Toolkit ........: ON
Compile openNURBS ..................: ON
Compile STEPcode....................: ON

OpenGL support (optional) ..........: ON
X11 support (optional) .............: ON
Qt support (optional) ..............: OFF
Run-time debuggability (optional) ..: ON

Build 32/64-bit release ............: 64BIT (Auto)
Build optimized release ............: OFF
Build static libraries .............: ON
Build dynamic libraries ............: ON
Install example geometry models ....: ON
Generate extra docs ................: ON (html/man)


&quot;/Users/morrison/brlcad.trunk/INSTALL&quot; is out of date.  An updated version has been generated at &quot;/Users/morrison/brlcad.trunk/.build/INSTALL.new&quot;
To clear this warning, replace &quot;/Users/morrison/brlcad.trunk/INSTALL&quot; with &quot;/Users/morrison/brlcad.trunk/.build/INSTALL.new&quot;


&quot;/Users/morrison/brlcad.trunk/configure&quot; is out of date.  An updated version has been generated at &quot;/Users/morrison/brlcad.trunk/.build/configure.new&quot;
To clear this warning, replace &quot;/Users/morrison/brlcad.trunk/configure&quot; with &quot;/Users/morrison/brlcad.trunk/.build/configure.new&quot;

CMake Error at misc/CMake/BRLCAD_Util.cmake:90 (_message):
  Configure haulted.
Call Stack (most recent call first):
  CMakeLists.txt:3728 (message)


-- Configuring incomplete, errors occurred!
See also &quot;/Users/morrison/brlcad.trunk/.build/CMakeFiles/CMakeOutput.log&quot;.
See also &quot;/Users/morrison/brlcad.trunk/.build/CMakeFiles/CMakeError.log&quot;.
</code></pre></div>



<a name="206972199"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206972199" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206972199">(Aug 14 2020 at 19:48)</a>:</h4>
<p>Oh.  For whatever reason, it's generated INSTALL and configure files that don't match the ones in the source tree</p>



<a name="206972212"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206972212" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206972212">(Aug 14 2020 at 19:48)</a>:</h4>
<p>I've gotten those messages about INSTALL and configure before, so I can't imagine it's those are causing the halt?</p>



<a name="206972264"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206972264" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206972264">(Aug 14 2020 at 19:49)</a>:</h4>
<p>Plus it says they are warnings...</p>



<a name="206972430"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206972430" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206972430">(Aug 14 2020 at 19:49)</a>:</h4>
<p>They're supposed to be fatal errors.  The only reason they're warnings is so we can check for both files before halting the configure</p>



<a name="206972747"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206972747" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206972747">(Aug 14 2020 at 19:50)</a>:</h4>
<p>what's the diff between INSTALL.new and INSTALL?</p>



<a name="206972756"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206972756" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206972756">(Aug 14 2020 at 19:50)</a>:</h4>
<p>Hm.  Is there not a way for it to at least report them as errors instead of warnings, and still check both?</p>



<a name="206972876"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206972876" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206972876">(Aug 14 2020 at 19:51)</a>:</h4>
<p>We could alter the message that's printed</p>



<a name="206972950"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206972950" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206972950">(Aug 14 2020 at 19:51)</a>:</h4>
<p>CMakeLists.txt line 3702</p>



<a name="206973018"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973018" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973018">(Aug 14 2020 at 19:52)</a>:</h4>
<p>configure.new is missing all of the dependency toggles (e.g., --enable-scl, --enable-step, --enable-gdiam, etc)</p>



<a name="206973076"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973076" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973076">(Aug 14 2020 at 19:52)</a>:</h4>
<p>O.o</p>



<a name="206973137"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973137" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973137">(Aug 14 2020 at 19:52)</a>:</h4>
<p>Which version of CMake are you using?</p>



<a name="206973144"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973144" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973144">(Aug 14 2020 at 19:52)</a>:</h4>
<p>that's the same problem with INSTALL.new .. they're all gone</p>



<a name="206973229"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973229" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973229">(Aug 14 2020 at 19:52)</a>:</h4>
<p>cmake version 3.16.20200125-g33e7bd6</p>



<a name="206973317"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973317" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973317">(Aug 14 2020 at 19:53)</a>:</h4>
<p>I wouldn't think that would be an issue...</p>



<a name="206973335"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973335" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973335">(Aug 14 2020 at 19:53)</a>:</h4>
<p>this was fine a week ago, so I'm not sure what changed</p>



<a name="206973347"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973347" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973347">(Aug 14 2020 at 19:53)</a>:</h4>
<p>This is from a clean build dir?</p>



<a name="206973420"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973420" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973420">(Aug 14 2020 at 19:53)</a>:</h4>
<p>of course not, I have a lot of in-progress work in there</p>



<a name="206973498"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973498" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973498">(Aug 14 2020 at 19:54)</a>:</h4>
<p>I can blow away the cmake bits though</p>



<a name="206973521"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973521" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973521">(Aug 14 2020 at 19:54)</a>:</h4>
<p>Maybe try removing CMakeCache.txt</p>



<a name="206973561"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973561" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973561">(Aug 14 2020 at 19:54)</a>:</h4>
<p>rm -rfing cmake* CMake*</p>



<a name="206973796"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973796" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973796">(Aug 14 2020 at 19:55)</a>:</h4>
<p>how is the INSTALL/configure file contents built up?  implies there's some bug there at least.</p>



<a name="206973941"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206973941" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206973941">(Aug 14 2020 at 19:56)</a>:</h4>
<p>should be obvious/categoric</p>



<a name="206975091"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206975091" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206975091">(Aug 14 2020 at 20:00)</a>:</h4>
<p>updated the error message</p>



<a name="206975540"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206975540" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206975540">(Aug 14 2020 at 20:02)</a>:</h4>
<p>The BRLCAD_OPTION function in misc/CMake/BRLCAD_Options.cmake does that, calling some helper functions to generate the text.  BRLCAD_OPTION is usually invoked by ThirdParty.cmake</p>



<a name="206975650"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206975650" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206975650">(Aug 14 2020 at 20:03)</a>:</h4>
<p>looks like the OPTIONS file it wrote has them</p>



<a name="206975673"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206975673" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206975673">(Aug 14 2020 at 20:03)</a>:</h4>
<p>at least now, wish I'd looked before running clean</p>



<a name="206976062"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206976062" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206976062">(Aug 14 2020 at 20:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/206975540">said</a>:</p>
<blockquote>
<p>The BRLCAD_OPTION function in misc/CMake/BRLCAD_Options.cmake does that, calling some helper functions to generate the text.  BRLCAD_OPTION is usually invoked by ThirdParty.cmake</p>
</blockquote>
<p>Thanks, will see if I can catch it next time.</p>



<a name="206976146"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206976146" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206976146">(Aug 14 2020 at 20:08)</a>:</h4>
<p>gah, now the X11 error again.  I really need to figure out what's wrong there.</p>



<a name="206976214"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206976214" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206976214">(Aug 14 2020 at 20:09)</a>:</h4>
<p>I'm not too surprised if you're running for long periods of time in the same build dir without clearing it - that's not a mode I usually work in (it tends to produce weird intermediate build system states that are hard to debug) so I won't usually know ahead of time if those issues are in there...</p>



<a name="206976384"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206976384" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206976384">(Aug 14 2020 at 20:11)</a>:</h4>
<p>Clearing the CMake files should do it though.</p>



<a name="206976394"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206976394" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206976394">(Aug 14 2020 at 20:11)</a>:</h4>
<p>I know, you say that every time.  To me it's a mode we've always supported and that's even worked in our cmake era robustly-enough until relatively recently.</p>



<a name="206976515"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206976515" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206976515">(Aug 14 2020 at 20:12)</a>:</h4>
<p>maybe an indication that issues are piling up, maybe just random chance, but it is absolutely more unproductive time if I have to wait for cmake to fully re-run every single time.  these failures aren't that often, so they really should be isolated issues.</p>



<a name="206976568"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206976568" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206976568">(Aug 14 2020 at 20:13)</a>:</h4>
<p>the fact that it works at least 9/10 times is a testament that it can work and usually does</p>



<a name="206976583"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206976583" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206976583">(Aug 14 2020 at 20:13)</a>:</h4>
<p>or 19/20, whatever it is</p>



<a name="206976696"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206976696" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206976696">(Aug 14 2020 at 20:14)</a>:</h4>
<p>Heh.  OK, fair enough - I don't re-run every time either.  Hopefully clearing the CMake files will right the ship</p>



<a name="206976751"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206976751" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206976751">(Aug 14 2020 at 20:15)</a>:</h4>
<p>case in point, I have to wait another 10 minutes (5min into compile, 5 to re-run cmake) to re-run because default build has been non-functional since the tcl upgrade.  have to enable all and run cmake again, then rebuild.</p>



<a name="206976818"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206976818" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206976818">(Aug 14 2020 at 20:16)</a>:</h4>
<p>ugh, and it doesn't help when I typo the darn var name like I just did and have to wait for cmake yet again...</p>



<a name="206976897"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206976897" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206976897">(Aug 14 2020 at 20:17)</a>:</h4>
<p>/me nods.  That's a good point - I forget how slow it is to run CMake on the mac.  I'm spoiled on Linux - it's fast enough there to be a much less severe pain point.</p>



<a name="206976998"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206976998" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206976998">(Aug 14 2020 at 20:18)</a>:</h4>
<p>The github macOS runner does build successfully - maybe because it doesn't have Tk enabled?</p>



<a name="206977016"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977016" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977016">(Aug 14 2020 at 20:18)</a>:</h4>
<p>even when I'm on the 128 core linux box and compile takes 2min, it's annoying that cmake takes 2 min too :)</p>



<a name="206977232"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977232" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977232">(Aug 14 2020 at 20:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/206976998">said</a>:</p>
<blockquote>
<p>The github macOS runner does build successfully - maybe because it doesn't have Tk enabled?</p>
</blockquote>
<p>probably, I don't remember the specifics.  I spent time debugging months back, but didn't get it resolved.  it was broken on the branch and working on trunk and it'd been merged, so I didn't look too much into it.  eventually appeared on trunk too.</p>



<a name="206977261"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977261" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977261">(Aug 14 2020 at 20:21)</a>:</h4>
<p>I wish Mac had some kind of remote open source development environments we could set up with for testing - the main environment I <em>can't</em> test is the one you use as your primary environment.</p>



<a name="206977291"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977291" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977291">(Aug 14 2020 at 20:21)</a>:</h4>
<p>Short of buying a Mac (which I suppose is what Apple wants) it's a conundrum</p>



<a name="206977391"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977391" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977391">(Aug 14 2020 at 20:22)</a>:</h4>
<p>Even the github CI doesn't seem to help much</p>



<a name="206977393"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977393" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977393">(Aug 14 2020 at 20:22)</a>:</h4>
<p>I think cmake is doing the right thing -- it found a viable system Tcl/Tk.  the problem (I think) is that it's finding Tk's X11 stub headers before the actual system X11 headers.</p>



<a name="206977433"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977433" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977433">(Aug 14 2020 at 20:22)</a>:</h4>
<p>I've seen both compilation and linkage errors, so likely two issues.</p>



<a name="206977501"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977501" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977501">(Aug 14 2020 at 20:23)</a>:</h4>
<p>Oh.  That reminds me of the fink/macports issues - I never did know what the "right" answer to that was.  I ended up forcing an ordering, but I think you really didn't like what I did... it was pretty quirky/custom and specific to that setup.</p>



<a name="206977613"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977613" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977613">(Aug 14 2020 at 20:24)</a>:</h4>
<p>Example build output (parallel unfortunately so it's a bit messy to read):</p>



<a name="206977632"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977632" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977632">(Aug 14 2020 at 20:24)</a>:</h4>
<div class="codehilite"><pre><span></span><code>[ 61%] Building CXX object src/gtools/CMakeFiles/glint.dir/glint.cpp.o
Scanning dependencies of target gex
Scanning dependencies of target libdm
[ 61%] Linking CXX shared library ../../lib/libdm.dylib
[ 61%] Linking C executable gtransfer
[ 61%] Building CXX object src/gtools/CMakeFiles/gex.dir/gex.cpp.o
[ 61%] Linking C executable ../../../bin/vdeck
[ 61%] Built target gtransfer
Scanning dependencies of target libwdb
[ 61%] Built target libdm
[ 61%] Linking CXX shared library ../../lib/libwdb.dylib
Scanning dependencies of target liboptical
[ 61%] Linking C shared library ../../lib/liboptical.dylib
[ 61%] Built target vdeck
[ 61%] Linking CXX static library ../../lib/libdm.a
[ 61%] Built target libwdb
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../../lib/libdm.a(knob.c.o) has no symbols
Scanning dependencies of target dm-X
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../../lib/libdm.a(knob.c.o) has no symbols
[ 61%] Built target liboptical
[ 61%] Built target libdm-static
Scanning dependencies of target dm-ogl
Scanning dependencies of target dm-plot
Scanning dependencies of target dm-ps
[ 61%] Building C object src/libdm/X/CMakeFiles/dm-X.dir/dm-X.c.o
[ 61%] Building C object src/libdm/plot/CMakeFiles/dm-plot.dir/dm-plot.c.o
[ 61%] Building C object src/libdm/postscript/CMakeFiles/dm-ps.dir/dm-ps.c.o
[ 61%] Linking CXX executable gen-attributes-file
[ 61%] Building C object src/libdm/glx/CMakeFiles/dm-ogl.dir/dm-ogl.c.o
[ 61%] Built target libanalyze-obj
[ 61%] Built target gen-attributes-file
[ 61%] Building C object src/libdm/X/CMakeFiles/dm-X.dir/color.c.o
Scanning dependencies of target dm-txt
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:118:10: error: implicit
      declaration of function &#39;XAllocColor&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
    st = XAllocColor(dpy, cmap, color);
         ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:182:5: error: implicit
      declaration of function &#39;XGetWindowAttributes&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
    XGetWindowAttributes(pubvars-&gt;dpy,
    ^
/Users/morrison/brlcad.trunk/src/libdm/X/color.c:88:5: error: implicit
      declaration of function &#39;XQueryColors&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
    XQueryColors(dpy, src, colors, ncolors);
    ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:212:7: error: implicit
      declaration of function &#39;XLoadQueryFont&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
             XLoadQueryFont(pubvars-&gt;dpy, FONT9)) == NULL) {
             ^
/Users/morrison/brlcad.trunk/src/libdm/X/color.c:91:2: error: implicit
      declaration of function &#39;XStoreColors&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
        XStoreColors(dpy, dest, colors, ncolors);
        ^
/Users/morrison/brlcad.trunk/src/libdm/X/color.c:91:2: note: did you mean
      &#39;XQueryColors&#39;?
/Users/morrison/brlcad.trunk/src/libdm/X/color.c:88:5: note: &#39;XQueryColors&#39;
      declared here
    XQueryColors(dpy, src, colors, ncolors);
    ^
/Users/morrison/brlcad.trunk/src/libdm/X/color.c:94:6: error: implicit
      declaration of function &#39;XAllocColor&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
            XAllocColor(dpy, dest, &amp;colors[i]);
            ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:211:27: error: incompatible
      integer to pointer conversion assigning to &#39;XFontStruct *&#39; from &#39;int&#39;
      [-Werror,-Wint-conversion]
        if ((pubvars-&gt;fontstruct =
                                 ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:214:31: error: incompatible
      integer to pointer conversion assigning to &#39;XFontStruct *&#39; from &#39;int&#39;
      [-Werror,-Wint-conversion]
            if ((pubvars-&gt;fontstruct =
                                     ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:222:2: error: implicit
      declaration of function &#39;XChangeGC&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
        XChangeGC(pubvars-&gt;dpy,
        ^
/Users/morrison/brlcad.trunk/src/libdm/X/color.c:139:7: error: implicit
      declaration of function &#39;XStoreColor&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
                    XStoreColor(dpy, cmap, &amp;color);
                    ^
/Users/morrison/brlcad.trunk/src/libdm/X/color.c:141:7: error: implicit
      declaration of function &#39;XAllocColor&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
                    XAllocColor(dpy, cmap, &amp;color);
                    ^
5 errors generated.
make[2]: *** [src/libdm/X/CMakeFiles/dm-X.dir/color.c.o] Error 1
make[2]: *** Waiting for unfinished jobs....
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:231:27: error: implicit
      declaration of function &#39;XLoadQueryFont&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
            if ((newfontstruct = XLoadQueryFont(pubvars-&gt;dpy,
                                 ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:231:25: error: incompatible
      integer to pointer conversion assigning to &#39;XFontStruct *&#39; from &#39;int&#39;
      [-Werror,-Wint-conversion]
            if ((newfontstruct = XLoadQueryFont(pubvars-&gt;dpy,
                               ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:233:3: error: implicit
      declaration of function &#39;XFreeFont&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
                XFreeFont(pubvars-&gt;dpy,
                ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:233:3: note: did you mean
      &#39;Tk_FreeFont&#39;?
/Users/morrison/brlcad.trunk/.build/include/tkDecls.h:270:14: note:
      &#39;Tk_FreeFont&#39; declared here
EXTERN void             Tk_FreeFont(Tk_Font f);
                        ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:237:3: error: implicit
      declaration of function &#39;XChangeGC&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
                XChangeGC(pubvars-&gt;dpy,
                ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:243:27: error: implicit
      declaration of function &#39;XLoadQueryFont&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
            if ((newfontstruct = XLoadQueryFont(pubvars-&gt;dpy,
                                 ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:243:25: error: incompatible
      integer to pointer conversion assigning to &#39;XFontStruct *&#39; from &#39;int&#39;
      [-Werror,-Wint-conversion]
            if ((newfontstruct = XLoadQueryFont(pubvars-&gt;dpy,
                               ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:245:3: error: implicit
      declaration of function &#39;XFreeFont&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
                XFreeFont(pubvars-&gt;dpy,
                ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:249:3: error: implicit
      declaration of function &#39;XChangeGC&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
                XChangeGC(pubvars-&gt;dpy,
                ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:255:27: error: implicit
      declaration of function &#39;XLoadQueryFont&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
            if ((newfontstruct = XLoadQueryFont(pubvars-&gt;dpy,
                                 ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:255:25: error: incompatible
      integer to pointer conversion assigning to &#39;XFontStruct *&#39; from &#39;int&#39;
      [-Werror,-Wint-conversion]
            if ((newfontstruct = XLoadQueryFont(pubvars-&gt;dpy,
                               ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:257:3: error: implicit
      declaration of function &#39;XFreeFont&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
                XFreeFont(pubvars-&gt;dpy,
                ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:261:3: error: implicit
      declaration of function &#39;XChangeGC&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
                XChangeGC(pubvars-&gt;dpy,
                ^
/Users/morrison/brlcad.trunk/src/libdm/X/dm-X.c:267:27: error: implicit
      declaration of function &#39;XLoadQueryFont&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
            if ((newfontstruct = XLoadQueryFont(pubvars-&gt;dpy,
                                 ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
[ 61%] Building C object src/libdm/glx/CMakeFiles/dm-ogl.dir/if_ogl.c.o
20 errors generated.
make[2]: *** [src/libdm/X/CMakeFiles/dm-X.dir/dm-X.c.o] Error 1
make[1]: *** [src/libdm/X/CMakeFiles/dm-X.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
[ 61%] Linking C shared library ../../../libexec/dm/libdm-ps.dylib
[ 61%] Linking C shared library ../../../libexec/dm/libdm-plot.dylib
[ 61%] Building C object src/libdm/txt/CMakeFiles/dm-txt.dir/if_debug.c.o
[ 61%] Building C object src/libdm/txt/CMakeFiles/dm-txt.dir/dm-txt.c.o
/Users/morrison/brlcad.trunk/src/libdm/glx/dm-ogl.c:236:5: error: implicit
      declaration of function &#39;XGetWindowAttributes&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
    XGetWindowAttributes(pubvars-&gt;dpy,
    ^
[ 61%] Built target libgcv_fastgen4-obj
/Users/morrison/brlcad.trunk/src/libdm/glx/dm-ogl.c:250:7: error: implicit
      declaration of function &#39;XLoadQueryFont&#39; is invalid in C99
      [-Werror,-Wimplicit-function-declaration]
             XLoadQueryFont(pubvars-&gt;dpy,
             ^
/Users/morrison/brlcad.trunk/src/libdm/glx/dm-ogl.c:249:27: error: incompatible
      integer to pointer conversion assigning to &#39;XFontStruct *&#39; from &#39;int&#39;
      [-Werror,-Wint-conversion]
        if ((pubvars-&gt;fontstruct =
                                 ^
</code></pre></div>



<a name="206977831"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977831" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977831">(Aug 14 2020 at 20:26)</a>:</h4>
<p>Would putting the X11 header includes before the Tk includes deal with that?</p>



<a name="206977834"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977834" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977834">(Aug 14 2020 at 20:26)</a>:</h4>
<p>I actually don't know the status of fink/macports... homebrew kind of took over that market</p>



<a name="206977850"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977850" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977850">(Aug 14 2020 at 20:26)</a>:</h4>
<p>maybe, like I said, I didn't dig</p>



<a name="206977884"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977884" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977884">(Aug 14 2020 at 20:26)</a>:</h4>
<p>/me looks...</p>



<a name="206977964"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206977964" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206977964">(Aug 14 2020 at 20:27)</a>:</h4>
<p>looks like at least for dm-ogl.c that they're already first</p>



<a name="206978069"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206978069" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206978069">(Aug 14 2020 at 20:28)</a>:</h4>
<p>probably need to do a header-trace to see where the declarations are coming from (or not coming from)</p>



<a name="206978152"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206978152" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206978152">(Aug 14 2020 at 20:29)</a>:</h4>
<p>hah, that's great! (just saw the benchmark results)</p>



<a name="206978259"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206978259" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206978259">(Aug 14 2020 at 20:30)</a>:</h4>
<p>"Run 'C:/RELEASE-build/Release/bin/benchmark clean' to remove generated pix files." ... Seeing a windows path there might be a first</p>



<a name="206978645"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206978645" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206978645">(Aug 14 2020 at 20:34)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> one thing to make sure of with the plugins is that any stale .so files are cleared out of the libexec directory - if they aren't removed they'll stand a decent change of causing problems.</p>



<a name="206978726"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206978726" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206978726">(Aug 14 2020 at 20:35)</a>:</h4>
<p>src/libdm/tests/dm_test is my "diagnostic" goto to figure out what's going on, at least with the libdm plugins.</p>



<a name="206983102"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206983102" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206983102">(Aug 14 2020 at 21:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/206978645">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> one thing to make sure of with the plugins is that any stale .so files are cleared out of the libexec directory - if they aren't removed they'll stand a decent change of causing problems.</p>
</blockquote>
<p>Why is that?  None of the other binary products have an issue with that I'm aware of.</p>



<a name="206983290"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206983290" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206983290">(Aug 14 2020 at 21:18)</a>:</h4>
<p>that's not something i'm likely going to remember a month from now, so if something isn't stable, that should get fixed.</p>



<a name="206985974"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206985974" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206985974">(Aug 14 2020 at 21:49)</a>:</h4>
<p>The library initializes at runtime, looking for whatever .so files are in the directory.  It has no way of knowing what is and isn't a stale file.</p>



<a name="206986195"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206986195" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206986195">(Aug 14 2020 at 21:51)</a>:</h4>
<p>what does stale mean in that context?  I would still expect the plugins to recompile if they were changed</p>



<a name="206986425"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206986425" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206986425">(Aug 14 2020 at 21:54)</a>:</h4>
<p>even with dynamic loading, it's possible to detect actual incompatibility and we may need to if this is a potential issue</p>



<a name="206986446"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206986446" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206986446">(Aug 14 2020 at 21:54)</a>:</h4>
<p>I'm not sure what staleness potential you're referring to though..</p>



<a name="206986654"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206986654" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206986654">(Aug 14 2020 at 21:57)</a>:</h4>
<p>Stale would be a plugin file that dates to an older build (say, a dm backend that was removed from the build and then the plugin API changed.)  Attempting to load the old .so file in that case wouldn't work.</p>



<a name="206986744"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206986744" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206986744">(Aug 14 2020 at 21:58)</a>:</h4>
<p>Also might be an issue if the .so file linked to older versions of BRL-CAD libraries that no longer are compatible with the current environment.</p>



<a name="206986806"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206986806" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206986806">(Aug 14 2020 at 21:59)</a>:</h4>
<p>well, so that's a different issue no?  that's got nothing to do with my build dir and needing to remember to wipe out .so files</p>



<a name="206986902"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206986902" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206986902">(Aug 14 2020 at 22:00)</a>:</h4>
<p>unless you just recently changed the plugin interface and I only partially recompile, that's not so much a concern.  the headers will have changed and the plugins will recompile (at least I would expect them to)</p>



<a name="206987036"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206987036" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206987036">(Aug 14 2020 at 22:02)</a>:</h4>
<p>Well, if you do a lot of builds over time in a build dir without doing make clean, it's possible to accumulate such files (similar to how stale symlinks were sometimes left over).  The scenario I was thinking of:</p>
<ol>
<li>Build plugins</li>
<li>Remove (say) the plot backend from the CMake build.</li>
<li>Change plugin API.</li>
<li>Rebuild.</li>
</ol>
<p>The old libdm plot plugin would still be in libexec in that scenario.</p>



<a name="206987152"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206987152" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206987152">(Aug 14 2020 at 22:04)</a>:</h4>
<p>I see, so how about preventing that then.  sounds like this is a new category of concern.</p>



<a name="206987182"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206987182" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206987182">(Aug 14 2020 at 22:04)</a>:</h4>
<p>I'm open to suggestions...</p>



<a name="206987221"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206987221" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206987221">(Aug 14 2020 at 22:05)</a>:</h4>
<p>could prevent it just by putting a plugin api version number into the header file.  if the loaded version is less, skips that plugin.  just have to remember to bump the api version whenever the calling interface changes.</p>



<a name="206987354"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206987354" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206987354">(Aug 14 2020 at 22:06)</a>:</h4>
<p>could make the api number simply be the composite of the version number -- that way they're always locked to their compiled version only.</p>



<a name="206987513"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206987513" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206987513">(Aug 14 2020 at 22:09)</a>:</h4>
<p>So it would be a "bu_dlsym" to look for something like "dm_api_version" from the plugin?</p>



<a name="206987555"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206987555" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206987555">(Aug 14 2020 at 22:09)</a>:</h4>
<p>something like:  </p>
<div class="codehilite"><pre><span></span><code>#define DM_API ((BRLCAD_MAJOR*10000) + (BRLCAD_MINOR*100) + BRLCAD_PATCH)
</code></pre></div>


<p>so 7.32.12 becomes api version 703212</p>



<a name="206987714"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206987714" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206987714">(Aug 14 2020 at 22:11)</a>:</h4>
<p>you'll have to make it plugin-specific, like an: int dm_ogl_version=DM_API;<br>
then bu_dlsym that out after loading the plugin, before looking at any symbols</p>



<a name="206987741"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206987741" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206987741">(Aug 14 2020 at 22:12)</a>:</h4>
<p>if var &lt; DM_API, skip it</p>



<a name="206987789"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206987789" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206987789">(Aug 14 2020 at 22:12)</a>:</h4>
<p>heck, could start if var != DM_API, skip it</p>



<a name="206987792"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206987792" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206987792">(Aug 14 2020 at 22:12)</a>:</h4>
<p>Why plugin specific?</p>



<a name="206987841"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206987841" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206987841">(Aug 14 2020 at 22:13)</a>:</h4>
<p>that ties the variable name to the file name of the plugin...</p>



<a name="206988013"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206988013" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206988013">(Aug 14 2020 at 22:14)</a>:</h4>
<p>oh my, you're using the same symbol names across all plugins??</p>



<a name="206988058"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206988058" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206988058">(Aug 14 2020 at 22:15)</a>:</h4>
<p>ah, I see, yes and no</p>



<a name="206988093"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206988093" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206988093">(Aug 14 2020 at 22:15)</a>:</h4>
<p>they symbols are all unique, but in a dm_plugin pinfo struct</p>



<a name="206988196"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206988196" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206988196">(Aug 14 2020 at 22:16)</a>:</h4>
<p>Yes.  That's a single point of entry - went that way for simplicity.</p>



<a name="206988342"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206988342" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206988342">(Aug 14 2020 at 22:18)</a>:</h4>
<p>hm, well that is fine for now I guess but it's a little awkward for dynamic libs to do that.  I don't think that's entirely portable in the general case for dlsym, though those cases aren't necessarily a major concern any more.</p>



<a name="206988423"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206988423" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206988423">(Aug 14 2020 at 22:19)</a>:</h4>
<p>it's the same reason why Tcl has the library name the loading function specifically LIB_Init()</p>



<a name="206988494"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206988494" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206988494">(Aug 14 2020 at 22:20)</a>:</h4>
<p>it also precludes portability to any new systems that don't (yet) support dynamic libraries and precludes static linking if for some case we later need/want that.</p>



<a name="206988626"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206988626" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206988626">(Aug 14 2020 at 22:21)</a>:</h4>
<p>OS X was out for years before they added support for dynamic libs for example.  now Mac does, of course, but the potential for other/new OS environments is definitely still a modern concern.</p>



<a name="206988690"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206988690" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206988690">(Aug 14 2020 at 22:22)</a>:</h4>
<p>we can cross that bring later.  it's trivial to change pinfo to ogl_pinfo or whatever, and to change the version var.</p>



<a name="206988799"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206988799" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206988799">(Aug 14 2020 at 22:23)</a>:</h4>
<p>hm, it will screw with tags (msvc, emacs, vim jump-to-symbol/definition support) so maybe still something to consider</p>



<a name="206988924"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206988924" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206988924">(Aug 14 2020 at 22:24)</a>:</h4>
<p>would simplify the code by eliminating the preprocessor conditional, one benefit</p>



<a name="206988931"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206988931" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206988931">(Aug 14 2020 at 22:24)</a>:</h4>
<p>Are those environments capable of following those linkages?  I figured as a runtime-only connection they were left out anyway...</p>



<a name="206989051"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989051" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989051">(Aug 14 2020 at 22:25)</a>:</h4>
<p>What do you mean?</p>



<a name="206989169"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989169" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989169">(Aug 14 2020 at 22:26)</a>:</h4>
<p>I just am not clear what conditions would allow emacs/vim to jump to the name - as a plugin, wouldn't it just be a pointer anyway?</p>



<a name="206989172"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989172" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989172">(Aug 14 2020 at 22:26)</a>:</h4>
<p>the editors?  they can certainly follow a symbol if I'm looking at a header on struct dm_plugin and ask it to show me the definition</p>



<a name="206989182"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989182" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989182">(Aug 14 2020 at 22:27)</a>:</h4>
<p>it's going to jump to one of them</p>



<a name="206989228"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989228" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989228">(Aug 14 2020 at 22:27)</a>:</h4>
<p>some do dynamic symbol searching, some do string matching</p>



<a name="206989329"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989329" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989329">(Aug 14 2020 at 22:28)</a>:</h4>
<p>(most do the latter I think, especially the 'tags' system)</p>



<a name="206989369"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989369" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989369">(Aug 14 2020 at 22:28)</a>:</h4>
<p>OK, so just directly (say) return dm_ogl instead of pinfo</p>



<a name="206989393"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989393" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989393">(Aug 14 2020 at 22:29)</a>:</h4>
<p>Except I thought we needed that static wrapper</p>



<a name="206989566"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989566" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989566">(Aug 14 2020 at 22:31)</a>:</h4>
<p>it's whatever symbol you load -- I'm guessing you load "dm_plugin_info" currently, so that would change to "dm_ogl_plugin" or whatever.  that pinfo struct is already static so it's not going to collide with anything, even if compiled static.</p>



<a name="206989648"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989648" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989648">(Aug 14 2020 at 22:32)</a>:</h4>
<p>OK.  So I just need something then to make sure the names match the filenames (so the init function knows what to ask for for any given file)</p>



<a name="206989676"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989676" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989676">(Aug 14 2020 at 22:32)</a>:</h4>
<p>could put the version field right into the dm_impl as the first field</p>



<a name="206989691"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989691" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989691">(Aug 14 2020 at 22:32)</a>:</h4>
<p>then you dont' need to actually introduce another lookup</p>



<a name="206989727"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989727" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989727">(Aug 14 2020 at 22:33)</a>:</h4>
<p>Sort of like the bu_magic trick?</p>



<a name="206989735"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989735" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989735">(Aug 14 2020 at 22:33)</a>:</h4>
<p>sort of</p>



<a name="206989826"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989826" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989826">(Aug 14 2020 at 22:34)</a>:</h4>
<p>I take it we should get this in pre-release?</p>



<a name="206989868"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989868" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989868">(Aug 14 2020 at 22:35)</a>:</h4>
<p>I would .. this is going to be 7.32 right?</p>



<a name="206989914"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989914" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989914">(Aug 14 2020 at 22:36)</a>:</h4>
<p>seems pretty major</p>



<a name="206989928"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989928" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989928">(Aug 14 2020 at 22:36)</a>:</h4>
<p>Yes.  (Or what's in RELEASE will be, at any rate - I branched off of trunk a while back.)</p>



<a name="206989988"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989988" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989988">(Aug 14 2020 at 22:37)</a>:</h4>
<p>also warrants a NEWS mention I think, dynamic behavior is a user-visible architecture change</p>



<a name="206989992"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206989992" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206989992">(Aug 14 2020 at 22:37)</a>:</h4>
<p>OK - I'll hit that first, then see if I can make rtweight do something saner.</p>



<a name="206990015"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206990015" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206990015">(Aug 14 2020 at 22:37)</a>:</h4>
<p>Really?  I had thought if I got it right the user wouldn't notice anything...</p>



<a name="206990575"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206990575" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206990575">(Aug 14 2020 at 22:46)</a>:</h4>
<p>you're right, user shouldn't -- but it's a different runtime and exposure profile, and definitely results in different runtime behavior when something is not what we expected</p>



<a name="206990622"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206990622" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206990622">(Aug 14 2020 at 22:47)</a>:</h4>
<p>it's like when we made shaders optionally load dynamically.  user didn't necessarily see that except it resulted in dynamic load failure messages when a typo'd shader name wasn't found.  not something that was anticipated, but the arch change was user visible and the messages obviously could be traced to it's introduction.</p>



<a name="206990834"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206990834" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206990834">(Aug 14 2020 at 22:51)</a>:</h4>
<p>documented</p>



<a name="206990966"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206990966" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206990966">(Aug 14 2020 at 22:54)</a>:</h4>
<p>so same deal for the ged commands</p>



<a name="206996667"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206996667" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206996667">(Aug 15 2020 at 00:36)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> was <a href="https://sourceforge.net/p/brlcad/code/76767/">https://sourceforge.net/p/brlcad/code/76767/</a> what you were thinking (more or less)?</p>



<a name="206996734"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/206996734" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#206996734">(Aug 15 2020 at 00:38)</a>:</h4>
<p>(Want to settle on a pattern before I do libged, that'll be more painful...)</p>



<a name="207023657"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207023657" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207023657">(Aug 15 2020 at 14:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/206996667">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> was <a href="https://sourceforge.net/p/brlcad/code/76767/">https://sourceforge.net/p/brlcad/code/76767/</a> what you were thinking (more or less)?</p>
</blockquote>
<p>Yes, that's spot on!  You could even make it an explicit plugin-&gt;api_version check if you want to support the version moving around the struct, but what you have checking the first byte is a good contract to require too.</p>



<a name="207025799"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207025799" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207025799">(Aug 15 2020 at 15:13)</a>:</h4>
<div class="codehilite"><pre><span></span><code>2020-08-15T14:51:35.0885582Z /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_debug/brlcad-7.31.0/include/bu/magic.h:244:21: error: the address of ‘jaunt_tbl’ will always evaluate as ‘true’ [-Werror=address]
2020-08-15T14:51:35.0886308Z      if (UNLIKELY(( (!(_ptr)) /* non-NULL pointer */ \
2020-08-15T14:51:35.0886756Z                      ^
2020-08-15T14:51:35.0887896Z /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_debug/brlcad-7.31.0/include/common.h:364:50: note: in definition of macro ‘UNLIKELY’
2020-08-15T14:51:35.0888280Z  #  define UNLIKELY(expression) __builtin_expect((expression), 0)
2020-08-15T14:51:35.0888663Z                                                   ^~~~~~~~~~
2020-08-15T14:51:35.0889257Z /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_debug/brlcad-7.31.0/include/bu/ptbl.h:65:24: note: in expansion of macro ‘BU_CKMAG’
2020-08-15T14:51:35.0889945Z  #define BU_CK_PTBL(_p) BU_CKMAG(_p, BU_PTBL_MAGIC, &quot;bu_ptbl&quot;)
2020-08-15T14:51:35.0890236Z                         ^~~~~~~~
2020-08-15T14:51:35.0890818Z /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_debug/brlcad-7.31.0/src/libnmg/mod.c:3061:2: note: in expansion of macro ‘BU_CK_PTBL’
2020-08-15T14:51:35.0891507Z   BU_CK_PTBL(&amp;jaunt_tbl);
</code></pre></div>



<a name="207026093"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207026093" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207026093">(Aug 15 2020 at 15:21)</a>:</h4>
<p>Oh, I see - r76785</p>



<a name="207026148"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207026148" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207026148">(Aug 15 2020 at 15:23)</a>:</h4>
<p>If we want the extra test, maybe devise a configure time check to see whether the platform in question lets us do it without the error?</p>



<a name="207047026"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207047026" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207047026">(Aug 16 2020 at 00:42)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> What issues do you know of that you would consider release blockers?</p>



<a name="207083139"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207083139" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207083139">(Aug 16 2020 at 18:30)</a>:</h4>
<p>ah, right, constant expression.  hrm.</p>



<a name="207083201"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207083201" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207083201">(Aug 16 2020 at 18:32)</a>:</h4>
<p>I have vague recollection of that issue being the reason it was removed now too..</p>



<a name="207083915"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207083915" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207083915">(Aug 16 2020 at 18:53)</a>:</h4>
<p>can you recheck the runner with the latest? trying a different approach.</p>



<a name="207084066"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084066" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084066">(Aug 16 2020 at 18:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/207047026">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> What issues do you know of that you would consider release blockers?</p>
</blockquote>
<p>rtweight no longer reporting volume unless there's a material defined is pretty significant change.  the spew wouldn't be a blocker, but I think lacking a report is.  also didn't seem to be outputting the report when run from mged -c, but I'd need to verify with a clean build.</p>



<a name="207084135"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084135" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084135">(Aug 16 2020 at 18:57)</a>:</h4>
<p>only issue that come to mind is peer review isn't yet complete on all outstanding commits, and that's supposed to be a blocker for IA compliance, particularly it it's a build intended to be deployed (which I think it is, yes?)  I think I can get through the remaining commits by tuesday if you can hold off tagging.</p>



<a name="207084174"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084174" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084174">(Aug 16 2020 at 18:58)</a>:</h4>
<p>also, still seeing this:</p>



<a name="207084177"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084177" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084177">(Aug 16 2020 at 18:58)</a>:</h4>
<div class="codehilite"><pre><span></span><code>[ 80%] Linking C shared library ../../../libexec/dm/libdm-ps.dylib
Undefined symbols for architecture x86_64:
  &quot;_Tcl_AppendStringsToObj&quot;, referenced from:
      _ps_open in dm-ps.c.o
      _ps_loadMatrix in dm-ps.c.o
  &quot;_Tcl_DuplicateObj&quot;, referenced from:
      _ps_open in dm-ps.c.o
      _ps_loadMatrix in dm-ps.c.o
  &quot;_Tcl_GetObjResult&quot;, referenced from:
      _ps_open in dm-ps.c.o
      _ps_loadMatrix in dm-ps.c.o
  &quot;_Tcl_SetObjResult&quot;, referenced from:
      _ps_open in dm-ps.c.o
      _ps_loadMatrix in dm-ps.c.o
</code></pre></div>



<a name="207084234"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084234" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084234">(Aug 16 2020 at 18:58)</a>:</h4>
<p>Huh, that means it's still not linking Tcl - I thought I fixed that.</p>



<a name="207084249"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084249" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084249">(Aug 16 2020 at 18:59)</a>:</h4>
<p>I saw the commit and thought so too.  it's re-run cmake cleanly since.</p>



<a name="207084274"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084274" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084274">(Aug 16 2020 at 18:59)</a>:</h4>
<p>Yeah, I can hold off til tuesday - still banging my head on the Ninja Windows build anyway (The msbuild run on the runner is less than 100% reliable, so far...)</p>



<a name="207084361"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084361" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084361">(Aug 16 2020 at 19:00)</a>:</h4>
<p>That's really strange then.  Is TCL_LIBRARY set correctly in CMakeCache.txt?</p>



<a name="207084395"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084395" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084395">(Aug 16 2020 at 19:00)</a>:</h4>
<div class="codehilite"><pre><span></span><code>agua:.build morrison$ grep TCL_LIBRARY CMakeCache.txt
//ITCL_LIBRARY
ITCL_LIBRARY:STRING=itcl
//TCL_LIBRARY
TCL_LIBRARY:STRING=tcl
//TCL_LIBRARY
//ADVANCED property for variable: ITCL_LIBRARY
ITCL_LIBRARY-ADVANCED:INTERNAL=1
//ADVANCED property for variable: TCL_LIBRARY
TCL_LIBRARY-ADVANCED:INTERNAL=1
</code></pre></div>



<a name="207084404"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084404" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084404">(Aug 16 2020 at 19:01)</a>:</h4>
<p>OK, that should be correct.</p>



<a name="207084418"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084418" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084418">(Aug 16 2020 at 19:01)</a>:</h4>
<p>What does otool say about what the dm-ps libexec lib is seeing?</p>



<a name="207084422"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084422" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084422">(Aug 16 2020 at 19:01)</a>:</h4>
<p>here's verbose: </p>
<div class="codehilite"><pre><span></span><code>[100%] Linking C shared library ../../../libexec/dm/libdm-ps.dylib
cd /Users/morrison/brlcad.trunk/.build/src/libdm/postscript &amp;&amp; /Users/morrison/Applications/bin/cmake -E cmake_link_script CMakeFiles/dm-ps.dir/link.txt --verbose=1
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc -std=c11  -D_POSIX_C_SOURCE=200809L -D_XOPEN_SOURCE=700 -pipe -fvisibility=hidden -fno-strict-aliasing -fno-common -fexceptions -m64 -ggdb -Qunused-arguments -fstack-protector-all -fno-omit-frame-pointer -pedantic -pedantic-errors -Wall -Wextra -Wundef -Wfloat-equal -Wshadow -Wbad-function-cast -Wc++-compat -Winline -Wno-long-long -Wno-variadic-macros -Wdocumentation -Wno-c11-extensions -Werror -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk -mmacosx-version-min=10.14 -dynamiclib -Wl,-headerpad_max_install_names  -m64 -ggdb -o ../../../libexec/dm/libdm-ps.dylib -install_name @rpath/libdm-ps.dylib CMakeFiles/dm-ps.dir/dm-ps.c.o  -Wl,-rpath,/Users/morrison/brlcad.trunk/.build/lib ../../../lib/libdm.20.0.1.dylib ../../../lib/librt.20.0.1.dylib ../../../lib/libgdiam.dylib ../../../lib/libvds.dylib ../../../lib/libbrep.20.0.1.dylib ../../../lib/libnmg.dylib ../../../lib/libbg.20.0.1.dylib ../../../lib/libSPSR.dylib ../../../lib/libopenNURBS.2012.10.245.dylib ../../../lib/libpoly2tri.dylib ../../../lib/libicv.20.0.1.dylib ../../../lib/libbn.20.0.1.dylib ../../../lib/libnetpbm.dylib ../../../lib/libpkg.20.0.1.dylib ../../../lib/libbu.20.0.1.dylib -framework Foundation -ldl -framework System ../../../lib/libregex_brl.1.0.4.dylib -lm /usr/X11/lib/libGLU.dylib /usr/X11/lib/libGL.dylib /usr/X11/lib/libSM.dylib /usr/X11/lib/libICE.dylib /usr/X11/lib/libX11.dylib /usr/X11/lib/libXext.dylib /usr/X11/lib/libXi.dylib ../../../lib/libpng_brl.16.37.0.dylib ../../../lib/libz_brl.1.2.11.dylib
Undefined symbols for architecture x86_64:
  &quot;_Tcl_AppendStringsToObj&quot;, referenced from:
      _ps_open in dm-ps.c.o
      _ps_loadMatrix in dm-ps.c.o
  &quot;_Tcl_DuplicateObj&quot;, referenced from:
      _ps_open in dm-ps.c.o
      _ps_loadMatrix in dm-ps.c.o
  &quot;_Tcl_GetObjResult&quot;, referenced from:
      _ps_open in dm-ps.c.o
      _ps_loadMatrix in dm-ps.c.o
  &quot;_Tcl_SetObjResult&quot;, referenced from:
      _ps_open in dm-ps.c.o
      _ps_loadMatrix in dm-ps.c.o
</code></pre></div>



<a name="207084504"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084504" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084504">(Aug 16 2020 at 19:03)</a>:</h4>
<p>Yeah, I don't see tcl in that list.. what the heck?</p>



<a name="207084506"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084506" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084506">(Aug 16 2020 at 19:03)</a>:</h4>
<p>there's no tcl listed</p>



<a name="207084609"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084609" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084609">(Aug 16 2020 at 19:04)</a>:</h4>
<p>Does line 20 in src/libdm/postscript/CMakeLists.txt have TCL_LIBRARY on it?</p>



<a name="207084766"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207084766" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207084766">(Aug 16 2020 at 19:06)</a>:</h4>
<p>hm, it didn't but does now -- different tree got updated.  this is probably my bad.  rebuilding.</p>



<a name="207085206"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207085206" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207085206">(Aug 16 2020 at 19:13)</a>:</h4>
<p>yep, my issue.  sorry!  enable-all is all good.</p>



<a name="207085378"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207085378" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207085378">(Aug 16 2020 at 19:16)</a>:</h4>
<p>No problem.  Github runner kicked off - I'm trying with Ninja again, so if that fails I'll have to go again with msbuild, but either way should have an answer within about 2-3 hours.</p>



<a name="207085388"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207085388" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207085388">(Aug 16 2020 at 19:17)</a>:</h4>
<p>Actually, the Ubuntu GCC should work either way, come to think of it</p>



<a name="207090603"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207090603" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207090603">(Aug 16 2020 at 21:26)</a>:</h4>
<div class="codehilite"><pre><span></span><code>2020-08-16T19:39:35.8704061Z FAILED: src/librt/CMakeFiles/librt-obj.dir/reduce_db.cpp.o
2020-08-16T19:39:35.8706430Z /usr/bin/c++  -DBRLCADBUILD -DDB5_DLL_EXPORTS -DGDIAM_DLL_IMPORTS -DHAVE_CONFIG_H -DRT_DLL_EXPORTS -DTIE_DLL_EXPORTS -DVDS_DLL_IMPORTS -I/home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_release/brlcad-7.31.0/include -Iinclude -I/home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_release/brlcad-7.31.0/src/librt -Iinclude/brlcad -isystem src/other/openNURBS -isystem src/other/libz -isystem src/other/libregex -isystem src/other/libvds -isystem src/other/libgdiam -isystem /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_release/brlcad-7.31.0/src/other/poly2tri -isystem /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_release/brlcad-7.31.0/src/other/openNURBS -isystem /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_release/brlcad-7.31.0/src/other/libz -isystem /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_release/brlcad-7.31.0/src/other/libregex -isystem /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_release/brlcad-7.31.0/src/other/libvds -isystem /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_release/brlcad-7.31.0/src/other/libgdiam -std=c++11  -D_POSIX_C_SOURCE=200809L -D_XOPEN_SOURCE=700 -pipe -fvisibility=hidden -fno-strict-aliasing -fno-common -fexceptions -ftemplate-depth-128 -m64 -g -ggdb3 -O3 -fipa-pta -fstrength-reduce -fexpensive-optimizations -finline-functions -flto -fno-omit-frame-pointer -pedantic -Wall -Wextra -Wundef -Wfloat-equal -Wshadow -Wno-inline -Wno-long-long -Wno-variadic-macros -Werror -fPIC   -std=c++11 -MD -MT src/librt/CMakeFiles/librt-obj.dir/reduce_db.cpp.o -MF src/librt/CMakeFiles/librt-obj.dir/reduce_db.cpp.o.d -o src/librt/CMakeFiles/librt-obj.dir/reduce_db.cpp.o -c /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_release/brlcad-7.31.0/src/librt/reduce_db.cpp
2020-08-16T19:39:35.8707398Z In file included from /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_release/brlcad-7.31.0/src/librt/reduce_db.cpp:27:0:
2020-08-16T19:39:35.8708379Z /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_release/brlcad-7.31.0/src/librt/reduce_db.cpp: In function ‘reduce_db::remove_dead_references(db_i&amp;)’:
2020-08-16T19:39:35.8708883Z /home/runner/work/cadcitest/cadcitest/build/distcheck-enableall_release/brlcad-7.31.0/include/bu/magic.h:245:6: error: nonnull argument ‘db’ compared to NULL [-Werror=nonnull-compare]
2020-08-16T19:39:35.8709297Z      if (UNLIKELY(( ((uintptr_t)(_ptr) == (uintptr_t)NULL) /* non-NULL pointer */ \
2020-08-16T19:39:35.8709452Z                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2020-08-16T19:39:35.8709757Z       || ((uintptr_t)(_ptr) == 0) /* non-zero pointer */ \
2020-08-16T19:39:35.8709894Z       ^~~~~~~~~~~~~~~~~~~~~~~~~~~
2020-08-16T19:39:35.8710114Z cc1plus: all warnings being treated as errors
</code></pre></div>



<a name="207211293"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207211293" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207211293">(Aug 18 2020 at 00:09)</a>:</h4>
<p>rtweight breakage looks like it was introduced by commit 72190</p>



<a name="207219860"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207219860" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207219860">(Aug 18 2020 at 03:19)</a>:</h4>
<p>OK, now I'm really confused.  In the 7.26.4 in non-interactive mode src/mged/cmd.c line 1043 is executed, the program quits by eventually calling Tcl_Exit(), and then the queued up stdout output is dumped to the terminal.  In trunk this doesn't happen, even though the same sequence still seems to be followed, and I am now getting output in the interactive classic mode.</p>



<a name="207226305"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207226305" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207226305">(Aug 18 2020 at 06:06)</a>:</h4>
<p>that's a terrible commit message. :P</p>



<a name="207251196"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207251196" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207251196">(Aug 18 2020 at 12:10)</a>:</h4>
<p>My that was painful.  <span class="user-mention" data-user-id="102902">@Sean</span> I think I've gotten the output restored in all three modes - GUI, interactive classic, and command execution.  Only tested on Linux so far.</p>



<a name="207291463"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207291463" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207291463">(Aug 18 2020 at 17:46)</a>:</h4>
<p><a href="/user_uploads/1549/LBzebrF9bpsTUC7q6Oe9vp-I/IMG_0399.jpeg">IMG_0399.jpeg</a>  <span class="user-mention" data-user-id="112516">@starseeker</span> any thoughts on the source of this?  recent build on windows by bill.</p>
<div class="message_inline_image"><a href="/user_uploads/1549/LBzebrF9bpsTUC7q6Oe9vp-I/IMG_0399.jpeg" title="IMG_0399.jpeg"><img src="/user_uploads/1549/LBzebrF9bpsTUC7q6Oe9vp-I/IMG_0399.jpeg"></a></div>



<a name="207293754"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207293754" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207293754">(Aug 18 2020 at 18:05)</a>:</h4>
<p>cmake 3.18.1, so pretty recent</p>



<a name="207293869"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207293869" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207293869">(Aug 18 2020 at 18:06)</a>:</h4>
<p>build succeeded so it is apparently innocuous (perhaps regress is busted if it could try)</p>



<a name="207296763"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207296763" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207296763">(Aug 18 2020 at 18:30)</a>:</h4>
<p>That matches a problem I had trying to run the "clean" target with msbuild</p>



<a name="207296858"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207296858" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207296858">(Aug 18 2020 at 18:31)</a>:</h4>
<p>Strange issue - when I grepped through the directory I could only find one match for a regress target, so I'm not quite sure where it's getting the duplicate.</p>



<a name="207297026"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207297026" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207297026">(Aug 18 2020 at 18:32)</a>:</h4>
<p><a href="https://github.com/dotnet/msbuild/issues/3019">https://github.com/dotnet/msbuild/issues/3019</a> <em>might</em> be related if CMake's generation of names is doing something a little quirky, but not sure.</p>



<a name="207297819"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207297819" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207297819">(Aug 18 2020 at 18:38)</a>:</h4>
<p>Let me try again with 3.18.1 - I don't recall getting a GUI pop-up, it showed only on the command prompt.  'course I was using a newer VS, that may make a difference too.</p>



<a name="207300706"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207300706" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207300706">(Aug 18 2020 at 19:01)</a>:</h4>
<p>Yeah, 2017 loaded without that message, with 3.18.1.  Not sure if I have the space to install 2015 on this laptop...</p>



<a name="207300737"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207300737" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207300737">(Aug 18 2020 at 19:01)</a>:</h4>
<p>Which version of CAD is he building?</p>



<a name="207300853"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207300853" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207300853">(Aug 18 2020 at 19:02)</a>:</h4>
<p>lastest checkout</p>



<a name="207300917"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207300917" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207300917">(Aug 18 2020 at 19:02)</a>:</h4>
<p>OK, yeah - that's what I tried too.  Weird.</p>



<a name="207709018"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207709018" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207709018">(Aug 22 2020 at 05:37)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> did you test if_disk and if_remote?</p>



<a name="207709171"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207709171" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207709171">(Aug 22 2020 at 05:42)</a>:</h4>
<p>and what's the deal with bu_exit()??  that's not ignorable/replaceable.  there are over 1500 calls to bu_exit</p>



<a name="207709172"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207709172" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207709172">(Aug 22 2020 at 05:43)</a>:</h4>
<p>if it's crashing, we have to investigate and fix it</p>



<a name="207709544"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207709544" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207709544">(Aug 22 2020 at 05:56)</a>:</h4>
<p>if bu_exit() is crashing dauto, that's pretty much guaranteed to be corruption</p>



<a name="207724460"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207724460" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207724460">(Aug 22 2020 at 13:24)</a>:</h4>
<p>I'm still working through all the if_* cases - should be done by the end of the day.</p>



<a name="207724546"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207724546" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207724546">(Aug 22 2020 at 13:26)</a>:</h4>
<p>I didn't have much luck debugging the dauto bit - it cropped up when I was trying the <a href="http://usage.sh">usage.sh</a> script, appeared only some of the time, and the only thing GDB could tell me when I popped a sleep into bu_bomb so I could attach was that the BU_SETJUMP test was true when bu_exit was called.</p>



<a name="207724561"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207724561" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207724561">(Aug 22 2020 at 13:27)</a>:</h4>
<p>I couldn't figure out where corruption might be introduced - dauto basically did the isatty checks and then quit immediately.</p>



<a name="207725226"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207725226" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207725226">(Aug 22 2020 at 13:44)</a>:</h4>
<p>bu_setprogname was the only other call.</p>



<a name="207725284"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207725284" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207725284">(Aug 22 2020 at 13:46)</a>:</h4>
<p>The only other thing I can think of is that maybe we need to initialize the bu_jmpbuf array somehow...</p>



<a name="207726932"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207726932" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207726932">(Aug 22 2020 at 14:31)</a>:</h4>
<p>AH!  My bad - I misinterpreted where the failure was occurring.  I thought bu_bomb would be called only when something when wrong, but that's not the case.  I put my test in the wrong part of the code.</p>



<a name="207727438"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207727438" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207727438">(Aug 22 2020 at 14:44)</a>:</h4>
<p>dauto needs to validate the atoi conversion before mallocing</p>



<a name="207729057"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207729057" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207729057">(Aug 22 2020 at 15:26)</a>:</h4>
<p>Grr.  Now I can't get fbstretch to repeat it's bomb log file generation, with or without the dauto failure in the <a href="http://usage.sh">usage.sh</a> run.  Will just have to keep an eye out to see if it repeats.</p>



<a name="207741474"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207741474" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207741474">(Aug 22 2020 at 20:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/207724561">said</a>:</p>
<blockquote>
<p>I couldn't figure out where corruption might be introduced - dauto basically did the isatty checks and then quit immediately.</p>
</blockquote>
<p>sounds like you figured it out, but another thing to keep in mind is all static initialization also occurs before main().  this includes globals and statics getting initialized (which in the case of C++ can be arbitrarily complex) as well as any library initialization like we're doing in libbu.</p>



<a name="207741541"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207741541" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207741541">(Aug 22 2020 at 20:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/207729057">said</a>:</p>
<blockquote>
<p>Grr.  Now I can't get fbstretch to repeat it's bomb log file generation, with or without the dauto failure in the <a href="http://usage.sh">usage.sh</a> run.  Will just have to keep an eye out to see if it repeats.</p>
</blockquote>
<p>yeah, we actually had to remove the __attribute__ "never returns" marking on it because technically it can (and often does) return control -- bu_exit() is guaranteed to not return (it calls _exit() hard), but bu_bomb is not.</p>



<a name="207744622"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207744622" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207744622">(Aug 22 2020 at 22:24)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  how exactly do I test the disk and stack interfaces?  I'm not seeing where they get used.</p>



<a name="207744929"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207744929" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207744929">(Aug 22 2020 at 22:32)</a>:</h4>
<p>You can/could specify all types via the -F option, though some of the builtins use conventions (e.g., if_network is used when you used a hostname).  I believe disk is used when you specify a filepath, mem uses a convention iirc.  They have been documented in several places over the decades (especially the old green manuals).</p>



<a name="207744943"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207744943" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207744943">(Aug 22 2020 at 22:33)</a>:</h4>
<p>I think I recall some examples in the code.  Don't know but libfb man page might have relevant info (where FB_FILE is mentioned).</p>



<a name="207744945"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207744945" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207744945">(Aug 22 2020 at 22:33)</a>:</h4>
<p>the env var is another way they can be set</p>



<a name="207746919"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207746919" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207746919">(Aug 22 2020 at 23:37)</a>:</h4>
<p>The mem gets used by rtwizard, and -F&lt;filepath&gt; seems to work for disk.</p>
<p>stack I can trigger and it wants some sort of args (but don't know what to feed it, old or new config)</p>



<a name="207747081"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747081" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747081">(Aug 22 2020 at 23:43)</a>:</h4>
<p>Ah, there we go (buried in one of the old emails)</p>
<p>export FB_FILE="/dev/stack /dev/debug;/home/user/moss.pix;"<br>
./bin/rt share/db/moss.g all.g</p>



<a name="207747303"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747303" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747303">(Aug 22 2020 at 23:50)</a>:</h4>
<p>OK, looks like we're in business.</p>
<p>btw:  not reproducible, but this happened once if it's of interest:<br>
bu_semaphore_free(): pthread_mutex_destroy() failed on [18] of [20]</p>



<a name="207747404"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747404" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747404">(Aug 22 2020 at 23:54)</a>:</h4>
<p>I don't recall stack being explicit, could be wrong though.</p>



<a name="207747411"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747411" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747411">(Aug 22 2020 at 23:55)</a>:</h4>
<p>thought it let you do things like -F"/dev/mem -" to read from stdin and write to a memory buffer</p>



<a name="207747416"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747416" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747416">(Aug 22 2020 at 23:55)</a>:</h4>
<p>html/ReleaseNotes/email3.0.html was where I pulled that from, FWIW</p>



<a name="207747419"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747419" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747419">(Aug 22 2020 at 23:55)</a>:</h4>
<p>ah, great good find then</p>



<a name="207747460"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747460" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747460">(Aug 22 2020 at 23:56)</a>:</h4>
<p>First time I've actually used one of those old emails practically... nifty!</p>



<a name="207747462"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747462" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747462">(Aug 22 2020 at 23:56)</a>:</h4>
<p>how's it actually going through /dev/disk without it being in that switch list?</p>



<a name="207747480"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747480" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747480">(Aug 22 2020 at 23:57)</a>:</h4>
<p>fb_open - falls through to the disk interface if no other matches</p>



<a name="207747521"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747521" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747521">(Aug 22 2020 at 23:58)</a>:</h4>
<p>dm_plugins.cpp:405</p>



<a name="207747528"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747528" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747528">(Aug 22 2020 at 23:58)</a>:</h4>
<p>cool, and remote?  triggered on something else?</p>



<a name="207747533"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747533" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747533">(Aug 22 2020 at 23:59)</a>:</h4>
<p>if (fb_totally_numeric(file) || strchr(file, ':') != NULL) {</p>



<a name="207747538"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747538" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747538">(Aug 22 2020 at 23:59)</a>:</h4>
<p>hm, interesting</p>



<a name="207747542"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747542" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747542">(Aug 22 2020 at 23:59)</a>:</h4>
<p>Not sure what happens with a full C:\ windows path, that could get ugly...</p>



<a name="207747588"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747588" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747588">(Aug 23 2020 at 00:00)</a>:</h4>
<p>That's been there though, I don't think I changed any of that...</p>



<a name="207747589"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747589" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747589">(Aug 23 2020 at 00:00)</a>:</h4>
<p>yeah, probably wrong for that, but probably always been wrong for that</p>



<a name="207747612"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747612" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747612">(Aug 23 2020 at 00:00)</a>:</h4>
<p>I would have thought <a href="http://-Fbrlcad.org">-Fbrlcad.org</a> would use the default port, but it might have always required the colon</p>



<a name="207747636"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747636" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747636">(Aug 23 2020 at 00:01)</a>:</h4>
<p>/me double checks the rel-7-30-10 code...</p>



<a name="207747682"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747682" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747682">(Aug 23 2020 at 00:02)</a>:</h4>
<p>yep, same conditional</p>



<a name="207747683"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747683" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747683">(Aug 23 2020 at 00:02)</a>:</h4>
<p>/me checks 7.24, though it's been broken it was probably broken long before that</p>



<a name="207747746"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747746" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747746">(Aug 23 2020 at 00:04)</a>:</h4>
<p>At least as far back as 1990 per git blame</p>



<a name="207747748"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747748" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747748">(Aug 23 2020 at 00:04)</a>:</h4>
<p>svn:revision:4527</p>



<a name="207747758"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747758" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747758">(Aug 23 2020 at 00:05)</a>:</h4>
<p>/me must concede that was fun... git blame FTW</p>



<a name="207747761"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747761" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747761">(Aug 23 2020 at 00:05)</a>:</h4>
<p>cool</p>



<a name="207747800"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747800" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747800">(Aug 23 2020 at 00:06)</a>:</h4>
<p>yeah, 7.24 treats it as a file</p>



<a name="207747803"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747803" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747803">(Aug 23 2020 at 00:06)</a>:</h4>
<p>don't see a documented way to override in the man page, good to go</p>



<a name="207747832"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747832" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747832">(Aug 23 2020 at 00:07)</a>:</h4>
<p>svn:revision:3680<br>
I think that's where it's original form got added.</p>



<a name="207747834"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747834" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747834">(Aug 23 2020 at 00:07)</a>:</h4>
<p>er, so did you test that remote actually works? :)  run fbserv on <a href="http://brlcad.org">brlcad.org</a> something</p>



<a name="207747882"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747882" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747882">(Aug 23 2020 at 00:08)</a>:</h4>
<p>something like -Fbrlcad.org:file.pix</p>



<a name="207747883"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747883" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747883">(Aug 23 2020 at 00:08)</a>:</h4>
<p>that should be a remote /dev/disk</p>



<a name="207747885"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747885" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747885">(Aug 23 2020 at 00:08)</a>:</h4>
<p>What is that supposed to do?  Upload a file to <a href="http://brlcad.org">brlcad.org</a>?</p>



<a name="207747908"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747908" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747908">(Aug 23 2020 at 00:09)</a>:</h4>
<p>wherever the framebuffer server is, yeah</p>



<a name="207747919"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747919" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747919">(Aug 23 2020 at 00:09)</a>:</h4>
<p>manpage example is using it to launch remote transient windows</p>



<a name="207747925"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747925" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747925">(Aug 23 2020 at 00:09)</a>:</h4>
<p>Do I have permissions to make that work?</p>



<a name="207747973"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747973" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747973">(Aug 23 2020 at 00:10)</a>:</h4>
<p>like from <a href="http://brlcad.org">brlcad.org</a>, you could -Fyour_local_ip:/dev/Xl assuming networking routes are open</p>



<a name="207747976"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747976" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747976">(Aug 23 2020 at 00:10)</a>:</h4>
<p>try localhost  -- that should still go through the interface</p>



<a name="207747978"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747978" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747978">(Aug 23 2020 at 00:10)</a>:</h4>
<p>-/</p>



<a name="207747981"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747981" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747981">(Aug 23 2020 at 00:10)</a>:</h4>
<p>things like -Flocalhost:/dev/X  and -Flocalhost:file.pix</p>



<a name="207747987"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207747987" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207747987">(Aug 23 2020 at 00:11)</a>:</h4>
<p>can see examples in brlman libfb</p>



<a name="207748039"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748039" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748039">(Aug 23 2020 at 00:12)</a>:</h4>
<p>How do I launch an fbserver to listen for that?</p>



<a name="207748042"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748042" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748042">(Aug 23 2020 at 00:12)</a>:</h4>
<p>man fbserv ;)</p>



<a name="207748046"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748046" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748046">(Aug 23 2020 at 00:13)</a>:</h4>
<p>fbserv 0 /dev/X</p>



<a name="207748050"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748050" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748050">(Aug 23 2020 at 00:13)</a>:</h4>
<p>So localhost:/dev/X is an alternative to just specifying the port number?</p>



<a name="207748053"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748053" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748053">(Aug 23 2020 at 00:13)</a>:</h4>
<p>no</p>



<a name="207748111"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748111" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748111">(Aug 23 2020 at 00:15)</a>:</h4>
<p>at least I don't think so -- it's saying launch a transient /dev/X on the remote host</p>



<a name="207748118"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748118" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748118">(Aug 23 2020 at 00:15)</a>:</h4>
<p>./bin/fbserv 0 /dev/X<br>
./bin/rt -Flocalhost:/dev/X share/db/moss.g all.g<br>
pkg_open(localhost, remotefb): unknown service<br>
pkg_open: client connect: errno=111<br>
rem_open: can't connect to remotefb server on host "localhost".<br>
fb_open: can't open device "localhost:/dev/X", ret=-4.<br>
rt:  can't open frame buffer</p>



<a name="207748161"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748161" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748161">(Aug 23 2020 at 00:16)</a>:</h4>
<p>Oh, duh</p>



<a name="207748164"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748164" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748164">(Aug 23 2020 at 00:16)</a>:</h4>
<p>./bin/rt -Flocalhost:0:/dev/X share/db/moss.g all.g</p>



<a name="207748170"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748170" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748170">(Aug 23 2020 at 00:17)</a>:</h4>
<p>OK, so yes - works in trunk</p>



<a name="207748173"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748173" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748173">(Aug 23 2020 at 00:17)</a>:</h4>
<p>testing 24 behavior</p>



<a name="207748221"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748221" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748221">(Aug 23 2020 at 00:19)</a>:</h4>
<p>hm, it's not doing anything with  anything after the :0 if you put a port</p>



<a name="207748270"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748270" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748270">(Aug 23 2020 at 00:21)</a>:</h4>
<p>That whole aspect of the framebuffer I/O gets very little exercise, to the best of my knowledge - the closest I know of that happens semi-regularly is when rtwizard does its wackier stuff with multiple programs targeting one fb.</p>



<a name="207748271"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748271" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748271">(Aug 23 2020 at 00:21)</a>:</h4>
<p>looks like it's a space if the man page is right</p>



<a name="207748368"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748368" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748368">(Aug 23 2020 at 00:24)</a>:</h4>
<p>yeah, it's not working even following the man page example in 7.24 so not a release issue at least.  maybe broken long ago.</p>



<a name="207748369"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748369" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748369">(Aug 23 2020 at 00:24)</a>:</h4>
<p>The only other instance I can think of where any of the over-the-network features were at play was your distributed rendering</p>



<a name="207748415"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748415" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748415">(Aug 23 2020 at 00:26)</a>:</h4>
<p>That's a thought - wonder if remrt works</p>



<a name="207748420"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748420" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748420">(Aug 23 2020 at 00:26)</a>:</h4>
<p>give it a go</p>



<a name="207748425"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748425" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748425">(Aug 23 2020 at 00:27)</a>:</h4>
<p>I'm not much good with the multiple machines and network communication stuff Sean - I can try, but the only thing that comes to mind is running a remrt here and trying to enlist bz</p>



<a name="207748467"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748467" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748467">(Aug 23 2020 at 00:28)</a>:</h4>
<p>that'll work -- I've used it before that way</p>



<a name="207748469"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748469" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748469">(Aug 23 2020 at 00:28)</a>:</h4>
<p>fb_open(name?name:framebuffer, xx, yy)) is it's invocation pattern - is that what we need to test here?</p>



<a name="207748474"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748474" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748474">(Aug 23 2020 at 00:29)</a>:</h4>
<p>Do you usually launch it from within MGED?</p>



<a name="207748476"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748476" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748476">(Aug 23 2020 at 00:29)</a>:</h4>
<p>it's really just replace an rt call with remrt, then run rtsrv pointing it to that host</p>



<a name="207748478"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748478" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748478">(Aug 23 2020 at 00:29)</a>:</h4>
<p>no, that'd get ugly</p>



<a name="207748480"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748480" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748480">(Aug 23 2020 at 00:29)</a>:</h4>
<p>usually start with a saveview script</p>



<a name="207748481"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748481" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748481">(Aug 23 2020 at 00:29)</a>:</h4>
<p>Man page calls out "rrt remrt -M -s###"</p>



<a name="207748482"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748482" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748482">(Aug 23 2020 at 00:29)</a>:</h4>
<p>then edit the script to replace rt with remrt</p>



<a name="207748529"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748529" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748529">(Aug 23 2020 at 00:30)</a>:</h4>
<p>rrt should work, but that's introducing a whole other thing too  just fyi</p>



<a name="207748531"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748531" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748531">(Aug 23 2020 at 00:30)</a>:</h4>
<p>er, and rrt -M is going to wait for stdin</p>



<a name="207748534"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748534" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748534">(Aug 23 2020 at 00:30)</a>:</h4>
<p>/me just noting that the man page could use a step-by-step example</p>



<a name="207748535"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748535" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748535">(Aug 23 2020 at 00:30)</a>:</h4>
<p>which is a lil tricky from mged</p>



<a name="207748541"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748541" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748541">(Aug 23 2020 at 00:31)</a>:</h4>
<p>i mean, with all the proc changes, should also make sure rrt still works ...</p>



<a name="207748545"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748545" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748545">(Aug 23 2020 at 00:31)</a>:</h4>
<p>but would test that separate from remrt</p>



<a name="207748546"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748546" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748546">(Aug 23 2020 at 00:31)</a>:</h4>
<p>just try like rrt rtedge</p>



<a name="207748547"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748547" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748547">(Aug 23 2020 at 00:31)</a>:</h4>
<p>/me nods</p>



<a name="207748594"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748594" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748594">(Aug 23 2020 at 00:32)</a>:</h4>
<p>but yeah, remrt is usually for big long-running jobs -- no way I'd do that inside mged</p>



<a name="207748595"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748595" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748595">(Aug 23 2020 at 00:32)</a>:</h4>
<p>First let me see if I can get anything to work... considering how long it too me to get hello world going with libpkg this could be good for some comedy</p>



<a name="207748724"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748724" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748724">(Aug 23 2020 at 00:36)</a>:</h4>
<p>so to assist, here's what you'll need (from memory).  0) start an fbserv -S2048 0 /dev/mem, 1) run mgd saveview, 2) edit script to call remrt, 3) edit script switches to remove -o outputfile and file logging lines, 4) edit script to -F0 or whatever your fbserv is running on, 5) run script make sure it's waiting for clients, 6) run rtsrv from two hosts</p>



<a name="207748736"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748736" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748736">(Aug 23 2020 at 00:37)</a>:</h4>
<p>you'll of course want to make sure the render job is expensive enough to not immediately terminate.  one of the nurbs samples with ambient occlusion should easily do, so you could add -c "set ambSamples=1024 ambSlow=1" to the script</p>



<a name="207748776"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748776" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748776">(Aug 23 2020 at 00:38)</a>:</h4>
<p>unrelated 76891 needs NEWS</p>



<a name="207748824"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748824" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748824">(Aug 23 2020 at 00:41)</a>:</h4>
<p>also, your 76890 comment sounds like you might not be familiar with that convention, but '-' means stdin or stdout depending on the context and tool, it's like a magic name so a user can specify stdin/stdout via args</p>



<a name="207748866"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748866" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748866">(Aug 23 2020 at 00:42)</a>:</h4>
<p>we're not consistent but a few of our tools support that, that many also don't yet</p>



<a name="207748867"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748867" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748867">(Aug 23 2020 at 00:42)</a>:</h4>
<p>/me nods.  Not familiar with it, so good to know.</p>



<a name="207748914"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748914" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748914">(Aug 23 2020 at 00:44)</a>:</h4>
<p>can see examples of it in action: grep \"-\" src/util/*.c</p>



<a name="207748971"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207748971" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207748971">(Aug 23 2020 at 00:46)</a>:</h4>
<p>usually it'll be something like "cat file2.pix | pixdiff file1.pix -"</p>



<a name="207749028"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749028" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749028">(Aug 23 2020 at 00:48)</a>:</h4>
<p>So... How will I know when the rtsrv command has connected with remrt?</p>



<a name="207749029"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749029" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749029">(Aug 23 2020 at 00:48)</a>:</h4>
<p>and of course -- typically means "stop processing args, pass the rest along to the next thing that processes args"</p>



<a name="207749034"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749034" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749034">(Aug 23 2020 at 00:49)</a>:</h4>
<p>Blast - can't contact</p>



<a name="207749035"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749035" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749035">(Aug 23 2020 at 00:49)</a>:</h4>
<p>remrt logs it getting jobs</p>



<a name="207749040"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749040" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749040">(Aug 23 2020 at 00:49)</a>:</h4>
<p>rtsrv: unable to contact &lt;ip&gt;, port &lt;num&gt;</p>



<a name="207749041"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749041" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749041">(Aug 23 2020 at 00:49)</a>:</h4>
<p>it's instantaneous when everything is correct</p>



<a name="207749095"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749095" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749095">(Aug 23 2020 at 00:51)</a>:</h4>
<p>use rtsrv -d for debugging</p>



<a name="207749150"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749150" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749150">(Aug 23 2020 at 00:53)</a>:</h4>
<p>OK the port it was listening on wasn't the port that remrt claimed it was listening on</p>



<a name="207749152"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749152" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749152">(Aug 23 2020 at 00:53)</a>:</h4>
<p>Uh... "setpgid: Operation not permitted" and rtsrv died.</p>



<a name="207749156"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749156" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749156">(Aug 23 2020 at 00:54)</a>:</h4>
<p>defaults to port 4446</p>



<a name="207749198"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749198" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749198">(Aug 23 2020 at 00:54)</a>:</h4>
<p>08/22 20:45:45 Automatic REMRT on ubuntu2019<br>
08/22 20:45:45 Listening at port 24081, reading script on stdin</p>
<p>what port is it referring to there?</p>



<a name="207749200"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749200" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749200">(Aug 23 2020 at 00:54)</a>:</h4>
<p>the "Listening at port .. #" is that whole automatic transient port thing we were talking about months ago</p>



<a name="207749211"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749211" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749211">(Aug 23 2020 at 00:55)</a>:</h4>
<p>Oh, that business.  ugh.</p>



<a name="207749212"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749212" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749212">(Aug 23 2020 at 00:55)</a>:</h4>
<p>that's not the connection port, that's just the internal listening reassignment the kernel gave it</p>



<a name="207749215"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749215" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749215">(Aug 23 2020 at 00:55)</a>:</h4>
<p>there's not really much value in it printing it .. obviously misleading</p>



<a name="207749260"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749260" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749260">(Aug 23 2020 at 00:56)</a>:</h4>
<p>all it really means is that it's listening, and a rtsrv -d localhost 4446 should attach</p>



<a name="207749318"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749318" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749318">(Aug 23 2020 at 00:59)</a>:</h4>
<p>It does, but rtsrv is dying when it tries to fork with the setpgid error</p>



<a name="207749433"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749433" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749433">(Aug 23 2020 at 01:02)</a>:</h4>
<p>uh oh, looks like fbclear -c is broken</p>



<a name="207749551"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749551" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749551">(Aug 23 2020 at 01:06)</a>:</h4>
<p>And launching rtsrv from bz isn't getting through to remrt</p>



<a name="207749611"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749611" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749611">(Aug 23 2020 at 01:09)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I don't think my machine is accessible from the outside back in...</p>



<a name="207749615"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749615" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749615">(Aug 23 2020 at 01:09)</a>:</h4>
<p>try via localhost</p>



<a name="207749655"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749655" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749655">(Aug 23 2020 at 01:10)</a>:</h4>
<p>and yes, you'd definitely need to configure your router if you're not using a DMZ</p>



<a name="207749720"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749720" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749720">(Aug 23 2020 at 01:13)</a>:</h4>
<p>remrt sees a connection attempt, but that's when I get setpgid: Operation not permitted</p>



<a name="207749722"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749722" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749722">(Aug 23 2020 at 01:13)</a>:</h4>
<p>and rtsrv dies</p>



<a name="207749767"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749767" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749767">(Aug 23 2020 at 01:14)</a>:</h4>
<p>add -d</p>



<a name="207749768"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749768" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749768">(Aug 23 2020 at 01:14)</a>:</h4>
<p>PROTOCOL_VERSION='BRL-CAD REMRT Protocol v2.0'<br>
using 12 of 12 cpus<br>
ph_loglvl 1<br>
ph_dirbuild: NIST_MBE_PMI_2.g</p>
<p>ph_dirbuild:  rt_dirbuild(NIST_MBE_PMI_2.g) failure</p>



<a name="207749776"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749776" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749776">(Aug 23 2020 at 01:15)</a>:</h4>
<p>make sure the .g is in cwd</p>



<a name="207749778"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749778" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749778">(Aug 23 2020 at 01:15)</a>:</h4>
<p>there's ways to tell remrt to transfer it, but I don't know how to set that up</p>



<a name="207749779"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749779" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749779">(Aug 23 2020 at 01:15)</a>:</h4>
<p>Ah, there we go.  I thought it would send the .g over the wire</p>



<a name="207749781"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749781" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749781">(Aug 23 2020 at 01:15)</a>:</h4>
<p>default assumes all rtsrv's have access</p>



<a name="207749832"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749832" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749832">(Aug 23 2020 at 01:16)</a>:</h4>
<p>-d or not, it should probably print the file not found error - that setpgid thing was extremely confusing</p>



<a name="207749839"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749839" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749839">(Aug 23 2020 at 01:17)</a>:</h4>
<p>looking at the code, setpgid is probably just a perror warning</p>



<a name="207749840"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749840" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749840">(Aug 23 2020 at 01:17)</a>:</h4>
<p>meaning it's not authorized to run in a proper daemon server mode</p>



<a name="207749847"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749847" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749847">(Aug 23 2020 at 01:17)</a>:</h4>
<p>which is part of what it's trying to set up there</p>



<a name="207749889"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749889" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749889">(Aug 23 2020 at 01:18)</a>:</h4>
<p>debug mode skips all that including skipping the fork+exec</p>



<a name="207749951"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749951" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749951">(Aug 23 2020 at 01:20)</a>:</h4>
<p>If you don't mind, I'm going to add these steps as an example to the remrt man page...</p>



<a name="207749999"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207749999" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207749999">(Aug 23 2020 at 01:22)</a>:</h4>
<p>heh, why would I mind??  It is a whole section in the advanced rendering guide I started last year</p>



<a name="207750002"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207750002" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207750002">(Aug 23 2020 at 01:22)</a>:</h4>
<p>I really need to format that into docbook</p>



<a name="207750004"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207750004" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207750004">(Aug 23 2020 at 01:23)</a>:</h4>
<p>Wanted to make sure you weren't already altering the man page.</p>



<a name="207750121"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207750121" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207750121">(Aug 23 2020 at 01:27)</a>:</h4>
<p>no, as awesome as it is for production rendering, it's been strictly minimally maintained thus far -- every big render I've done I've come across <em>dozens</em> of bugs and inflexibilities and things that need to be improved.</p>



<a name="207750122"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207750122" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207750122">(Aug 23 2020 at 01:27)</a>:</h4>
<p>I've only done the minimum needed to get it working, try to justify making a few improvements until the next time.</p>



<a name="207750126"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207750126" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207750126">(Aug 23 2020 at 01:27)</a>:</h4>
<p>things like setpgid() and the error reporting just scratch the surface.</p>



<a name="207750166"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207750166" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207750166">(Aug 23 2020 at 01:28)</a>:</h4>
<p>I don't want to get distracted from the release, but I'll at least try to write down what it took to get it running so I don't have to repeat the flopping a second time...</p>



<a name="207750169"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207750169" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207750169">(Aug 23 2020 at 01:28)</a>:</h4>
<p>I'm not sure what's wrong, but remrt isn't working here for me</p>



<a name="207750173"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207750173" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207750173">(Aug 23 2020 at 01:28)</a>:</h4>
<p>and fbclear -c does seem to be fully busted</p>



<a name="207750178"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207750178" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207750178">(Aug 23 2020 at 01:28)</a>:</h4>
<p>dont' know if that's new</p>



<a name="207750185"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207750185" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207750185">(Aug 23 2020 at 01:29)</a>:</h4>
<p>I'll check in a few minutes, once I'm done with the man page... one sec...</p>



<a name="207751507"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207751507" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207751507">(Aug 23 2020 at 02:14)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  is the fbclear breakage new?</p>



<a name="207751694"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207751694" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207751694">(Aug 23 2020 at 02:20)</a>:</h4>
<p>If it's hanging indefinitely, I'm seeing that in 7.30.10.  if_remote.c:702 is doing a pkg_send, then waiting on 719 for a response that's apparently not coming.</p>



<a name="207754616"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207754616" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207754616">(Aug 23 2020 at 03:53)</a>:</h4>
<p>what's up with r76889?  sounds like you disabled a failing regression test...</p>



<a name="207771709"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207771709" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207771709">(Aug 23 2020 at 12:55)</a>:</h4>
<p>I partially re-enabled a test that I had fully disabled earlier.  The input file being fed to asc2dsp for the other part is reporting an invalid character - I can't tell if it ever worked or even should have worked...</p>



<a name="207772163"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207772163" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207772163">(Aug 23 2020 at 13:05)</a>:</h4>
<p>That's a drawback with how some of the regression tests are set up (or at least, it has been - I've not done a systematic audit) - intermediate commands can fail, but as long as the final command executed by the script returns 0 the intermediated failures don't always fail the test.</p>
<p>If I remember correctly with asc2dsp, the input file names passed to asc2dsp were incorrect (probably after something got moved or renamed).  However, asc2dsp still creates an empty output file in that case.  So the test created two empty output files, which cmp found were the same, ergo the test passed.</p>



<a name="207772229"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207772229" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207772229">(Aug 23 2020 at 13:07)</a>:</h4>
<p>I'm not sure if asc2dsp just doesn't really support the "old" format, or this is one of those cases where a .dsp file got tagged as ASCII rather than binary (or vice versa) and the file contents at SVN checkout don't match what asc2dsp is expecting.</p>



<a name="207844548"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207844548" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207844548">(Aug 24 2020 at 13:46)</a>:</h4>
<p>Barring bugs or new deviations introduced, all of the tests were structured to accumulate any errors and return that as a result.  Relying on the last command's status is not a good idea for a whole host of reasons.</p>



<a name="207845056"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207845056" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207845056">(Aug 24 2020 at 13:50)</a>:</h4>
<p>To that specific commit, sounds good if the test was already disabled and it's a partial re-enabling.  We shouldn't disable a test if it was working was the only concern.</p>



<a name="207845252"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207845252" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207845252">(Aug 24 2020 at 13:52)</a>:</h4>
<p>It's not doing any regression testing from the looks of the code either, so since it's presenting a maintenance cost, may make sense to remove it.</p>



<a name="207845585"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207845585" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207845585">(Aug 24 2020 at 13:54)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> on the matter of NULL checking, given the state of all the calling sites needing a null check and most still not really looking like they'd gracefully handle a NULL condition at all, it's worth considering making the API never return NULL (i.e., making it impossible).</p>



<a name="207845799"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207845799" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207845799">(Aug 24 2020 at 13:56)</a>:</h4>
<p>You mean returning an "(NULL)" string?</p>



<a name="207845854"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207845854" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207845854">(Aug 24 2020 at 13:57)</a>:</h4>
<p>General way to do that would be to make the error condition a special value instead of a special pointer.  Any value could work but ideally on that might make sense when printed.</p>



<a name="207845892"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207845892" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207845892">(Aug 24 2020 at 13:57)</a>:</h4>
<p>I'm working my way through the list of functions you itemized earlier, trying to make sure they do something sane.</p>



<a name="207845929"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207845929" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207845929">(Aug 24 2020 at 13:57)</a>:</h4>
<p>so yeah, "(NULL)" could work though that's what stdio uses on Linux, so wouldn't be able to disambiguate.</p>



<a name="207846027"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207846027" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207846027">(Aug 24 2020 at 13:58)</a>:</h4>
<p>I noticed, appreciated as there were a slew of potential null derefs introduced -- that's why I mention it.</p>



<a name="207846087"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207846087" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207846087">(Aug 24 2020 at 13:58)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I'm leery of going too far down this rabbit hole, since the case of a null DMP isn't going to  come up in normal usage and the entire structure of this whole thing (IMHO) needs some serious TLC</p>



<a name="207846168"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207846168" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207846168">(Aug 24 2020 at 13:59)</a>:</h4>
<p>yes</p>



<a name="207846272"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207846272" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207846272">(Aug 24 2020 at 14:00)</a>:</h4>
<p>that's why I mention it, I was leery too -- adding all the null checks doesn't feel right because it's decreasing readability, increasing complexity</p>



<a name="207846296"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207846296" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207846296">(Aug 24 2020 at 14:00)</a>:</h4>
<p>bu_list everywhere, globals galore... feels like trying to paint a rust bucket, in some ways</p>



<a name="207846337"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207846337" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207846337">(Aug 24 2020 at 14:00)</a>:</h4>
<p>but that's the API.  so either the API should change to not return NULL, or the callers are technically required to test it, however rare a condition</p>



<a name="207846402"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207846402" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207846402">(Aug 24 2020 at 14:01)</a>:</h4>
<p>I'm seeing a fair number of null checks already, actually, as I'm going through - found a few missing</p>



<a name="207846462"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207846462" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207846462">(Aug 24 2020 at 14:01)</a>:</h4>
<p>whether the calling code does something "sane" after doing the check is another matter, but that was presumably baked in from the get go...</p>



<a name="207846603"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207846603" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207846603">(Aug 24 2020 at 14:03)</a>:</h4>
<p>I think the reason it looks funky now is mostly that I straight up replaced all variable accesses with function calls, which resulted in a lot of double calls in if tests and bu_vls string outputs - that's most of what I'm trying to clean up now.</p>



<a name="207846673"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207846673" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207846673">(Aug 24 2020 at 14:03)</a>:</h4>
<p>I'm game to make it return not null, but I'm not sure what to do about the functions returning bu_vls strings in that respect.</p>



<a name="207846768"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207846768" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207846768">(Aug 24 2020 at 14:04)</a>:</h4>
<p>Do we malloc a vls internally in the null case, and then the caller has to check for a null vls and free it if that's what they get?  that feels wrong...</p>



<a name="207846936"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207846936" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207846936">(Aug 24 2020 at 14:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/207846296">said</a>:</p>
<blockquote>
<p>bu_list everywhere, globals galore... feels like trying to paint a rust bucket, in some ways</p>
</blockquote>
<p>That can be said of almost any code, but I don't think it's a constructive perspective.  Dismissing any issue in code and more importantly allowing new ones to be introduced because someone else dismissed something is not something I support (and HACKING has explicitly called out since inception).  That's very much a canonical fallacy in my experience.</p>



<a name="207847077"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207847077" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207847077">(Aug 24 2020 at 14:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/207846603">said</a>:</p>
<blockquote>
<p>I think the reason it looks funky now is mostly that I straight up replaced all variable accesses with function calls, which resulted in a lot of double calls in if tests and bu_vls string outputs - that's most of what I'm trying to clean up now.</p>
</blockquote>
<p>I realize that, but therein is now a new issue that did not exist before as functions express contracts, variables do not.  So you kind of birthed this beast <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="207847319"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207847319" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207847319">(Aug 24 2020 at 14:09)</a>:</h4>
<p>Public struct members don't constitute a contract?</p>



<a name="207847321"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207847321" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207847321">(Aug 24 2020 at 14:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/207846673">said</a>:</p>
<blockquote>
<p>I'm game to make it return not null, but I'm not sure what to do about the functions returning bu_vls strings in that respect.</p>
</blockquote>
<p>That's tricky as there's dynamic memory associated.  How about eliminating them?</p>



<a name="207847365"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207847365" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207847365">(Aug 24 2020 at 14:10)</a>:</h4>
<p>Not trivial to eliminate.  Calling code assumes ability to stash the tcl path in them, IIRC</p>



<a name="207847498"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207847498" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207847498">(Aug 24 2020 at 14:11)</a>:</h4>
<p>Tk window path rather</p>



<a name="207847613"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207847613" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207847613">(Aug 24 2020 at 14:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/207847319">said</a>:</p>
<blockquote>
<p>Public struct members don't constitute a contract?</p>
</blockquote>
<p>They're just containers.  There is no expectations for C or C++.  They often are assumptions on those containers, but they're all generally subject to error.  That's why for C and C++ at least the best you can generally do is dictate a convention of who owns the memory.</p>



<a name="207847650"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207847650" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207847650">(Aug 24 2020 at 14:12)</a>:</h4>
<p>C++ formalizes that a fair bit better, but in C it's typically whomever allocated is responsible for releasing.</p>



<a name="207847788"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207847788" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207847788">(Aug 24 2020 at 14:13)</a>:</h4>
<p>so whoever created the struct would be responsible for ensuring it's embedded values and pointers are "sane".  That's also still not a contract on those values by callers though -- it was just the creator/initializer's reponsibility to minimize the risk, ideally provide a safe API, which is what codifies expectations.</p>



<a name="207848013"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207848013" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207848013">(Aug 24 2020 at 14:15)</a>:</h4>
<p>So, meta issue for a second... up until now we've not considered the libdm/libfb APIs truly public, since they were not intended to survive in their current form.  That's still true - this refactor is not what I would propose if the intent was to establish a proper API.  It feels like you're wanting to treat the function wrappers as something more "public" than the old libdm/fb structs - am I misunderstanding the intent?</p>



<a name="207848032"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207848032" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207848032">(Aug 24 2020 at 14:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/207847365">said</a>:</p>
<blockquote>
<p>Not trivial to eliminate.  Calling code assumes ability to stash the tcl path in them, IIRC</p>
</blockquote>
<p>How about making the caller pass a vls to it</p>



<a name="207848176"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207848176" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207848176">(Aug 24 2020 at 14:16)</a>:</h4>
<p>Not sure how hard that would be - don't know if calling functions are set up to properly manage memory.  We might have to make application global vls strings for that to work in MGED.</p>



<a name="207848221"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207848221" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207848221">(Aug 24 2020 at 14:17)</a>:</h4>
<p>Would probably work, but even in MGED introducing new globals just feels wrong...</p>



<a name="207848343"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207848343" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207848343">(Aug 24 2020 at 14:17)</a>:</h4>
<p>To the meta point, no -- public API has a much higher burden still.  This is an issue with any functions, not one just applied to public functions.</p>



<a name="207848436"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207848436" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207848436">(Aug 24 2020 at 14:18)</a>:</h4>
<p>The issue is functions that generate NULL.  It's one thing to be handed NULL and then pass that along, it's another to be the returning source of NULL.</p>



<a name="207848508"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207848508" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207848508">(Aug 24 2020 at 14:19)</a>:</h4>
<p>For the code having issues from a NULL from one of these functions though, wouldn't it have had the same problems trying to access an invalid struct member in the old code?</p>



<a name="207848564"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207848564" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207848564">(Aug 24 2020 at 14:19)</a>:</h4>
<p>The only place that should be given a pass is performance-critical code, so you will/should find deviations in librt and some parts of libbn/libbu used in those performance paths.</p>



<a name="207849244"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207849244" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207849244">(Aug 24 2020 at 14:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/207848508">said</a>:</p>
<blockquote>
<p>For the code having issues from a NULL from one of these functions though, wouldn't it have had the same problems trying to access an invalid struct member in the old code?</p>
</blockquote>
<p>It really depends on the specifics, devil in the details.  There are entire theories of corporate development that prohibit refactoring in NULL as it's exceptionally common for code to coincidentally work.  So there could be swaths of logic that happen to gracefully handle a variety of invalid conditions by accident, but handled none the less.  I don't think that's our issue here or concern -- it's the simple principle of having a function that can return NULL, you're supposed to check it otherwise there is no point whatsoever in returning NULL and the consequence will be eventual obscure crashing.</p>



<a name="207849389"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207849389" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207849389">(Aug 24 2020 at 14:26)</a>:</h4>
<p>We've ran into this issue many times over the years too, so it's not just a rare hypothetical.</p>



<a name="207849439"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207849439" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207849439">(Aug 24 2020 at 14:26)</a>:</h4>
<p>So is the shortest path forward for to finish the check through the code for the null checks, or should I try to look at excising the bu_vls slots from the dm implementation struct?</p>



<a name="207849511"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207849511" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207849511">(Aug 24 2020 at 14:27)</a>:</h4>
<p>Need to tie this off - I'm game to do the work, but need to have a finish line where this can be called done</p>



<a name="207849682"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207849682" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207849682">(Aug 24 2020 at 14:28)</a>:</h4>
<p>Shortest and safest path depends if we're talking long or short term, but the difference is probably only an hour or two effort either way.</p>



<a name="207849785"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207849785" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207849785">(Aug 24 2020 at 14:29)</a>:</h4>
<p>All right - what in your estimate is the best way forward?</p>



<a name="207849940"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207849940" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207849940">(Aug 24 2020 at 14:30)</a>:</h4>
<p>Make it so caller doesn't have to check null, make caller pass in container if it would otherwise result in an allocation</p>



<a name="207850000"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850000" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850000">(Aug 24 2020 at 14:31)</a>:</h4>
<p>if null must be returned for some deeper hard-to-untangle reason, then the call sites should get checked</p>



<a name="207850123"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850123" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850123">(Aug 24 2020 at 14:32)</a>:</h4>
<p>I'll see what I can do. </p>
<p>btw - is this the last big blocker, or have you see other things that'll need to be handled?</p>



<a name="207850187"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850187" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850187">(Aug 24 2020 at 14:32)</a>:</h4>
<p>(so far - I know you're still commit reviewing...)</p>



<a name="207850209"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850209" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850209">(Aug 24 2020 at 14:32)</a>:</h4>
<p>I've been getting through about 100 commits per day</p>



<a name="207850220"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850220" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850220">(Aug 24 2020 at 14:32)</a>:</h4>
<p>so more than half way there now</p>



<a name="207850270"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850270" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850270">(Aug 24 2020 at 14:33)</a>:</h4>
<p>course that includes reviewing the new stuff as it's coming in, so it's an uphill struggle :)</p>



<a name="207850309"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850309" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850309">(Aug 24 2020 at 14:33)</a>:</h4>
<p>there's a lot of little undocumented things that I'm concerned about but not enough to hold things up</p>



<a name="207850321"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850321" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850321">(Aug 24 2020 at 14:33)</a>:</h4>
<p>I could hold off and do one big commit to try and clean up libdm :-P</p>



<a name="207850384"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850384" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850384">(Aug 24 2020 at 14:34)</a>:</h4>
<p>lots of things that beg testing  :(</p>



<a name="207850415"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850415" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850415">(Aug 24 2020 at 14:34)</a>:</h4>
<p>that'd just screw up the commit review rate :P</p>



<a name="207850445"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850445" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850445">(Aug 24 2020 at 14:34)</a>:</h4>
<p>you heard about paragon's give to linux kernel? :)</p>



<a name="207850508"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850508" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850508">(Aug 24 2020 at 14:35)</a>:</h4>
<p>just heard about that yesterday</p>



<a name="207850527"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850527" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850527">(Aug 24 2020 at 14:35)</a>:</h4>
<p>No, haven't been plugged in to outside world much lately - what'd they give?</p>



<a name="207850555"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850555" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850555">(Aug 24 2020 at 14:35)</a>:</h4>
<p>they submitted their ntfs driver</p>



<a name="207850575"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850575" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850575">(Aug 24 2020 at 14:36)</a>:</h4>
<p>it's a 27k line pull request</p>



<a name="207850677"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850677" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850677">(Aug 24 2020 at 14:36)</a>:</h4>
<p>&lt;snork&gt;  Given how the Linux folks reacted to ZFS, I can't wait to see the comments on that one...</p>



<a name="207850794"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850794" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850794">(Aug 24 2020 at 14:37)</a>:</h4>
<p>Looks like we've got 4 vls strings in the dm container - two Tcl/Tk drawing window strings, the display name, and a log.</p>



<a name="207850801"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850801" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850801">(Aug 24 2020 at 14:37)</a>:</h4>
<p>paragon is known for having one of the best ntfs drivers and linux needs it, but they're also notorious for having crappy issues in their drivers (including the ntfs one)</p>



<a name="207850940"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850940" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850940">(Aug 24 2020 at 14:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/207850794">said</a>:</p>
<blockquote>
<p>Looks like we've got 4 vls strings in the dm container - two Tcl/Tk drawing window strings, the display name, and a log.</p>
</blockquote>
<p>A real cheap 'punt' that avoids lots of restructuring could be to convert them into char[]</p>



<a name="207850989"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207850989" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207850989">(Aug 24 2020 at 14:39)</a>:</h4>
<p>then you'd only need to worry about the handful of sites that write</p>



<a name="207851028"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851028" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851028">(Aug 24 2020 at 14:39)</a>:</h4>
<p>/me nods - got to check where they're being accessed.</p>



<a name="207851133"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851133" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851133">(Aug 24 2020 at 14:40)</a>:</h4>
<p>like if you made them four char[255] arrays, just need to make sure nobody writes past that</p>



<a name="207851217"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851217" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851217">(Aug 24 2020 at 14:41)</a>:</h4>
<p>dm_log looks like it should have been a flag from the comment</p>



<a name="207851237"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851237" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851237">(Aug 24 2020 at 14:41)</a>:</h4>
<p>unless it's the actual log, then the comment is just wrong</p>



<a name="207851298"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851298" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851298">(Aug 24 2020 at 14:41)</a>:</h4>
<p>Probably want the Tk paths a bit longer - some of the Itk names can get long.</p>
<p>I'll have to check, but I think it's supposed to be a log filename.</p>



<a name="207851362"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851362" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851362">(Aug 24 2020 at 14:42)</a>:</h4>
<p>the other three look like they could get away with #define MAXNAME 255 ; char[MAXNAME] or similar</p>



<a name="207851410"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851410" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851410">(Aug 24 2020 at 14:42)</a>:</h4>
<p>ah, if it's a filepath, then we really gobble up memory but that's fine</p>



<a name="207851439"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851439" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851439">(Aug 24 2020 at 14:42)</a>:</h4>
<p>for filesystem paths use MAXPATHLEN</p>



<a name="207851512"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851512" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851512">(Aug 24 2020 at 14:43)</a>:</h4>
<p>Does Tk have a maximum path length for their window names?  If so that's what we'd want there...</p>



<a name="207851549"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851549" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851549">(Aug 24 2020 at 14:43)</a>:</h4>
<p>/me flips a type to see what blows up in the build...</p>



<a name="207851552"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851552" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851552">(Aug 24 2020 at 14:43)</a>:</h4>
<p>I doubt it.</p>



<a name="207851663"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851663" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851663">(Aug 24 2020 at 14:44)</a>:</h4>
<p>in practice for dm, though, the path names are things like .id_0.some_window.childsite.widgetfoo_window.dialog</p>



<a name="207851755"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851755" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851755">(Aug 24 2020 at 14:44)</a>:</h4>
<p>that would be a pretty extreme example too.  most are far more concise</p>



<a name="207851814"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851814" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851814">(Aug 24 2020 at 14:45)</a>:</h4>
<p>OK - as long as Archer doesn't do anything crazy - I remember Bob command line manipulating Itk windows once, and the names were kinda nutty</p>



<a name="207851915"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207851915" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207851915">(Aug 24 2020 at 14:46)</a>:</h4>
<p>I've never seen any get close to 256</p>



<a name="207852080"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207852080" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207852080">(Aug 24 2020 at 14:47)</a>:</h4>
<p>/me nods we can give 255 a shot. I imagine we'll know pretty quick if there's an issue...</p>



<a name="207852199"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207852199" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207852199">(Aug 24 2020 at 14:48)</a>:</h4>
<p>I was thinking indexing when I wrote that 0-255 .. size should be 256 so it stays aligned in memory</p>



<a name="207852323"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207852323" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207852323">(Aug 24 2020 at 14:49)</a>:</h4>
<p>that's also where the calling sites that write into the buffer can then just bu_bomb justifiably and continuing code can assume it always works</p>



<a name="207852536"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207852536" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207852536">(Aug 24 2020 at 14:50)</a>:</h4>
<p>oh wait</p>



<a name="207852562"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207852562" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207852562">(Aug 24 2020 at 14:51)</a>:</h4>
<p>so there is another solution here that may be even less work</p>



<a name="207852574"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207852574" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207852574">(Aug 24 2020 at 14:51)</a>:</h4>
<p>and can keep the vls</p>



<a name="207852815"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207852815" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207852815">(Aug 24 2020 at 14:53)</a>:</h4>
<p>the issue is strictly that they return NULL, so like dm_get_pathname()  you could just make it halt on that condition.  then callers never need to check.  It's not a great pattern to do aggressively, but it certainly seems reasonable for the four vls functions as they're in the dmp.</p>



<a name="207852911"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207852911" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207852911">(Aug 24 2020 at 14:53)</a>:</h4>
<p>i.e., they're not pointers in the dmp</p>



<a name="207853054"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207853054" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207853054">(Aug 24 2020 at 14:54)</a>:</h4>
<p>dm_get_vp() is a good counter-example.  it returns null and is potentially null itself in the dmp.</p>



<a name="207853330"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207853330" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207853330">(Aug 24 2020 at 14:56)</a>:</h4>
<p>Make it hault?  You mean bu_exit?</p>



<a name="207853411"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207853411" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207853411">(Aug 24 2020 at 14:57)</a>:</h4>
<p>no, bu_exit is for applications</p>



<a name="207853412"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207853412" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207853412">(Aug 24 2020 at 14:57)</a>:</h4>
<p>bu_bomb</p>



<a name="207853424"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207853424" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207853424">(Aug 24 2020 at 14:57)</a>:</h4>
<p>or a magic number check</p>



<a name="207853435"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207853435" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207853435">(Aug 24 2020 at 14:57)</a>:</h4>
<p>(which bu_bombs)</p>



<a name="207853478"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207853478" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207853478">(Aug 24 2020 at 14:58)</a>:</h4>
<p>since that's conceptually what you're doing with the tests anyways, just checking the dmp</p>



<a name="207853519"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207853519" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207853519">(Aug 24 2020 at 14:58)</a>:</h4>
<p>might as well shove a magic in there and BU_CKMAG it</p>



<a name="207853545"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207853545" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207853545">(Aug 24 2020 at 14:58)</a>:</h4>
<p>then no null return possible</p>



<a name="207857381"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207857381" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207857381">(Aug 24 2020 at 15:27)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> a quick experiment with a BU_CKMAG in the dm causes a couple of MGED crashes...</p>



<a name="207857472"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207857472" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207857472">(Aug 24 2020 at 15:27)</a>:</h4>
<p>Working through them...</p>



<a name="207857943"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207857943" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207857943">(Aug 24 2020 at 15:31)</a>:</h4>
<p>There we go - was r76921 what you were thinking?</p>



<a name="207859306"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207859306" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207859306">(Aug 24 2020 at 15:41)</a>:</h4>
<p>(along with r76922)</p>



<a name="207859432"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207859432" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207859432">(Aug 24 2020 at 15:42)</a>:</h4>
<p>If so I'll have to make another pass in the calling code to handle the (DM-NULL) returns instead of NULL (there may still be cases were we don't want to feed that to a Tcl script for execution...)</p>



<a name="207863094"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207863094" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207863094">(Aug 24 2020 at 16:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/207857381">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="102902">Sean</span> a quick experiment with a BU_CKMAG in the dm causes a couple of MGED crashes...</p>
</blockquote>
<p>Nominally means NULL is/was being returned at least somewhere/sometime!  That's why all the fuss... even if the condition is an unexpected/unintended behavior or even if it happened to work today (might not tomorrow after some other change or recompile).</p>



<a name="207863171"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207863171" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207863171">(Aug 24 2020 at 16:18)</a>:</h4>
<p>I noticed several of the funcs are unused -- what's up with that? :)</p>



<a name="207868298"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207868298" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207868298">(Aug 24 2020 at 17:04)</a>:</h4>
<p>At least one of them I just added as a get/set pairing, when only set was needed</p>



<a name="207868596"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207868596" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207868596">(Aug 24 2020 at 17:06)</a>:</h4>
<p>Actually, crash ended up being silly - just me missing one of the magic initialization cases in the allocation logic.</p>



<a name="207886357"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207886357" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207886357">(Aug 24 2020 at 19:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/207868298">said</a>:</p>
<blockquote>
<p>At least one of them I just added as a get/set pairing, when only set was needed</p>
</blockquote>
<p>But if nothing reads them, why bother setting them... can they be removed?</p>



<a name="207889838"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207889838" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207889838">(Aug 24 2020 at 20:01)</a>:</h4>
<p>It's read internally by the ogl backend, IIRC - a parameter passed from the app to the backend.  I'm sure it can be refactored somehow - there's a TODO note about it - but I haven't had time to fool with it.  That level of the drawing logic, it's easy to break things in subtle ways that are hard to catch.</p>



<a name="207978497"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207978497" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207978497">(Aug 25 2020 at 15:31)</a>:</h4>
<p>OK, so upon further investigation (at least in latest trunk) the X dm seems to work embedded in Tk on Linux - it's only the dmtype set (runtime switching of the display manager types) that's failing.</p>
<p>Setting it in the .mgedrc works fine.  That's not too surprising, really - dmtype was always a rather evil hack...</p>



<a name="207987486"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207987486" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207987486">(Aug 25 2020 at 16:44)</a>:</h4>
<p>does attach work?</p>



<a name="207987504"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/207987504" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#207987504">(Aug 25 2020 at 16:44)</a>:</h4>
<p>attach X .. attach ogl</p>



<a name="208003456"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208003456" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208003456">(Aug 25 2020 at 18:33)</a>:</h4>
<p>Yes, attach works.</p>



<a name="208023400"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208023400" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208023400">(Aug 25 2020 at 21:04)</a>:</h4>
<p>both simultaneously?</p>



<a name="208023792"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208023792" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208023792">(Aug 25 2020 at 21:08)</a>:</h4>
<p>Yes.</p>



<a name="208024022"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208024022" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208024022">(Aug 25 2020 at 21:10)</a>:</h4>
<p>mged -c -a X share/db/moss brings up the X based version, then I can "attach ogl" and also get an OpenGL version.  "e all.g" draws to both.</p>



<a name="208024105"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208024105" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208024105">(Aug 25 2020 at 21:11)</a>:</h4>
<p>That's great.  It should accept an arbitrary number of attach calls.  That's wicked fun way to set up mged on CAVE walls and projection displays.</p>



<a name="208050856"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208050856" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208050856">(Aug 26 2020 at 03:59)</a>:</h4>
<p>just fyi, in regex [12] and [1-2] are equivalent (saw the real error, missing a right bracket)</p>



<a name="208548238"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208548238" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208548238">(Aug 31 2020 at 12:09)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> any more issues pop up in commit review?</p>



<a name="208607319"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208607319" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208607319">(Aug 31 2020 at 19:54)</a>:</h4>
<p>quite a few flagged as needing testing, but none yet that warrant release blocking.  some still to document; more likely to miss one or two of those :/ ..  I think I'm over 90% through, so should be done soon.</p>



<a name="208630437"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208630437" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208630437">(Aug 31 2020 at 23:56)</a>:</h4>
<p>/me stares at the MGED and dm-ogl code, and reluctantly concludes that a major shift in the way dm/fb rendering events are managed is too much of a time sink to tangle with for now...</p>



<a name="208630563"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208630563" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208630563">(Aug 31 2020 at 23:58)</a>:</h4>
<p>Will require a deep dive into Tk window setup, management, and events... blegh.</p>



<a name="208648158"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208648158" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208648158">(Sep 01 2020 at 06:14)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> one thing you could check for me -- can you see if obj export is working?  see if an object from bot_dump and g-obj will open in anything else.</p>



<a name="208648274"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208648274" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208648274">(Sep 01 2020 at 06:17)</a>:</h4>
<p>was reported and recorded but don't think it got checked at all as a release blocker, don't think we have anything that validates obj, only verification</p>



<a name="208653424"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208653424" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208653424">(Sep 01 2020 at 07:35)</a>:</h4>
<p>/me is down to 165  remaining, woot!</p>



<a name="208675579"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208675579" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208675579">(Sep 01 2020 at 11:46)</a>:</h4>
<p>bot_dump'ed a facetized sph to an obj file, and ran ./bin/g-obj -o g_obj.obj sph_bot.g sph.s on the same sph - both .obj files opened successfully in meshlab.</p>
<p>So working at a basic level, at least on Linux.</p>



<a name="208697084"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/208697084" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#208697084">(Sep 01 2020 at 14:44)</a>:</h4>
<p>Is it me, or is sourceforge slow today?</p>



<a name="209061344"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209061344" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209061344">(Sep 04 2020 at 07:05)</a>:</h4>
<p>huh, okay.  thanks for checking!  that's really bizarre because I do recall that distinctly not working.  Does Blender open them?  I'll have to recheck xcode and cura, or maybe it's somehow mac-specific.</p>



<a name="209086395"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209086395" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209086395">(Sep 04 2020 at 12:16)</a>:</h4>
<p>I'll try on Windows - rtwizard is barking only on Windows, so maybe it'll expose this as well...</p>



<a name="209112443"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209112443" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209112443">(Sep 04 2020 at 16:09)</a>:</h4>
<p>Seems OK on Windows as well.  Only thing noticed so far was an empty file getting created if I tried the -b option with -t obj for bot_dump.  It provided an informative error message, but ideally shouldn't have produced the empty output file.</p>



<a name="209816956"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209816956" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209816956">(Sep 11 2020 at 18:22)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> do you have any more information you can give about the NUL file getting created -- what does "test -f /dev/null" report?</p>



<a name="209817085"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209817085" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209817085">(Sep 11 2020 at 18:23)</a>:</h4>
<p>I'll see if I can tell - it only fails when run inside of CTest - a straight command-line run succeeds</p>



<a name="209817650"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209817650" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209817650">(Sep 11 2020 at 18:28)</a>:</h4>
<p>all the more bizarre.. 'test' is used all throughout the benchmark and other scripts run by ctest.</p>



<a name="209817836"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209817836" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209817836">(Sep 11 2020 at 18:29)</a>:</h4>
<p>very concerning if something this fundamental isn't reliable</p>



<a name="209818428"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209818428" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209818428">(Sep 11 2020 at 18:34)</a>:</h4>
<p>I'm not sure what to make of this.   If I put the following in:</p>
<div class="codehilite"><pre><span></span><code>if test -f /dev/null ; then
    echo $?
    echo &quot;have /dev/null&quot;
else
    echo $?
    echo &quot;no /dev/null&quot;
fi
</code></pre></div>


<p>I get:</p>
<div class="codehilite"><pre><span></span><code>875: 1
875: no /dev/null
</code></pre></div>



<a name="209818536"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209818536" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209818536">(Sep 11 2020 at 18:35)</a>:</h4>
<p>I get that both in and out of CTest, but if I make the "NUL" file that gets created read-only CTest will abort after trying to write to it and failing, but running outside of CTest benchmark still proceeds.</p>



<a name="209818545"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209818545" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209818545">(Sep 11 2020 at 18:35)</a>:</h4>
<p>put in something more explicit like "echo <code>ls -la /dev/null</code>" before the test and</p>



<a name="209818558"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209818558" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209818558">(Sep 11 2020 at 18:35)</a>:</h4>
<p>those were backticked</p>



<a name="209818701"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209818701" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209818701">(Sep 11 2020 at 18:36)</a>:</h4>
<p>could just put ls -la /dev/null to make sure it's not running in some kind of environment, also "which test" and see if /bin/test -f /dev/null and i [ -f /dev/null ]  behaves differently...</p>



<a name="209818750"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209818750" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209818750">(Sep 11 2020 at 18:37)</a>:</h4>
<p>crw-rw-rw- 1 root root 1, 3 Sep 2 16:50 /dev/null</p>



<a name="209819102"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819102" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819102">(Sep 11 2020 at 18:40)</a>:</h4>
<p>/bin/test and /usr/bin/test don't seem to make a difference...</p>



<a name="209819205"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819205" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819205">(Sep 11 2020 at 18:41)</a>:</h4>
<p>what about:  if [ -f /dev/null ] ; then ...</p>



<a name="209819247"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819247" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819247">(Sep 11 2020 at 18:41)</a>:</h4>
<p>No change.</p>



<a name="209819338"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819338" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819338">(Sep 11 2020 at 18:42)</a>:</h4>
<p>and this is linux you said??</p>



<a name="209819355"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819355" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819355">(Sep 11 2020 at 18:42)</a>:</h4>
<p>Yes - Linux + CTest</p>



<a name="209819373"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819373" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819373">(Sep 11 2020 at 18:42)</a>:</h4>
<p>how are you invoking ctest?</p>



<a name="209819389"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819389" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819389">(Sep 11 2020 at 18:42)</a>:</h4>
<p>ctest -R benchmark --verbose</p>



<a name="209819481"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819481" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819481">(Sep 11 2020 at 18:44)</a>:</h4>
<div class="codehilite"><pre><span></span><code>dvn=$(test -f /dev/null)
echo $dvn
echo $?
</code></pre></div>


<p>returns:</p>
<div class="codehilite"><pre><span></span><code>0
</code></pre></div>



<a name="209819551"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819551" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819551">(Sep 11 2020 at 18:44)</a>:</h4>
<p>and silly question, but sure it's regenerating the benchmark script, picking up the changs?</p>



<a name="209819632"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819632" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819632">(Sep 11 2020 at 18:45)</a>:</h4>
<p>this literally makes no sense...</p>



<a name="209819637"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819637" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819637">(Sep 11 2020 at 18:45)</a>:</h4>
<p>I'm directly editing the copy in bin/benchmark, and not re-running CMake (not silly question, I made that mistake when I first started trying to fix)</p>



<a name="209819759"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819759" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819759">(Sep 11 2020 at 18:46)</a>:</h4>
<p>with ctest --verbose, does it show the actual shell command it's invoking?</p>



<a name="209819790"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819790" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819790">(Sep 11 2020 at 18:46)</a>:</h4>
<p>/usr/bin/sh "/home/cyapp/RELEASE/build2/bin/benchmark" "run" "TIMEFRAME=1"</p>



<a name="209819870"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819870" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819870">(Sep 11 2020 at 18:47)</a>:</h4>
<p>But if I run that straight up, it does start running even with the NUL file read only (all the printouts seem to be the same though...)</p>



<a name="209819991"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209819991" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209819991">(Sep 11 2020 at 18:48)</a>:</h4>
<p>is there a trace flag  or something that can give more info?</p>



<a name="209820330"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209820330" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209820330">(Sep 11 2020 at 18:51)</a>:</h4>
<p>-x to the shell script, but that's not helping much...</p>



<a name="209820438"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209820438" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209820438">(Sep 11 2020 at 18:52)</a>:</h4>
<div class="codehilite"><pre><span></span><code>+ ls -la /dev/null
+ echo crw-rw-rw- 1 root root 1, 3 Sep 2 16:50 /dev/null
crw-rw-rw- 1 root root 1, 3 Sep 2 16:50 /dev/null
+ test -f /dev/null
+ dvn=
+ echo

+ echo 0
0
+ [ -f /dev/null ]
+ echo 1
1
+ echo no /dev/null
no /dev/null
</code></pre></div>



<a name="209821017"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209821017" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209821017">(Sep 11 2020 at 18:57)</a>:</h4>
<p>Interesting, I didn't notice before, but I'm seeing the behavior here in ctest too</p>



<a name="209821055"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209821055" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209821055">(Sep 11 2020 at 18:57)</a>:</h4>
<p>this is beyond messed up...</p>



<a name="209821683"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209821683" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209821683">(Sep 11 2020 at 19:03)</a>:</h4>
<p>oh crap, right, huh.</p>



<a name="209821692"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209821692" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209821692">(Sep 11 2020 at 19:03)</a>:</h4>
<p>my mistake all along.</p>



<a name="209821855"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209821855" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209821855">(Sep 11 2020 at 19:04)</a>:</h4>
<p>While we're at it - should I go ahead and pull in the gcv changes?</p>



<a name="209821892"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209821892" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209821892">(Sep 11 2020 at 19:04)</a>:</h4>
<p>fixed</p>



<a name="209822017"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822017" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822017">(Sep 11 2020 at 19:06)</a>:</h4>
<p>no, I'd hold up on them.  lots of potential for brokenness.</p>



<a name="209822096"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822096" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822096">(Sep 11 2020 at 19:06)</a>:</h4>
<p>/me nods - agreed.  So RELEASE isn't quite equal to trunk, I misspoke earlier</p>



<a name="209822171"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822171" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822171">(Sep 11 2020 at 19:07)</a>:</h4>
<p>I didn't look in detail, but at a glance appeared to just wildcard it</p>



<a name="209822278"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822278" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822278">(Sep 11 2020 at 19:08)</a>:</h4>
<p>The gcv changes?  Well, the intent was to explicitly set the context, instead of assuming MODEL.</p>



<a name="209822328"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822328" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822328">(Sep 11 2020 at 19:08)</a>:</h4>
<p>Essentially remove the implicit assumption, and check extensions and the like against more types than just the model types.</p>



<a name="209822333"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822333" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822333">(Sep 11 2020 at 19:08)</a>:</h4>
<p>right, but a plugin could be multiple / any contexts</p>



<a name="209822459"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822459" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822459">(Sep 11 2020 at 19:09)</a>:</h4>
<p>Right.  In which case, it sets the generalized match, the gcv program will pass its inputs to the plugin regardless, and it's up to the plugin to figure it out.</p>



<a name="209822538"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822538" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822538">(Sep 11 2020 at 19:10)</a>:</h4>
<p>which then begs what are the contexts for, just complicates api and callers if most of our tools will want to allow multiple types</p>



<a name="209822612"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822612" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822612">(Sep 11 2020 at 19:11)</a>:</h4>
<p>I'm not sure they will - for example, wouldn't icv want to accept just image types?</p>



<a name="209822615"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822615" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822615">(Sep 11 2020 at 19:11)</a>:</h4>
<p>already ran into a problem with sumanga's plugin where he had to force PNG mime type because some other plugin was happily parsing it as pix data</p>



<a name="209822758"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822758" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822758">(Sep 11 2020 at 19:12)</a>:</h4>
<p>no, probably not .. same reasons it's a problem in gcv.  someone might want to import image data from a spreadsheet or some random application/vendor proprietary type</p>



<a name="209822812"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822812" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822812">(Sep 11 2020 at 19:12)</a>:</h4>
<p>That's going to place a massive input validation burden on each individual plugin though - that feels wrong.</p>



<a name="209822884"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822884" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822884">(Sep 11 2020 at 19:13)</a>:</h4>
<p>that would be wrong, I agree, and it's worse than that</p>



<a name="209822930"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822930" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822930">(Sep 11 2020 at 19:14)</a>:</h4>
<p>pix reader plugin isn't going to have any basis for denying input really</p>



<a name="209822976"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209822976" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209822976">(Sep 11 2020 at 19:14)</a>:</h4>
<p>for exampl</p>



<a name="209823254"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823254" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823254">(Sep 11 2020 at 19:15)</a>:</h4>
<p>Right. That's I think the original motivation for the contexts - there's no guarantee that file extensions are unique mappings to types, so we may need the context to disambiguate if (for example) an image extension and a geometry extension are the same.</p>



<a name="209823256"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823256" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823256">(Sep 11 2020 at 19:15)</a>:</h4>
<p>it's up to icv/gcv to somehow prioritize unless overridden based on file suffix and/or signature or some other measure .. a callback can't/shouldn't know about other formats</p>



<a name="209823384"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823384" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823384">(Sep 11 2020 at 19:16)</a>:</h4>
<p>that's a case of clear ambiguity, that's fine</p>



<a name="209823430"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823430" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823430">(Sep 11 2020 at 19:16)</a>:</h4>
<p>that has to be called out, it's fine if that case has to be explicit</p>



<a name="209823448"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823448" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823448">(Sep 11 2020 at 19:17)</a>:</h4>
<p>How do we allow the user to specify the resolution?</p>



<a name="209823578"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823578" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823578">(Sep 11 2020 at 19:18)</a>:</h4>
<p>before even getting to options, there's a question of whether the file is even getting routed to the right plugin.  maybe a scoring system?</p>



<a name="209823596"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823596" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823596">(Sep 11 2020 at 19:18)</a>:</h4>
<p>I don't quite follow about the callback - the callbacks can't really be format specific.  GDAL is currently the canonical example, but assimp will be similar.</p>



<a name="209823736"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823736" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823736">(Sep 11 2020 at 19:19)</a>:</h4>
<p>what do you mean the callbacks can't be format specific?</p>



<a name="209823754"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823754" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823754">(Sep 11 2020 at 19:19)</a>:</h4>
<p>they are plugin specific</p>



<a name="209823770"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823770" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823770">(Sep 11 2020 at 19:19)</a>:</h4>
<p>a plugin certainly could be specific to a format</p>



<a name="209823828"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823828" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823828">(Sep 11 2020 at 19:20)</a>:</h4>
<p>and their callback would be specific to that format...</p>



<a name="209823864"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823864" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823864">(Sep 11 2020 at 19:20)</a>:</h4>
<p>Right, but plugins in general aren't necessarily format specific.  Hence the "wildcard" specifier for types when hooking in a plugin</p>



<a name="209823897"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823897" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823897">(Sep 11 2020 at 19:20)</a>:</h4>
<p>(if that plugin does support multiple types - otherwise you specify the one it does support)</p>



<a name="209823962"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823962" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823962">(Sep 11 2020 at 19:21)</a>:</h4>
<p>Unless you're looking for some way for a plugin to register itself for multiple formats - that'd be a completely different architecture than what we've got now...</p>



<a name="209823965"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209823965" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209823965">(Sep 11 2020 at 19:21)</a>:</h4>
<p>sure, but that's a different statement than "can't" .. they can and are .. and they might not be, and sometimes aren't</p>



<a name="209824067"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209824067" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209824067">(Sep 11 2020 at 19:22)</a>:</h4>
<p>if they're all wildcard, then there wouldn't really be much point in typing at all and the api complexity it entail</p>



<a name="209824150"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209824150" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209824150">(Sep 11 2020 at 19:23)</a>:</h4>
<p>Sure, but the majority aren't general and if we can limit the types of data those limited ones get fed it bounds the data validation problem somewhat.</p>



<a name="209824314"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209824314" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209824314">(Sep 11 2020 at 19:24)</a>:</h4>
<p>sure but it doesn't solve the problem :)</p>



<a name="209824522"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209824522" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209824522">(Sep 11 2020 at 19:26)</a>:</h4>
<p>i mean png-to-vol is a good example.  if we marked the mime type as auto, then gdal proceeded to grab the input and crash-n-burned on it.  if marked as png, then the new plugin got to try.</p>



<a name="209824586"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209824586" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209824586">(Sep 11 2020 at 19:26)</a>:</h4>
<p>new plugin was made to use icv, so in theory it handles any icv type now, but can't set a type that gets it routed to it without it being specific</p>



<a name="209824690"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209824690" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209824690">(Sep 11 2020 at 19:27)</a>:</h4>
<p>My off-the-cuff thought there was to set a generic type and an image context - that way the plugin would get a crack at anything gcv identifies as image data.</p>



<a name="209824813"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209824813" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209824813">(Sep 11 2020 at 19:28)</a>:</h4>
<p>The png only version would get a PNG image type instead of the generic type and the image context, which means it would only be invoked for PNG image data.</p>



<a name="209824847"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209824847" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209824847">(Sep 11 2020 at 19:29)</a>:</h4>
<p>I mean in fairness, this is probably a case where there's a genuine conflict -- both gdal and an icv reader can read images</p>



<a name="209824883"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209824883" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209824883">(Sep 11 2020 at 19:29)</a>:</h4>
<p>so needs someway to force which and/or fallback to another when the one chose fails and there were alternatives</p>



<a name="209824983"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209824983" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209824983">(Sep 11 2020 at 19:30)</a>:</h4>
<p>/me nods - I don't think we've worked out that part of the command option set yet - this may be the first case that's popped up that actually results in it tripping on the issue.</p>



<a name="209824985"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209824985" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209824985">(Sep 11 2020 at 19:30)</a>:</h4>
<p>in this case, we didn't actually want a png-only version -- want it to be any icv format</p>



<a name="209825172"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209825172" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209825172">(Sep 11 2020 at 19:32)</a>:</h4>
<p>Right, but that's an interesting point.  If we did have a PNG specific version and the generic icv version both present, it would be a reasonable inference that the format specific one is in there because it could do a better job on that specific format than the generic alternative.  (Otherwise, why have both in the first place?)</p>
<p>That breaks down when we get to more complex things like geometry where it's too complex to guarantee one of anything is better than another, of course, but the inference will likely still be drawn.</p>



<a name="209825533"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209825533" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209825533">(Sep 11 2020 at 19:35)</a>:</h4>
<p>I don't really  have any good answers - the existing gcv app was implemented with the mindset of replacing all of the <em>-g and g-</em> tools (which didn't impose any of the multiple plugin issues of the more general solution.)  So it's probably got quite a few limitations of that sort...</p>



<a name="209825536"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209825536" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209825536">(Sep 11 2020 at 19:35)</a>:</h4>
<p>yeah, I don't think we want to build assumptions like that into the system.  we either need to find a way to let plugins encode/grade/characterize themselves or let it get resolved explicitly by the caller</p>



<a name="209825627"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209825627" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209825627">(Sep 11 2020 at 19:36)</a>:</h4>
<p>just because one plugin reads multiple formats (e.g., assimp) and another one format (e.g., stl) doesn't mean either is better at it and likely isn't the case</p>



<a name="209825714"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209825714" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209825714">(Sep 11 2020 at 19:37)</a>:</h4>
<p>I know, but a naive user looking for solutions will see they have an stl file, see "stl" in the listed plugins, and almost certainly jump to that one.  If we're lucky, they may think to look for other options if that one fails, but even money they won't.</p>



<a name="209825720"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209825720" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209825720">(Sep 11 2020 at 19:37)</a>:</h4>
<p>if it were the same author, then I could see the case for inferring "png" plugin trumps "*"plugin when presented with a png file, but that's not an assumption we can make</p>



<a name="209825803"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209825803" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209825803">(Sep 11 2020 at 19:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/209825714">said</a>:</p>
<blockquote>
<p>I know, but a naive user looking for solutions will see they have an stl file, see "stl" in the listed plugins, and almost certainly jump to that one.  If we're lucky, they may think to look for other options if that one fails, but even money they won't.</p>
</blockquote>
<p>sure and that behavior doesn't present a problem... let them explore</p>



<a name="209825827"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209825827" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209825827">(Sep 11 2020 at 19:38)</a>:</h4>
<p>they can infer and assume whatever they like</p>



<a name="209825847"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209825847" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209825847">(Sep 11 2020 at 19:38)</a>:</h4>
<p>it's whether the code is inferring and assuming anything that we have control over</p>



<a name="209826019"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826019" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826019">(Sep 11 2020 at 19:40)</a>:</h4>
<p>I'm suggesting the code should not, for example, "prefer" sending a .png file to a particular plugin because it's name has 'png' in it or it's type was set to 'image/png" whereas the icv and gdal and other plugins declared multiple image support</p>



<a name="209826096"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826096" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826096">(Sep 11 2020 at 19:41)</a>:</h4>
<p>But it will need to prefer something, unless we want to scatter-gun multiple conversion attempts in parallel automatically and try to detect the "best" result somehow...</p>



<a name="209826130"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826130" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826130">(Sep 11 2020 at 19:41)</a>:</h4>
<p>i.e., specific type shouldn't intrinsically trump a wildcard type; wildcard should just be like a globbed expansion of types (and maybe we need to make it be something like that)</p>



<a name="209826189"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826189" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826189">(Sep 11 2020 at 19:42)</a>:</h4>
<p>We can establish a plugin ranking for plugins we are providing, but if users start hooking in their own 3rd party plugins how will that interact?</p>



<a name="209826201"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826201" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826201">(Sep 11 2020 at 19:42)</a>:</h4>
<p>it could need to pick something, but not necessarily "prefer"</p>



<a name="209826275"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826275" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826275">(Sep 11 2020 at 19:42)</a>:</h4>
<p>Oh, blast it:</p>
<div class="codehilite"><pre><span></span><code>Files present after distclean in /home/user/RELEASE-build/distcheck-autodetect_release/build:
bench/NUL
</code></pre></div>



<a name="209826279"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826279" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826279">(Sep 11 2020 at 19:43)</a>:</h4>
<p>yeah, I don't see how ranking would work (and not b totally gameable)</p>



<a name="209826334"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826334" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826334">(Sep 11 2020 at 19:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112516">starseeker</span> <a href="#narrow/stream/104062-general/topic/Recent.20Compilation.20Errors/near/209826275">said</a>:</p>
<blockquote>
<p>Oh, blast it:</p>
<div class="codehilite"><pre><span></span><code>Files present after distclean in /home/user/RELEASE-build/distcheck-autodetect_release/build:
bench/NUL
</code></pre></div>


</blockquote>
<p>that's certainly from earlier testing.</p>



<a name="209826338"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826338" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826338">(Sep 11 2020 at 19:43)</a>:</h4>
<p>/me double checks to make sure he's got the test -e update from trunk</p>



<a name="209826468"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826468" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826468">(Sep 11 2020 at 19:44)</a>:</h4>
<p>I don't get a NUL any more</p>



<a name="209826496"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826496" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826496">(Sep 11 2020 at 19:44)</a>:</h4>
<p>Doesn't look like it - let me make absolutely sure and start clean again...</p>



<a name="209826534"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826534" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826534">(Sep 11 2020 at 19:45)</a>:</h4>
<p>kind of funny that it seemed to work writing out a NUL file.. it almost certainly wasn't fully behaving and just appeared to work</p>



<a name="209826605"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826605" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826605">(Sep 11 2020 at 19:45)</a>:</h4>
<p>make sure you don't still have a customized installed script</p>



<a name="209826657"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826657" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826657">(Sep 11 2020 at 19:46)</a>:</h4>
<p>with debug printings and such</p>



<a name="209826760"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826760" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826760">(Sep 11 2020 at 19:46)</a>:</h4>
<p>/me nods - clean SVN release branch, updated, with the trunk fix pulled in.</p>



<a name="209826806"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209826806" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209826806">(Sep 11 2020 at 19:47)</a>:</h4>
<p>it all makes sense now.  I got my flags mixed up forgetting that /dev/null is a file in the eyes of the filesystem, but not in the eyes of the test command where it only distinguishes "regular" files</p>



<a name="209827044"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209827044" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209827044">(Sep 11 2020 at 19:49)</a>:</h4>
<p>note, test -f /dev/null did not return 0 for you.  looking back, your snippet printed the return code of running the 'echo' command. ;-)</p>



<a name="209827072"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209827072" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209827072">(Sep 11 2020 at 19:49)</a>:</h4>
<p>OK, works in a clean toplevel test... kicking off distcheck-full again</p>



<a name="209827076"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209827076" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209827076">(Sep 11 2020 at 19:49)</a>:</h4>
<p>it returns 1</p>



<a name="209827221"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209827221" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209827221">(Sep 11 2020 at 19:50)</a>:</h4>
<p>Ah.  Figures.   I still can't believe I'm enabling you to keep shell around by making it work on Windows... ;-)</p>



<a name="209827250"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209827250" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209827250">(Sep 11 2020 at 19:51)</a>:</h4>
<p>It's even worse than regex expressions</p>



<a name="209827409"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209827409" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209827409">(Sep 11 2020 at 19:52)</a>:</h4>
<p>OpenBSD behaved itself, by the way.</p>



<a name="209827510"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209827510" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209827510">(Sep 11 2020 at 19:53)</a>:</h4>
<p>I'd still love to create a proper geometry shell, gash or whatever for navigating a geometry filesystem using libged commands and shell intrinsics</p>



<a name="209827568"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209827568" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209827568">(Sep 11 2020 at 19:53)</a>:</h4>
<p>then we could have some seriously (more) powerful scripting constructs for creating and manipulating geometry</p>



<a name="209827890"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209827890" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209827890">(Sep 11 2020 at 19:56)</a>:</h4>
<p>we're so close</p>



<a name="209827968"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209827968" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209827968">(Sep 11 2020 at 19:57)</a>:</h4>
<p>gsh is a start - still just a raw argc/argv interface right now, and I'm not happy with the subprocess callback, but it's heading in that direction.</p>



<a name="209828163"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209828163" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209828163">(Sep 11 2020 at 19:59)</a>:</h4>
<p>gsh is cool, but that's completely on the other end of the spectrum.</p>



<a name="209828167"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209828167" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209828167">(Sep 11 2020 at 19:59)</a>:</h4>
<p>Oh, just so I know where to look - are you planning to update the NEWS file in trunk, or RELEASE?</p>



<a name="209828257"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209828257" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209828257">(Sep 11 2020 at 20:00)</a>:</h4>
<p>i'm talking about taking something like zsh or bash and replacing all the libc I/O calls with libg I/O calls</p>



<a name="209828320"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209828320" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209828320">(Sep 11 2020 at 20:01)</a>:</h4>
<p>Ah - you mean a <em>complete</em> port of the shell environment, not just some shell interaction constructs on top of the argc/argv calls</p>



<a name="209828458"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209828458" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209828458">(Sep 11 2020 at 20:02)</a>:</h4>
<p>having a full "geometry shell" environment including notion of current working dir, most of the built-in commands like cd, pwd, ls, stat, etc, plus command-line editing, command history, key bindings, terminal interfacing, etc</p>



<a name="209828477"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209828477" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209828477">(Sep 11 2020 at 20:02)</a>:</h4>
<p>right, full deal</p>



<a name="209828492"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209828492" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209828492">(Sep 11 2020 at 20:02)</a>:</h4>
<p>we're literally less than a gsoc-project away from that being realizable</p>



<a name="209828556"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209828556" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209828556">(Sep 11 2020 at 20:03)</a>:</h4>
<p>that's why I started putting in the libbu/librt dir.h API as that's the foundation of the shell</p>



<a name="209828787"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209828787" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209828787">(Sep 11 2020 at 20:05)</a>:</h4>
<p>I considered for a while how we could actually use shells unmodified, but that would require some pretty heavy FUSE integration work.  when I last looked, it felt like creating a full FUSE filesystem driver was going to be quite a bit more work than porting and customizing a shell.</p>



<a name="209828827"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209828827" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209828827">(Sep 11 2020 at 20:05)</a>:</h4>
<p>plus there are some legacy shell constructs we probably don't want to keep</p>



<a name="209829223"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209829223" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209829223">(Sep 11 2020 at 20:09)</a>:</h4>
<p>/me nods.  How would terminal interaction work with Windows though?  Only native sh port I'm familiar with other than the Git thing is the Windows zsh port from about 10 years ago... zsh-nt or some such.</p>



<a name="209829367"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209829367" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209829367">(Sep 11 2020 at 20:11)</a>:</h4>
<p>terminal is a separate issue from the shell.  can display a shell in any text environment, even dumb ones like a Qt text widget (just a lot won't display and behave right)</p>



<a name="209829422"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209829422" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209829422">(Sep 11 2020 at 20:12)</a>:</h4>
<p>terminal would likely be something like what git-bash is using (i.e., a customized msys)</p>



<a name="209829755"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209829755" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209829755">(Sep 11 2020 at 20:15)</a>:</h4>
<p>Phew!  There we go - one of the distcheck tests passed clean.  Must have had a stale file somewhere in the old build.</p>



<a name="209840596"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209840596" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209840596">(Sep 11 2020 at 22:02)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> distcheck full succeeded</p>



<a name="209864360"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209864360" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209864360">(Sep 12 2020 at 04:43)</a>:</h4>
<p>(Initial success was on Ubuntu - also checking CentOS and GhostBSD)</p>



<a name="209892640"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209892640" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209892640">(Sep 12 2020 at 17:59)</a>:</h4>
<p>distcheck-full passed on GhostBSD except for what looks like another manifestation of the BSD threading issue.</p>



<a name="209903449"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/209903449" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#209903449">(Sep 12 2020 at 22:55)</a>:</h4>
<p>CentOS 8 distcheck-full passed.</p>



<a name="210934159"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210934159" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210934159">(Sep 22 2020 at 21:35)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> you are off by one throughout r 77191 .. strl*() all take the size of the allocated buffer.  they ensure the last byte is nul so you don't want to drop the +1 that was added for nul.</p>



<a name="210953065"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210953065" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210953065">(Sep 23 2020 at 02:18)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> - did I follow correctly?  (r77193)</p>



<a name="210953076"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210953076" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210953076">(Sep 23 2020 at 02:18)</a>:</h4>
<p>nope, wrong way</p>



<a name="210953078"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210953078" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210953078">(Sep 23 2020 at 02:18)</a>:</h4>
<p>now off by 2</p>



<a name="210953080"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210953080" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210953080">(Sep 23 2020 at 02:18)</a>:</h4>
<p>it's the size of the allocation</p>



<a name="210953082"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210953082" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210953082">(Sep 23 2020 at 02:18)</a>:</h4>
<p>that's what strl wants</p>



<a name="210953087"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210953087" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210953087">(Sep 23 2020 at 02:19)</a>:</h4>
<p>so find the buffer if it's static or the malloc/calloc size if it's dynamic</p>



<a name="210953096"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210953096" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210953096">(Sep 23 2020 at 02:19)</a>:</h4>
<p>that's the size to put... they made it simple</p>



<a name="210954132"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210954132" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210954132">(Sep 23 2020 at 02:42)</a>:</h4>
<p>so it's:</p>
<p>char str[COUNT];<br>
func(..., str, COUNT);</p>
<p>You're saying inside func, it would be bu_strlcat(str, in_str, COUNT+1) to correctly copy in_str into str?</p>



<a name="210954144"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210954144" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210954144">(Sep 23 2020 at 02:42)</a>:</h4>
<p>heh, no...</p>



<a name="210954157"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210954157" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210954157">(Sep 23 2020 at 02:43)</a>:</h4>
<p>str[COUNT] ... strlcat(str, str2, COUNT)</p>



<a name="210954175"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210954175" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210954175">(Sep 23 2020 at 02:43)</a>:</h4>
<p>But... isn't that what I had in 77191?</p>



<a name="210954231"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210954231" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210954231">(Sep 23 2020 at 02:44)</a>:</h4>
<p>I saw str = malloc(cnt+1, ...) ... strlcat(str, .., cnt)</p>



<a name="210954260"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210954260" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210954260">(Sep 23 2020 at 02:45)</a>:</h4>
<p>They may  have both...</p>



<a name="210954344"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210954344" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210954344">(Sep 23 2020 at 02:46)</a>:</h4>
<p>So looking at get_style_tag_for_cell...</p>



<a name="210954392"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210954392" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210954392">(Sep 23 2020 at 02:47)</a>:</h4>
<p>fort.c:2397 it looks like it's getting cell_style_tag, which is TEXT_STYLE_TAG_MAX_SIZE</p>



<a name="210954595"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210954595" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210954595">(Sep 23 2020 at 02:51)</a>:</h4>
<p>There was F_MALLOC((sz + 1) that was in the logic that got all up replaced with a call to bu_strdup in 77191....</p>



<a name="210954758"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210954758" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210954758">(Sep 23 2020 at 02:54)</a>:</h4>
<p>yeah, that's probably the sz+1 I saw replaced with a strlcat sz, but then the definition of sz changed too</p>



<a name="210954860"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210954860" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210954860">(Sep 23 2020 at 02:57)</a>:</h4>
<p>As far as I can tell, it's these 4 functions that are calling the strl logic:</p>
<p>get_style_tag_for_cell<br>
get_reset_style_tag_for_cell<br>
get_style_tag_for_content<br>
get_reset_style_tag_for_content</p>



<a name="210954924"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210954924" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210954924">(Sep 23 2020 at 02:59)</a>:</h4>
<p>They're all, as far as I can tell, writing into static buffers defined with constants passed to sz.  The only more complex case is line 4469.</p>



<a name="210954938"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210954938" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210954938">(Sep 23 2020 at 02:59)</a>:</h4>
<p>And I think that's right?</p>



<a name="210955027"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210955027" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210955027">(Sep 23 2020 at 03:01)</a>:</h4>
<p>(I reverted 77193, btw)</p>



<a name="210955099"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210955099" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210955099">(Sep 23 2020 at 03:02)</a>:</h4>
<p>4469 looks right</p>



<a name="210955111"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210955111" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210955111">(Sep 23 2020 at 03:02)</a>:</h4>
<p>yeah, I should have read the file instead of the patch, greater context</p>



<a name="210955304"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210955304" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210955304">(Sep 23 2020 at 03:06)</a>:</h4>
<p>Wonder if they'd take a strlcat patch upstream?  As far as I know strlcpy is still non-standard...</p>



<a name="210955328"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210955328" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210955328">(Sep 23 2020 at 03:06)</a>:</h4>
<p>Although we might be able to use strncpy there, actually...</p>



<a name="210956015"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210956015" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210956015">(Sep 23 2020 at 03:23)</a>:</h4>
<p>can always use strn .. it's just much more error prone, especially when cat'ing into existing buffers like the 4469 case where it's appending</p>



<a name="210956077"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210956077" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210956077">(Sep 23 2020 at 03:25)</a>:</h4>
<p>Did glibc ever add strlcpy?  I know they were adamantly opposed to it for a long time...</p>



<a name="210956228"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210956228" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210956228">(Sep 23 2020 at 03:29)</a>:</h4>
<p>Oh well, no biggie - easy to adjust for regress once the pattern is clear.</p>



<a name="210956241"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210956241" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210956241">(Sep 23 2020 at 03:29)</a>:</h4>
<p>Now just need  to make sure it works on Windows...</p>



<a name="210956422"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210956422" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210956422">(Sep 23 2020 at 03:33)</a>:</h4>
<p>Ah, there we go.</p>



<a name="210956499"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210956499" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210956499">(Sep 23 2020 at 03:35)</a>:</h4>
<p><a href="https://sourceware.org/glibc/wiki/strlcpy">https://sourceware.org/glibc/wiki/strlcpy</a></p>



<a name="210956508"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210956508" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210956508">(Sep 23 2020 at 03:36)</a>:</h4>
<p>sigh.  figures</p>



<a name="210956547"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210956547" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210956547">(Sep 23 2020 at 03:36)</a>:</h4>
<p>looks like there was a second patch 6 years ago that's getting better reception but still not integrated / released</p>



<a name="210956549"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210956549" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210956549">(Sep 23 2020 at 03:36)</a>:</h4>
<p>bu_strlcpy it is</p>



<a name="210956566"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/210956566" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#210956566">(Sep 23 2020 at 03:36)</a>:</h4>
<p>I see MSVCRT isn't on board either</p>



<a name="214079427"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/214079427" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#214079427">(Oct 21 2020 at 16:47)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span> seeing a weird ged plugin issue.  the bigdb gtools test is failing on mac.  It works when called directly in the build dir (e.g., src/gtools/tests/bigdb 1), but fails when run via ctest with:</p>
<div class="codehilite"><pre><span></span><code>    Start 874: slow-bigdb_1gb

874: Test command: /Users/morrison/brlcad.trunk/.build/src/gtools/tests/bigdb &quot;1&quot;
874: Test timeout computed to be: 1500
874: bigdb_tops=&quot;unknown command: tops&quot;
874: bigdb_idlen=43
874: bigdb_szlen=1073741825
874: bigdb_lenmatch=0
874: bigdb_strmatch=0
1/1 Test #874: slow-bigdb_1gb ...................***Failed    8.97 sec
</code></pre></div>



<a name="214079562"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/214079562" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#214079562">(Oct 21 2020 at 16:48)</a>:</h4>
<p>I can only imagine this has something to do with the plugin system, but don't have time to debug it at the moment.</p>



<a name="214079986"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/214079986" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#214079986">(Oct 21 2020 at 16:51)</a>:</h4>
<p>all the rtwiz tests have also been out for a while with tclcad init failures, assumed you know about those but maybe not?  they report "can't find package cadwidgets::RtImage"<br>
just fyi, haven't tried a rebuild today if you made a recent change as I'm in the middle of debugging session.</p>



<a name="214121689"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/214121689" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#214121689">(Oct 21 2020 at 22:13)</a>:</h4>
<p>I think r77523 will take care of the bigdb error.  Wasn't aware of rtwiz failures - they're not part of the standard tests because they can't be safely run in parallel.  I'll see if I can run it to ground.</p>



<a name="214127032"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/214127032" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#214127032">(Oct 21 2020 at 23:22)</a>:</h4>
<p>How are you launching the rtwizard tests?  ninja regress-rtwizard just succeeded on Linux...</p>



<a name="214127610"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/214127610" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#214127610">(Oct 21 2020 at 23:32)</a>:</h4>
<p>Ah, fails on BSD</p>



<a name="214127640"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/214127640" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#214127640">(Oct 21 2020 at 23:32)</a>:</h4>
<p>OK...</p>



<a name="214128523"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/214128523" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#214128523">(Oct 21 2020 at 23:45)</a>:</h4>
<p>Oh - it's a bundled vs system tcl issue, I'll bet...</p>



<a name="214128948"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/214128948" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#214128948">(Oct 21 2020 at 23:52)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span>  I think r77525 should have it.</p>



<a name="214129002"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/214129002" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#214129002">(Oct 21 2020 at 23:52)</a>:</h4>
<p>just got a successful regress-rtwizard on bz</p>



<a name="217719734"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/217719734" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#217719734">(Nov 24 2020 at 06:55)</a>:</h4>
<p><span class="user-mention" data-user-id="112516">@starseeker</span>  I don't know how long it's been an issue, but I'm seeing a pretty big behavior change on trunk with rt blocking until the framebuffer window is closed.  This is on a default build on Mac, affecting both classic and non-classic runtime.</p>
<p>Anyone else seeing similar?  (just run "rt" in windows on some geometry)</p>



<a name="217764547"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/217764547" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#217764547">(Nov 24 2020 at 14:58)</a>:</h4>
<p>You mean launching rt from within MGED?  Not seeing that on Linux...</p>



<a name="217764874"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/217764874" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#217764874">(Nov 24 2020 at 15:00)</a>:</h4>
<p>Yes, it's blocking for some reason.</p>



<a name="217764907"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/217764907" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#217764907">(Nov 24 2020 at 15:00)</a>:</h4>
<p>Might be the r77436-77454 libtclcad changes to fix an issue with Windows.</p>



<a name="220319827"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220319827" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220319827">(Dec 17 2020 at 23:53)</a>:</h4>
<p>I finally got a test Mac graphical setup.  Can confirm the MGED prompt ignoring input while rt is processing, although it seems to be a bit more subtle than just the framebuffer being up - if I wait long enough, it will resume taking input with the fb lingering.</p>
<p>It's almost as if rt and MGED are sharing channels.  Definitely something to do with the rt callback handler rework</p>



<a name="220319977"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220319977" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220319977">(Dec 17 2020 at 23:54)</a>:</h4>
<p>Very surprised this is unique to the Mac... wonder what's different?</p>



<a name="220321107"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220321107" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220321107">(Dec 18 2020 at 00:07)</a>:</h4>
<p>the bad news is right at this second I have absolutely no idea how to fix it...</p>



<a name="220322603"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220322603" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220322603">(Dec 18 2020 at 00:26)</a>:</h4>
<p>r77435 isn't any better, so it's an older issue than those changes...</p>



<a name="220323727"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220323727" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220323727">(Dec 18 2020 at 00:41)</a>:</h4>
<p>r77073 has the same problem...</p>



<a name="220326267"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220326267" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220326267">(Dec 18 2020 at 01:18)</a>:</h4>
<p>r76199 works</p>



<a name="220327075"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220327075" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220327075">(Dec 18 2020 at 01:29)</a>:</h4>
<p>r76226 works</p>



<a name="220327626"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220327626" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220327626">(Dec 18 2020 at 01:38)</a>:</h4>
<p>r76621 works</p>



<a name="220328130"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220328130" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220328130">(Dec 18 2020 at 01:46)</a>:</h4>
<p>r76654 works</p>



<a name="220328819"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220328819" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220328819">(Dec 18 2020 at 01:57)</a>:</h4>
<p>r76670 works</p>



<a name="220329302"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220329302" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220329302">(Dec 18 2020 at 02:05)</a>:</h4>
<p>r76903 does not work</p>



<a name="220329620"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220329620" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220329620">(Dec 18 2020 at 02:11)</a>:</h4>
<p>r76800 works</p>



<a name="220332349"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220332349" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220332349">(Dec 18 2020 at 03:02)</a>:</h4>
<p>r76850 does not work</p>



<a name="220332643"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220332643" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220332643">(Dec 18 2020 at 03:08)</a>:</h4>
<p>r76825 does not work</p>



<a name="220333348"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220333348" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220333348">(Dec 18 2020 at 03:25)</a>:</h4>
<p>r76824 is the one that broke the GUI MGED interactivity</p>



<a name="220336306"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220336306" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220336306">(Dec 18 2020 at 04:41)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> Can you see if r77998 fixes your issue on the Mac?</p>



<a name="220336746"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220336746" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220336746">(Dec 18 2020 at 04:52)</a>:</h4>
<p>Sure, will do</p>



<a name="220340113"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220340113" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220340113">(Dec 18 2020 at 06:09)</a>:</h4>
<p>Confirmed, appears to fix the issue.</p>



<a name="220340116"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220340116" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220340116">(Dec 18 2020 at 06:09)</a>:</h4>
<p>nice work</p>



<a name="220340447"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220340447" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220340447">(Dec 18 2020 at 06:18)</a>:</h4>
<p>so what was the problem?</p>



<a name="220370905"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220370905" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220370905">(Dec 18 2020 at 13:22)</a>:</h4>
<p>I set up a handler on STDOUT, trying to fix a crash on Windows.  It avoided the crash on Windows, but it was the wrong way to do it.  It looks in the end like a copy-paste error setting up the original logic meant I was deleting a structure before stderr was actually clear (checked stdout twice instead of stdout+stderr), which (surprise) messed up the application.  A stdout handler avoided the crash all right, but messed with a channel the callbacks shouldn't have been hooked up to.</p>



<a name="220370968"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220370968" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220370968">(Dec 18 2020 at 13:22)</a>:</h4>
<p>It might explain a bit of quirky I/O behavior that's been reported on Windows too, although it's hard to know that for sure.</p>



<a name="220371049"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220371049" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220371049">(Dec 18 2020 at 13:23)</a>:</h4>
<p>In retrospect I'm surprised it only showed in the Mac GUI configuration.  Tcl/Tk has a rather irritating habit of "almost" working and masking problems, sometimes...</p>



<a name="220371239"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220371239" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220371239">(Dec 18 2020 at 13:25)</a>:</h4>
<p>I'll have to double check everything is working now across all platforms, but if that's got it the last significant blocker I know of now is the gqa plot file problem.  That was a user report, so I'll need to run it down before releasing.</p>



<a name="220371448"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220371448" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220371448">(Dec 18 2020 at 13:27)</a>:</h4>
<p><span class="user-mention" data-user-id="102902">@Sean</span> I shifted a fair number of things down in the "do before release" queue - let me know if any of the ones I moved are "need to haves".</p>



<a name="220409085"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220409085" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220409085">(Dec 18 2020 at 18:14)</a>:</h4>
<p>Okay will do.</p>



<a name="220409178"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220409178" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220409178">(Dec 18 2020 at 18:15)</a>:</h4>
<p>The only concerning thing I've noticed is that I encountered mged command line corruption again recently.  I need to fully rebuild clean to confirm as it's tricky to reproduce, but it's the same behavior we had a year ago when there was a bug in static initialization.</p>



<a name="220409324"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220409324" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220409324">(Dec 18 2020 at 18:17)</a>:</h4>
<p>Becomes apparent when jumping around the mged command line in console mode, cutting to end of line, pasting, navigating with error keys, up arrow.  Resulted in unpredictable but obvious command line corruption.</p>



<a name="220409396"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220409396" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220409396">(Dec 18 2020 at 18:17)</a>:</h4>
<p>Hmm.  Not ringing a bell - it was caused by static initialization error?</p>



<a name="220409850"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220409850" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220409850">(Dec 18 2020 at 18:21)</a>:</h4>
<p>Yes, fortunately/unfortunately the bug was found before release and never made public, but that means there's no NEWS breadcrumb on what the exact cause was not that it matters here.  I seem to recall the prior being bu init related and I don't think that code has changed.  It's probably just some other corruption.</p>



<a name="220409935"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/220409935" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#220409935">(Dec 18 2020 at 18:22)</a>:</h4>
<p>But like I said, I need to confirm with a clean build before throwing up red flags.  Just a yellow caution for now.  :)</p>



<a name="226465903"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/226465903" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeffrey Liu <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#226465903">(Feb 16 2021 at 02:58)</a>:</h4>
<p>Was having some errors compiling <code>libbu</code> because there was an unresolved external symbol <code>BU_SEM_DATETIME</code>. Seems like in <code>bu_init.cpp</code>, there is <code>extern "C" int  BU_SEM_DATETIME</code> , but <code>BU_SEM_DATETIME</code> is  defined in <code>datetime.cpp</code> which is a C++ file. Removing the "C" part fixed the error for me.</p>



<a name="226466247"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/226466247" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeffrey Liu <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#226466247">(Feb 16 2021 at 03:05)</a>:</h4>
<p>^ would changing something like this cause issues outside of Windows?</p>



<a name="226467506"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/226467506" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#226467506">(Feb 16 2021 at 03:34)</a>:</h4>
<p>Possibly - what if we do r78245 instead?  Does that work?</p>



<a name="226467698"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/Recent%20Compilation%20Errors/near/226467698" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeffrey Liu <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/Recent.20Compilation.20Errors.html#226467698">(Feb 16 2021 at 03:38)</a>:</h4>
<p>I'm still compiling r78244 right now, but I'll let you know.</p>



<hr><p>Last updated: Jan 16 2026 at 01:00 UTC</p>
</html>