<html>
<head><meta charset="utf-8"><title>grazing plate mode bots · brlcad · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/index.html">brlcad</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html">grazing plate mode bots</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="197614810"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197614810" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197614810">(May 14 2020 at 20:40)</a>:</h4>
<p>So the grazing plate mode BoT case that was reported is the very same case.  ray is grazing a plate-mode bot and returning an LOS thickness way longer than physically possible, which results in an overlap with nearby objects that don't actually overlap.</p>



<a name="197615162"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197615162" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197615162">(May 14 2020 at 20:42)</a>:</h4>
<p>Ah, lovely</p>



<a name="197615213"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197615213" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197615213">(May 14 2020 at 20:43)</a>:</h4>
<p><a href="/user_uploads/1549/LPbMabaAduaDbSPI8787N_iW/Screen-Shot-2020-05-14-at-4.42.33-PM.png">Screen-Shot-2020-05-14-at-4.42.33-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/1549/LPbMabaAduaDbSPI8787N_iW/Screen-Shot-2020-05-14-at-4.42.33-PM.png" title="Screen-Shot-2020-05-14-at-4.42.33-PM.png"><img src="/user_uploads/1549/LPbMabaAduaDbSPI8787N_iW/Screen-Shot-2020-05-14-at-4.42.33-PM.png"></a></div>



<a name="197615265"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197615265" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197615265">(May 14 2020 at 20:43)</a>:</h4>
<p>Yep, sure enough.</p>



<a name="197615274"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197615274" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197615274">(May 14 2020 at 20:43)</a>:</h4>
<p>rays come in from left to right -- they graze the faces on the left, which are nearly horizontal</p>



<a name="197615380"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197615380" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197615380">(May 14 2020 at 20:44)</a>:</h4>
<p>you can see one of the resulting LOS thicknesses, the actual hit point is near the cluster on the left, but it extends all the way forward through the tubes.</p>



<a name="197615429"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197615429" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197615429">(May 14 2020 at 20:44)</a>:</h4>
<p>and/or tubes are extending backwards</p>



<a name="197615450"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197615450" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197615450">(May 14 2020 at 20:45)</a>:</h4>
<p>as they also have grazing hits</p>



<a name="197615492"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197615492" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197615492">(May 14 2020 at 20:45)</a>:</h4>
<p>this is actually a really nicely isolated generic case for figuring out how to fix this</p>



<a name="197615500"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197615500" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197615500">(May 14 2020 at 20:45)</a>:</h4>
<p>So we're back to either clamping a maximum length, implementing some sort of crazy robust (and slow) special calculation for those near-tangent cases, or...?</p>



<a name="197616140"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197616140" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197616140">(May 14 2020 at 20:50)</a>:</h4>
<p>clamping will help avoid egregious cases like this, but will still be wrong</p>



<a name="197616167"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197616167" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197616167">(May 14 2020 at 20:50)</a>:</h4>
<p>just not as long-wrong</p>



<a name="197616257"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197616257" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197616257">(May 14 2020 at 20:51)</a>:</h4>
<p>there's a catchy motto in there somewhere... "BRL-CAD - not long-wrong!"</p>



<a name="197616262"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197616262" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197616262">(May 14 2020 at 20:51)</a>:</h4>
<p>it's potentially wrong even for nearly orthogonal hits</p>



<a name="197616794"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197616794" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197616794">(May 14 2020 at 20:55)</a>:</h4>
<p>So... fall back on something like <a href="https://bellard.org/libbf/">https://bellard.org/libbf/</a> for near tangent inputs?</p>



<a name="197628664"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197628664" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197628664">(May 14 2020 at 22:55)</a>:</h4>
<p>this is an algorithmic problem, not a numerics or precision problem.  How would libbf help?</p>



<a name="197629246"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197629246" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197629246">(May 14 2020 at 23:01)</a>:</h4>
<p>I was thinking if the trig calculations were breaking down numerically in the near tangent cases, we could fall back on more robust but slower solvers in that situation.</p>



<a name="197629392"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197629392" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197629392">(May 14 2020 at 23:03)</a>:</h4>
<p>just a thought - I may not have fully understood the underlying math issues</p>



<a name="197629460"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197629460" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197629460">(May 14 2020 at 23:03)</a>:</h4>
<p>they "break down" in the sense that it causes big numbers, but they're not wrong</p>



<a name="197629556"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197629556" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197629556">(May 14 2020 at 23:04)</a>:</h4>
<p>it's literally the projection to where the ray intersects the plane of the plate-mode-extruded surface</p>



<a name="197629598"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197629598" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197629598">(May 14 2020 at 23:05)</a>:</h4>
<p>I drew a diagram of it last week, if you recall it</p>



<a name="197629943"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197629943" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197629943">(May 14 2020 at 23:09)</a>:</h4>
<p>we can calculate the face plane and trim the segment deterministically at the plate's extruded distance.  that gives exact and correct in/out segments.</p>
<p>the problem is more one of coordination.</p>



<a name="197633221"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104062-brlcad/topic/grazing%20plate%20mode%20bots/near/197633221" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> starseeker <a href="https://brl-cad.github.io/zulip_archive/stream/104062-brlcad/topic/grazing.20plate.20mode.20bots.html#197633221">(May 14 2020 at 23:53)</a>:</h4>
<p>Ah, right.</p>



<hr><p>Last updated: Mar 27 2025 at 00:50 UTC</p>
</html>