<html>
<head><meta charset="utf-8"><title>submodels · Google Code-in · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/index.html">Google Code-in</a></h2>
<h3>Topic: <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html">submodels</a></h3>

<hr>

<base href="https://brlcad.zulipchat.com">

<head><link href="https://brl-cad.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="119597651"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119597651" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119597651">(Dec 11 2017 at 04:28)</a>:</h4>
<p>How can I create a submodel? I have tried <code>in &lt;name&gt; submodel</code> but I'm not sure what is a space partitioning method and treetop that is later requested.</p>



<a name="119601260"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119601260" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119601260">(Dec 11 2017 at 06:40)</a>:</h4>
<p><span class="user-mention" data-user-email="jeffsy00@gmail.com" data-user-id="104481">@Jeff Sieu</span> a "treetop" is just poorly worded -- it refers to an object that you want to reference.  space partitioning method shouldn't matter...</p>



<a name="119601421"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119601421" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119601421">(Dec 11 2017 at 06:45)</a>:</h4>
<p>I've tried <code>in bishop.g submodel bishop.r / bishop.g</code> while having <code>chessscene.g</code> opened. I have <code>chessscene.g</code> and <code>bishop.g</code> in the same folder. But it gave me <code>Cannot open geometry database file (bishop.g) to store plot
bishop.g: plot failure
_db_walk_subtree() FAIL on '/bishop.g'</code></p>



<a name="119616515"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119616515" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119616515">(Dec 11 2017 at 14:00)</a>:</h4>
<p>so, what is the correct way to use the submodel command?</p>



<a name="119618755"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119618755" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119618755">(Dec 11 2017 at 14:25)</a>:</h4>
<p>Ok, turns out that the path that this command takes it in is not relative to the .g file that is currently open. I've only got it to work when I input the absolute path of the .g I want to import the model from.</p>



<a name="119618877"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119618877" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mitesh <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119618877">(Dec 11 2017 at 14:28)</a>:</h4>
<p>Are you talking about the task i am working on i.e appleseed#2?</p>



<a name="119618978"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119618978" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119618978">(Dec 11 2017 at 14:30)</a>:</h4>
<p>No, I'm talking about the command <code>in &lt;name&gt; submodel</code> in MGED.</p>



<a name="119618985"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119618985" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mitesh <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119618985">(Dec 11 2017 at 14:30)</a>:</h4>
<p>okk sorry to interupt</p>



<a name="119618991"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119618991" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119618991">(Dec 11 2017 at 14:31)</a>:</h4>
<p>Also trying to do that task, but I get some weird error 0xc0000007b when I run it.</p>



<a name="119622642"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119622642" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119622642">(Dec 11 2017 at 15:52)</a>:</h4>
<p>Is there a way to translate submodels? Using Primitive Selection does not seem to work.</p>



<a name="119624894"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119624894" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119624894">(Dec 11 2017 at 16:51)</a>:</h4>
<p>Update on the path thing: relative path <em>sort of</em> works but the console is cd-ed into the BRL-CAD installation folder instead of the folder containing the opened database, so anything relative has to be placed inside the installation folder, which is quite weird</p>



<a name="119625508"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119625508" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119625508">(Dec 11 2017 at 17:06)</a>:</h4>
<p>yes, it's simply relative to the current working directory, which isn't right</p>



<a name="119625519"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119625519" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119625519">(Dec 11 2017 at 17:06)</a>:</h4>
<p>that directory can be changed by a user (try just typing "cd /some/new/path" for example)</p>



<a name="119625522"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119625522" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119625522">(Dec 11 2017 at 17:07)</a>:</h4>
<p>pwd will tell you where you're at</p>



<a name="119625540"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119625540" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119625540">(Dec 11 2017 at 17:07)</a>:</h4>
<p>that's why the task added is to implement a function that will do the right thing</p>



<a name="119625611"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119625611" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119625611">(Dec 11 2017 at 17:08)</a>:</h4>
<p>given the current database path (which will be a full or relative path), you'll use bu_basename and/or bu_dirname or other path/subpath functions and figure out what to do with the submodel path (which will also be a full or relative path).</p>



<a name="119625698"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119625698" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119625698">(Dec 11 2017 at 17:10)</a>:</h4>
<p>probably something like these four cases:  dbfull+smfull =&gt; smfull  ;  dbfull+smrelative =&gt; dbfull/smrelative  ; dbrelative+smfull=&gt;smfull ; dbrelative+smrelative =&gt; dbrelative/smrelative</p>



<a name="119625715"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/119625715" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#119625715">(Dec 11 2017 at 17:11)</a>:</h4>
<p>(i guess that's technically just two cases)</p>



<a name="120143253"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120143253" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120143253">(Dec 23 2017 at 11:11)</a>:</h4>
<p>Hi, how do I get the directory of the currently opened database in <code>submodel.c</code>, I thought it was <code>struct db_i *sub_dbip;</code> but this seems to be a pointer to the database that the submodel references, not the database of the instanced submodel.</p>



<a name="120144429"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120144429" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120144429">(Dec 23 2017 at 12:00)</a>:</h4>
<blockquote>
<p>Is there a way to translate submodels? Using Primitive Selection does not seem to work.</p>
</blockquote>
<p>And also, how may I translate submodels?</p>



<a name="120189439"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120189439" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120189439">(Dec 24 2017 at 18:53)</a>:</h4>
<blockquote>
<blockquote>
<p>Is there a way to translate submodels? Using Primitive Selection does not seem to work.</p>
</blockquote>
<p>And also, how may I translate submodels?</p>
</blockquote>
<p>Honestly, we're not even sure if it works or not -- but the raw way about be to "sed" the submodel and run "tra" command or put the submodel into a combination and "oed" the comb (there's an entire guide on the oed command on the website) to tra the submodel.</p>



<a name="120198311"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120198311" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120198311">(Dec 25 2017 at 00:59)</a>:</h4>
<p>Yeah, I had resorted to that, but it seems like it doesn't work. When I sed it then translate it, it simply doesn't move, even when I "accept". When I oed it on its own, it moves correctly when translated, but once I accept it, it snaps back into its original position which is centered at around x=0 and y=0. Or do I have to enclose every submodel in a comb, then oed the submodel via the comb? I've not tried that yet, but since I'll have to translate the submodel individually for the 20 chess pieces, I think it may not be so great to create 20 combinations, then nesting one submodel in each combination, then translating.<br>
What are your opinions?</p>



<a name="120207585"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120207585" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120207585">(Dec 25 2017 at 07:21)</a>:</h4>
<p>I'd see first if embedding in a comb, edited via oed works at all.  if it doesn't, then there's no way to set up the scene as submodels.  if there is, then that's the way to go for now until some change is made.</p>



<a name="120210150"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120210150" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Parth Pandya <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120210150">(Dec 25 2017 at 09:11)</a>:</h4>
<p>hi!<br>
Parth Pandya here...!<br>
Participating in GCI.</p>



<a name="120216487"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120216487" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Siddharth <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120216487">(Dec 25 2017 at 13:41)</a>:</h4>
<p>Welcome <span class="user-mention" data-user-email="parthpandyappp@gmail.com" data-user-id="105201">@Parth Pandya</span></p>



<a name="120457061"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120457061" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120457061">(Dec 31 2017 at 18:31)</a>:</h4>
<p>Hey, I'm on the submodel absolute/relative path task now, I am able to get the paths to work fine when using the submodel on its own (like when running <code>draw &lt;submodel&gt;</code> then <code>rt</code>. <br>
However, it now fails when I try to use it within a combination: <br>
<code>comb &lt;combination&gt; u &lt;submodel&gt;</code> then <code>draw &lt;combination&gt;</code> does display the wireframe of the submodel like it should, but running <code>rt</code> causes <code>db_walk_subtree</code> to fail. <a href="/user_uploads/1549/bsssCFc_Qw_wzsJ9fey4wQiz/pasted_image.png" target="_blank" title="pasted_image.png">error image</a> </p>
<p>I've attempted to go through the many files involved in this, like <code>tree.c</code>, but couldn't seem to pinpoint the problem. Is there another place where something similar to <code>&amp;sip-&gt;file</code> is called, but except it's done generally for all db objects (maybe rt_db_internal?), which may be retrieving the submodel file from the wrong directory still?</p>
<div class="message_inline_image"><a href="/user_uploads/1549/bsssCFc_Qw_wzsJ9fey4wQiz/pasted_image.png" target="_blank" title="error image"><img src="/user_uploads/1549/bsssCFc_Qw_wzsJ9fey4wQiz/pasted_image.png"></a></div>



<a name="120479200"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120479200" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120479200">(Jan 01 2018 at 09:24)</a>:</h4>
<p>Okay, I've since solved the problem.</p>



<a name="120479251"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120479251" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120479251">(Jan 01 2018 at 09:27)</a>:</h4>
<p>But now a new problem arises: When I try to raytrace submodels, they seem to be fine, but as I keep adding and adding submodels to be drawn by executing more <code>draw</code>s, eventually it stops working and displays the previous version of the raytrace instead of with the new object.</p>



<a name="120523018"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120523018" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120523018">(Jan 02 2018 at 14:30)</a>:</h4>
<blockquote>
<p>Hey, I'm on the submodel absolute/relative path task now, I am able to get the paths to work fine when using the submodel on its own (like when running <code>draw &lt;submodel&gt;</code> then <code>rt</code>. <br>
However, it now fails when I try to use it within a combination: </p>
</blockquote>
<p><span class="user-mention" data-user-email="jeffsy00@gmail.com" data-user-id="104481">@Jeff Sieu</span> belated reply, but I presume from  your later message that you figured out the submodel-in-comb issue.  if a primitive fails to prep (which means it's *_prep() function returned an error code), then you'll see it listed in the text output like in your log where it said "_rt_gettree_leaf(a1_rook_white): prep failure".  Since a1_rook_white failed, there was nothing left to raytrace, so it stopped.</p>



<a name="120523153"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120523153" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120523153">(Jan 02 2018 at 14:34)</a>:</h4>
<blockquote>
<p>But now a new problem arises: When I try to raytrace submodels, they seem to be fine, but as I keep adding and adding submodels to be drawn by executing more <code>draw</code>s, eventually it stops working and displays the previous version of the raytrace instead of with the new object.</p>
</blockquote>
<p><span class="user-mention" data-user-email="jeffsy00@gmail.com" data-user-id="104481">@Jeff Sieu</span> when you run rt, try rt -F/dev/Xl</p>



<a name="120523170"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120523170" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120523170">(Jan 02 2018 at 14:35)</a>:</h4>
<p>From some other testing, I think there's a bug in the default ogl framebuffer on some platforms that makes it not draw an updated rendering -- /dev/X doesn't draw the same</p>



<a name="120523209"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120523209" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120523209">(Jan 02 2018 at 14:36)</a>:</h4>
<p>another trick can be to add -W every other time to flip the background from black to white</p>



<a name="120523218"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120523218" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120523218">(Jan 02 2018 at 14:36)</a>:</h4>
<p>yeah, it was so. i started by searching for the file displaying the prep failure, then slowly discovered the rt_db_internals, functabs and all that, thinking there was some kinda function that does &amp;sip-&gt;file but in general for all object -- just for it to lead me straight back to submodel.c. Then I simply did make install and it just updated. what a journey</p>



<a name="120523309"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120523309" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Sieu <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120523309">(Jan 02 2018 at 14:40)</a>:</h4>
<blockquote>
<blockquote>
<p>But now a new problem arises: When I try to raytrace submodels, they seem to be fine, but as I keep adding and adding submodels to be drawn by executing more <code>draw</code>s, eventually it stops working and displays the previous version of the raytrace instead of with the new object.</p>
</blockquote>
<p><span class="user-mention" data-user-email="jeffsy00@gmail.com" data-user-id="104481">@Jeff Sieu</span> when you run rt, try rt -F/dev/Xl</p>
</blockquote>
<p>Okay thanks, i'll try it out. Regarding this, I discovered there were commands like debug&lt;x&gt; (for example debuglib). I tried <code>debuglib 1</code>, then the next thing I knew 10 lines of text appears in the console per second. What is the proper way to use these commands? And how are they turned off? Tried <code>debuglib 0</code> and didn't work...</p>



<a name="120523716"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120523716" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120523716">(Jan 02 2018 at 14:50)</a>:</h4>
<p>nearly all of the primitives lead back to the base callback functions up in src/librt/primitives/* ... except for the non-leaf and non-geometric entities like comb and binunif, which are currently still in their own directories in src/librt/subdir</p>



<a name="120523746"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120523746" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120523746">(Jan 02 2018 at 14:51)</a>:</h4>
<p>for the debugging flags, there are a set of bit flags that can be set with one set for libbu, another for librt, and yet another for the rt binary itself</p>



<a name="120523890"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120523890" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120523890">(Jan 02 2018 at 14:55)</a>:</h4>
<p>all three sets of flags can be directly set when you run rt using the -x -X and -! command line options. as these are developer options, they aren't documented well but you can see them used throughout the code.  so here's a relevant example -- say you're reading src/librt/primitives/submodel/submodel.c and in rt_submodel_prep() you notice a block of debug code starting with:</p>



<a name="120523892"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120523892" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120523892">(Jan 02 2018 at 14:55)</a>:</h4>
<p>if (RT_G_DEBUG &amp; (DEBUG_DB|DEBUG_SOLIDS)) {</p>



<a name="120523906"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120523906" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120523906">(Jan 02 2018 at 14:56)</a>:</h4>
<p>so the flag there is DEBUG_SOLIDS, if we search the headers, we can find its value:</p>



<a name="120523910"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120523910" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120523910">(Jan 02 2018 at 14:56)</a>:</h4>
<p>agua:brlcad.trunk morrison$ grep DEBUG_SOLIDS include/<em>/</em><br>
grep: include/ged/view: Is a directory<br>
include/rt/debug.h:#define DEBUG_SOLIDS 0x00000020  /**&lt; @brief 6 Print prep'ed solids */</p>



<a name="120523971"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120523971" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120523971">(Jan 02 2018 at 14:57)</a>:</h4>
<p>so it's 0x20 and a librt debug flag, so I can run "rt -x20" and it'll run rt with DEBUG_SOLIDS set</p>



<a name="120524053"></a>
<h4><a href="https://brlcad.zulipchat.com#narrow/stream/104238-Google%20Code-in/topic/submodels/near/120524053" class="zl"><img src="https://brl-cad.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean <a href="https://brl-cad.github.io/zulip_archive/stream/104238-Google-Code-in/topic/submodels.html#120524053">(Jan 02 2018 at 14:59)</a>:</h4>
<p>some flags will result in LOTS of output, especially if it's per-ray debugging, so you may want a smaller raytrace (e.g., rt -x20 -s10) or even just reshoot one ray (e.g., rt -x20 -Q 132,317)</p>



<hr><p>Last updated: Sep 03 2025 at 00:48 UTC</p>
</html>